import{o as n,c as u,a as t,M as te,al as ae,k as r,x as U,y as se,fg as oe,P as z,ao as ne,n as le,fm as b,p as ie,Q as w,W as l,U as o,aj as $,X as k,Y as ue,a0 as H,$ as f,V as d,a2 as E,S as W,t as _,g as I,aa as q,ai as N,cM as ce,a6 as re,a7 as de,ac as _e}from"./index.f074ecef.js";import{I as ve,a as me}from"./more.9cbfb002.js";import{P as pe}from"./MoreFeedback.eac5fca1.js";import{m as he,n as fe,o as ge,q as Ce}from"./mine.30873ffc.js";import{u as ye,H as xe,_ as be}from"./index.194c39d1.js";import{_ as we}from"./LoginPanel.33272c26.js";import{N as ke}from"./Empty.c40df274.js";import{_ as Ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./style.2070e26d.js";import"./modulepreload-polyfill.b7f2da20.js";import"./ico_max_exit.f7f1ea61.js";import"./index.14a3ec94.js";import"./isUdf.1a76b9f4.js";import"./App.c1beb0e9.js";import"./btn_devtools.06ffa497.js";import"./index.733b73c2.js";import"./ico_pin.a6faa7a5.js";/* empty css               */import"./theme-map.a3b52bba.js";const De={class:"icon",viewBox:"0 0 16 16",fill:"#fff"},Ae=t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.742 3.924A52.952 52.952 0 0 1 8 3.75c1.714 0 3.208.088 4.258.174A1.45 1.45 0 0 1 13.6 5.245c.078.862.151 2.004.151 3.255s-.073 2.393-.15 3.255a1.45 1.45 0 0 1-1.342 1.321c-1.05.086-2.544.174-4.258.174s-3.208-.088-4.258-.174A1.45 1.45 0 0 1 2.4 11.754 36.666 36.666 0 0 1 2.25 8.5c0-1.25.073-2.393.15-3.254a1.45 1.45 0 0 1 1.342-1.322ZM8 2.75c-1.747 0-3.27.09-4.34.177a2.45 2.45 0 0 0-2.255 2.229c-.08.883-.155 2.056-.155 3.344 0 1.288.075 2.461.155 3.344a2.45 2.45 0 0 0 2.255 2.229A53.91 53.91 0 0 0 8 14.25c1.747 0 3.27-.09 4.34-.177a2.45 2.45 0 0 0 2.255-2.229c.08-.882.155-2.056.155-3.344 0-1.288-.075-2.462-.155-3.345a2.45 2.45 0 0 0-2.255-2.228A53.953 53.953 0 0 0 8 2.75Zm1.75 6.328a.667.667 0 0 0 0-1.155l-2.5-1.444a.667.667 0 0 0-1 .577v2.888c0 .513.555.834 1 .578l2.5-1.444Z"},null,-1),Le=[Ae];function Be(v,g){return n(),u("svg",De,[...Le])}var Fe={render:Be};const $e={class:"icon",viewBox:"0 0 16 16",fill:"#fff"},We=t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 3.75c-1.714 0-3.208.088-4.258.174A1.45 1.45 0 0 0 2.4 5.246C2.323 6.107 2.25 7.25 2.25 8.5s.073 2.393.15 3.254a1.45 1.45 0 0 0 1.342 1.322c1.05.086 2.544.174 4.258.174s3.208-.088 4.258-.174a1.45 1.45 0 0 0 1.341-1.321c.078-.862.151-2.004.151-3.255s-.073-2.393-.15-3.255a1.45 1.45 0 0 0-1.342-1.321A52.956 52.956 0 0 0 8 3.75Zm-4.34-.823A53.955 53.955 0 0 1 8 2.75c1.747 0 3.27.09 4.34.177a2.45 2.45 0 0 1 2.255 2.228c.08.883.155 2.057.155 3.345 0 1.288-.075 2.462-.155 3.345a2.45 2.45 0 0 1-2.255 2.228c-1.07.087-2.593.177-4.34.177-1.747 0-3.27-.09-4.34-.177a2.45 2.45 0 0 1-2.255-2.229A37.662 37.662 0 0 1 1.25 8.5c0-1.288.075-2.461.155-3.344A2.45 2.45 0 0 1 3.66 2.927ZM4 7.25a.5.5 0 0 1 .5-.5h.25a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5Zm2 0a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm-.5 2a.5.5 0 0 0 0 1h.25a.5.5 0 0 0 0-1H5.5Zm2 0a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Z"},null,-1),Ie=[We];function Ne(v,g){return n(),u("svg",$e,[...Ie])}var Me={render:Ne};const M=v=>(re("data-v-6203272a"),v=v(),de(),v),Se={key:0,class:"flex_col_center w_100 h_100"},Ve={key:1,class:"container p_relative i_wrapper"},Re={key:3,class:"list-cont p_relative row gutter_md"},Pe=["data-card"],Te=["onClick"],Ze={key:0,class:"badge"},Ue={class:"tapper"},ze=["textContent"],He=["textContent"],qe=["textContent"],je=M(()=>t("span",{class:"ct"},null,-1)),Ge=["textContent"],Ke={class:"info"},Oe={class:"info-content"},Qe=["title","textContent","onClick"],Xe=["onClick"],Ye=["textContent"],Je={class:"info-option"},et={class:"drop-down-list"},tt=["onClick"],at={class:"content-wrapper"},st=M(()=>t("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u8BA4\u5220\u9664\u5DF2\u89C2\u770B\u89C6\u9891\u5417\uFF1F",-1)),ot={class:"mt_xl text_center dialog_btns"},nt=E("\u53D6\u6D88"),lt=E("\u5220\u9664"),it={class:"content-wrapper"},ut=M(()=>t("h4",{class:"b_text text1 text_center mt_md"},"\u786E\u8BA4\u6E05\u7A7A\u5168\u90E8\u7A0D\u540E\u518D\u770B\u89C6\u9891\u5417\uFF1F",-1)),ct={class:"mt_xl text_center dialog_btns"},rt=E("\u53D6\u6D88"),dt=E("\u786E\u8BA4"),_t=te({__name:"MineWatchLater",setup(v){ye({spm_id:W.mineWatchLater,isKeepAlive:!1,pageName:"MineWatchLater"});const g=_e(),j=ae(),i=r([]),S=20,C=r(1),y=r(0),m=r(!1),D=r(!1),{userInfo:c}=U(se()),{isWatchLaterEmpty:G}=U(oe());z(i,e=>G.value=!e.length,{immediate:!0});const A=async()=>{if(!(!c.value.isLogin||m.value)){m.value=!0,D.value=!1;try{const e=await he({ps:S,pn:C.value});m.value=!1,y.value=(e==null?void 0:e.count)||0,i.value=i.value.concat((e==null?void 0:e.list)||[])}catch{m.value=!1,D.value=!0}}};A().then(()=>{B.value&&L()});const V=()=>{i.value=[],y.value=NaN,C.value=1,A().then(()=>{B.value&&L()})},L=()=>{!y.value||y.value/S<=C.value||(C.value++,A())},R=r(null),B=ne(R);z(B,e=>{e&&L()});const p=r(!1),K=async()=>{try{await fe(),_({content:"\u5220\u9664\u6210\u529F"}),setTimeout(()=>b.emit("handleRefresh"),500)}catch(e){_({content:e.message||"\u7F51\u7EDC\u9519\u8BEF"})}p.value=!1},h=r(!1),O=async()=>{try{await ge(),I.emit("clearWatchLaterCount"),_({content:"\u5220\u9664\u6210\u529F"}),setTimeout(()=>b.emit("handleRefresh"),500)}catch(e){_({content:e.message||"\u7F51\u7EDC\u9519\u8BEF"})}h.value=!1},Q=async e=>{try{await Ce(i.value[e].aid),i.value.splice(e,1),i.value.length===0&&V(),_({content:"\u5220\u9664\u6210\u529F"})}catch(s){_({content:s.message||"\u7F51\u7EDC\u9519\u8BEF"})}},X=e=>{j.push({name:"Space",query:{mid:e}})},P=e=>{q({type:"ugc",fromSpmid:`${W.mineWatchLater}.pv`,aid:e.aid,bvid:e.bvid,mediaList:{bizType:2,bizId:String(c.value.mid),bizTitle:"\u7A0D\u540E\u518D\u770B"}})},Y=()=>{var e;if(!((e=c.value)!=null&&e.isLogin)){I.emit("mineNavButton",[]);return}I.emit("mineNavButton",[{text:"\u4E00\u952E\u6E05\u7A7A",tab:"watchLater",handler:()=>{!c.value.isLogin||(h.value=!0)}},{text:"\u5220\u9664\u5DF2\u89C2\u770B",tab:"watchLater",handler:()=>{!c.value.isLogin||(p.value=!0)}},{text:"\u64AD\u653E\u5168\u90E8",tab:"watchLater",handler:()=>{if(!c.value.isLogin||i.value.length===0){_({content:"\u6682\u65E0\u7A0D\u540E\u518D\u770B\u7684\u89C6\u9891"});return}q({type:"ugc",fromSpmid:`${W.mineWatchLater}.pv`,mediaList:{bizType:2,bizId:String(c.value.mid),bizTitle:"\u7A0D\u540E\u518D\u770B"}})}}])};return le(()=>Y()),b.on("handleRefresh",()=>V()),ie(()=>b.off("handleRefresh")),(e,s)=>{const J=w("VImg"),ee=w("v-dropdown"),x=w("v-button"),T=w("v-dialog");return!l(c)||!l(c).isLogin?(n(),u("div",Se,[o(we,{showAvatar:""})])):(n(),u("div",Ve,[D.value?(n(),$(xe,{key:0,showRefresh:!1,text:"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<"})):m.value&&!i.value.length?(n(),$(be,{key:1,itemNum:20})):!m.value&&!i.value.length?(n(),$(ke,{key:2})):(n(),u("div",Re,[(n(!0),u(k,null,ue(i.value,(a,Z)=>(n(),u("div",{class:"wl-item col_3 col_sm_1_5 p_relative",key:a.bvid},[t("span",{class:"gamepad-cursor cursor-video-card","data-scroll":"y","data-bf":"100","data-sh":"300","data-wp":".app_mine--content","data-tp":"videoCard","data-card":Z===0},null,8,Pe),t("div",{class:"cover",onClick:F=>P(a)},[o(J,{class:"cover-img",src:a.pic||"",width:512*l(g),height:288*l(g),loading:"lazy",rule:"1c","bfs-style":"pc-common-cover-h"},null,8,["src","width","height"]),a.progress<0?(n(),u("div",Ze,"\u5DF2\u770B\u5B8C")):H("",!0),t("div",Ue,[a.type!==24?(n(),u(k,{key:0},[a.enable_vt?(n(),u(k,{key:0},[o(l(pe),{class:"icon"}),t("span",{class:"t-num",textContent:f(a.view_text_1||l(N)(a.stat.vt))},null,8,ze)],64)):(n(),u(k,{key:1},[o(l(Fe)),t("span",{class:"t-num",textContent:f(l(N)(a.stat.view))},null,8,He)],64)),o(l(Me)),t("span",{class:"t-num",textContent:f(l(N)(a.stat.danmaku))},null,8,qe)],64)):H("",!0),je,t("span",{textContent:f(l(ce)(a.duration))},null,8,Ge)])],8,Te),t("div",Ke,[t("div",Oe,[t("div",{class:"info-title fw_500",title:a.title,textContent:f(a.title),onClick:F=>P(a)},null,8,Qe),t("div",{class:"info-up mt_xs",onClick:F=>X(a.owner.mid)},[o(l(ve)),t("span",{class:"up-name",textContent:f(a.owner.name)},null,8,Ye)],8,Xe)]),o(ee,{trigger:"click"},{content:d(()=>[t("div",et,[t("div",{class:"delete",onClick:F=>Q(Z)},"\u5220\u9664",8,tt)])]),default:d(()=>[t("div",Je,[o(l(me))])]),_:2},1024)])]))),128))])),t("div",{ref_key:"bottomRef",ref:R,class:"bottom-load"},null,512),o(T,{visible:p.value,"onUpdate:visible":s[1]||(s[1]=a=>p.value=a),width:320,"class-name":"i_dialog py_lg",onCancel:s[2]||(s[2]=a=>p.value=!1),"is-show-default-footer":!1},{default:d(()=>[t("div",at,[st,t("div",ot,[o(x,{class:"mr_sm",onClick:s[0]||(s[0]=a=>p.value=!1)},{default:d(()=>[nt]),_:1}),o(x,{type:"danger",onClick:K},{default:d(()=>[lt]),_:1})])])]),_:1},8,["visible"]),o(T,{visible:h.value,"onUpdate:visible":s[4]||(s[4]=a=>h.value=a),width:320,"class-name":"i_dialog py_lg",onCancel:s[5]||(s[5]=a=>h.value=!1),"is-show-default-footer":!1},{default:d(()=>[t("div",it,[ut,t("div",ct,[o(x,{class:"mr_sm",onClick:s[3]||(s[3]=a=>h.value=!1)},{default:d(()=>[rt]),_:1}),o(x,{type:"danger",onClick:O},{default:d(()=>[dt]),_:1})])])]),_:1},8,["visible"])]))}}});var Wt=Ee(_t,[["__scopeId","data-v-6203272a"]]);export{Wt as default};

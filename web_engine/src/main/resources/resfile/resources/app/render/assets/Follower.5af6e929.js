import{M as x,x as C,y as D,u as B,A as y,k as i,l as R,ao as I,P as N,o,c as s,a as u,aj as v,a0 as r,$ as V,W as p,X as A,Y as S,a2 as F,ai as T}from"./index.f074ecef.js";import{F as U,d as L}from"./FollowerItem.f44e7c43.js";import{k as M,m as W}from"./App.c1beb0e9.js";import{H as j}from"./index.194c39d1.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import"./MoreFeedback.eac5fca1.js";import"./style.2070e26d.js";/* empty css                    */import"./index.14a3ec94.js";import"./ico_max_exit.f7f1ea61.js";import"./btn_devtools.06ffa497.js";import"./index.733b73c2.js";import"./modulepreload-polyfill.b7f2da20.js";import"./isUdf.1a76b9f4.js";import"./ico_pin.a6faa7a5.js";/* empty css               */import"./theme-map.a3b52bba.js";const H={class:"app_follower i_page_wrapper"},P={class:"app_follower--content i_page_content page_scroller"},X={class:"p_relative follow-content"},Y={key:2,class:"total"},$=F(" \u5168\u90E8\u5171"),z=["textContent"],G=F("\u4E2A\u7C89\u4E1D "),J={key:3,class:"follower-list p_relative row gutter_lg"},K={key:4,class:"limit-tip"},O=x({__name:"Follower",setup(Q){M(".app_follower--content");const{userInfo:c}=C(D()),k=B(),n=y(()=>parseInt(k.query.mid)),m=y(()=>n.value&&c.value.mid!==n.value),e=i("initiating"),l=i([]),t=i({ps:30,pn:1,re_version:0,total:0}),f=()=>{e.value="initiating",l.value=[],t.value={ps:30,pn:1,re_version:0,total:0},h().then(()=>{d.value&&g()})};R(f);const h=async()=>{try{const a=await L({...t.value,vmid:n.value||c.value.mid});l.value=l.value.concat(a.list||[]),t.value.re_version=a.re_version,t.value.total=a.total,e.value="loaded"}catch(a){console.error(a),e.value="error"}},g=()=>{!c.value.isLogin||m.value||t.value.total/t.value.ps<=t.value.pn||e.value==="loaded"&&(t.value.pn+=1,e.value="loading",h())},w=i(null),d=I(w);N(d,()=>{d.value&&e.value==="loaded"&&g()});const b=()=>{e.value!=="initiating"&&f()};return(a,Z)=>(o(),s("div",H,[u("div",P,[u("div",X,[e.value==="loaded"&&l.value.length===0?(o(),v(W,{key:0})):r("",!0),e.value==="error"?(o(),v(j,{key:1,onRefresh:b})):r("",!0),e.value==="loaded"&&t.value.total>0?(o(),s("div",Y,[$,u("span",{textContent:V(p(T)(t.value.total))},null,8,z),G])):r("",!0),["loaded","loading"].includes(e.value)?(o(),s("div",J,[(o(!0),s(A,null,S(l.value,_=>(o(),v(U,{key:_.mid,item:_,oid:p(n),class:"col_6",onUpdate:E=>_.attribute=E},null,8,["item","oid","onUpdate"]))),128))])):r("",!0),p(m)&&t.value.total>30?(o(),s("div",K,"\u7CFB\u7EDF\u9650\u5236\uFF0C\u4E0D\u80FD\u67E5\u770B\u66F4\u591A\u5566~")):r("",!0),u("div",{ref_key:"bottomRef",ref:w,class:"bottom-load"},null,512)])])]))}});var he=q(O,[["__scopeId","data-v-3b87143d"]]);export{he as default};

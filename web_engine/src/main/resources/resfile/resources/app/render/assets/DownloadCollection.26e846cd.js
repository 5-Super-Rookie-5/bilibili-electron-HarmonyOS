import{M as z,aV as M,fh as O,x as U,k as L,A as m,P,aN as T,o as n,c,a as o,U as B,W as r,a0 as N,$ as v,X as C,Y as I,Z as $,a2 as j,aj as D,d3 as H,fj as R,cN as W,ad as Y,aa as X,S as Z,a6 as q,a7 as J,ac as K}from"./index.f074ecef.js";import{D as E,b as Q,i as x,g as ee,P as te}from"./DownloadItem.42a87825.js";import{P as se}from"./playAll.e1238004.js";import{k as oe}from"./App.c1beb0e9.js";import{_ as ae}from"./plugin-vue_export-helper.21dcd24c.js";import"./MoreFeedback.eac5fca1.js";import"./style.2070e26d.js";import"./index.194c39d1.js";import"./modulepreload-polyfill.b7f2da20.js";import"./ico_max_exit.f7f1ea61.js";import"./index.14a3ec94.js";import"./isUdf.1a76b9f4.js";import"./btn_devtools.06ffa497.js";import"./ico_pin.a6faa7a5.js";/* empty css               */import"./theme-map.a3b52bba.js";import"./index.733b73c2.js";const _=g=>(q("data-v-5235d7e5"),g=g(),J(),g),le={class:"download-collection i_page_content page_scroller i_wrapper"},ne={class:"header mt_xxl"},re={class:"cover"},ce=_(()=>o("div",{class:"collection"},null,-1)),ie=_(()=>o("div",{class:"cover-bg"},null,-1)),ue=["src","onload"],de={key:1,class:"badge"},_e=_(()=>o("div",{class:"tapper"},null,-1)),pe=["textContent"],me={class:"info"},ve=["textContent"],ge=["textContent"],fe=_(()=>o("span",null,"\u64AD\u653E\u5168\u90E8",-1)),he=_(()=>o("span",{class:"gamepad-cursor"},null,-1)),be={class:"content"},ye={key:0},Pe={class:"tabs"},Ce=["onClick"],Ie=_(()=>o("span",{class:"gamepad-cursor","data-tp":"subTab"},null,-1)),xe={class:"row gutter_md"},ke={key:1,class:"row gutter_md"},we=z({__name:"DownloadCollection",setup(g){oe(".download-collection");const A=M(),h=O(),{openedGroup:a}=U(h),k=K(),b=L(""),p=L(0),V=m(()=>Q(a.value)),y=m(()=>{var t,s,l;const e=(s=(t=a.value)==null?void 0:t.itemList)==null?void 0:s[0];switch((l=a.value)==null?void 0:l.type){case"ogv":return"ogv";default:return x(e)?"ugc-season":(e==null?void 0:e.bvid)===(e==null?void 0:e.groupId)?"ugc-pages":"ugc-season"}}),F=m(()=>{var e,t;return y.value==="ogv"?"":"\u5408\u96C6 "+((e=a.value)!=null&&e.uname?"\xB7 UP\u4E3B\uFF1A"+((t=a.value)==null?void 0:t.uname):"")}),w=m(()=>{var t,s;const e=(s=(t=a.value)==null?void 0:t.itemList)==null?void 0:s[0];return y.value==="ogv"&&!x(e)?H[e.seasonType]:""}),f=m(()=>{var e;return(((e=a.value)==null?void 0:e.itemList)||[]).reduce((t,s)=>{if(x(s)){let l=t.find(d=>d.tabP===s.epInfo.tabP);l?l.itemList.push(s):t.push({tabP:s.epInfo.tabP,tabName:s.epInfo.tabName,itemList:[s]})}else{let l=t.find(d=>d.tabP===s.tabP);l?l.itemList.push(s):t.push({tabP:s.tabP,tabName:s.tabName,itemList:[s]})}return t},[])}),S=async()=>{var e,t;b.value=await R((e=a.value)==null?void 0:e.coverImg,W(Y(((t=a.value)==null?void 0:t.coverUrl)||"",320*k,180*k)))},G=()=>{let e=ee(a.value);X({type:e.type||"ugc",fromSpmid:Z.mineDownload+".pv",mediaList:{bizType:-1,bizId:e.itemId,bizTitle:"\u79BB\u7EBF\u7F13\u5B58"}})};return P([p,f,a],()=>A.flashPageCursors(200)),S(),P(a,S),P(f,(e,t)=>{e.length<t.length&&(p.value=0)}),T("download/itemListEvent",({data:e})=>{h.refreshOpenedGroupList()}),T("download/statusChange",({data:e})=>{e.status==="completed"&&h.refreshOpenedGroupList()}),(e,t)=>{var s,l,d;return n(),c("div",le,[o("div",ne,[o("div",re,[ce,ie,B(r(te),{class:"cover-ph"}),b.value?(n(),c("img",{key:0,class:"cover-img",src:b.value,loading:"lazy",onload:i=>i.target.style.backgroundColor="transparent",onerror:"this.remove()"},null,8,ue)):N("",!0),r(w)?(n(),c("div",de,v(r(w)),1)):N("",!0),_e,o("div",{class:"collection-count",textContent:v(`${r(V)}\u4E2A\u5185\u5BB9`)},null,8,pe)]),o("div",me,[o("div",{class:"title",textContent:v((s=r(a))==null?void 0:s.title)},null,8,ve),o("div",{class:"sub-title",textContent:v(r(F))},null,8,ge),o("div",{class:"play-all p_relative",onClick:G},[B(r(se)),fe,he])])]),o("div",be,[["ogv","ugc-season"].includes(r(y))?(n(),c("div",ye,[o("ul",Pe,[(n(!0),c(C,null,I(r(f),(i,u)=>(n(),c("li",{class:$(["p_relative",{active:p.value===u}]),key:u,onClick:Se=>p.value=u},[j(v(i.tabName)+" ",1),Ie],10,Ce))),128))]),o("div",xe,[(n(!0),c(C,null,I(((l=r(f)[p.value])==null?void 0:l.itemList)||[],(i,u)=>(n(),D(E,{key:u,item:i,class:"col_3 col_sm_1_5 mb_md al-flex-end","is-first-card":u===0},null,8,["item","is-first-card"]))),128))])])):(n(),c("div",ke,[(n(!0),c(C,null,I(((d=r(a))==null?void 0:d.itemList)||[],(i,u)=>(n(),D(E,{key:i.itemId,item:i,class:"col_3 col_sm_1_5 mb_md al-flex-end","is-first-card":u===0},null,8,["item","is-first-card"]))),128))]))])])}}});var Re=ae(we,[["__scopeId","data-v-5235d7e5"]]);export{Re as default};

import{F as le,a as ue}from"./index.194c39d1.js";import{M as Y,u as ee,al as te,y as ce,x as ne,k as _,n as de,A as N,l as ae,bh as _e,o as s,c,a as t,W as a,a0 as u,$ as d,aj as h,ae as z,w as U,P as R,C,a9 as j,bd as ve,a6 as oe,a7 as se,fg as pe,aV as me,g as J,m as Ce,p as he,Q as P,U as fe,V as $,X as G,Y as Q,Z as ge,ar as ye}from"./index.f074ecef.js";import{g as X}from"./mine.30873ffc.js";import{U as we}from"./MoreFeedback.eac5fca1.js";/* empty css                    */import{U as xe}from"./UserLevel.7373ec78.js";import{_ as ie}from"./plugin-vue_export-helper.21dcd24c.js";import{D as be}from"./delete.517b0c72.js";import{P as ke}from"./playAll.e1238004.js";import{_ as Se}from"./SearchBox.531653cb.js";import{u as Le,k as Be}from"./App.c1beb0e9.js";import"./modulepreload-polyfill.b7f2da20.js";import"./ico_max_exit.f7f1ea61.js";import"./index.14a3ec94.js";import"./style.2070e26d.js";import"./isUdf.1a76b9f4.js";import"./btn_devtools.06ffa497.js";import"./ico_pin.a6faa7a5.js";/* empty css               */import"./theme-map.a3b52bba.js";import"./index.733b73c2.js";const f=v=>(oe("data-v-3a0291d1"),v=v(),se(),v),Fe={class:"mine"},De={class:"mine-left mr_lg"},Ee={class:"mine-content"},Ae={class:"mine-content-row1"},Ie=["textContent"],Me={key:3,class:"vip-label ml_xs"},Te=["src"],Ve=["textContent"],Pe={class:"mine-content-row2"},$e=f(()=>t("span",null,"B\u5E01\uFF1A",-1)),Ue=["textContent"],Re=f(()=>t("span",{class:"ml_md"},"\u786C\u5E01\uFF1A",-1)),qe=["textContent"],Oe={class:"mine-data"},We=["textContent"],je=f(()=>t("div",null,"\u52A8\u6001",-1)),Ne=["textContent"],Ke=f(()=>t("div",null,"\u5173\u6CE8",-1)),Ze=["textContent"],He=f(()=>t("div",null,"\u7C89\u4E1D",-1)),ze=f(()=>t("span",null,"\u7A7A\u95F4",-1)),Je=f(()=>t("svg",{width:"7",height:"11",viewBox:"0 0 7 11",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M1.6401 9.34486C1.51333 9.21809 1.51333 9.01256 1.6401 8.88579L5.30595 5.21994L1.6401 1.55409\r
              C1.51333 1.42732 1.51333 1.22179 1.6401 1.09502C1.76687 0.968249 1.97241 0.968249\r
              2.09918 1.09502L5.84154 4.83738C6.05282 5.04866 6.05282 5.39122 5.84154 5.6025L2.09918\r
              9.34486C1.97241 9.47163 1.76687 9.47163 1.6401 9.34486Z`,"stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Ge=[ze,Je],Qe=f(()=>t("svg",{class:"big",viewBox:"0 0 127 119",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M50.9315 13.8113C44.4627 3.22267 33.0098 -3.35758 20.5486 -3.64364C8.08747 -3.92971 8.7012\r
          -1.53179 10.365 1.24552C13.989 7.92547 17.5557 16.5722 19.4922 24.8059C19.5202 24.952 19.5602\r
          25.1538 19.6103 25.4057C20.5349 30.0632 24.8564 51.8305 18.9019 54.1525C14.7176 55.7842 5.79105\r
          57.0739 -7.87778 58.0214C-17.5904 58.4137 -24.4167 58.6252 -28.3566 58.6557L-41.0372 58.6375C-47.3258\r
          58.6375 -46.0443 69.4927 -43.8725 76.1181L-43.2118 78.3658C-43.1549 78.5313 -43.098 78.6975 -43.0409\r
          78.864C-41.1463 84.3934 -39.116 90.3187 -31.7967 89.2986C-30.8189 89.1623 -29.8064 88.8775 -28.5069\r
          88.5119C-26.3524 87.9057 -23.4092 87.0777 -18.528 86.3371C-10.7026 85.1497 6.54979 82.6082 9.25054\r
          82.6082C18.7749 82.6082 2.56246 105.367 -4.37959 114.323C-5.27316 115.371 -6.24806 116.552 -7.30542\r
          117.833C-14.283 126.288 -24.8516 139.094 -39.3364 146.62C-48.0984 150.218 -46.3596 154.818 -37.7568\r
          161.454C-28.4845 166.803 -17.2052 167.451 -7.37427 163.2C1.31153 158.744 8.46288 151.816 13.1712\r
          143.302L13.8755 142.181C16.7633 137.23 22.8978 123.35 28.601 110.067L35.4349 94.0031C36.4648 91.5823\r
          37.9784 88.3232 39.9757 84.2259C42.1639 79.7372 46.2058 76.43 51.0388 75.1738C56.1809 73.8373 61.9088\r
          72.6796 68.2228 71.7007C82.7314 69.4514 103.737 69.4514 112.205 71.7007C120.673 73.95 121.632 64.7653\r
          119.833 55.2265C118.033 45.6878 107.957 35.1447 93.4243 35.1447C88.2021 35.1447 80.2906 36.8816 71.9246\r
          39.6115C59.8758 44.3387 53.4179 46.3641 52.551 45.6878C51.7306 45.1226 52.027 43.7105 52.5437 41.2496\r
          C53.0468 38.8529 53.7588 35.4614 53.8514 30.8884C54.0459 24.5133 53.2052 18.2674 50.9315 13.8113Z\r
          M59.6662 96.6696C56.4725 96.4483 52.0189 96.1397 49.8611 97.9584C48.1129 99.9033 47.9698 102.782\r
          49.5143 104.886C51.0951 107.484 104.291 154.365 110.433 159.376C116.576 164.387 121.744 162.212 125.877\r
          142.076C129.644 123.723 105.251 112.24 93.7227 106.813C92.602 106.286 91.6028 105.815 90.763 105.401\r
          C81.2128 101.324 71.1898 98.4243 60.9206 96.7512C60.5335 96.7297 60.1121 96.7005 59.6662 96.6696Z`})],-1)),Xe=["textContent"],Ye={class:"r2"},et=["textContent"],tt=f(()=>t("svg",{width:"7",height:"11",viewBox:"0 0 7 11",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M1.6401 9.34486C1.51333 9.21809 1.51333 9.01256 1.6401 8.88579L5.30595 5.21994L1.6401 1.55409\r
              C1.51333 1.42732 1.51333 1.22179 1.6401 1.09502C1.76687 0.968249 1.97241 0.968249\r
              2.09918 1.09502L5.84154 4.83738C6.05282 5.04866 6.05282 5.39122 5.84154 5.6025L2.09918\r
              9.34486C1.97241 9.47163 1.76687 9.47163 1.6401 9.34486Z`,"stroke-width":"1.3","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),nt=Y({__name:"MineInfo",setup(v){const y=ee(),g=te(),w=ce(),{userInfo:e}=ne(w),L=_(!0),x=_(null),p=_({follower:"-",following:"-",dynamic:"-"});let b=null;const q=new Promise(l=>b=l);de(()=>b==null?void 0:b());let I=!1,B=null;const F=()=>{if(!e.value.isLogin||!x.value)return;const l={avatar:e.value.face,iconType:(()=>{var Z,H;const n=e.value.vip,m=(n==null?void 0:n.status)&&n.type===2;if(((Z=e.value.officialVerify)==null?void 0:Z.type)===0)return"personal";if(((H=e.value.officialVerify)==null?void 0:H.type)===1)return"business";if(m)return e.value.vip_avatar_subscript===2?"small-vip":"big-vip"})(),avatarWidth:68};if(I&&JSON.stringify(l)===JSON.stringify(B))return;B=l,x.value.innerHTML="",new we().append(B,x.value,"mine"),I=!0},M=N(()=>{var l,r,n;return((n=(r=(l=e.value)==null?void 0:l.vip)==null?void 0:r.label)==null?void 0:n.img_label_uri_hans_static)||""}),D=_(56),T=()=>{var n,m;const r=document.createElement("canvas").getContext("2d");if(!r||!((n=e.value.vip_label)!=null&&n.text))return 56;r.font="20px PingFangSC-Regular",D.value=Math.ceil(r.measureText((m=e.value.vip_label)==null?void 0:m.text).width/2)+6};(async()=>{var l;e.value.mid&&X((l=e.value.mid)==null?void 0:l.toString()).then(r=>p.value=r),T(),await q,U(()=>F()),R(e,async()=>{var r;e.value.isLogin?X((r=e.value.mid)==null?void 0:r.toString()).then(n=>p.value=n):p.value={follower:"-",following:"-",dynamic:"-"},y.path.indexOf("/page/mine")===0&&(await U(),F()),T()}),R(y,async()=>{y.path.indexOf("/page/mine")===0?L.value||(L.value=!0,await U(),F()):L.value=!1})})(),ae(async()=>{await _e()});const O=()=>{if(!e.value.isLogin){C("mineInfo.openBCoin");return}j("https://pay.bilibili.com/pay-v2-web/bcoin_index","mine.BCoin")},V=()=>{if(!e.value.isLogin){C("mineInfo.openCoin");return}j("https://account.bilibili.com/account/coin","mine.Coin")},E=()=>{if(!e.value.isLogin){C("mineInfo.openVip");return}e.value.vipStatus?j("https://account.bilibili.com/account/big","mine.Vip"):ve("spacePay")},k=()=>{if(!e.value.isLogin){C("mineInfo.toSpaceDynamic");return}g.push({name:"Space",query:{mid:e.value.mid,tab:0}})},S=()=>{if(!e.value.isLogin){C("mineInfo.toSpace");return}g.push({name:"Space",query:{mid:e.value.mid}})},o=()=>{C("mineInfo.handleAvatarClick")},i=()=>{C("mineInfo.handleLoginClick")},A=()=>{if(!e.value.isLogin){C("mineInfo.toFollowers");return}g.push({name:"Follower",query:{mid:e.value.mid}})},W=()=>{if(!e.value.isLogin){C("mineInfo.toFollowing");return}g.push({name:"Following",query:{mid:e.value.mid}})};return(l,r)=>{var n,m;return s(),c("div",Fe,[t("div",De,[a(e).isLogin?(s(),c("div",{key:0,class:"mine-avatar",ref_key:"avatar",ref:x,onClick:S},null,512)):u("",!0),a(e).isLogin?u("",!0):(s(),c("img",{key:1,class:"mine-avatar-default u_drag_none",src:le,onClick:o})),t("div",Ee,[t("div",Ae,[a(e).isLogin?(s(),c("h3",{key:0,class:"b_text uname fw_bold",textContent:d(a(e).uname)},null,8,Ie)):u("",!0),a(e).isLogin?u("",!0):(s(),c("span",{key:1,class:"uname",style:{cursor:"pointer"},onClick:i},"\u70B9\u51FB\u767B\u5F55")),a(e).isLogin?(s(),h(xe,{key:2,class:"mine-level",level:a(e).level_info.current_level,isSenior:!!a(e).is_senior_member},null,8,["level","isSenior"])):u("",!0),a(M)?(s(),c("span",Me,[t("img",{src:a(M),alt:""},null,8,Te)])):a(e).vipStatus?(s(),c("span",{key:4,class:"vip-info",style:z({backgroundColor:a(e).vip_label.bg_color,color:a(e).vip_label.text_color,width:D.value+"px"}),onClick:E},[t("span",{style:z({width:D.value*2+"px"}),textContent:d((n=a(e).vip_label)==null?void 0:n.text)},null,12,Ve)],4)):u("",!0)]),t("div",Pe,[$e,t("span",{class:"s_num",onClick:O,textContent:d(a(e).isLogin?(m=a(e).wallet)==null?void 0:m.bcoin_balance:"-")},null,8,Ue),Re,t("span",{class:"s_num",onClick:V,textContent:d(a(e).isLogin?a(e).money:"-")},null,8,qe)])]),t("div",Oe,[t("div",{class:"mine-data-item divider",onClick:k},[t("span",{textContent:d(p.value.dynamic)},null,8,We),je]),t("div",{class:"mine-data-item divider",onClick:W},[t("span",{textContent:d(p.value.following)},null,8,Ne),Ke]),t("div",{class:"mine-data-item",onClick:A},[t("span",{textContent:d(p.value.follower)},null,8,Ze),He]),t("div",{class:"space",onClick:S},Ge)])]),t("div",{class:"mine-right",onClick:E},[Qe,t("div",{class:"r1",textContent:d(a(e).vipStatus?"\u6211\u7684\u5927\u4F1A\u5458":"\u6210\u4E3A\u5927\u4F1A\u5458")},null,8,Xe),t("div",Ye,[t("span",{textContent:d(a(e).vipStatus?"\u70ED\u64AD\u5185\u5BB9\u770B\u4E0D\u505C":"\u4E86\u89E3\u66F4\u591A\u6743\u76CA")},null,8,et),tt])])])}}});var at=ie(nt,[["__scopeId","data-v-3a0291d1"]]);const re=v=>(oe("data-v-06b53be9"),v=v(),se(),v),ot={class:"app_mine i_page_wrapper u_select_none"},st={class:"mine-nav i_wrapper"},it={class:"mine-nav-wp"},rt=re(()=>t("span",{class:"gamepad-cursor cursor-vui-tabs","data-tp":"mineTabs"},null,-1)),lt=re(()=>t("div",{style:{flex:"1"}},null,-1)),ut={class:"search-box-wrap"},ct={class:"mine-right-btn-content"},dt=["textContent"],_t={key:0,class:"gamepad-cursor"},vt=Y({__name:"Mine",setup(v){const y=[{key:"1",name:"\u5386\u53F2\u8BB0\u5F55",router:"MineHistory"},{key:"2",name:"\u79BB\u7EBF\u7F13\u5B58",router:"MineDownload"},{key:"3",name:"\u6211\u7684\u6536\u85CF",router:"MineFavorite"},{key:"4",name:"\u7A0D\u540E\u518D\u770B",router:"MineWatchLater"}],g=_(null),w=_("1"),e=ee(),L=te(),x=_(),p=pe(),b=_([]),{isHistoryEmpty:q,isWatchLaterEmpty:I,mineFavoriteTab:B}=ne(p),F=N(()=>["MineHistory","MineDownload"].includes(e.name.toString())?!0:e.name==="MineFavorite"?["DEFAULT_FOLDER","CUSTOM_FOLDERS"].includes(B.value):!1),M=me(),D=()=>M.flashPageCursors(),T=N(()=>{switch(w.value){case"1":return"\u641C\u7D22\u4F60\u7684\u5386\u53F2\u8BB0\u5F55";case"2":return"\u641C\u7D22\u4F60\u7684\u79BB\u7EBF\u7F13\u5B58";case"3":return"\u641C\u7D22\u4F60\u7684\u6536\u85CF\u5185\u5BB9";default:return"\u641C\u7D22"}});ue(".app_mine");const K=o=>{const i=y.find(A=>A.key===o);i&&(L.push({name:i.router,query:e.query}),J.emit("requestScrollToTop"))},O=o=>{var i;(i=x.value)==null||i.doSearch(o)};R(e,()=>{const o=y.find(i=>i.router===e.name);o&&(w.value=o.key)},{immediate:!0}),R(w,()=>{var o;(o=g.value)==null||o.clearSearchKeyWord()});const V=o=>o.tab==="history"&&q.value||o.tab==="watchLater"&&I.value;let E=0;J.on("mineNavButton",o=>{const i=Date.now();i-E<100||(E=i,b.value=o)});const k=_(!1);Le("Mine",async()=>{var o;k.value=!0,await U(),k.value=!1,(o=g.value)==null||o.clearSearchKeyWord()},!0);const S=_(!1);return ae(()=>S.value=!0),Ce(()=>S.value=!1),Be(".app_mine--content",{watchParam:S}),he(()=>p.resetMineFavoriteTab()),(o,i)=>{const A=P("v-tab-item"),W=P("v-tabs"),l=P("v-button"),r=P("router-view");return s(),c("div",ot,[t("div",{class:"app_mine--content i_page_content page_scroller",onScroll:D},[k.value?u("",!0):(s(),h(at,{key:0,class:"mt_xxl i_wrapper"})),t("div",st,[t("div",it,[fe(W,{class:"no_drag mine-nav-tabs","auto-adjustment":"",activeKey:w.value,"onUpdate:activeKey":i[0]||(i[0]=n=>w.value=n),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!0,"tabs-gutter":32,"slider-width":18,onTabChange:K},{default:$(()=>[(s(!0),c(G,null,Q(a(y),n=>(s(),h(A,{key:n.key,tab:n.name},{extra:$(()=>[rt]),_:2},1032,["tab"]))),128))]),_:1},8,["activeKey"]),lt,t("div",ut,[a(F)?(s(),h(Se,{key:0,ref_key:"searchBox",ref:g,searchPlaceholder:a(T),onConfirmSearch:O},null,8,["searchPlaceholder"])):u("",!0)]),["MineWatchLater"].includes(a(e).name.toString())?(s(!0),c(G,{key:0},Q(b.value,(n,m)=>(s(),h(l,{key:m,class:ge(["mine-right-option p_relative",{text2:!V(n)&&n.text!=="\u64AD\u653E\u5168\u90E8"}]),disabled:V(n),type:n.text==="\u64AD\u653E\u5168\u90E8"?"pink":"",onClick:n.handler},{default:$(()=>[t("div",ct,[n.text!=="\u64AD\u653E\u5168\u90E8"?(s(),h(a(be),{key:0})):u("",!0),n.text==="\u64AD\u653E\u5168\u90E8"?(s(),h(a(ke),{key:1})):u("",!0),t("span",{textContent:d(n.text)},null,8,dt)]),n.text==="\u64AD\u653E\u5168\u90E8"?(s(),c("span",_t)):u("",!0)]),_:2},1032,["disabled","class","type","onClick"]))),128)):u("",!0)])]),k.value?u("",!0):(s(),h(r,{key:1},{default:$(({Component:n})=>[(s(),h(ye(n),{ref_key:"mineRouterView",ref:x},null,512))]),_:1}))],32)])}}});var Vt=ie(vt,[["__scopeId","data-v-06b53be9"]]);export{Vt as default};

import{f as p,r as w,cr as E,M as N,al as R,k as r,x as T,y as V,n as q,g as U,Q as j,o as d,c,a as i,Z as M,$ as f,a0 as S,R as O,T as z,U as v,V as m,C as A,t as I,a6 as G,a7 as L}from"./index.f074ecef.js";import{J as H}from"./index.194c39d1.js";import{U as J}from"./MoreFeedback.eac5fca1.js";/* empty css                    */import{K,N as P}from"./index.14a3ec94.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";function ye(e){return p.get("https://api.bilibili.com/x/relation/tags",{params:e})}function ge(e){return p.get("https://api.bilibili.com/x/relation/tag",{params:e})}function he(e){return p.get("https://api.bilibili.com/x/relation/interrelations",{params:e}).then(w)}function xe(e){return E.request({url:"/x/relation/fans",params:e}).then(w)}function Ce(e){return E.request({url:"/x/relation/followings",params:e}).then(w)}const y=e=>(G("data-v-873dbf1c"),e=e(),L(),e),W={class:"user-item"},Z={class:"follow-info"},X={class:"r1"},Y=["textContent"],ee={key:0,class:"r2"},te=["textContent","title"],ie={class:"r3"},oe={class:"option gray"},se=y(()=>i("svg",{class:"menu",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[i("line",{x1:"1",y1:"1",x2:"11",y2:"1","stroke-width":"2","stroke-linecap":"round"}),i("line",{x1:"1",y1:"6",x2:"11",y2:"6","stroke-width":"2","stroke-linecap":"round"}),i("line",{x1:"1",y1:"11",x2:"11",y2:"11","stroke-width":"2","stroke-linecap":"round"})],-1)),ne=["textContent"],ae={class:"f-dropdown"},le=y(()=>i("svg",{class:"add",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},[i("line",{x1:"1",y1:"6",x2:"11",y2:"6","stroke-width":"2","stroke-linecap":"round"}),i("line",{x1:"6",y1:"1",x2:"6",y2:"11","stroke-width":"2","stroke-linecap":"round"})],-1)),ue=y(()=>i("span",null,"\u5173\u6CE8",-1)),re=[le,ue],de=N({__name:"FollowerItem",props:{item:{type:Object,required:!0},oid:{type:Number,default:0}},emits:["update","updateGroup"],setup(e,{emit:g}){const h=e,_={1:"\u5DF2\u5173\u6CE8",2:"\u5DF2\u5173\u6CE8",6:"\u5DF2\u4E92\u7C89"},$=R(),D=new J,u=r(null),{userInfo:B}=T(V());q(()=>{if(u.value){const o=h.item;D.append({avatar:o.face,iconType:(()=>{var t,a;if(((t=o.official_verify)==null?void 0:t.type)===0)return"personal";if(((a=o.official_verify)==null?void 0:a.type)===1)return"business";if(o.vip.vipStatus)return"big-vip"})(),avatarWidth:78},u.value,"follow-avatar"+o.mid)}}),U.on("relationChange",async o=>{o.mid===h.item.mid&&g("update",o.isFollow?2:0)});const x=async o=>{if(!B.value.isLogin){A("followerItem.toggleFollow");return}let t=[1,2,6].includes(o.attribute);try{await H(o.mid,t),I({content:t?"\u53D6\u5173\u6210\u529F":"\u5173\u6CE8\u6210\u529F"})}catch(a){I({content:a.message})}},C=o=>{$.push({name:"Space",query:{mid:o}})},l=r(!1),n=r(!1);return(o,t)=>{var b,k,F;const a=j("v-dropdown");return d(),c("div",W,[i("div",{class:"follow-avatar",ref_key:"avatarRef",ref:u,onClick:t[0]||(t[0]=s=>C(e.item.mid))},null,512),i("div",Z,[i("div",X,[i("div",{class:M(["uname",{vip:e.item.vip.vipStatus>0}]),textContent:f(e.item.uname),onClick:t[1]||(t[1]=s=>C(e.item.mid))},null,10,Y)]),((b=e.item.official_verify)==null?void 0:b.desc)||e.item.sign?(d(),c("div",ee,[i("span",{class:"desc",textContent:f(((k=e.item.official_verify)==null?void 0:k.desc)||e.item.sign),title:((F=e.item.official_verify)==null?void 0:F.desc)||e.item.sign},null,8,te)])):S("",!0),i("div",ie,[O(i("div",null,[v(a,{visible:n.value,trigger:"click",onShow:t[4]||(t[4]=s=>n.value=!0),onHidden:t[5]||(t[5]=s=>n.value=!1)},{content:m(()=>[i("div",ae,[i("div",{class:"f-option",onClick:t[2]||(t[2]=s=>l.value=!0)},"\u8BBE\u7F6E\u5206\u7EC4"),i("div",{class:"f-option",onClick:t[3]||(t[3]=()=>{n.value=!1,x(e.item)})}," \u53D6\u6D88\u5173\u6CE8 ")])]),default:m(()=>[i("div",oe,[se,i("span",{textContent:f(_[e.item.attribute])},null,8,ne)])]),_:1},8,["visible"])],512),[[z,[1,2,6].includes(e.item.attribute)]]),[1,2,6].includes(e.item.attribute)?S("",!0):(d(),c("div",{key:0,class:"option",onClick:t[6]||(t[6]=s=>x(e.item))},re))])]),v(P,{zIndex:991,show:l.value,onClose:t[9]||(t[9]=s=>l.value=!1)},{default:m(()=>[v(K,{upName:e.item.uname,upid:e.item.mid,onClose:t[7]||(t[7]=()=>{l.value=!1,n.value=!1}),onSave:t[8]||(t[8]=s=>{l.value=!1,n.value=!1,g("updateGroup",s)})},null,8,["upName","upid"])]),_:1},8,["show"])])}}});var be=Q(de,[["__scopeId","data-v-873dbf1c"]]);export{be as F,he as a,ye as b,Ce as c,xe as d,ge as f};

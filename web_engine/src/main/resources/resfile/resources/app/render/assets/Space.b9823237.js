import{_ as Le,u as Ae,y as He,L as Ie,a as Ge}from"./index.194c39d1.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";import{M as W,o as t,c as p,a as s,U as b,ax as je,a6 as ue,a7 as de,a2 as G,x as Y,y as _e,Q as z,aj as E,V as H,W as a,$ as M,_ as Je,a0 as B,Z as Ce,ab as R,k as w,u as Ue,A,ar as Re,t as oe,C as qe,bb as xe,a4 as Ye,n as ve,c6 as Xe,P as V,l as pe,ae as $e,w as Fe,b2 as Q,X as ae,Y as ce,aU as Qe,aM as Oe,aB as Z,m as ye,fn as te,p as Te,S as ea,aV as Ee,dE as Ke,fo as aa,g as he,aa as ta,al as sa,aK as oa,N as la,cy as na}from"./index.f074ecef.js";import{m as ge,N as Be,u as ia,k as ra}from"./App.c1beb0e9.js";import{H as ca,K as ua,N as da}from"./index.14a3ec94.js";import{V as _a}from"./vd_follow.cd38bdd6.js";import{ai as va,aj as pa,ak as fa,al as ma,U as ha,u as Ne,s as ga}from"./MoreFeedback.eac5fca1.js";/* empty css                    */import{U as Pe}from"./UserLevel.7373ec78.js";import{_ as ya}from"./SearchBox.531653cb.js";import{u as We,_ as ba}from"./AllFeedFragment.46cd0ff1.js";import{g as wa,a as ka,b as Sa,c as xa,d as $a,e as Aa}from"./space.a51500ef.js";import{S as Ca}from"./SearchResultCount.6c930e27.js";import{_ as Fa}from"./FolderMediaCard.1999fd20.js";import{F as Ta}from"./FolderMediaCardSkeleton.2b4fce32.js";import{u as me}from"./index.es.256047cb.js";import"./modulepreload-polyfill.b7f2da20.js";import"./ico_max_exit.f7f1ea61.js";import"./isUdf.1a76b9f4.js";import"./btn_devtools.06ffa497.js";import"./ico_pin.a6faa7a5.js";import"./style.2070e26d.js";/* empty css               */import"./theme-map.a3b52bba.js";import"./index.733b73c2.js";import"./LoginPanel.33272c26.js";var Ea="[object AsyncFunction]",Ba="[object Function]",Da="[object GeneratorFunction]",Ia="[object Proxy]";function Ve(o){if(!va(o))return!1;var e=pa(o);return e==Ba||e==Da||e==Ea||e==Ia}const Na=o=>(ue("data-v-1a12e930"),o=o(),de(),o),Pa={class:"space_skeleton"},Va=Na(()=>s("div",{class:"skeleton_top_photo"},null,-1)),Ma={class:"px_40"},La=je('<div class="flex_between mb_40" data-v-1a12e930><div class="flex_start" data-v-1a12e930><div class="skeleton_avatar mr_lg" data-v-1a12e930></div><div class="pt_10" data-v-1a12e930><div class="fs_1 fw_bold mr_sm skeleton_name" data-v-1a12e930></div><div data-v-1a12e930><div class="skeleton_desc" data-v-1a12e930></div><div class="skeleton_desc" data-v-1a12e930></div></div></div></div><div class="skeleton_statistics" data-v-1a12e930><div class="skeleton_statistics_number" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div><div class="divider" data-v-1a12e930></div><div class="skeleton_statistics_number" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div><div class="divider" data-v-1a12e930></div><div class="skeleton_statistics_number" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div><div class="divider" data-v-1a12e930></div><div class="skeleton_statistics_follow" data-v-1a12e930></div></div></div><div class="skeleton_tabs" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div><div class="skeleton_video_order" data-v-1a12e930><div data-v-1a12e930></div><div data-v-1a12e930></div></div>',3),Ua=W({__name:"SpaceSkeleton",setup(o){return(e,c)=>(t(),p("div",Pa,[Va,s("div",Ma,[La,b(Le,{itemNum:24,showAvatar:!1,showLoadingAnimation:""})])]))}});var Ra=j(Ua,[["__scopeId","data-v-1a12e930"]]),qa="./assets/banned.aedb1ca4.png";const Oa={},Ka=o=>(ue("data-v-387a00a1"),o=o(),de(),o),Wa={class:"search-banned-container p_relative"},za=Ka(()=>s("div",{class:"p_center text_center"},[s("p",{class:"u_select_none"},[s("img",{class:"banned-img",src:qa,alt:""})]),s("p",{class:"text_center text3 fs_3"},[G(" \u8BE5\u8D26\u53F7\u5C01\u7981\u4E2D\uFF0C"),s("br"),G(" \u8FD9\u91CC\u4EC0\u4E48\u90FD\u6CA1\u6709\u5462~ ")])],-1)),Za=[za];function Ha(o,e){return t(),p("div",Wa,Za)}var Ga=j(Oa,[["render",Ha],["__scopeId","data-v-387a00a1"]]);const ja={class:"flex_start"},Ja={class:"follow-text"},Ya={class:"follow_dropdown"},Xa={key:0,class:"gamepad-cursor"},Qa=W({__name:"FollowButton",props:{followed:{type:Boolean,required:!0},followText:{type:String,required:!0}},emits:["group","follow"],setup(o,{emit:e}){const c=o;return Y(_e()),(x,_)=>{const f=z("v-button");return t(),E(f,{type:c.followed?"grey":"pink",class:Ce(["follow-btn",c.followed?"following":"not-follow"]),onClick:_[2]||(_[2]=u=>e("follow",!0))},{default:H(()=>[s("div",ja,[c.followed?(t(),E(a(ca),{key:0,class:"follow-menu"})):(t(),E(a(_a),{key:1})),s("span",Ja,M(c.followText),1)]),s("ul",Ya,[s("li",{onClick:_[0]||(_[0]=u=>e("group"))},"\u8BBE\u7F6E\u5206\u7EC4"),s("li",{onClick:_[1]||(_[1]=Je(u=>e("follow",!1),["stop"]))},"\u53D6\u6D88\u5173\u6CE8")]),c.followed?B("",!0):(t(),p("span",Xa))]),_:1},8,["type","class"])}}});var et=j(Qa,[["__scopeId","data-v-b4169e6e"]]);const be=o=>(ue("data-v-7064dda6"),o=o(),de(),o),at={class:"n-statistics"},tt={class:"n-data-v hover"},st=be(()=>s("p",{class:"n-data-k"},"\u5173\u6CE8\u6570",-1)),ot=be(()=>s("div",{class:"divider"},null,-1)),lt={class:"n-data-v hover"},nt=be(()=>s("p",{class:"n-data-k"},"\u7C89\u4E1D\u6570",-1)),it={key:0,class:"divider"},rt=["title"],ct={class:"n-data-v cs_default"},ut=be(()=>s("p",{class:"n-data-k"},"\u83B7\u8D5E\u6570",-1)),dt=G("\u53D1\u6D88\u606F"),_t=W({__name:"SpaceStatistics",props:{followed:{type:Boolean,required:!0},followText:{type:String,required:!0}},emits:["follow"],setup(o,{emit:e}){const c=R("account"),x=R("settings"),_=R("upStat"),f=R("relations"),u=R("isOwner"),h=R("isVisitor"),S=w(!1);Ue();const{userInfo:m}=Y(_e()),d=k=>{e("follow",k)};function r(k){if(k<=0||!k)return 0;if(k==="--")return"--";const i=Number(k);return i>99999999?Math.round(i/1e7)/10+"\u4EBF":i>9999?Math.round(i/1e3)/10+"\u4E07":i}const g=k=>String(k).replace(/\d{1,3}(?=(\d{3})+$)/g,function(i){return i+","}),n=k=>`\u89C6\u9891\u3001\u52A8\u6001\u3001\u4E13\u680F\u7D2F\u8BA1\u83B7\u8D5E${String(k).replace(/\d{1,3}(?=(\d{3})+$)/g,function(T){return T+","})}`,l=A(()=>{var k;return((k=_.value)==null?void 0:k.likes)>=0}),v=A(()=>{var k,i;return((i=(k=x.value)==null?void 0:k.privacy)==null?void 0:i.disable_following)&&!u.value}),C=()=>{v.value&&oe({content:"\u7531\u4E8E\u8BE5\u7528\u6237\u9690\u79C1\u8BBE\u7F6E\uFF0C\u5173\u6CE8\u5217\u8868\u4E0D\u53EF\u89C1"})},$=()=>{S.value=!0};let y=!1;const F=async()=>{var k;if(!m.value.isLogin){qe("spaceStatistics.openMessage");return}if(!y){y=!0;try{const i=(k=c.value)==null?void 0:k.mid;(await xe.getRelation(i)).data.relation.attribute>=128?oe({content:"\u8BE5\u7528\u6237\u5DF2\u88AB\u62C9\u9ED1"}):Ye.emit("openMessage",i)}finally{y=!1}}};return(k,i)=>{var J,I,D,L,U,O;const T=z("router-link"),q=z("v-button");return t(),p("div",at,[(t(),E(Re(a(v)?"div":"router-link"),{class:"n-data",to:{name:"Following",query:{mid:(J=a(c))==null?void 0:J.mid}},title:g((I=a(f))==null?void 0:I.following),onClick:C},{default:H(()=>{var P;return[s("p",tt,M(r((P=a(f))==null?void 0:P.following)),1),st]}),_:1},8,["to","title"])),ot,b(T,{class:"n-data",to:{name:"Follower",query:{mid:(D=a(c))==null?void 0:D.mid}},title:g((L=a(f))==null?void 0:L.follower)},{default:H(()=>{var P;return[s("p",lt,M(r((P=a(f))==null?void 0:P.follower)),1),nt]}),_:1},8,["to","title"]),a(l)?(t(),p("div",it)):B("",!0),a(l)?(t(),p("div",{key:1,class:"n-data",title:n((U=a(_))==null?void 0:U.likes)},[s("p",ct,M(r((O=a(_))==null?void 0:O.likes)),1),ut],8,rt)):B("",!0),a(h)?(t(),E(et,{key:2,followed:o.followed,followText:o.followText,onGroup:$,onFollow:d,class:"ml_28"},null,8,["followed","followText"])):B("",!0),b(da,{show:S.value,onClose:i[2]||(i[2]=P=>S.value=!1)},{default:H(()=>{var P,N;return[b(ua,{upName:(P=a(c))==null?void 0:P.name,upid:(N=a(c))==null?void 0:N.mid,onClose:i[0]||(i[0]=X=>S.value=!1),onSave:i[1]||(i[1]=X=>S.value=!1)},null,8,["upName","upid"])]}),_:1},8,["show"]),a(h)?(t(),E(q,{key:3,class:"message-btn",plain:"",type:"pink",onClick:F},{default:H(()=>[dt]),_:1})):B("",!0)])}}});var vt=j(_t,[["__scopeId","data-v-7064dda6"]]);const pt={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ft=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.88 5.972A3.134 3.134 0 0 1 7.253 7.39c-.584 0-1.209-.167-1.71-.5-1.459-.96-1.917-2.878-.958-4.337.583-.834 1.585-1.376 2.627-1.418.583 0 1.209.167 1.71.5 1.458.96 1.917 2.878.958 4.337ZM9.421.76C8.796.3 8.004.093 7.17.093c-1.376 0-2.71.667-3.503 1.96-1.167 1.75-.75 4.086.793 5.42l-.417.667-2.46-1.584s-.584-.375-.835.042c-.291.458.292.833.292.833L3.5 9.016l-1.376 2.127s-.25.416.209.667c.5.291.75-.167.75-.167l1.335-2.085 2.418 1.585s.626.375.918-.084c.25-.375-.334-.75-.334-.75L4.96 8.682l.417-.625c.584.292 1.21.417 1.793.417 1.376 0 2.71-.667 3.502-1.96 1.251-1.918.667-4.503-1.25-5.754Z",fill:"#61666D"},null,-1),mt=[ft];function ht(o,e){return t(),p("svg",pt,[...mt])}var gt={render:ht};const yt={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bt=s("mask",{id:"a",style:{"mask-type":"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16"},[s("path",{fill:"#61666D",d:"M0 0h16v16H0z"})],-1),wt=s("g",{mask:"url(#a)"},[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.159 2.396a.574.574 0 0 0 .562.562l3.362.05-3.335 3.336c-1.758-1.38-4.27-1.295-5.844.279-1.704 1.704-1.662 4.51.094 6.265 1.756 1.757 4.561 1.799 6.266.095 1.573-1.574 1.658-4.086.279-5.844l3.335-3.336.05 3.362a.574.574 0 0 0 .563.562c.306.005.55-.24.545-.545l-.07-4.699a.574.574 0 0 0-.563-.562l-4.699-.07a.534.534 0 0 0-.545.545Zm.31 9.792c-1.278 1.278-3.382 1.246-4.7-.071-1.317-1.317-1.348-3.42-.07-4.699 1.278-1.278 3.382-1.246 4.699.07 1.317 1.318 1.349 3.422.07 4.7Z",fill:"#61666D"})],-1),kt=[bt,wt];function St(o,e){return t(),p("svg",yt,[...kt])}var xt={render:St};const $t={class:"gender"},At=W({__name:"SpaceGender",props:{gender:{type:String,required:!0}},setup(o){return(e,c)=>(t(),p("span",$t,[o.gender==="male"?(t(),E(a(xt),{key:0})):o.gender==="female"?(t(),E(a(gt),{key:1})):B("",!0)]))}});var Ct=j(At,[["__scopeId","data-v-3fe6f7f2"]]);const Ft={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Tt=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.167 3.667c-1.68 0-3.145.085-4.18.169a1.448 1.448 0 0 0-1.34 1.32A35.962 35.962 0 0 0 2.5 8.333c0 1.218.07 2.332.147 3.177a1.448 1.448 0 0 0 1.34 1.32c1.035.085 2.5.17 4.18.17 1.679 0 3.145-.085 4.18-.17a1.448 1.448 0 0 0 1.34-1.32c.076-.844.146-1.958.146-3.177s-.07-2.333-.146-3.177a1.448 1.448 0 0 0-1.34-1.32c-1.035-.084-2.501-.17-4.18-.17Zm-4.26-.828a53.379 53.379 0 0 1 4.26-.172c1.711 0 3.205.087 4.26.172a2.448 2.448 0 0 1 2.256 2.227c.078.867.15 2.011.15 3.267 0 1.256-.072 2.401-.15 3.267a2.448 2.448 0 0 1-2.256 2.227 53.368 53.368 0 0 1-4.26.173c-1.712 0-3.205-.087-4.26-.173A2.448 2.448 0 0 1 1.65 11.6 36.965 36.965 0 0 1 1.5 8.333c0-1.255.073-2.4.15-3.266a2.448 2.448 0 0 1 2.256-2.228Z",fill:"#61666D"},null,-1),Et=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.333 6.501a.5.5 0 0 1 .5.5c0 .864.005 1.525.145 1.978.065.212.147.33.231.398.08.064.21.124.457.124a.5.5 0 1 1 0 1c-.42 0-.788-.106-1.084-.345-.29-.234-.459-.553-.56-.883-.19-.614-.19-1.427-.189-2.211v-.06a.5.5 0 0 1 .5-.5Z",fill:"#61666D"},null,-1),Bt=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 6.501a.5.5 0 0 0-.5.5c0 .864-.005 1.525-.145 1.978-.065.212-.147.33-.231.398-.08.064-.21.124-.457.124a.5.5 0 1 0 0 1c.42 0 .788-.106 1.084-.345.29-.234.459-.553.56-.883.19-.614.19-1.427.189-2.211v-.06a.5.5 0 0 0-.5-.5ZM8.667 6.501a.5.5 0 0 1 .5.5v3a.5.5 0 1 1-1 0v-3a.5.5 0 0 1 .5-.5ZM11.988 6.772c.496.289.845.802.845 1.563 0 .734-.323 1.262-.765 1.606-.422.328-.932.476-1.335.532-.527.072-.9-.365-.9-.805V7.284c0-.393.292-.789.756-.812.402-.019.941.033 1.4.3Zm-1.155.699v1.966c.224-.056.446-.149.621-.285.218-.17.379-.415.379-.817 0-.405-.16-.59-.348-.7a1.448 1.448 0 0 0-.652-.164Z",fill:"#61666D"},null,-1),Dt=[Tt,Et,Bt];function It(o,e){return t(),p("svg",Ft,[...Dt])}var Nt={render:It};const Pt={key:0,class:"uid"},Vt={class:"text2 fs_5"},Mt=W({__name:"SpaceUid",props:{uid:{type:[String,Number],required:!0}},setup(o){return(e,c)=>o.uid?(t(),p("div",Pt,[b(a(Nt),{class:"mr_3"}),s("span",Vt,M(o.uid),1)])):B("",!0)}});var Lt=j(Mt,[["__scopeId","data-v-9fca1c3e"]]),Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAMAAAC7m5rvAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABFUExURUxpcWFlbV9lbWFlbF9ka2FlbV9nb2FmbF9jb19jbF9fb19kbGFmbV9lbV9mbF9mbWJlbmFlbV9mbGFmbWJnbmBlbGFmbSRGAiYAAAAWdFJOUwC/kN8w3yDvEEAgYJ+AcFCPz6Cvb7D9AeNOAAABvElEQVR42u1Wy7aDIAwU5C1WrS3//6k3UE9zEsB6F901OyGTZCYRGH72TXNe7tqmZDcx+6sgLwGBZqO6AhKpMhE+lbcWPy0n4+BLLVKXhdWdoUJxioSPuue18SShyqSE4csmA0d1hrK31s4t76hehf2YRgMuNNXIKFIgx40tXVaIZ855r40SgTblxfmBQz0yAoTvANBDVDVALHMOM4108Z1smnCVrkD7JNsCwurlU1F8pPTCeRCNigkr45u5dbydRzrNq5wxv2ZCx3fEQYIXV2nBxMmTxpRkB4EngW1AjQtdN8ZAYq6Iw82cGhNgYxzwJjDYJERHh0wlcevDHOSeMYLpwbBIbEIoeljUo1WkRgaoA4qPE7gR2POISpsQ2BQuqHG7kXtx0JCUec2N4UIzmRQRnw0XiufZtFnNgiuuSMkf+cmC7aM/FxMhkJ8swyZ+bKiPv7zgAxjRg6a7ESaaHmSP9rEhq4MXiR0DI3vHa+hfKlwg7FUfpzLK/PfqeFjOgMdMsUoYREJU74IAIPHwIDyvkJuTqTjJRTn4MtNxCUs3nJtpXflXXhnqTh8Y8vrTZBZbFk/v0rvhZ1+0P1TyJPe5FgeZAAAAAElFTkSuQmCC";var Rt={setup(o){const e=R("account"),c=R("isVisitor"),x=A(()=>{var v;let l="";switch((v=e.value)==null?void 0:v.sex){case"\u7537":l="male";break;case"\u5973":l="female";break;default:l="";break}return l}),_=A(()=>{var l,v,C,$,y,F;if(((v=(l=e.value)==null?void 0:l.official)==null?void 0:v.type)===1){if((($=(C=e.value)==null?void 0:C.official)==null?void 0:$.role)===0)return"\u4E2A\u4EBA";if(((F=(y=e.value)==null?void 0:y.official)==null?void 0:F.role)===1)return"\u673A\u6784"}}),f=A(()=>{var l,v;return(v=(l=e==null?void 0:e.value.official)==null?void 0:l.title)!=null?v:""}),u=A(()=>!!_.value),h=A(()=>{var l,v;return!!c.value&&((v=(l=e.value)==null?void 0:l.profession)==null?void 0:v.is_show)}),S=18,m=w(!1),d=w(!1),r=w(!1),g="space_sign",n=fa(()=>{const l=document.querySelector(`.${g}`);l&&(d.value=l.clientHeight>S,r.value=l.scrollHeight>l.clientHeight)},100,{leading:!0});return ve(async()=>{await ma(0),n(),window.addEventListener("resize",n)}),Xe(()=>{window.removeEventListener("resize",n)}),()=>{const l=(i=!1)=>b("span",{onClick:()=>{m.value=!m.value},style:{"word-break":"keep-all",cursor:"pointer",color:"var(--text_link)",position:i&&!m.value?"absolute":"static",background:"var(--bg1)",bottom:0,right:0}},[!m.value&&i?b("span",{class:"text2"},[G("...")]):"",b("span",{class:"u_select_none",style:{"margin-left":"5px"}},[m.value?"\u6536\u8D77":"\u8BE6\u60C5"])]),v=i=>u.value?b("div",{class:"text2",style:{"margin-bottom":"6px",position:"relative"}},[b("span",null,[G("bilibili"),_.value,G("\u8BA4\u8BC1\uFF1A"),f.value]),i?l():null]):null,C=i=>{var T,q,J;return h.value?b("div",{class:"profession-description text2",style:{"margin-bottom":"6px",position:"relative"}},[b("img",{class:"profession-description__icon",src:Ut,style:{"margin-right":"6px"}},null),b("span",{class:m.value?"":"text_ellipsis_2l"},[G("\u804C\u4E1A\u8D44\u8D28\uFF1A"),(T=e.value)==null?void 0:T.profession.department,G("\xA0"),((q=e.value)==null?void 0:q.profession.title)||((J=e.value)==null?void 0:J.profession.name)]),i?l():null]):null},$=(i,T=1)=>{var q;return b("div",{class:`text2 ${g}`,style:m.value?{"margin-bottom":"6px",position:"relative"}:{position:"relative",display:"-webkit-box",overflow:"hidden","margin-bottom":"6px","word-break":"break-all","-webkit-line-clamp":T,"-webkit-box-orient":"vertical","text-overflow":"ellipsis"}},[b("span",null,[((q=e.value)==null?void 0:q.sign)||"\u8FD9\u4E2A\u4EBA\u5F88\u795E\u79D8\uFF0C\u4EC0\u4E48\u90FD\u6CA1\u6709\u5199"]),i?l(r.value):null])},y=()=>{var i;return b("div",{class:"flex_start"},[x.value?b(Ct,{gender:x.value,style:{"margin-right":"5px"}},null):null,b(Lt,{uid:(i=e.value)==null?void 0:i.mid},null)])};let F=[],k=[];return u.value&&h.value?(F=[v(!0),C],k=[$,y]):!u.value&&!h.value?(F=[$(!0,2)],k=[y]):u.value?(F=[v(!0),$],k=[y]):h.value&&(F=[C(!0),$],k=[y]),b("div",{class:"space_description"},[F.map(i=>Ve(i)?i():i),m.value?k.map(i=>Ve(i)?i():i):null])}}};const qt={class:"space_author"},Ot={class:"flex_start items_start"},Kt={class:"author-avatar -mt_18 mr_lg"},Wt={class:"flex_1 min_w_0"},zt={class:"flex_start mb_4"},Zt={class:"fz_20 fw_bold mr_sm text_ellipsis account-name"},Ht={key:0,class:"level_wrapper"},Gt={class:"level_wrapper__exp"},jt={key:0,class:"exp"},Jt={class:"level_wrapper__bar"},Yt={key:2,class:"h-vipLevel"},Xt=["src"],Qt=W({__name:"SpaceAuthor",setup(o){const e=R("account"),c=R("isOwner"),x=R("isVisitor"),{userInfo:_}=Y(_e()),f=w(null);w(!1),A(()=>{var n,l,v,C;if(((l=(n=e.value)==null?void 0:n.official)==null?void 0:l.role)===0)return"\u4E2A\u4EBA";if(((C=(v=e.value)==null?void 0:v.official)==null?void 0:C.role)===1)return"\u673A\u6784"});const u=A(()=>{var l;const n=(l=_==null?void 0:_.value)==null?void 0:l.level_info;return n?n.current_level===6?"100%":(n.current_exp/n.next_exp*100>>0)+"%":"0"});A(()=>{var l;let n="";switch((l=e.value)==null?void 0:l.sex){case"\u7537":n="male";break;case"\u5973":n="female";break;default:n="";break}return n});const h=A(()=>{var F;const n=(F=e.value)!=null?F:{};let l="",v="",C;const{vip:$}=n;C=($.type===1||$.type===2)&&$.status===1;const{type:y}=n==null?void 0:n.official;return y===0?l="person":y===1&&(l="organization"),l==="organization"?v="business":l==="person"?v="personal":C&&$.avatar_subscript===2?v="small-vip":C&&$.avatar_subscript===1&&(v="big-vip"),v}),S=A(()=>{var n,l,v;return((v=(l=(n=e.value)==null?void 0:n.vip)==null?void 0:l.label)==null?void 0:v.img_label_uri_hans_static)||""}),m=A(()=>{var l;const n=(l=e.value)==null?void 0:l.vip;return(n==null?void 0:n.type)!==0&&(n==null?void 0:n.status)===1}),d=A(()=>{var n,l;return(l=(n=e.value)==null?void 0:n.level)!=null?l:0}),r=A(()=>{var n,l,v;return m.value?(v=(l=(n=e.value)==null?void 0:n.vip)==null?void 0:l.label)==null?void 0:v.text:""}),g=()=>{var n,l,v;if((n=e.value)!=null&&n.face){const C=new ha({}),$=96;C.append({avatarWidth:$,avatarHeight:$,avatar:(l=e.value)==null?void 0:l.face,renderWidth:$,isNFT:(v=e.value)==null?void 0:v.face_nft,iconType:h.value},f.value,"avatar")}};return V(()=>{var n;return(n=e.value)==null?void 0:n.face},async n=>{!n||(await Fe(),g())},{immediate:!0}),pe(g),(n,l)=>{var v,C,$,y,F,k,i,T;return t(),p("div",qt,[s("div",Ot,[s("div",Kt,[s("div",{ref_key:"avatarRef",ref:f},null,512)]),s("div",Wt,[s("div",zt,[s("div",Zt,M((v=a(e))==null?void 0:v.name),1),a(c)?(t(),p("div",Ht,[s("div",Gt,[b(Pe,{level:a(d),isSenior:!!a(_).is_senior_member,class:"level"},null,8,["level","isSenior"]),($=(C=a(_))==null?void 0:C.level_info)!=null&&$.current_level?(t(),p("div",jt,[G(M(a(_).level_info.current_exp),1),s("span",null,"/"+M(a(_).level_info.next_exp),1)])):B("",!0)]),s("div",Jt,[s("div",{class:"rate",style:$e("width:"+a(u))},null,4)])])):a(d)&&a(x)?(t(),E(Pe,{key:1,level:a(d),isSenior:!!((y=a(e))!=null&&y.is_senior_member),class:"level_visitor"},null,8,["level","isSenior"])):B("",!0),a(S)?(t(),p("div",Yt,[s("img",{src:a(S),alt:""},null,8,Xt)])):a(m)?(t(),p("div",{key:3,style:$e({color:(k=(F=a(e))==null?void 0:F.vip)!=null&&k.label?a(e).vip.label.text_color:"#ffffff",backgroundColor:(T=(i=a(e))==null?void 0:i.vip)!=null&&T.label?a(e).vip.label.bg_color:""}),class:"h-vipType flex_shrink_0"},M(a(r)),5)):B("",!0)]),b(a(Rt))])])])}}});var es=j(Qt,[["__scopeId","data-v-10954ee4"]]);const as=s("span",{class:"gamepad-cursor cursor-vui-tabs z_index_999","data-tp":"spaceTabs"},null,-1),ts={key:0,class:"space_tabs_search"},Me=W({__name:"SpaceTabs",props:{activeKey:{type:Number,required:!0},tabs:{type:Array,required:!0},sticky:{type:Boolean,default:!1},headerTabs:{type:Boolean,default:!1},isBanned:{type:Boolean,required:!1}},emits:["update:activeKey"],setup(o,{emit:e}){const c=o,x={0:{name:"\u52A8\u6001",supportSearch:!1},1:{name:"\u6295\u7A3F",supportSearch:!0,placeholder:"\u641C\u7D22\u6295\u7A3F\u89C6\u9891"},2:{name:"\u5408\u96C6\u548C\u5217\u8868",supportSearch:!1}},_=w(null),f=w(""),u=A(()=>{var d;return((d=x[c.activeKey])==null?void 0:d.supportSearch)||!1}),h=A(()=>{var d;return((d=x[c.activeKey])==null?void 0:d.placeholder)||"\u641C\u7D22"}),S=d=>{e("update:activeKey",d)},m=d=>{f.value=d,Q.emit("confirmSearch",d)};return V(()=>c.activeKey,()=>{var d;(d=_.value)==null||d.clearSearchKeyWord()}),ve(()=>{Q.on("clearSearchKeyWord",()=>{var d;(d=_.value)==null||d.clearSearchKeyWord()})}),(d,r)=>{const g=z("v-tab-item"),n=z("v-tabs");return o.isBanned?B("",!0):(t(),p("div",{key:0,class:Ce(["space_tabs",{mx_40:!o.headerTabs,pl_md:o.headerTabs}])},[b(n,{autoAdjustment:"","active-key":c.activeKey,"slide-to-hover":!1,"active-pink":!0,"tabs-gutter":32,"slider-width":18,noPaddingStart:"",onTabChange:S},{default:H(()=>[(t(!0),p(ae,null,ce(o.tabs,l=>(t(),E(g,{key:l.key,tab:l.name},{extra:H(()=>[as]),_:2},1032,["tab"]))),128))]),_:1},8,["active-key"]),a(u)?(t(),p("div",ts,[b(ya,{ref_key:"searchBox",ref:_,searchPlaceholder:a(h),isSpacePage:!0,onConfirmSearch:m},null,8,["searchPlaceholder"])])):B("",!0)],2))}}}),ss={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},os=s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.251 8.75v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 1 0 0 1.5h4.5Z",fill:"#F69"},null,-1),ls=[os];function ns(o,e){return t(),p("svg",ss,[...ls])}var is={render:ns};const rs=o=>(ue("data-v-1fc0d018"),o=o(),de(),o),cs={class:"space_sticky_header"},us=rs(()=>s("div",{class:"space_sticky_header--dragshim"},null,-1)),ds={key:0,class:"p_center no_drag search-drag-bg"},_s=["src"],vs={class:"name"},ps={key:0,class:"p_center no_drag search-drag-bg"},fs=["src"],ms={class:"follow_text"},hs=W({__name:"SpaceStickyHeader",props:{followed:{type:Boolean,required:!0},followText:{type:String,required:!0}},emits:["follow"],setup(o,{emit:e}){const c=o,x=w(40),_=w(null),f=R("isOwner"),u=R("account"),{isSearchActive:h}=Y(Qe()),S=A(()=>!(c.followed||f.value));return V(S,async()=>{await Fe(),x.value=Math.min(_.value.offsetWidth,176)/2+20},{immediate:!0}),(m,d)=>(t(),p("div",cs,[us,a(S)?(t(),p("div",{key:1,class:"follow_btn p_relative",onClick:d[0]||(d[0]=r=>e("follow",!0)),ref_key:"center",ref:_},[a(h)?(t(),p("div",ps)):B("",!0),a(u).face?(t(),p("img",{key:1,src:a(u).face,class:"avatar mr_10"},null,8,fs)):B("",!0),o.followed?B("",!0):(t(),E(a(is),{key:2,class:"mr_2 brand_pink"})),s("span",ms,M(c.followText),1)],512)):(t(),p("div",{key:0,class:"up flex_center p_relative",ref_key:"center",ref:_},[a(h)?(t(),p("div",ds)):B("",!0),a(u).face?(t(),p("img",{key:1,src:a(u).face,class:"avatar"},null,8,_s)):B("",!0),s("span",vs,M(a(u).name),1)],512)),s("div",{class:"space_sticky_header--shim",style:$e({minWidth:x.value+"px"})},null,4)]))}});var gs=j(hs,[["__scopeId","data-v-1fc0d018"]]);const ys={class:"space_dynamic min_h_100 flex_col"},bs=W({__name:"SpaceDynamic",props:{active:{type:Boolean,default:!1},mid:{type:[Number,String]}},setup(o){const e=o,{fromOuterSpmId:c}=Y(Oe()),x=ea.spaceDynamic;Z("pageSpmId",x),Z("fromOuterSpmId",c.value),Z("dynamicScene","space");const _=We(),f=w(null),u=w(null),h=()=>{var r;(r=f.value)==null||r.refresh()};V(()=>e.mid,async()=>{var r;await Fe(),(r=u.value)==null||r.close()});const{initEnterTime:S,reportPv:m,logOpenAppPage:d}=Ae({spm_id:x,isKeepAlive:!1,pageName:"SpaceDynamic"});return pe(()=>{S(),d()}),ye(()=>m()),ve(()=>{h(),te.on("refreshContent",h)}),Te(()=>{te.off("refreshContent",h)}),(r,g)=>(t(),p("div",ys,[b(ba,{ref_key:"dynamicFeedFragment",ref:f,"class-key":"space",scene:"SPACE",active:a(_),"disable-scroll":!0,"host-mid":o.mid},null,8,["active","host-mid"]),b(He,{ref_key:"dynamicAllSupplements",ref:u,active:a(_),"details-viewer-fixed":""},null,8,["active"])]))}});const we=o=>(ue("data-v-536e390c"),o=o(),de(),o),ws={class:"space_videos px_40 pb_x40"},ks={key:0,class:"space-videos-header"},Ss={class:"tabs"},xs=["onClick"],$s=we(()=>s("span",{class:"gamepad-cursor","data-tp":"subTab"},null,-1)),As={class:"control-area"},Cs=we(()=>s("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M9.3315 5.69705C10.2228 6.359 10.2228 7.641 9.33151 8.30294L2.80945 13.1465C1.66772 13.9945 0 13.221 0 11.8436V2.1564C0 0.77899 1.66772 0.00554585 2.80945 0.853451L9.3315 5.69705Z",fill:"currentColor"})],-1)),Fs=we(()=>s("span",null,"\u64AD\u653E\u5168\u90E8",-1)),Ts=we(()=>s("span",{class:"gamepad-cursor"},null,-1)),Es={key:5,style:{"padding-bottom":"1px"}},Bs={class:"row gutter_md"},Ds={key:0,class:"flex_center mt_x50 mb_x50"},Is=W({__name:"SpaceVideos",emits:["handleScrollToTop"],setup(o,{emit:e}){const c=R("account"),x="main.space-contribution.0.0",_=[{name:"\u6700\u65B0\u53D1\u5E03",key:"pubdate"},{name:"\u6700\u591A\u64AD\u653E",key:"click"}],f=w(_[0].key),u=w([]),h=w(!1),S=w(!1),m=w(0),d=w(1),r=w(20),g=w(""),n=w(!1),l=A(()=>!!g.value),v=Ee();V([f,u],()=>v.flashPageCursors(200));const C=async D=>{var L,U;try{h.value=!0,S.value=!1;const O={mid:(L=c.value)==null?void 0:L.mid,pn:d.value,ps:r.value,order:f.value};D&&(O.keyword=D);const P=await wa(O);m.value=((U=P.page)==null?void 0:U.count)||0,u.value=P.list.map(N=>({...N,spmInfo:{spmid:`${x}.pv`},duration:aa(N==null?void 0:N.duration)})),n.value=!!D}catch(O){u.value=[],S.value=!0,console.error("\u83B7\u53D6\u6295\u7A3F\u89C6\u9891\u5217\u8868\u5931\u8D25",O)}finally{h.value=!1}},$=D=>{m.value=0,d.value=D,u.value=[]},y=()=>{g.value="",Q.emit("clearSearchKeyWord"),$(1),C()},F=()=>{g.value="",Q.emit("clearSearchKeyWord"),$(d.value),C()},k=()=>{setTimeout(()=>{he.emit("requestScrollToTop"),C(g.value)},200)},i=D=>{f.value=D,y()},T=()=>{var U,O;const D={pubdate:0,click:1},L=((U=c.value)==null?void 0:U.name)||"";ta({type:"ugc",fromSpmid:`${x}.pv`,mediaList:{bizType:1,bizId:String(((O=c.value)==null?void 0:O.mid)||""),bizTitle:`${L?L+"\u7684":""}\u6295\u7A3F\u89C6\u9891`,bizSortType:D[f.value]||0}})},{initEnterTime:q,reportPv:J,logOpenAppPage:I}=Ae({spm_id:x,isKeepAlive:!1,pageName:"SpaceVideo"});return V(f,()=>{g.value="",Q.emit("clearSearchKeyWord")}),V(()=>{var D;return(D=c.value)==null?void 0:D.mid},y),pe(()=>{y(),q(),I()}),ye(()=>J()),ve(()=>{y(),te.on("refreshContent",F),Q.on("confirmSearch",D=>{e("handleScrollToTop"),g.value=D,$(1),C(D)}),Q.on("clearSearchKeyWord",()=>{g.value=""})}),Te(()=>{te.off("refreshContent",F)}),(D,L)=>{const U=z("v-button"),O=z("bili-video-card"),P=z("v-pagenation");return t(),p("div",ws,[a(l)?(t(),E(Ca,{key:1,count:m.value,unit:"\u89C6\u9891"},null,8,["count"])):(t(),p("div",ks,[s("div",Ss,[(t(),p(ae,null,ce(_,N=>s("div",{key:N.key,onClick:X=>i(N.key),class:Ce(["tab p_relative",{active:f.value===N.key}])},[G(M(N.name)+" ",1),$s],10,xs)),64))]),s("div",As,[b(U,{disabled:n.value||u.value.length<=0,class:"play-all p_relative",type:"pink",onClick:T},{default:H(()=>[Cs,Fs,Ts]),_:1},8,["disabled"])])])),!S.value&&!h.value&&!u.value.length?(t(),E(ge,{key:2,isSmall:""})):S.value&&!h.value&&!u.value.length?(t(),E(Be,{key:3,isSmall:""})):h.value&&!u.value.length?(t(),E(Le,{key:4,showLoadingAnimation:"",itemNum:8})):(t(),p("div",Es,[s("div",Bs,[(t(!0),p(ae,null,ce(u.value,(N,X)=>(t(),p("div",{key:N.bvid,class:"col_3 col_sm_1_5 mb_xxl p_relative"},[(t(),E(O,{isRcmd:"",showAvatar:!1,key:`${N.bvid}-${X}`,info:N,"img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_space_videos",scrollWrap:".app_space"},null,8,["info"]))]))),128))]),m.value>r.value?(t(),p("div",Ds,[b(P,{theme:"pink",pageNum:d.value,"onUpdate:pageNum":L[0]||(L[0]=N=>d.value=N),"page-size":r.value,total:m.value,"show-extend-btn":!1,"show-jump-info":!1,"btn-extra-render":a(Ke),onPageChange:k},null,8,["pageNum","page-size","total","btn-extra-render"])])):B("",!0)]))])}}});var Ns=j(Is,[["__scopeId","data-v-536e390c"]]);const Ps={class:"season_card"},Vs=["data-card"],Ms={class:"season_card--img-meta p_absolute b_0 w_100 flex_between px_sm pt_xs"},Ls={class:"b_text text1 fs_sm6 co_light"},Us={class:"b_text text1 fs_sm6 co_light"},Rs={class:"season_card--info"},qs={class:"b_text fs_sm4 font_medium"},Os={class:"b_text text3"},Ks=W({__name:"SeasonCard",props:{isFirstCard:Boolean,data:{type:Object,default:()=>({})},mid:{type:Number,default:null}},setup(o){const e=o,c=sa(),x=A(()=>{let f="";return e.data.type==="season"?e.data.meta.ptime&&(f=Ie(e.data.meta.ptime*1e3)):e.data.meta.mtime&&(f=Ie(e.data.meta.mtime*1e3)),f||"--"}),_=()=>{var m;if(!e.mid||!((m=e.data)!=null&&m.meta))return;const{season_id:f,series_id:u,name:h,cover:S}=e.data.meta;c.push({name:"SpaceSeasonDetails",query:{mid:e.mid,type:e.data.type,season_id:f,series_id:u,name:h,cover:S}})};return(f,u)=>{var h,S,m;return t(),p("div",Ps,[s("span",{class:"gamepad-cursor cursor-video-card","data-scroll":"y","data-bf":"100","data-sh":"300","data-wp":".app_space","data-tp":"videoCard","data-card":o.isFirstCard},null,8,Vs),s("div",{class:"season_card--img p_relative cs_pointer",onClick:_},[b(Fa,{src:((h=o.data.meta)==null?void 0:h.cover)||""},null,8,["src"]),s("div",Ms,[s("p",Ls,M(((S=o.data.meta)==null?void 0:S.total)||0)+"\u4E2A\u5185\u5BB9",1),s("p",Us,M(o.data.type==="season"?"\u5408\u96C6":""),1)])]),s("div",Rs,[s("h3",qs,[s("span",{class:"cs_pointer hover_pink ts_all_fast text_ellipsis",onClick:_},M(((m=o.data.meta)==null?void 0:m.name)||"--"),1)]),s("p",Os,M(a(x)),1)])])}}});const Ws={class:"season_card_skeleton"},zs=s("div",{class:"season_card_skeleton--info"},[s("h3",{class:"b_text fs_sm4 font_medium"},"\xA0"),s("p",{class:"b_text text3"},"\xA0")],-1),Zs=W({__name:"SeasonCardSkeleton",setup(o){return(e,c)=>(t(),p("div",Ws,[b(Ta),zs]))}}),Hs={class:"space_seasons mt_xxl i_wrapper"},Gs={key:2,class:"row gutter_md"},js={key:3,class:"row gutter_md"},Js={key:4,class:"flex_center mt_x50 mb_x50"},Ys=W({__name:"SpaceSeasons",setup(o){const e="main.space-seasons-series.0.0.pv",c=R("account"),x=w(1),_=w(20),f=w(0),u=w([]),h=w(!1),S=w(!1),m=Ee();V(u,()=>m.flashPageCursors(200));const d=()=>{var $;h.value||!(($=c.value)!=null&&$.mid)||(h.value=!0,S.value=!1,ka(c.value.mid,x.value,_.value).then(({items_lists:y})=>{var i;f.value=((i=y==null?void 0:y.page)==null?void 0:i.total)||0;const F=((y==null?void 0:y.seasons_list)||[]).map(T=>(T.type="season",T)),k=((y==null?void 0:y.series_list)||[]).map(T=>(T.type="series",T));u.value=[...F,...k]}).catch(y=>{console.error(y),S.value=!0}).finally(()=>{h.value=!1}))},r=()=>{x.value=1,u.value=[],h.value=!1,he.emit("requestScrollToTop"),d()},g=()=>{u.value=[],he.emit("requestScrollToTop"),d()},n=()=>{setTimeout(()=>g(),200)};V(()=>{var $;return($=c.value)==null?void 0:$.mid},()=>r());const{initEnterTime:l,reportPv:v,logOpenAppPage:C}=Ae({spm_id:e,isKeepAlive:!1,pageName:"SpaceVideo"});return pe(()=>{r(),l(),C()}),ye(()=>v()),ve(()=>{r(),te.on("refreshContent",g)}),Te(()=>{te.off("refreshContent",g)}),($,y)=>{const F=z("v-pagenation"),k=z("Scroller");return t(),p("div",Hs,[b(k,{class:"space_seasons--scroller page_scroller ov_visible"},{default:H(()=>[!S.value&&!h.value&&!u.value.length?(t(),E(ge,{key:0,isSmall:""})):S.value&&!h.value&&!u.value.length?(t(),E(Be,{key:1,isSmall:""})):h.value&&!u.value.length?(t(),p("div",Gs,[(t(),p(ae,null,ce(20,i=>s("div",{class:"col_3 col_sm_1_5 mb_xxl",key:i},[b(Zs)])),64))])):(t(),p("div",js,[(t(!0),p(ae,null,ce(u.value,(i,T)=>{var q;return t(),p("div",{class:"col_3 col_sm_1_5 mb_xxl",key:i.aid},[b(Ks,{data:i,mid:(q=a(c))==null?void 0:q.mid,isFirstCard:T===0},null,8,["data","mid","isFirstCard"])])}),128))])),f.value>_.value?(t(),p("div",Js,[b(F,{theme:"pink",pageNum:x.value,"onUpdate:pageNum":y[0]||(y[0]=i=>x.value=i),"page-size":_.value,total:f.value,"show-extend-btn":!1,"show-jump-info":!1,"btn-extra-render":a(Ke),onPageChange:n},null,8,["pageNum","page-size","total","btn-extra-render"])])):B("",!0)]),_:1})])}}}),Xs={0:"\u5173\u6CE8",1:"\u5173\u6CE8",2:"\u5DF2\u5173\u6CE8",3:"\u5DF2\u4E92\u7C89"},Qs=o=>{const{userInfo:e}=Y(_e()),c=w(!1),x=w(!0),_=w(!1),f=w(0),u=w(!1),h=d=>{if(d&&c.value)return;if(!e.value.isLogin)return qe("useFollow.follow");let r=1;c.value&&(r=f.value===1?4:2),xe.followChange({fid:Number(o.value),act:r,re_src:14}).then(g=>{if((g==null?void 0:g.code)===22003){oe({content:(g==null?void 0:g.message)||"\u5173\u6CE8\u5931\u8D25\uFF0C\u8BF7\u5C06\u8BE5\u7528\u6237\u79FB\u9664\u9ED1\u540D\u5355\u4E4B\u540E\u518D\u8BD5"});return}r===1?(c.value=!0,f.value=2,oe({content:"\u5173\u6CE8\u6210\u529F"})):(c.value=!1,oe({content:"\u53D6\u6D88\u5173\u6CE8\u6210\u529F"}))}).catch(g=>{oe({content:g.message||"\u7F51\u7EDC\u5F02\u5E38"})})};function S(d){!d||xe.getRelation(Number(d)).then(r=>{var l,v;if(r.code!==0)return;const g=((l=r.data)==null?void 0:l.relation)||{},n=((v=r.data)==null?void 0:v.be_relation)||{};x.value=!1,g.attribute===1||g.attribute===2||g.attribute===6?(c.value=!0,f.value=g.attribute):c.value=!1,u.value=g.attribute>=128,_.value=n.attribute===2||n.attribute===6})}const m=A(()=>{const d=c.value?2:0,r=_.value?1:0;return Xs[d+r]});return V(o,()=>{e.value.isLogin?(x.value=!0,S(o.value)):x.value=!1},{immediate:!0}),V(e,()=>{e.value.isLogin?S(o.value):c.value=!1}),{followed:c,followText:m,follow:h,loading:x,inBlackList:u}};const eo={class:"wrapper"},ao={class:"app_space--header"},to={class:"app_space--nav mb_20 pl_40 pr_48"},so={key:0,class:"app_space--content"},oo={key:0,class:"app_space--content-tabs"},lo={class:"i_wrapper"},no=W({__name:"Space",setup(o){const{userInfo:e}=_e(),c=Ee(),x=w(),_=na(),f=Ue(),u=[{name:"\u52A8\u6001",key:0,component:bs},{name:"\u6295\u7A3F",key:1,component:Ns},{name:"\u5408\u96C6\u548C\u5217\u8868",key:2,component:Ys}],h=w(),S=w(),m=w(u[0].key),d=w(!1),r=A(()=>f.query.mid||String(e.mid)),g=A(()=>f.query.fromOuterSpmId),{followed:n,follow:l,followText:v,inBlackList:C}=Qs(r),{isOnHistoryGoBack:$}=Y(oa()),{fromOuterSpmId:y}=Y(Oe()),F=w(!1),k=w(1920),i=w(200);let T=r.value;Ge(".app_space");const q=()=>c.flashPageCursors();V(m,()=>c.flashPageCursors(200)),pe(()=>{!$.value&&r.value&&r.value!==String(e.mid)&&(!T||r.value!==T)&&(I.value=void 0),T=r.value;const K=f.query.tab;K&&(m.value=parseInt(K)||0),y.value=g.value});const{spaceFromMessage:J}=Y(la());ye(()=>{he.emit("leaveGallery"),setTimeout(()=>J.value=!1,500)});const{data:I,run:D,loading:L,error:U}=me(()=>Sa({mid:String(r.value)}),{refreshDeps:[r],ready:A(()=>!!r.value)}),{data:O}=me(()=>xa({mid:r.value}),{ready:A(()=>!!r.value),refreshDeps:[r]}),{data:P}=me(()=>$a({vmid:r.value}),{ready:A(()=>!!r.value),refreshDeps:[r]}),{data:N}=me(()=>Aa({mid:r.value}),{ready:A(()=>!!r.value),refreshDeps:[r]});V(I,async()=>{var fe,le,ne,ie;if(!I.value||!Object.keys(I.value).length)return;let K;(le=(fe=I.value)==null?void 0:fe.top_photo_v2)!=null&&le.l_200h_img?K=((ne=I.value.top_photo_v2)==null?void 0:ne.l_200h_img)+"@info":K=((ie=I.value)==null?void 0:ie.top_photo)+"@info";const se=await fetch(K).then(re=>re.json()),{width:ee,height:Se}=se;ee&&Se&&(ee<1920&&ee>0?(k.value=ee,i.value=ee/9.6):(k.value=1920,i.value=200))});const X=A(()=>!f.query.mid||f.query.mid===String(e==null?void 0:e.mid)?"owner":"visitor"),De=A(()=>{var K;return((K=I.value)==null?void 0:K.control)===1&&X.value==="visitor"}),ze=We();Ne(h,([{isIntersecting:K}])=>{!ze.value||(d.value=!K)}),Ne(S,([{isIntersecting:K}])=>{F.value=!K});const Ze=()=>_.emit("loadMore");Z("galleryContainer",".app_space"),Z("account",I),Z("settings",O),Z("relations",P),Z("upStat",N),Z("emitter",_),Z("isOwner",A(()=>X.value==="owner")),Z("isVisitor",A(()=>X.value==="visitor")),ia("Space",()=>{D(),te.emit("refreshContent"),Q.emit("clearSearchKeyWord")}),ra(".app_space");const ke=()=>{d.value=!1,ga({element:x.value.$el,speed:3})};return V(m,()=>ke()),V(I,()=>ke()),V(g,()=>{y.value=g.value}),(K,se)=>{const ee=z("HeaderSlot"),Se=z("VImg"),fe=z("Scroller");return t(),p(ae,null,[d.value?(t(),E(ee,{key:0,class:"space_header_slot"},{default:H(()=>[b(gs,{followed:a(n),followText:a(v),onFollow:a(l)},null,8,["followed","followText","onFollow"])]),_:1})):B("",!0),b(fe,{class:"app_space page_scroller",onLoadMore:Ze,ref_key:"appSpace",ref:x,onScroll:q},{default:H(()=>{var le,ne,ie;return[s("div",eo,[!a(L)&&!a(I)&&a(U)?(t(),E(Be,{key:0})):!a(L)&&!a(I)&&!a(U)?(t(),E(ge,{key:1})):a(L)&&!a(I)&&!a(U)?(t(),E(Ra,{key:2})):a(U)?B("",!0):(t(),p(ae,{key:3},[s("div",ao,[b(Se,{class:"top_photo",src:((ne=(le=a(I))==null?void 0:le.top_photo_v2)==null?void 0:ne.l_200h_img)||((ie=a(I))==null?void 0:ie.top_photo),width:k.value,height:i.value,loading:"lazy",dpr:1,rule:"100q_1c","bfs-style":"pc-space-header-pic"},null,8,["src","width","height"]),s("div",to,[b(es,{class:"mr_65"}),b(vt,{followed:a(n),followText:a(v),onFollow:a(l)},null,8,["followed","followText","onFollow"])]),s("div",{ref_key:"tabsTopRef",ref:S},null,512),s("div",{ref_key:"tabsRef",ref:h,class:"pt_4"},[b(Me,{"active-key":m.value,"onUpdate:active-key":se[0]||(se[0]=re=>m.value=re),tabs:u,isBanned:a(De)},null,8,["active-key","isBanned"])],512)]),a(De)?(t(),E(Ga,{key:1})):(t(),p("div",so,[F.value?(t(),p("div",oo,[s("div",lo,[b(Me,{class:"space-sticky-tabs","active-key":m.value,"onUpdate:active-key":se[1]||(se[1]=re=>m.value=re),tabs:u},null,8,["active-key"])])])):B("",!0),a(C)?(t(),E(ge,{key:1})):(t(),E(Re(u[m.value].component),{key:2,active:d.value,mid:a(r),onHandleScrollToTop:ke},null,40,["active","mid"]))]))],64))])]}),_:1},512)],64)}}});var No=j(no,[["__scopeId","data-v-0c75a404"]]);export{No as default};

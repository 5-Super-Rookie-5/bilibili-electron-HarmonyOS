import"./modulepreload-polyfill.b7f2da20.js";import{o as h,c as b,a as u,i as wn,s as Vn,b as Ht,h as Un,r as tn,S as Ui,d as x1,e as Sr,f as Hi,t as ye,g as de,j as Rt,k as D,u as nn,l as Gi,m as ec,n as Xe,p as qe,q as xe,v as A1,w as At,x as ie,y as st,z as ca,A as K,B as $t,C as jt,D as Cs,E as Ss,F as da,G as ds,H as D1,I as dn,J as ji,K as $l,L as T1,M as ue,N as ut,O as hi,P as se,Q as Pe,R as ke,T as Fe,U as $,V as ee,W as d,X as pe,Y as De,Z as ne,_ as Se,$ as z,a0 as R,a1 as yt,a2 as le,a3 as I1,a4 as pt,a5 as kn,a6 as xn,a7 as An,a8 as wt,a9 as $s,aa as Cn,ab as We,ac as P1,ad as tc,ae as Ge,af as Mn,ag as xl,ah as F1,ai as ei,aj as J,ak as bn,al as Lt,am as R1,an as Ki,ao as Bs,ap as qa,aq as L1,ar as Wi,as as B1,at as xs,au as $r,av as xr,aw as M1,ax as nc,ay as O1,az as N1,aA as V1,aB as mt,aC as ac,aD as U1,aE as Va,aF as H1,aG as Oa,aH as ht,aI as sc,aJ as Be,aK as pa,aL as G1,aM as j1,aN as Ve,aO as ho,aP as Hn,aQ as It,aR as Pa,aS as Ie,aT as Al,aU as Zi,aV as _a,aW as K1,aX as fs,aY as oa,aZ as Ar,a_ as zi,a$ as Dr,b0 as Dl,b1 as gn,b2 as Ho,b3 as Tr,b4 as ic,b5 as W1,b6 as Z1,b7 as qi,b8 as ga,b9 as an,ba as Ms,bb as en,bc as z1,bd as q1,be as _s,bf as Go,bg as Y1,bh as X1,bi as J1,bj as Q1,bk as ef,bl as tf,bm as Tl,bn as nf,bo as af,bp as sf,bq as of,br as rf,bs as ta,bt as Il,bu as Pl,bv as lf,bw as uf,bx as cf,by as As,bz as df,bA as oc,bB as ff,bC as mo,bD as vf,bE as hf,bF as mf,bG as rc,bH as Fl,bI as pf,bJ as _f,bK as gf,bL as Xt,bM as po,bN as yf,bO as wf}from"./index.f074ecef.js";import{I as Kt,a as Si,b as bf,c as Ef,d as kf,e as Cf}from"./ico_max_exit.f7f1ea61.js";import{_ as Je}from"./plugin-vue_export-helper.21dcd24c.js";import{f as lc,i as Sf,t as $f,a as xf,u as uc,g as cc,W as mi,I as dc,b as fc,V as Za,P as vc,_ as hc,c as mc,s as Ga,o as Ir,x as Af,B as $i,U as Df,d as Tf,e as pc,h as Fa,j as _c,v as Rl,k as Ll,r as If,l as Pf,m as Ff,T as Rf,D as Lf,n as Bf,p as Bl,C as Ml,q as Ol}from"./MoreFeedback.eac5fca1.js";import{g as jo,a as vs,R as vn,b as Mf,s as Of,M as pn,c as gc,p as Nf,D as Vf,d as Pr,r as Uf,L as Yi,e as Hf,f as Gf,T as Ln,_ as yc,h as jf,i as Kf,w as Wf,I as Zf,j as zf,k as ti,u as wc,l as qf,m as Yf,n as Xf,V as bc,o as Jf,q as Ec,t as kc,v as Cc,x as Qf,y as e0,z as t0,A as os,B as Sc,C as Nl,E as n0,F as a0,G as s0,H as Vl,J as $c,K as i0,N as Os,O as xc,P as Ac,Q as o0,S as r0,U as l0,W as u0,X as c0,Y as d0,Z as f0,$ as v0,a0 as Ul,a1 as h0,a2 as m0,a3 as p0,a4 as _0,a5 as g0,a6 as y0,a7 as w0}from"./index.14a3ec94.js";import{i as b0}from"./isUdf.1a76b9f4.js";import{g as Dc,b as E0,S as k0,i as Ko,N as Zn,_ as Tc,a as C0,c as S0,u as Fr,d as $0,e as x0,f as A0,F as D0,h as T0,j as I0,k as P0,l as F0,m as R0,n as L0,o as B0,I as M0,P as O0,R as N0,p as V0,q as U0,r as H0,s as G0,t as j0}from"./App.c1beb0e9.js";import{_ as Ic}from"./btn_devtools.06ffa497.js";import{I as K0}from"./ico_pin.a6faa7a5.js";import{v as Pc,w as Fc,a as W0,B as ja}from"./style.2070e26d.js";/* empty css               */import{D as Z0}from"./theme-map.a3b52bba.js";import{C as z0}from"./index.733b73c2.js";const q0="modulepreload",Hl={},Y0="./",Oe=function(t,n){return!n||n.length===0?t():Promise.all(n.map(a=>{if(a=`${Y0}${a}`,a in Hl)return;Hl[a]=!0;const s=a.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${i}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":q0,s||(o.as="script",o.crossOrigin=""),o.href=a,document.head.appendChild(o),s)return new Promise((c,r)=>{o.addEventListener("load",c),o.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())},X0={viewBox:"0 0 1024 1024"},J0=u("path",{d:"M690.56 766.672 435.776 511.904l251.488-251.488A48 48 0 1 0 622.8 189.36l-.128-.128-288 288 .016.016A47.84 47.84 0 0 0 320 511.792v.224c0 13.584 5.632 25.808 14.688 34.544l-.016.016 288 288 .016-.016a48 48 0 0 0 67.872-67.888z",fill:"currentColor"},null,-1),Q0=[J0];function ev(e,t){return h(),b("svg",X0,[...Q0])}var Rc={render:ev};const tv={width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nv=u("path",{d:"M4.563 5.897a.562.562 0 0 1-.562-.562V3.876c0-.621.504-1.125 1.125-1.125h15.748c.621 0 1.125.504 1.125 1.125v1.459c0 .31-.252.562-.562.562H4.563Z",fill:"currentColor"},null,-1),av=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.999 23.12c0 .845-.9 1.389-1.648.995l-7.464-3.923-7.246 3.736a1.125 1.125 0 0 1-1.64-1V8.595c0-.62.504-1.124 1.125-1.124h15.748c.621 0 1.125.503 1.125 1.124V23.12Zm-9.478-11.964c-.3-.19-.686-.208-1.004-.046a.924.924 0 0 0-.517.82v3.716c0 .343.198.657.517.82.318.16.704.143 1.004-.047l2.934-1.858a.918.918 0 0 0 .435-.774c0-.31-.163-.6-.435-.773l-2.934-1.858Z",fill:"currentColor"},null,-1),sv=[nv,av];function iv(e,t){return h(),b("svg",tv,[...sv])}var ov={render:iv};const rv={width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},lv=u("path",{d:"M8.185 18.777c-2.393 0-4.333-1.724-4.333-3.852h8.666c0 2.128-1.94 3.852-4.333 3.852ZM18.778 18.777c0 2.394-1.725 4.334-3.852 4.334v-8.667c2.127 0 3.852 1.94 3.852 4.333ZM8.185 8.185c0 2.393 1.725 4.333 3.852 4.333V3.851c-2.127 0-3.852 1.94-3.852 4.334ZM18.778 8.185c-2.393 0-4.333 1.725-4.333 3.852h8.666c0-2.127-1.94-3.852-4.333-3.852Z",fill:"currentColor",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),uv=[lv];function cv(e,t){return h(),b("svg",rv,[...uv])}var dv={render:cv};const fv={width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vv=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.919 4.718a.963.963 0 0 0-1.541 1.156L9.39 7.223c-.652.003-1.209.013-1.684.052-.67.055-1.262.17-1.812.45a4.622 4.622 0 0 0-2.02 2.02c-.28.55-.396 1.143-.45 1.813-.054.65-.054 1.45-.054 2.44v2.336c0 .99 0 1.791.053 2.44.055.67.171 1.263.451 1.813a4.622 4.622 0 0 0 2.02 2.02c.55.28 1.143.396 1.812.45.65.054 1.451.054 2.441.054h6.669c.99 0 1.791 0 2.44-.053.67-.055 1.263-.17 1.813-.451a4.621 4.621 0 0 0 2.02-2.02c.28-.55.396-1.142.45-1.812.054-.65.054-1.451.054-2.44v-2.336c0-.99 0-1.792-.053-2.441-.055-.67-.171-1.262-.451-1.812a4.622 4.622 0 0 0-2.02-2.02c-.55-.28-1.143-.396-1.812-.451a22.668 22.668 0 0 0-1.684-.052l1.012-1.35a.963.963 0 1 0-1.54-1.155l-1.878 2.504h-3.37L9.918 4.718Zm1.637 8.763a.963.963 0 0 0-1.926 0v3.37a.963.963 0 1 0 1.926 0v-3.37Zm5.777 0a.963.963 0 0 0-1.926 0v3.37a.963.963 0 0 0 1.926 0v-3.37Z",fill:"currentColor"},null,-1),hv=[vv];function mv(e,t){return h(),b("svg",fv,[...hv])}var pv={render:mv};const _v={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gv=u("path",{d:"M22.522 25.326H9.481a4.286 4.286 0 0 1-4.28-4.28V10.92c0-2.36 1.918-4.28 4.28-4.28H22.52c2.358 0 4.28 1.918 4.28 4.28v10.125a4.284 4.284 0 0 1-4.278 4.28ZM9.481 8.801c-1.169 0-2.12.951-2.12 2.12v10.125c0 1.168.951 2.12 2.12 2.12H22.52c1.168 0 2.12-.952 2.12-2.12V10.92c0-1.169-.952-2.12-2.12-2.12H9.48Z",fill:"currentColor"},null,-1),yv=u("path",{d:"M16 17.44c-.586 0-1.173-.16-1.683-.478l-.068-.046-5.05-3.728c-.455-.335-.533-.953-.171-1.376.36-.425 1.022-.495 1.475-.16l5.01 3.7a.99.99 0 0 0 .975 0l5.01-3.7c.453-.335 1.115-.265 1.475.16a.936.936 0 0 1-.172 1.376l-5.12 3.774A3.186 3.186 0 0 1 16 17.44Z",fill:"currentColor"},null,-1),wv=[gv,yv];function bv(e,t){return h(),b("svg",_v,[...wv])}var Ev={render:bv};const kv={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Cv=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.262 7.298a1.044 1.044 0 0 1 1.476 0l4.071 4.07a1.044 1.044 0 0 1-1.476 1.477l-2.29-2.29v8.066a1.044 1.044 0 1 1-2.087 0v-8.066l-2.29 2.29a1.044 1.044 0 0 1-1.475-1.476l4.071-4.071Zm-6.047 11.74c-.623 0-1.128.504-1.128 1.127v1.628c0 .623.505 1.128 1.128 1.128h13.57c.623 0 1.128-.505 1.128-1.128v-1.628c0-.623-.505-1.128-1.128-1.128h-2.714a1.044 1.044 0 0 1 0-2.087h2.714A3.215 3.215 0 0 1 26 20.165v1.628a3.215 3.215 0 0 1-3.215 3.215H9.215A3.215 3.215 0 0 1 6 21.793v-1.628a3.215 3.215 0 0 1 3.215-3.215h2.714a1.044 1.044 0 1 1 0 2.087H9.215Z",fill:"currentColor"},null,-1),Sv=[Cv];function $v(e,t){return h(),b("svg",kv,[...Sv])}var xv={render:$v};const Av={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},Dv=u("path",{d:"M5.55 6.805c-.83.919-1.548 2.351-2.164 4.361-.547 1.786-.735 3.39-.588 4.641.148 1.255.61 2.025 1.233 2.407.916.56 1.87.335 3.274-.344.224-.108.475-.237.738-.371.464-.237.965-.493 1.425-.694.758-.332 1.62-.62 2.534-.62.916 0 1.776.288 2.535.62.46.2.961.457 1.425.695.262.134.512.262.737.37 1.401.68 2.354.905 3.27.344.623-.382 1.085-1.151 1.233-2.407.147-1.251-.04-2.855-.588-4.64-.617-2.01-1.334-3.443-2.164-4.362-.797-.88-1.708-1.305-2.848-1.305-.396 0-.764.163-1.367.461l-.066.033c-.53.263-1.28.636-2.169.636-.88 0-1.637-.372-2.17-.635a48.659 48.659 0 0 0-.066-.032c-.61-.3-.981-.463-1.366-.463-1.14 0-2.051.424-2.848 1.305zM4.066 5.464C5.216 4.193 6.654 3.5 8.398 3.5c.892 0 1.653.375 2.19.64.02.009.04.018.058.028.615.302.979.462 1.354.462.38 0 .74-.16 1.348-.461l.054-.027c.536-.266 1.295-.642 2.2-.642 1.744 0 3.183.693 4.331 1.964 1.116 1.233 1.94 2.987 2.593 5.116.6 1.957.852 3.85.662 5.46-.189 1.607-.84 3.063-2.175 3.88-1.891 1.158-3.758.442-5.186-.25-.317-.153-.602-.3-.876-.44-.411-.212-.795-.41-1.216-.593-.661-.29-1.223-.452-1.733-.452-.509 0-1.071.162-1.733.452-.42.184-.805.381-1.216.593-.274.14-.56.287-.877.44-1.43.692-3.297 1.408-5.189.25-1.334-.817-1.986-2.273-2.175-3.879-.19-1.61.062-3.504.662-5.461.653-2.13 1.477-3.883 2.592-5.116z",fill:"currentColor"},null,-1),Tv=u("path",{d:"M7 9.5a1 1 0 1 1 2 0V14a1 1 0 1 1-2 0V9.5z",fill:"currentColor"},null,-1),Iv=u("path",{d:"M5.75 12.75a1 1 0 0 1 0-2h4.5a1 1 0 0 1 0 2h-4.5zM17.25 14.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0zM19.25 11.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0z",fill:"currentColor"},null,-1),Pv=[Dv,Tv,Iv];function Fv(e,t){return h(),b("svg",Av,[...Pv])}var Rv={render:Fv};const Lv={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bv=u("path",{opacity:".01",d:"M4 4h24v24H4V4Z",fill:"currentColor"},null,-1),Mv=u("path",{d:"M25.111 17.323c.124-.862-.58-1.502-1.316-1.502A5.973 5.973 0 0 1 17.87 9.08l-.991-.126.991.127c.124-.969-.492-2.284-1.869-2.284a9.205 9.205 0 0 0 0 18.41c4.636 0 8.47-3.425 9.111-7.883Z",stroke:"currentColor","stroke-width":"2"},null,-1),Ov=[Bv,Mv];function Nv(e,t){return h(),b("svg",Lv,[...Ov])}var Vv={render:Nv};const Uv={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Hv=u("path",{d:"M8.3 16a1.1 1.1 0 0 0-1.1-1.1H6.1a1.1 1.1 0 0 0 0 2.2h1.1A1.1 1.1 0 0 0 8.3 16Zm.704 5.5-.781.781a1.1 1.1 0 0 0 0 1.551 1.1 1.1 0 0 0 1.551 0l.781-.781A1.1 1.1 0 0 0 9.004 21.5ZM16 8.3a1.1 1.1 0 0 0 1.1-1.1V6.1a1.1 1.1 0 0 0-2.2 0v1.1A1.1 1.1 0 0 0 16 8.3Zm6.226 2.574a1.1 1.1 0 0 0 .77-.319l.781-.781a1.099 1.099 0 1 0-1.551-1.551l-.726.781a1.1 1.1 0 0 0 0 1.551 1.1 1.1 0 0 0 .726.319Zm-13.2-.319a1.1 1.1 0 0 0 1.551 0 1.1 1.1 0 0 0 0-1.551l-.781-.781a1.105 1.105 0 0 0-1.573 1.551l.803.781ZM25.9 14.9h-1.1a1.1 1.1 0 0 0 0 2.2h1.1a1.1 1.1 0 0 0 0-2.2Zm-2.904 6.6a1.1 1.1 0 0 0-1.496 1.496l.781.781a1.1 1.1 0 0 0 1.551 0 1.1 1.1 0 0 0 0-1.551l-.836-.726ZM16 9.95A6.05 6.05 0 1 0 22.05 16 6.06 6.06 0 0 0 16 9.95Zm0 9.9a3.85 3.85 0 1 1 0-7.7 3.85 3.85 0 0 1 0 7.7Zm0 3.85a1.1 1.1 0 0 0-1.1 1.1v1.1a1.1 1.1 0 0 0 2.2 0v-1.1a1.1 1.1 0 0 0-1.1-1.1Z",fill:"currentColor"},null,-1),Gv=[Hv];function jv(e,t){return h(),b("svg",Uv,[...Gv])}var Kv={render:jv};const Wv={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zv=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 11.4a4.6 4.6 0 1 0 0 9.201 4.6 4.6 0 0 0 0-9.2Zm-.995 2.198a2.602 2.602 0 0 1 3.595 2.403 2.6 2.6 0 1 1-3.595-2.403Z",fill:"currentColor"},null,-1),zv=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.149 5.862a4.067 4.067 0 0 1 3.702 0l5.933 3.033A4.067 4.067 0 0 1 26 12.517v6.904a4.068 4.068 0 0 1-2.186 3.605l-5.932 3.096a4.067 4.067 0 0 1-3.764 0l-5.933-3.096A4.067 4.067 0 0 1 6 19.421v-6.904a4.07 4.07 0 0 1 2.216-3.622l5.933-3.033Zm.91 1.781a2.067 2.067 0 0 1 1.882 0l5.933 3.033A2.067 2.067 0 0 1 24 12.517v6.904a2.067 2.067 0 0 1-1.111 1.832l-5.932 3.096a2.068 2.068 0 0 1-1.914 0L9.11 21.253A2.065 2.065 0 0 1 8 19.421v-6.904a2.067 2.067 0 0 1 1.126-1.841l5.878-3.005h.001l.054-.028Z",fill:"currentColor"},null,-1),qv=[Zv,zv];function Yv(e,t){return h(),b("svg",Wv,[...qv])}var Lc={render:Yv},Xv="./assets/empty.118f95f1.png";function Jv(e){return e.replace(/\\u\{?([0-9a-fA-F]+)\}?/g,function(t,n){return String.fromCodePoint(parseInt(n,16))})}function Qv(e){b0(e)&&(e=new Date);var t=lc(e);return t?t.setHours(0,0,0,0):NaN}function Bc(e,t){var n=lc(e);if(!n)return"";t||(t={});var a=t.justNow||"\u521A\u521A",s=t.minutesAgo||"\u5206\u949F\u524D",i=t.hoursAgo||"\u5C0F\u65F6\u524D",o=t.yesterday||"\u6628\u5929",c=t.future||"",r=Date.now();if(e=n.valueOf(),r<e)return c;if(r-e<=6e4)return a;if(r-e<36e5)return Math.floor((r-e)/6e4)+s;if(r-e<864e5)return Math.floor((r-e)/36e5)+i;if(Qv(new Date)-e<864e5)return o;var l=n.getFullYear(),f="0".concat(n.getMonth()+1).substr(-2),v="0".concat(n.getDate()).substr(-2);return l===new Date().getFullYear()?"".concat(f,"-").concat(v):"".concat(l,"-").concat(f,"-").concat(v)}function eh(e){if(!e)return"";var t=e.replace(/^(http:\/\/|:\/\/|\/\/|\/)/,"https://");return/^https:\/\//.test(t)?t:e}function th(e,t){Sf(e)&&e.focus&&setTimeout(function(){if(wn(t)||(t=(e.value||"").length),e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}})}const _o="KEY_SELECTED_DM_SWITCH",go="KEY_SELECTED_QN_CONFIG",Wo="KEY_SELECTED_RATE_CONFIG",yo="KEY_SELECTED_VOLUME_CONFIG";var hs=(e=>(e[e.DEFAULT=1]="DEFAULT",e[e.SEARCH_LIST=2]="SEARCH_LIST",e[e.HISTORY_LIST=3]="HISTORY_LIST",e[e.SUGGESTION=4]="SUGGESTION",e))(hs||{}),Zo=(e=>(e.RANKING_CARD_TYPE_VIDEO="video",e.RANKING_CARD_TYPE_BANGUMI="bangumi",e))(Zo||{});function Mc(e,t,n,a,s,i){const o=`${Vn.api}/x/web-interface/wbi/index/top/feed/rcmd`,{isWeChatInstalled:c}=Ht("thirdParty/getWeChatInstallInfo");return Un.get(o,{params:{fresh_idx:e,ps:t,plat:1,feed_version:n,fresh_type:a,x_num:s,y_num:i,pc_wx_install:c?1:0,pc_wx_gm_install:0},isWbi:!0}).then(tn)}function fI(e){const t=`${Vn.api}/x/web-interface/popular?ps=${e.ps||40}&pn=${e.pn}`;return Un.get(t,{isWbi:!0}).then(tn)}function vI(){const e=`${Vn.api}/x/web-interface/popular/series/list`;return Un.get(e,{isWbi:!0}).then(tn)}function hI(e){const t=`${Vn.api}/x/web-interface/popular/series/one?number=${e.number}`;return Un.get(t,{isWbi:!0}).then(tn)}function mI(){const e=`${Vn.api}/x/web-interface/popular/precious`;return Un.get(e,{isWbi:!0}).then(tn)}async function pI(e){var a,s;if((e==null?void 0:e.type)==="bangumi"||(e==null?void 0:e.type)==="cinema"){const i=e.season_type;let o=`${Vn.api}/pgc/web/rank/list?day=${3}&season_type=${i}`;const c=[2,3,4,5].indexOf(i)!==-1;c&&(o=`${Vn.api}/pgc/season/rank/web/list?day=${3}&season_type=${i}`);try{const r=await Un.get(o,{isWbi:!0});let l=null;return c?l=r.data:l=r.result,(a=l.list)==null?void 0:a.map((v,m)=>({type:Zo.RANKING_CARD_TYPE_BANGUMI,bangumiInfo:$f(v,m),order:m+1}))}catch(r){return Promise.reject(r)}}const n=`${Vn.api}/x/web-interface/ranking/v2?rid=${e.tid}&type=${e.rank_type||"all"}`;try{return(s=(await Un.get(n,{isWbi:!0})).data.list)==null?void 0:s.map((r,l)=>({type:Zo.RANKING_CARD_TYPE_VIDEO,videoInfo:xf(r,l,`${Ui.homeHot}.pv`),order:l+1}))}catch(i){return Promise.reject(i)}}function nh(e,t){return Un.post(`//api.bilibili.com/x/relation/modify?${x1}`,{act:t?2:1,fid:e,spmid:"",re_src:0},{isWbi:!0}).then(tn)}function ah(e,t){return Sr.get("//api.bilibili.com/x/msgfeed/reply",{params:{id:e,reply_time:t,platform:"web",build:0,mobi_app:"web"}}).then(tn)}function sh(e,t){return Sr.get("//api.bilibili.com/x/msgfeed/at",{params:{id:e,at_time:t,platform:"web",build:0,mobi_app:"web"}}).then(tn)}function ih(e,t){return Sr.get("//api.bilibili.com/x/msgfeed/like",{params:{id:e,like_time:t,platform:"web",build:0,mobi_app:"web"}}).then(tn)}function Rr(e,t){return Hi.post("//api.bilibili.com/x/msgfeed/del",{tp:t,id:e})}function oh(e,t,n){return Hi.post("//api.bilibili.com/x/msgfeed/notice",{mobi_app:"web",platform:"web",tp:t,id:e,notice_state:n})}function rh(e){const t="https://le3-api.game.bilibili.com/pc/client/entrance/notice?platform=pc_client";return Hi.get(t).then(tn)}const wo=(e,t)=>{var s,i;const n=window,a=(i=(s=n.biliPlayer)==null?void 0:s.getPlaybackRate)==null?void 0:i.call(s);if(a){const o=["0.5","0.75","1.0","1.25","1.5","1.75","2.0"];let c=o.findIndex(l=>a===+l);c===-1&&(c=2),e?c=c<o.length-1?c+1:o.length-1:c=c>0?c-1:0,n.biliPlayer.setPlaybackRate(+o[c]);const r=`${o[c]}x\u64AD\u653E`;t?xi(r,t):ye({content:r,parent:document.querySelector(".app_selected--content")})}},bo=(e,t)=>{var s,i;const n=window,a=(i=(s=n.biliPlayer)==null?void 0:s.getVolume)==null?void 0:i.call(s);if(wn(a)){let o=a;e?(o<.1?o+=.02:o+=.1,o>1&&(o=1)):(o<=.1?o-=.02:o<.2?o-=.05:o-=.1,o<0&&(o=0)),n.biliPlayer.setVolume(o);const c=o?`\u97F3\u91CF\uFF1A${Math.round(o*100)}%`:"\u9759\u97F3";t?xi(c,t):ye({content:c,parent:document.querySelector(".app_selected--content")})}},xi=(e,t)=>{var s,i;const n=window,a=t.querySelector(".app_selected--shown .bpx-player-video-area");a&&((i=(s=n.biliPlayer)==null?void 0:s.tooltip)==null||i.remove("shortcut"),setTimeout(()=>{var o,c;(c=(o=n.biliPlayer)==null?void 0:o.tooltip)==null||c.create({name:"shortcut",target:a,title:e,position:5,duration:1500})}))},lh=({width:e,height:t})=>{const n=e/t,a=180,s=240,i=320,o={width:i,height:s,bfsStyle:""};return e<a*2?n>=1?(o.width=a,o.height=o.width/n,o.bfsStyle="pc-dynamic-sm-short",o):n<.75?(o.height=s,o.width=o.height*n,o.bfsStyle="pc-dynamic-sm-long",o):(o.width=s,o.height=o.width/n,o.bfsStyle="pc-dynamic-sm-middle",o):e>i*3?n>=1?(o.width=i,o.height=o.width/n,o.bfsStyle="pc-dynamic-lg-short",o):n<.75?(o.width=s,o.height=i,o.bfsStyle="pc-dynamic-lg-long",o):(o.width=s,o.height=o.width/n,o.bfsStyle="pc-dynamic-lg-middle",o):n>=1?(o.width=s,o.height=o.width/n,o.bfsStyle="pc-dynamic-md-short",o):n<.75?(o.width=s,o.height=i,o.bfsStyle="pc-dynamic-md-long",o):(o.width=s,o.height=o.width/n,o.bfsStyle="pc-dynamic-md-middle",o)},uh=e=>{switch(e.type){case vn.RICH_TEXT_NODE_TYPE_AT:return vs({type:"at",data:{text:e.text,rid:e.rid},unique:!1});case vn.RICH_TEXT_NODE_TYPE_LOTTERY:return vs({type:"lottery",data:{text:e.text,rid:e.rid},unique:!0});case vn.RICH_TEXT_NODE_TYPE_VOTE:return vs({type:"vote",data:{text:e.text,rid:e.rid},unique:!0});case vn.RICH_TEXT_NODE_TYPE_EMOJI:return Mf(e.text,{type:e.emoji.type,size:e.emoji.size,text:e.emoji.text,id:0,src:e.emoji.icon_url});case vn.RICH_TEXT_NODE_TYPE_BV:return vs({type:"bv",data:{text:e.text,rid:e.rid},unique:!0});case vn.RICH_TEXT_NODE_TYPE_TEXT:default:return jo(e.text)}},Oc=(e,t)=>[jo("//"),vs({type:"at",data:{rid:e.uid,text:`@${e.name}`},unique:!1}),jo(":"),...t.map(uh)],Lr=(e,t)=>t.length?Of(e,new RegExp(/@[^\s$]{1,16}/g)).map(a=>{if(a.type){const s=t.find(i=>i.name===a.text.substring(1));if(s)return{type:vn.RICH_TEXT_NODE_TYPE_AT,text:a.text,orig_text:a.text,rid:String(s.mid)}}return{type:vn.RICH_TEXT_NODE_TYPE_TEXT,text:a.text,orig_text:a.text}}):e?[{type:vn.RICH_TEXT_NODE_TYPE_TEXT,text:e,orig_text:e}]:[],ch=e=>t=>{var a,s,i;const n=(a=t.modules)==null?void 0:a.find(o=>o.module_type===pn.MODULE_TYPE_AUTHOR);return((i=(s=n==null?void 0:n.module_author)==null?void 0:s.user)==null?void 0:i.mid)!==e},Nc=async(e,t)=>{try{await nh(e,t);const n={mid:e,isFollow:!t};return de.emit("relationChange",n),n}catch(n){return Promise.reject(n)}},dh=(e,t,n)=>Math.max(t,Math.min(n,e));let ni=null,rs=null;const Vc=e=>{if(ni)return ni;const t=`#version 300 es
    precision mediump float;

    layout(location = 0) in vec2 i_position;

    out vec2 position;

    void main() {
      position = i_position;
      gl_Position = vec4(position, 0., 1.);
    }
  `,n=`#version 300 es
    precision mediump float;

    uniform sampler2D screen;
    uniform float aspect;
    uniform float scale;
    uniform float inside;
    uniform float pct;
    uniform vec2 center;

    in vec2 position;
    out vec4 fragColor;

    void main() {
      vec2 p = vec2(position.x * aspect, position.y);
      float d = length(p - center);
      fragColor = vec4(vec3(pct), 1.);

      bool b_inside = inside > 0.5;
      float n_pct = b_inside ? 1. - pct : pct;
      bool transparent = d > n_pct * scale;
      if(b_inside ? transparent : !transparent) {
        fragColor = vec4(0., 0., 0., 0.);
      } else {
        vec2 uv = position / 2. + 0.5;
        uv.y = 1. - uv.y;
        // getBitmap() \u8FD4\u56DE\u7684r\u901A\u9053\u548Cb\u901A\u9053\u662F\u53CD\u7684?
        fragColor = texture(screen, uv).bgra;
      }
    }
  `;return ni=new k0({gl:e,vs:t,fs:n}),ni},Uc=e=>{if(rs)return rs;const t=new Float32Array([-1,1,-1,-1,1,1,1,-1]);rs=e.createVertexArray();const n=e.createBuffer();return e.bindVertexArray(rs),e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!0,8,0),rs},fh=()=>{const e=Dc();Vc(e),Uc(e)},vh=async({buffer:e,width:t,height:n},a,s)=>{const i=Dc(),o=Vc(i),c=Uc(i),r=500,l=t/n,f=[a.left+a.width/2,window.innerHeight-(a.top+a.height/2)],v=[(2*f[0]/window.innerWidth-1)*l,2*f[1]/window.innerHeight-1],m=l-v[0],g=1-v[1],y=Math.sqrt(m*m+g*g);o.use(),o.setUniform("aspect","FLOAT",l),o.setUniform("center","VEC2",v),o.setUniform("scale","FLOAT",y),o.setUniform("inside","FLOAT",Number(s==="light"));const E=new ImageData(new Uint8ClampedArray(e),t,n),_=i.createTexture();i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,_),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,WebGL2RenderingContext.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,WebGL2RenderingContext.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,WebGL2RenderingContext.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,WebGL2RenderingContext.LINEAR),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,E),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,_);const p=E0(.65,0,.35,1);let C=-1;const S=x=>{i.clear(i.COLOR_BUFFER_BIT);const w=dh((x-C)/r,0,1);o.use(),o.setUniform("pct","FLOAT",p(w)),i.bindVertexArray(c),i.drawArrays(i.TRIANGLE_STRIP,0,4)};return new Promise(x=>{const w=k=>{C<0&&(C=k),C+r>k?(requestAnimationFrame(w),S(k)):(x(),i.clear(i.COLOR_BUFFER_BIT))};requestAnimationFrame(w)})};class Gl{constructor(t){this.limit=2618,this.step=109.1,this.pos=0,this.speed=50,this.timer=null,this.el=t}start(){!this.el||this.timer||(this.timer=setInterval(()=>{this.pos-=this.step,Math.abs(this.pos)>this.limit-this.step&&(this.pos=0),this.setPosition()},this.speed))}stop(){clearInterval(this.timer),this.timer=null}setPosition(){this.el.style.backgroundPosition=`${this.pos}px`}}const hh=()=>{const t=document.createElement("canvas").getContext("webgl"),n={webgl_version:"",webgl_shading_language_version:"",webgl_vendor:"",webgl_renderer:""};if(t){const a=t.getExtension("WEBGL_debug_renderer_info");a?(n.webgl_renderer=t.getParameter(a.UNMASKED_RENDERER_WEBGL),n.webgl_vendor=t.getParameter(a.UNMASKED_VENDOR_WEBGL)):(n.webgl_renderer=t.getParameter(t.RENDERER),n.webgl_vendor=t.getParameter(t.VENDOR)),n.webgl_version=t.getParameter(t.VERSION),n.webgl_shading_language_version=t.getParameter(t.SHADING_LANGUAGE_VERSION)}Rt("auth/setGaiaFpWebgl",n)};let jl=!0,Kl=Date.now(),Wl=null;const Br=(e={})=>{const t=D(Date.now()),n=D(e.spm_id),a=D(e.pageName),s=nn(),i=D(e.routeName||s.name),o=Ko(e.isKeepAlive)?e.isKeepAlive:!0,c=Ko(e.isCustom)?e.isCustom:!1,r=()=>t.value=Date.now(),l=()=>{clearTimeout(Wl),Wl=setTimeout(()=>{xe({type:"pv",spm_info:n.value},{appPageViewInfo:{duration:Date.now()-t.value,pvstart:t.value,pvend:Date.now()}})},500)},f=()=>{(jl||s.name===i.value&&Date.now()-Kl>200)&&(jl=!1,Kl=Date.now(),A1(a.value),de.emit("pageSpmIdChange",n.value))},v=y=>{s.name===i.value&&(y?r():l())},m=()=>{r(),f(),de.on("windowFocusChange",v)},g=()=>{l(),de.off("windowFocusChange",v)};return c||(o?(Gi(()=>m()),ec(()=>g())):(Xe(()=>m()),qe(()=>g()))),{spmId:n,pageName:a,reportPv:l,initEnterTime:r,logOpenAppPage:f}},Hc=(e,t=!1)=>{const n=()=>{const a=document.querySelector(e);a&&(a.style.opacity=0,a.style.transition="none",setTimeout(()=>{a.style.transition="all .3s ease-in-out",a.style.opacity=1}))};return t||Gi(()=>At(()=>n())),{handlePageFadeIn:n}},Mr=e=>{const t=D("initial"),n=D(e);return{status:t,list:n,filter:i=>{const o=e.filter(i);gc(e,...o)},reset:()=>{t.value="initial",n.value=[]}}},Gc=(e,t,n="",a,s=!1,i="")=>{const{userInfo:o}=ie(st()),c=ca({count:t}),r=K(()=>c.count?$t(c.count):n),l=()=>{if(de.emit("hidePopover"),s){ye({content:i||"\u7981\u6B62\u8F6C\u53D1"});return}if(!o.value.isLogin){jt("useDynamicForward.handleForward");return}de.emit("forwardDynamic",{id:e,defaultContent:a})},f=v=>{v.id===e&&v.module==="stat"&&v.key==="forwardState"&&(wn(v.state.count)?c.count=v.state.count:v.state.offset&&(c.count+=v.state.offset))};return de.on("syncDynamicState",f),qe(()=>{de.off("syncDynamicState",f)}),{forwardState:c,forwardText:r,handleForward:l}},jc=(e,t,{count:n,active:a},s="")=>{const{userInfo:i}=ie(st()),o=ca({count:n,active:a,loading:!1}),c=K(()=>o!=null&&o.count?$t(o==null?void 0:o.count):s),r=async()=>{if(de.emit("hidePopover"),!i.value.isLogin){jt("useDynamicLike.handleLike");return}if(o.loading)return;const f=()=>{o.active?(o.active=!1,o.count--):(o.active=!0,o.count++)};try{f(),o.loading=!0;const v={dynamic_id:e,up:o.active?1:2,spmid:t,from_spmid:"",statistics:JSON.stringify({appId:Cs,platform:Ss})};await Nf(v),o.active&&ye({content:"\u70B9\u8D5E\u6210\u529F"}),de.emit("syncDynamicState",{id:e,module:"stat",key:"likeState",state:{active:o.active,count:o.count}})}catch{f()}o.loading=!1},l=f=>{f.id===e&&f.module==="stat"&&f.key==="likeState"&&(o.count=f.state.count,o.active=f.state.active)};return de.on("syncDynamicState",l),qe(()=>{de.off("syncDynamicState",l)}),{likeState:o,likeText:c,handleLike:r}},mh=(e,t,n="")=>{const a=ca({count:t}),s=K(()=>a.count?$t(a.count):n),i=o=>{o.id===e&&o.module==="stat"&&o.key==="commentState"&&(wn(o.state.count)?a.count=o.state.count:o.state.offset&&(a.count+=o.state.offset))};return de.on("syncDynamicState",i),qe(()=>{de.off("syncDynamicState",i)}),{commentState:a,commentText:s}},Kc=(e,t=!1)=>{const n=D(t),a=s=>{s.mid===e&&(n.value=s.isFollow)};return de.on("relationChange",a),qe(()=>{de.off("relationChange",a)}),{isFollow:n}},Or=()=>{let e=0;const t=D(`${Ui.selected}.pv`),n=D({}),a=D({}),s=K(()=>a.value.track_id||""),i=K(()=>a.value._location||0),o=D(""),c=D(null),r=D(!1),l=D(Date.now()),{appInfo:f}=ie(da()),{userInfo:v}=ie(st());let m=ds("player-did")||"";const g=()=>{const x=n.value.getManifest(),w=n.value.getMediaInfo(),k=n.value.getCurrentTime(),T=n.value.getDuration(!0),A=n.value.getSession();return{...x,...w,ctime:k,duration:T,session:A}},y=()=>{l.value=Date.now(),E()},E=async()=>{var O,G,X;if(r.value)return;r.value=!0;const{build:x,buvid:w,mobi_app:k,platform_:T,device:A}=f.value,F={...c.value,build:x,buvid:w,did:m||"",play_mode:1,auto_play:99,spmid:t.value,from_spmid:o.value,track_id:s.value,playlist_type:"",playlist_id:"",extra:JSON.stringify({location:i.value}),mobi_app:k,device:A,platform:T,statistics:JSON.stringify({appId:Cs,platform:Ss})};if(e=Date.now()/1e3,!(!(F!=null&&F.cid)||!(F!=null&&F.aid))){(G=(O=n.value)==null?void 0:O.clearAltAbsolutePlayTime)==null||G.call(O),_({ctime:0,maxTime:0,absolutePlayTime:0},!0),F.did=m;try{const H=await D1(F),L=(X=H==null?void 0:H.data)==null?void 0:X.rpdid;L&&(m=L,dn("player-did",L))}catch(H){if((H==null?void 0:H.code)===-400)return;xe({type:"click",spm_info:"main.play-detail.v-error.0"},{msg:JSON.stringify(F)}),console.error("playerFirstPlay",H,F)}try{xe({type:"pv",spm_info:"app.main.player.vv"},{msg:JSON.stringify(F)})}catch{}}},_=async(x={},w=!1)=>{var Q,q,j,B;if(!r.value)return;w||(r.value=!1);const k={...g(),...x};if(!(k!=null&&k.cid)||!(k!=null&&k.aid))return;const{build:T,buvid:A,mobi_app:F,platform_:O,device:G}=f.value,X=Math.floor((Date.now()-l.value)/1e3),H={start_ts:k.firstPlayTime||Math.floor(l.value/1e3),build:T,buvid:A,session:k.session||"",type:3,quality:k.quality,total_time:X,paused_time:Math.max(X-k.absolutePlayTime,0),played_time:k.absolutePlayTime,video_duration:k.duration,play_type:1,network_type:1,last_play_progress_time:Math.floor(k.ctime),max_play_progress_time:k.maxTime,mid:v.value.mid,aid:k.aid,cid:k.cid,play_mode:1,play_status:1,user_status:ji(v.value.vip)?"1":"0",actual_played_time:k.relativePlayTime,auto_play:99,detail_play_time:X,list_play_time:X,from_spmid:((Q=k.stats)==null?void 0:Q.spmIdFrom)||o.value,spmid:((q=k.stats)==null?void 0:q.spmId)||t.value,miniplayer_play_time:0,track_id:s.value,playlist_type:((j=k.appInfo)==null?void 0:j.bizType)||0,playlist_id:((B=k.appInfo)==null?void 0:B.bizId)||"",extra:JSON.stringify({location:i.value}),mobi_app:F,device:G,platform:O,statistics:JSON.stringify({appId:Cs,platform:Ss})},L={start_ts:Math.floor(e),device_ts:Math.floor(w?0:Date.now()/1e3),access_key:"",mid:H.mid,aid:H.aid,cid:H.cid,sid:H.sid,epid:H.epid,type:H.type,subtype:H.sub_type,sub_type:H.sub_type,realtime:Math.floor(k.absolutePlayTime),progress:Math.floor(H.last_play_progress_time),duration:Math.floor(H.video_duration),play_time:Math.floor(k.relativePlayTime),dt:2,device:G,source:F,platform:O};await Promise.allSettled([C(H),S(L)]);try{xe({type:"pv",spm_info:"app.main.player.vt"},{msg:JSON.stringify(H)})}catch{}},p=async()=>{try{const x={...g()},{mobi_app:w,platform_:k,device:T}=f.value;await $l({start_ts:Math.floor(e),device_ts:Math.floor(Date.now()/1e3),access_key:"",mid:v.value.mid,aid:x.aid,cid:x.cid,type:3,subtype:void 0,sub_type:void 0,realtime:Math.floor(x.absolutePlayTime),progress:Math.floor(x.ctime),duration:Math.floor(x.duration),play_time:Math.floor(x.relativePlayTime),dt:2,device:T,source:w,platform:k})}catch{}},C=async x=>{try{await T1(x)}catch(w){if((w==null?void 0:w.code)===-400)return;xe({type:"click",spm_info:"main.play-detail.v-error.0"},{msg:JSON.stringify(x)}),console.error(w,x)}},S=async x=>{try{await $l(x)}catch{}};return{player:n,itemInfo:a,spmid:t,trackId:s,fromSpmid:o,firstInfo:c,firstPlay:E,restartPlay:y,heartbeat:_,reportHistory:p}},ph={viewBox:"-7 -8 36 36"},_h=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.833 2.414c-2.728 0-5.11.139-6.791.275a2.353 2.353 0 0 0-2.179 2.146 58.445 58.445 0 0 0-.238 5.162c0 1.98.115 3.79.238 5.163a2.353 2.353 0 0 0 2.179 2.146 85.15 85.15 0 0 0 6.791.275c2.729 0 5.11-.14 6.792-.275a2.353 2.353 0 0 0 2.178-2.145c.124-1.373.239-3.183.239-5.164 0-1.98-.115-3.79-.239-5.163a2.353 2.353 0 0 0-2.178-2.145 85.127 85.127 0 0 0-6.792-.275ZM3.91 1.07a86.748 86.748 0 0 1 6.923-.28c2.782 0 5.21.14 6.924.28a3.978 3.978 0 0 1 3.665 3.619c.127 1.407.245 3.267.245 5.308a60.04 60.04 0 0 1-.245 5.31 3.978 3.978 0 0 1-3.665 3.618c-1.715.14-4.142.28-6.924.28-2.781 0-5.208-.14-6.923-.28a3.978 3.978 0 0 1-3.665-3.62A60.065 60.065 0 0 1 0 9.998c0-2.04.118-3.9.245-5.308A3.978 3.978 0 0 1 3.91 1.07Zm3.132 5.138a1.083 1.083 0 1 0 0 2.167 1.083 1.083 0 0 0 0-2.167ZM4.333 7.293a2.708 2.708 0 1 1 5.417 0 2.708 2.708 0 0 1-5.417 0Zm9.217 4.395a1.138 1.138 0 0 1 1.608 0l1.872 1.872a.813.813 0 0 0 1.149-1.15l-1.871-1.87a2.762 2.762 0 0 0-3.907 0l-2.351 2.35a.808.808 0 0 1-1.143 0 2.635 2.635 0 0 0-3.728-.001l-1.691 1.69a.812.812 0 1 0 1.149 1.15l1.691-1.691a1.01 1.01 0 0 1 1.43 0c.95.951 2.49.952 3.44.001l2.352-2.35Z"},null,-1),gh=[_h];function yh(e,t){return h(),b("svg",ph,[...gh])}var wh={render:yh};const bh={viewBox:"-7 -7 36 36"},Eh=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.893 11a9.286 9.286 0 1 1 18.571 0 9.286 9.286 0 0 1-18.571 0ZM11.179.32C5.28.321.5 5.102.5 11c0 5.898 4.781 10.678 10.679 10.678 5.897 0 10.678-4.78 10.678-10.678C21.857 5.102 17.077.32 11.18.32ZM6.022 8.12a.696.696 0 1 0-.83 1.12l1.944 1.438-1.884 1.117a.696.696 0 0 0 .71 1.198l2.786-1.65a.696.696 0 0 0 .06-1.16L6.021 8.12Zm8.617 6.304a.696.696 0 0 0-1.35-.346c-.175.684-.549.856-.758.868-.21.012-.531-.116-.685-.628a.696.696 0 0 0-1.334 0c-.154.511-.476.64-.686.628-.209-.012-.583-.184-.758-.868a.696.696 0 0 0-1.35.346c.29 1.126 1.076 1.858 2.028 1.913a1.931 1.931 0 0 0 1.433-.522c.39.36.894.553 1.433.522.951-.055 1.738-.787 2.027-1.913Zm2.67-6.16a.696.696 0 0 0-.974-.144l-2.785 2.063a.696.696 0 0 0 .06 1.16l2.785 1.65a.696.696 0 1 0 .71-1.198l-1.884-1.117 1.944-1.439a.696.696 0 0 0 .145-.974Z"},null,-1),kh=u("path",{d:"m5.048 8.264.08.06-.08-.06Zm.974-.145.06-.08-.06.08Zm-.83 1.12.06-.081-.06.08Zm1.944 1.438.05.087a.1.1 0 0 0 .01-.167l-.06.08Zm-1.884 1.117-.05-.086.05.086Zm-.244.954-.086.05.086-.05Zm.954.244.051.086-.05-.086Zm2.786-1.65-.051-.087.05.086Zm.34-.564.1.005-.1-.005Zm-.28-.596.059-.08-.06.08Zm5.33 3.393.024-.097-.024.097Zm.501.848-.097-.025.097.025Zm-1.35-.346-.096-.025.097.025Zm-.758.868.006.1-.006-.1Zm-.685-.628.095-.029-.095.029Zm-.667-.496v.1-.1Zm-.667.496-.096-.03.096.03Zm-.686.628-.006.1.006-.1Zm-.758-.868-.097.025.097-.025Zm-.848-.502-.025-.097.025.097Zm-.502.848.097-.025-.097.025Zm2.028 1.913.005-.1-.005.1Zm1.433-.522.067-.074a.1.1 0 0 0-.135 0l.068.074Zm1.433.522-.006-.1.006.1Zm3.723-8.217.06.08-.06-.08Zm.975.145-.08.06.08-.06Zm-3.76 1.918-.06-.08.06.08Zm-.281.596.1-.005-.1.005Zm.34.563.051-.086-.05.086Zm2.786 1.65-.051.087.051-.086Zm.954-.243-.086-.051.086.05Zm-.244-.954-.05.086.05-.086Zm-1.884-1.117-.06-.08a.1.1 0 0 0 .01.167l.05-.087Zm1.944-1.439.06.08-.06-.08Zm-5.986-7.624A9.386 9.386 0 0 0 1.793 11h.2a9.186 9.186 0 0 1 9.186-9.186v-.2ZM20.564 11a9.386 9.386 0 0 0-9.385-9.386v.2A9.186 9.186 0 0 1 20.364 11h.2Zm-9.385 9.386A9.386 9.386 0 0 0 20.564 11h-.2a9.186 9.186 0 0 1-9.185 9.186v.2ZM1.793 11a9.386 9.386 0 0 0 9.386 9.386v-.2A9.186 9.186 0 0 1 1.993 11h-.2ZM.6 11C.6 5.157 5.336.42 11.179.42v-.2C5.226.221.4 5.047.4 11h.2Zm10.579 10.578C5.336 21.578.6 16.842.6 11H.4c0 5.953 4.826 10.778 10.779 10.778v-.2ZM21.757 11c0 5.842-4.736 10.578-10.578 10.578v.2c5.952 0 10.778-4.825 10.778-10.778h-.2ZM11.18.42C17.02.421 21.757 5.157 21.757 11h.2C21.957 5.047 17.131.22 11.18.22v.2ZM5.128 8.323a.596.596 0 0 1 .834-.124l.12-.16a.796.796 0 0 0-1.115.165l.16.12Zm.124.835a.596.596 0 0 1-.124-.835l-.16-.119a.796.796 0 0 0 .165 1.114l.12-.16Zm1.943 1.44-1.943-1.44-.119.16 1.943 1.44.12-.16ZM5.303 11.88l1.884-1.117-.102-.172L5.2 11.708l.102.172Zm-.209.817a.596.596 0 0 1 .21-.817l-.103-.172a.796.796 0 0 0-.279 1.09l.172-.101Zm.817.209a.596.596 0 0 1-.817-.21l-.172.103a.796.796 0 0 0 1.091.279l-.102-.172Zm2.786-1.65-2.786 1.65.102.172 2.786-1.65-.102-.173Zm.292-.483c-.01.2-.12.38-.292.482l.102.172a.796.796 0 0 0 .39-.644l-.2-.01Zm-.241-.51c.16.119.25.31.24.51l.2.01a.796.796 0 0 0-.321-.681l-.12.16ZM5.962 8.199l2.786 2.064.119-.161L6.08 8.039l-.119.16Zm8.15 5.473c.32.082.512.407.43.726l.194.05a.796.796 0 0 0-.574-.97l-.05.194Zm-.725.43a.597.597 0 0 1 .726-.43l.05-.194a.796.796 0 0 0-.97.574l.194.05Zm-.85.943c.261-.015.666-.226.85-.944l-.194-.05c-.167.652-.51.785-.667.794l.011.2Zm-.787-.7c.165.551.525.715.787.7l-.011-.2c-.159.01-.442-.084-.585-.557l-.191.058Zm-.571-.424c.263 0 .495.173.57.425l.192-.058a.796.796 0 0 0-.762-.567v.2Zm-.571.425a.596.596 0 0 1 .57-.425v-.2a.797.797 0 0 0-.762.567l.192.057Zm-.788.7c.262.014.622-.15.788-.7l-.192-.058c-.142.473-.426.567-.584.557l-.012.2Zm-.85-.944c.185.717.59.928.85.943l.012-.2c-.157-.009-.5-.142-.668-.793l-.193.05Zm-.725-.43c.319-.082.644.11.726.43l.193-.05a.796.796 0 0 0-.969-.574l.05.194Zm-.43.726a.596.596 0 0 1 .43-.726l-.05-.194a.796.796 0 0 0-.573.97l.193-.05Zm1.936 1.838c-.898-.052-1.655-.744-1.936-1.838l-.193.05c.296 1.156 1.112 1.93 2.118 1.988l.011-.2Zm1.36-.496c-.372.343-.85.525-1.36.496l-.011.2a2.031 2.031 0 0 0 1.506-.549l-.135-.147Zm1.495.496c-.51.03-.987-.153-1.36-.496l-.135.147c.41.378.939.581 1.506.549l-.011-.2Zm1.936-1.838c-.28 1.095-1.038 1.786-1.936 1.838l.011.2c1.006-.058 1.822-.831 2.119-1.988l-.194-.05ZM16.395 8.2a.596.596 0 0 1 .834.124l.161-.119a.797.797 0 0 0-1.114-.165l.119.16Zm-2.786 2.064 2.786-2.064-.12-.16-2.785 2.063.12.16Zm-.24.51c-.01-.2.08-.391.24-.51l-.119-.161a.797.797 0 0 0-.321.68l.2-.01Zm.291.482a.597.597 0 0 1-.291-.482l-.2.01c.014.266.16.508.39.644l.101-.172Zm2.786 1.65-2.786-1.65-.102.172 2.786 1.65.102-.171Zm.817-.208a.596.596 0 0 1-.817.209l-.102.172c.378.224.867.1 1.091-.28l-.172-.101Zm-.209-.817a.596.596 0 0 1 .21.817l.171.102a.796.796 0 0 0-.279-1.091l-.102.172Zm-1.883-1.117 1.883 1.117.102-.172-1.884-1.117-.101.173Zm1.934-1.605-1.943 1.44.119.16 1.943-1.44-.119-.16Zm.124-.835a.596.596 0 0 1-.124.835l.12.16a.796.796 0 0 0 .165-1.114l-.16.12Z"},null,-1),Ch=[Eh,kh];function Sh(e,t){return h(),b("svg",bh,[...Ch])}var $h={render:Sh};const xh={viewBox:"0 0 1024 1024"},Ah=u("path",{d:"M704 511.904v-.112a47.84 47.84 0 0 0-14.688-34.544l.016-.016-288-288-.128.128a48 48 0 1 0-64.464 71.04l251.488 251.488L333.44 766.672l.016.016a48 48 0 0 0 67.856 67.856l.016.016 288-288-.016-.016A47.84 47.84 0 0 0 704 512v-.096z",fill:"currentColor"},null,-1),Dh=[Ah];function Th(e,t){return h(),b("svg",xh,[...Dh])}var Ih={render:Th};const Ph=["onClick"],Fh=["src","alt"],Rh={class:"im_emoji--content"},Lh={key:0,class:"im_emoji--list"},Bh=["onClick"],Mh=["src","alt"],Oh={key:1},Nh=ue({__name:"EmojiBox",emits:["close","select"],setup(e,{emit:t}){const{emojiPackages:n}=ie(ut()),a=D(0),s=K(()=>n.value.length?n.value[a.value]:{}),i=K(()=>(s.value.emote||[]).map(E=>{let _="small",p=E.url;return E.meta.size===2?(_="middle",p=hi(E.url,{w:112,h:112})):E.type!==4?p=hi(E.url,{w:64,h:64}):_="large",{src:p,size:_,text:E.text,id:E.id,type:E.type}})),o=D(null),c=D(!0);async function r(y){y!==a.value&&(a.value=y,c.value=!1,await At(),c.value=!0)}function l(y){t("select",y)}const f=D(null),v=D(!1);se(n,()=>{setTimeout(()=>{const{offsetWidth:y,scrollWidth:E}=f.value||{};v.value=E>y})},{immediate:!0});const m=y=>{const E=f.value,_=E.offsetWidth,p=E.scrollLeft;if(y==="L"){const C=p-_/2;E.scrollLeft=C>=0?C:0}else E.scrollLeft=p+_/2},g=y=>{o.value&&y.composedPath().includes(o.value)||(t("close"),document.removeEventListener("click",g))};return Xe(async()=>{await new Promise(y=>setTimeout(y,0)),document.addEventListener("click",g)}),(y,E)=>{const _=Pe("v-button");return h(),b("div",{class:"im_emoji",ref_key:"container",ref:o},[u("div",{class:ne(["im_emoji--header p_relative",{"more-pkgs":v.value}])},[ke($(_,{class:"im_emoji--hdbtn hdbtn-l p_center_y l_0 h_100",type:"grey",onClick:E[0]||(E[0]=p=>m("L"))},{default:ee(()=>[$(d(Rc))]),_:1},512),[[Fe,v.value]]),u("div",{ref_key:"emojiPkgs",ref:f,class:"im_emoji--pkgs u_select_none"},[(h(!0),b(pe,null,De(d(n),(p,C)=>(h(),b("div",{key:C,class:ne({"im_emoji--pkg":!0,active:C===a.value}),onClick:Se(S=>r(C),["stop"])},[u("img",{src:d(hi)(p.url,{w:48,h:48}),alt:p.text},null,8,Fh)],10,Ph))),128))],512),ke($(_,{class:"im_emoji--hdbtn hdbtn-r p_center_y r_0 h_100",type:"grey",onClick:E[1]||(E[1]=p=>m("R"))},{default:ee(()=>[$(d(Ih))]),_:1},512),[[Fe,v.value]])],2),u("div",Rh,[c.value?(h(),b("ul",Lh,[(h(!0),b(pe,null,De(d(i),(p,C)=>(h(),b("li",{key:C,class:ne(["im_emoji--list--item",{"im_emoji--list--item":!0,[p.size]:!0,kaomoji:p.type===4}]),onClick:Se(S=>l(p),["stop"])},[p.type!==4?(h(),b("img",{key:0,src:p.src,alt:p.text},null,8,Mh)):(h(),b("span",Oh,z(p.src),1))],10,Bh))),128))])):R("",!0)])],512)}}});var Vh=Je(Nh,[["__scopeId","data-v-7e5078ac"]]);const Uh={key:0,class:"emoji-box"},Hh=["value"],Gh=le(" \u53D1\u9001 "),jh={class:"im-send-img"},Kh=ue({__name:"SendBox",setup(e){const t=ut(),{userInfo:n}=ie(st()),{activeSession:a}=ie(t),s=D(!1),i=D(""),o=_=>{i.value=_.target.value},c=_=>{i.value+=_.text},r=async _=>{var w,k,T;const p=_.target.files[0];if(_.target.value="",!p)return ye({content:"\u8BF7\u9009\u62E9\u56FE\u7247"});if(p.size>20*1024*1024)return ye({content:"\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC720M"});const C=new Image;if(await new Promise(A=>{C.onload=A,C.src=URL.createObjectURL(p)}),C.width<10||C.height<10)return ye({content:"\u56FE\u7247\u5C3A\u5BF8\u592A\u5C0F"});let S=null;try{S=await I1(p,{biz:"im"}),URL.revokeObjectURL(C.src)}catch{return ye({content:"\u56FE\u7247\u4E0A\u4F20\u5931\u8D25"})}const x=l(2,JSON.stringify({url:S.img_src,size:S.img_size,imageType:(T=(k=(w=p.type)==null?void 0:w.split)==null?void 0:k.call(w,"/")[1])!=null?T:"png",original:1,width:S.img_width,height:S.img_height}));try{await t.sendMessage(x)}catch(A){return ye({content:A.message||"\u53D1\u9001\u5931\u8D25"})}await At(),pt.emit("scrollToBottom")},l=(_,p)=>({msg_type:_,content:p,sender_uid:n.value.mid,receiver_id:a.value.id,receiver_type:1,msg_status:0,timestamp:Math.floor(Date.now()/1e3),dev_id:"0",new_face_version:/\[(?:[^[\]]+)]/g.test(p)&&_===1?1:0}),f=D(!1),v=D(null),m=_=>{var p;(p=v.value)!=null&&p.contains(_.relatedTarget)||(f.value=!1)},g=_=>{_.key==="Enter"&&E()};let y=!1;const E=async()=>{if(!(!i.value||y)){y=!0;try{const _=l(1,JSON.stringify({content:i.value}));await t.sendMessage(_)}catch(_){ye({content:_.message||"\u7F51\u7EDC\u5F02\u5E38"})}i.value="",await At(),pt.emit("scrollToBottom"),y=!1}};return(_,p)=>{const C=Pe("VButton");return h(),b(pe,null,[$(yt,{name:"im-emoji-box"},{default:ee(()=>[s.value?(h(),b("div",Uh,[$(Vh,{onClose:p[0]||(p[0]=S=>s.value=!1),onSelect:c})])):R("",!0)]),_:1}),u("div",{class:ne(["im-send-box",{opened:s.value}])},[u("div",{class:ne(["im-text-input-warp",{active:f.value}]),onFocusout:m,ref_key:"inputWrapEl",ref:v},[u("input",{class:"im-text-input",placeholder:"\u53D1\u4E2A\u6D88\u606F\u804A\u804A\u5457\uFF5E",value:i.value,onInput:o,onKeydown:g,onFocus:p[1]||(p[1]=S=>f.value=!0)},null,40,Hh),ke($(C,{class:"send-btn",type:"pink",disabled:!i.value,onClick:E},{default:ee(()=>[Gh]),_:1},8,["disabled"]),[[Fe,i.value]])],34),u("label",jh,[$(d(wh),{class:"input-icon"}),u("input",{type:"file",accept:"image/png, image/jpeg, image/webp",onChange:r},null,32)]),$(d($h),{class:ne(["im-emoji-btn input-icon",{active:s.value}]),onClick:p[2]||(p[2]=S=>s.value=!s.value)},null,8,["class"])],2)],64)}}});var Wh=Je(Kh,[["__scopeId","data-v-78e02a3e"]]);const Zh={width:"14",height:"14",viewBox:"0 0 14 14",fill:"#c9ccd0"},zh=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 1.333a5.667 5.667 0 1 0 0 11.334A5.667 5.667 0 0 0 7 1.334ZM.333 7a6.667 6.667 0 1 1 13.334 0A6.667 6.667 0 0 1 .333 7ZM7.5 9.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0ZM6.167 5.833a.833.833 0 0 1 1.666 0 .719.719 0 0 1-.183.498 2.62 2.62 0 0 1-.247.252l-.074.068a7.983 7.983 0 0 0-.26.245c-.255.255-.407.498-.489.735-.08.232-.08.424-.08.53v.006a.5.5 0 0 0 1 0c0-.09.002-.141.025-.21.024-.068.083-.186.25-.353a6.393 6.393 0 0 1 .307-.287c.108-.1.23-.216.34-.35.234-.285.411-.642.411-1.134a1.833 1.833 0 0 0-3.666 0 .5.5 0 1 0 1 0Z"},null,-1),qh=[zh];function Yh(e,t){return h(),b("svg",Zh,[...qh])}var Zl={render:Yh};/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Xh=()=>{},Jh=e=>typeof e=="function",Qh=e=>typeof e=="symbol",em=(e,t)=>!Object.is(e,t);/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tm;function nm(e,t=tm){t&&t.active&&t.effects.push(e)}let gs;class am{constructor(t,n,a,s){this.fn=t,this.trigger=n,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,nm(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,im();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(sm(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),om()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=ra,n=gs;try{return ra=!0,gs=this,this._runnings++,zl(this),this.fn()}finally{ql(this),this._runnings--,gs=n,ra=t}}stop(){var t;this.active&&(zl(this),ql(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function sm(e){return e.value}function zl(e){e._trackId++,e._depsLength=0}function ql(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Wc(e.deps[t],e);e.deps.length=e._depsLength}}function Wc(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let ra=!0,zo=0;const Zc=[];function im(){Zc.push(ra),ra=!1}function om(){const e=Zc.pop();ra=e===void 0?!0:e}function rm(){zo++}function lm(){for(zo--;!zo&&qo.length;)qo.shift()()}function um(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const a=e.deps[e._depsLength];a!==t?(a&&Wc(a,e),e.deps[e._depsLength++]=t):e._depsLength++}}const qo=[];function cm(e,t,n){rm();for(const a of e.keys()){let s;a._dirtyLevel<t&&(s!=null?s:s=e.get(a)===a._trackId)&&(a._shouldSchedule||(a._shouldSchedule=a._dirtyLevel===0),a._dirtyLevel=t),a._shouldSchedule&&(s!=null?s:s=e.get(a)===a._trackId)&&(a.trigger(),(!a._runnings||a.allowRecurse)&&a._dirtyLevel!==2&&(a._shouldSchedule=!1,a.scheduler&&qo.push(a.scheduler)))}lm()}const dm=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n};new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Qh));function Xi(e){const t=e&&e.__v_raw;return t?Xi(t):e}class zc{constructor(t,n,a,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new am(()=>t(this._value),()=>Eo(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=a}get value(){const t=Xi(this);return(!t._cacheable||t.effect.dirty)&&em(t._value,t._value=t.effect.run())&&Eo(t,4),fm(t),t.effect._dirtyLevel>=2&&Eo(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Yl(e,t,n=!1){let a,s;const i=Jh(e);return i?(a=e,s=Xh):(a=e.get,s=e.set),new zc(a,s,i||!s,n)}function fm(e){var t;ra&&gs&&(e=Xi(e),um(gs,(t=e.dep)!=null?t:e.dep=dm(()=>e.dep=void 0,e instanceof zc?e:void 0)))}function Eo(e,t=4,n){e=Xi(e);const a=e.dep;a&&cm(a,t)}const Nr=e=>(xn("data-v-0487698a"),e=e(),An(),e),vm=["textContent"],hm={class:"help"},mm=Nr(()=>u("div",{class:"help-info t-center"},"\u9ED8\u8BA4\u6570\u5B57\u63D0\u9192\uFF0C\u5F00\u542F\u514D\u6253\u6270\u540E\u5C06\u4E0D\u518D\u63D0\u9192",-1)),pm=["textContent"],_m={class:"help"},gm=Nr(()=>u("div",{class:"help-info",textContent:`\u82E5\u5173\u95ED\u6B64\u5F00\u5173\uFF0C\u4F60\u5C06\u4E0D\u518D\u6536\u5230\u8BE5\u8D26\u53F7\u7684\u7FA4\u53D1
\u5185\u5BB9\u6D88\u606F\uFF0C\u4F46\u901A\u77E5\u7C7B\u6D88\u606F\u4E0D\u53D7\u5F71\u54CD`},null,-1)),ym=Nr(()=>u("div",{class:"divider"},null,-1)),wm=ue({__name:"SessionOptions",setup(e){const t=D(null),n=ut(),{activeSession:a,sessionOptionsMap:s,reportDialogVisible:i,selectedMessage:o,subSessionList:c}=ie(n),r=Yl(()=>{var p;return(p=a.value.session)==null?void 0:p.system_msg_type}),l=Yl(()=>{var p,C;return(C=(p=a.value)==null?void 0:p.session)==null?void 0:C.top_ts}),f=()=>n.toggleSetTop(),v=()=>{var S;const p=a.value.id,C=Number(!((S=s.value[p])!=null&&S.push_setting));!p||n.togglePushSetting(p.toString(),C)},m=()=>{n.toggleMessageDnd(a.value.session,Number(!a.value.session.is_dnd))},g=()=>{a.value.from&&c.value.length?n.setActiveSession({type:a.value.from}):n.setActiveSession(null)},y=async()=>{if(!!await kn({content:"\u52A0\u5165\u9ED1\u540D\u5355\u540E\u5C06\u4E0D\u518D\u6536\u5230\u8BE5\u7528\u6237\u7684\u65B0\u6D88\u606F\uFF0C\u5E76\u81EA\u52A8\u89E3\u9664\u5173\u6CE8\u5173\u7CFB\u3002",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"})){try{await n.setBlacklist(a.value.id),ye({content:"\u62C9\u9ED1\u6210\u529F"})}catch(p){ye({content:p.message||"\u7F51\u7EDC\u5F02\u5E38"});return}await n.removeSession(a.value.session),g()}},E=async()=>{try{await n.removeSession(a.value.session,!0),ye({content:"\u5220\u9664\u6210\u529F"})}catch(p){ye({content:p.message||"\u7F51\u7EDC\u5F02\u5E38"})}g()},_=async()=>{o.value=null,i.value=!0};return(p,C)=>{var S,x;return d(a).session?(h(),b("div",{key:0,class:"option-list",ref_key:"el",ref:t},[u("div",{class:"option",textContent:z(d(l)?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876"),onClick:f},null,8,vm),u("div",{class:"option",onClick:m},[u("span",null,z(d(a).session.is_dnd?"\u5173\u95ED":"\u6D88\u606F")+"\u514D\u6253\u6270",1),u("div",hm,[$(d(Zl),{class:"help-icon"}),mm])]),d(r)?R("",!0):(h(),b(pe,{key:0},[(S=d(s)[d(a).id])!=null&&S.show_push_setting?(h(),b("div",{key:0,class:"option",onClick:v},[u("span",{textContent:z(((x=d(s)[d(a).id])==null?void 0:x.push_setting)===1?"\u63A5\u53D7\u5185\u5BB9\u63A8\u9001":"\u5173\u95ED\u5185\u5BB9\u63A8\u9001")},null,8,pm),u("div",_m,[$(d(Zl),{class:"help-icon"}),gm])])):R("",!0),u("div",{class:"option",onClick:y},"\u52A0\u5165\u9ED1\u540D\u5355"),ym,u("div",{class:"option",onClick:E},"\u5220\u9664\u4F1A\u8BDD"),u("div",{class:"option",onClick:_},"\u4E3E\u62A5\u8BE5\u7528\u6237")],64))],512)):R("",!0)}}});var bm=Je(wm,[["__scopeId","data-v-0487698a"]]);const qc=ue({props:{src:{type:String,required:!0},default:{type:String,default:Vf},alt:{type:String,default:""},width:{type:Number,default:0},height:{type:Number,default:0},s:{type:Number,default:0},bfsStyle:{type:String,default:""}},emits:["inited"],setup(e,{emit:t}){const n=D(null),a=D(0),s=D(0),i=D(!1),{stop:o}=uc(n,([{isIntersecting:f}])=>{f&&(a.value=n.value.offsetWidth,s.value=n.value.offsetWidth,c())});function c(){const f=()=>{t("inited"),o(),i.value=!0};if(!r.value){f();return}const v=new Image;v.onload=()=>{f()},v.src=r.value}const r=K(()=>e.src?cc(e.src,{w:(e.width||a.value)*window.devicePixelRatio|0,h:(e.height||s.value)*window.devicePixelRatio|0,s:!!e.s,ext:"webp",style:e.bfsStyle||"pc-avatar"}):e.default);function l(f){n.value=f}return()=>wt("img",{ref:l,class:"base_img",src:i.value?r.value:e.default,alt:e.alt})}});var pi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ0AAACbCAMAAABPoWn5AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExUReXp79PZ37zEy8DIzrW+xOLm7OPn7bC5wOTo7rG6wcjP1s/V2+Dk6szS2d3i6LrCycXM0tje5LaE170AAAY/SURBVHja7ZuLduMoDEAXEFjizf//7ETglLRJmyYQNrvje840ycTHvZV4Wdj/HBwcHBwcHBwcHBwcHBwcHBwcvCt44tdHrpYzxbqIv3Hzzgq/Vs4HIErF3JeLigisXxq+kmjbKAlzN8SStm3jA9eBArat6umfj2tyGwW9Onb39UxRtDHAsVuHt7AxJH/Qww+5vLbdYbRwL3qmy5XVY0rs0TP3Ihdx+WjsLW3MNz3XDMmN4zPtyS14u7cypFhuPWjO0QNh3kuOQW1hu9k1TJGjvXUc9Jm63g05yhFxSZxiKeIKzm3TC6LjWI4hK64oJZrJxro4JRNcQ9sO3fxfuCbJ7KKZOvYGCUS0zYCIQDmP0+RK3qNBE2iBtuNduY+rtBGBnENiQ1Bz9LAkdkuh+DlEWxeHyuOsUYMzMQ0TuaWQNRPyGmgjCB7ZFM0giPscDTzD4HhegSPnW9ct4hvcCfELSvTYEgIbyThqpy2d50otspLpZ+Rt+vcqt0slnk0o4IQlOtSzGJekdWIMZ1NyrKfthOAht7pU+J1IuXgcxPiiksC9xYy2PK1o/xNjynHOvJNUOx+3Zz041m0b8dnQwaSLA3Q1eLGdeexMUMfN07uszKxll+SRzsu6qh63y55TbHGSnVZZ720mibFOwXbtZAFnrcYsJ8OwHYzZ2ToWm6l2JnAysE6Qbpadm2inZ9rhYfesXXiJnf1L7Kb32b/GzuJ7j3f/VTtEH6O5sU7iVbpGvGmnZtt5ecsOfRFWZaevDCyAVFZEs9quR62ELAHo+uoKBdTr86SsixoX2Dn8kjunEnyUEK+X1A0CmYXHpXaoi01AXaF8KdpK6kUdAMV+i+wQ9bns850dOvr8vSoGX2WHl+0OvVOfqmV0o+qO9rM+QS7mNXbh0g6L+hIXGSLeKFzl1AV7Uazb2RfYYeQm1bnpxqApQX3yA/t6OweX+ZKhN6hrv96tGcqvtxMfdpSUu7d/7IWVZz8IL7Rze2YV1ail7H5RPMc2myQ6IePL7Th4Tc2bX29ZRa7Y80bja+0YXbgKpxEfOA1qH/mvebEdw14DvNJunPV2iHj5agyus3Nsl36y8yJia5K+zhPO4/vYoUvZ1/JoPTYqEG9lB+A0r+p4UIsW3svOW0hWBDiRgwLIKzN7v8/6AIwViaCtRu7ahVl2969n0YssVfC6ZFVX6j/a5aV2DGqtTXvB+3WUiXbid1UexIeqPG6inWG7exx2N9vdfLvwf6+QhbeukIUXVMh0rnZ9N2V8JwpVnmSHXuX659LwPpn42MWzUk+yi8m1Pcbh7eN+jjLrzlJjUznbKT92qnyOP4ZUNOJo4FCLGjos+2gwmFriAa9tDboY/RixhJQ5B4b7GwdxiCjbPRWt9pTt8+Rcf6jg8eO8o015n3B8qysJF4L9ifAttiFabcPvk9D4Pjm3PKf3e3m01t57zS9X6IZpP+tLZz/EYJVziepIxYwPKomvsmaBPrBcihNOqQMQ11ZdNHPwIgNNu/e93fZMkNQcJLsROD0pERaq3ywmyjE+JPabBoEUGifJ9Rp1h0bcki1m7n3PxWVVkYrJ/A5aXXtnb0/9Y1WR6is2FA7cZHT8wDNR1HBKERtCEtuU88dU7VzkQy952b3l2Ph0Ez4IjZX9SaSCFR322EW8eACt/lv4bE8f8nml2m9tiop6pX09GGirQMG2IKdu06aYHryVoEHsmz5kTdsqaJ+yrr1oD12b6xeDl5s+KWK7kbCi/GXo2tJ6OT04G3F0zNlWcqL1xbccvNWI1H9/8ifbvH8GgXVdzvxbD88Ye/n7T0JFne2Cbj2ksfopxr5d1qPjUaTzh+yxwKUd5cUtj2U6BEI76omsoetQEitT21tZN8oXLq37dsj6pXZFsl0HrOzvQ+5tsvfjdZiWxw6lLkQq0dZZ/vwsch6/B7rc+hG5zQuPAQv7hQ70oB3ldanlwe5BIOKyxML2KBRw2SxGj9vJRalFn7bHgYJr7AQ9YUfZrLHLT9mluMTOw/YM4PBtE/tACXu40P0UaUW/iOlJO7BmQWJhew5S8X0Ty8vSBYndngXcuyaWoewXXCk+jSz4dounDjizoATwEAsvbDHANmCXyoLr2DdNLRa5jUDZv7hAMcSD5ag/Cv22ACdT9YQAAAAASUVORK5CYII=";const Em={class:"user_avatar"},km=ue({__name:"Avatar",props:{face:{type:String,required:!0},verifyType:{type:Number,default:-1},nft:{type:Boolean,default:!1},width:{type:Number,default:0},height:{type:Number,default:0}},setup(e){return(t,n)=>(h(),b("div",Em,[$(qc,{class:"user_avatar--face",src:e.face,default:d(pi),s:1,width:e.width,height:e.height},null,8,["src","default","width","height"]),e.nft?(h(),b("div",{key:0,class:ne(["user_avatar--badge nft",{shift_left:e.verifyType!==-1}])},null,2)):R("",!0),e.verifyType!==-1?(h(),b("div",{key:1,class:ne(["user_avatar--badge",{verify_personal:e.verifyType===0,verify_business:e.verifyType===1}])},null,2)):R("",!0)]))}});var Gn=Je(km,[["__scopeId","data-v-53000ebe"]]);const Cm={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Sm=u("path",{d:"M9.499 6.528a2.991 2.991 0 0 0-.306-.264.607.607 0 0 0-.886.827.61.61 0 0 0 .15.13c.057.047.113.093.166.146l.05.05c.63.629.441 1.712-.188 2.341l-2.686 2.685a1.616 1.616 0 0 1-2.282 0l-.05-.05a1.614 1.614 0 0 1 0-2.282l1.186-1.186a.658.658 0 0 0-.41-1.176.656.656 0 0 0-.37.114V7.86l-.014.012a.663.663 0 0 0-.125.117L2.501 9.144a2.99 2.99 0 0 0 0 4.215l.05.05a2.99 2.99 0 0 0 4.214 0l2.685-2.686c1.158-1.159 1.256-2.987.098-4.145l-.05-.05Z",fill:"currentColor"},null,-1),$m=u("path",{d:"m13.369 2.591-.05-.05a2.988 2.988 0 0 0-4.214 0L6.42 5.227C5.26 6.386 5.197 8.06 6.356 9.219l.05.049c.052.052.107.102.162.15.04.045.088.083.141.114h.001a.573.573 0 0 0 .802-.747c-.076-.169-.218-.273-.316-.37l-.05-.05c-.628-.629-.39-1.543.24-2.172l2.686-2.685a1.613 1.613 0 0 1 2.281 0l.05.05c.63.629.63 1.653 0 2.281L11.22 7.023a.653.653 0 0 0 .732 1.083l.003.004.018-.017a.657.657 0 0 0 .149-.138l1.246-1.15a2.988 2.988 0 0 0 .001-4.214Z",fill:"currentColor"},null,-1),xm=[Sm,$m];function Am(e,t){return h(),b("svg",Cm,[...xm])}var Yc={render:Am};var ko=ue({props:{content:{type:String,required:!0},isSelf:{type:Boolean,default:!1}},setup(e){const t=ut(),{urlParseConfig:n,emojiDict:a}=ie(t),s=o=>{const c=v=>v.reduce((m,g)=>m.concat(Array.isArray(g)?c(g):g),[]),r=(v,m)=>g=>{const y=g.match(v)||[],E=g.split(v);return[y.map(m),E]};return((v,m)=>{const g=v.map(E=>E.match instanceof RegExp?r(E.match,E.replace):_=>{const[p,C]=E.match(_);return[p.map(E.replace),C]}),y=(E,_)=>{const p=g[E];return p?_.map(C=>{const[S,x]=p(C),w=y(E+1,x),k=[];for(let T=0;T<S.length;T++)k.push(w[T]),k.push(S[T]);return k.push(w[S.length]),k}):_};return c(y(0,[m]))})([{match:v=>{const m=new RegExp(n.value.any_url,"g"),g=v.match(m)||[],y=n.value.white_list.length?new RegExp(n.value.white_list.filter(C=>C.indexOf("bilibili://")===-1).join("|")):null,E=n.value.black_list.length?new RegExp(n.value.black_list.join("|")):null,_=[];let p=[v];for(let C=0;C<g.length;C++)y&&y.test(g[C])&&!(E&&E.test(g[C]))&&(_.push(g[C]),p=c(p.map(S=>S.split(g[C]))));return[_,p]},replace:v=>({type:"link",url:v})},{match:/\[br]/g,replace:()=>({type:"br"})},{match:/av\d+/gi,replace:v=>({type:"avid",id:v})},{match:/bv1[\d\w]{9}/gi,replace:v=>({type:"bvid",id:v})},{match:/cv\d+/gi,replace:v=>({type:"cvid",id:v})},{match:/(?:bilibili:\/\/)(?:[/.$*?~=#!%@&\-\w]*)?/g,replace:v=>({type:"native-link",url:v})},{match:/\[(?:[^[\]]+)]/g,replace:v=>(t.getEmojiData(v),a.value[v]?{type:"emoji",name:v}:v)}],o)},i=K(()=>s(e.content||""));return()=>$("div",{class:`text-message ${e.isSelf?"is-self":""}`},[i.value.map(o=>{var r,l,f,v;return typeof o=="string"?$("span",null,[o]):(v={link:$("span",{class:"c-link","data-href":o.url,onClick:()=>$s(o.url,"message.CLink")},[$(Yc,null,null),le("\u7F51\u9875\u94FE\u63A5")]),br:$("br",null,null),avid:$("span",{class:"c-link",onClick:()=>Cn({type:"ugc",aid:o.id.slice(2)})},[o.id]),bvid:$("span",{class:"c-link",onClick:()=>Cn({type:"ugc",bvid:o.id})},[o.id]),cvid:$("span",{class:"c-link",onClick:()=>$s("https://www.bilibili.com/read/"+o.id,"message.CLink")},[o.id]),emoji:$("div",{class:`im-emoji ${((l=(r=a.value[o.name])==null?void 0:r.meta)==null?void 0:l.size)>1?"big":""}`,style:{backgroundImage:"url("+((f=a.value[o.name])==null?void 0:f.src)+")"}},null)}[o.type])!=null?v:null})])}});const Dm=["src"],Tm=ue({__name:"ImageMessage",props:{content:{type:Object,required:!0},isSelf:{type:Boolean,default:!1},status:{type:Number,default:0}},setup(e){const t=e,n=We("galleryContainer"),a=P1(),s=299,i=K(()=>{const{width:c,height:r,url:l}=t.content,f=t.status===50;if(!c||!r||!l||f)return{error:!0,url:l||"",width:c||100,height:r||100};const v=(()=>{if(c>s){const m=c/r;return{width:s,height:Math.round(s/m)}}else return{width:c,height:r}})();return{...v,url:tc(l,v.width*a,v.height*a)}}),o=()=>{i.value.error||!i.value.url||de.emit("visitGallery",{container:n,downloadable:!1,items:[{src:t.content.url,width:t.content.width,height:t.content.height,size:t.content.size,tags:[]}]})};return(c,r)=>(h(),b("img",{class:ne(["img-msg",{error:d(i).error,"is-self":e.isSelf}]),src:d(i).url,alt:"[\u56FE\u7247]",onClick:o,style:Ge({width:d(i).width+"px",height:d(i).height+"px"})},null,14,Dm))}});var _i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABHCAMAAAB4UkqjAAAAh1BMVEUAAADd3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0UCIZXAAAALHRSTlMAoJDx4OYL/DcGF+6+JNi4ycSIT2k6LPeWfRzTVPXPszEQrV0hpo12cEZAZFpRNIQAAAJVSURBVFjD7dbZcpswGIbhHwwSi81q8Ib33fnu//oatRIpmliDhQ/aaZ+TKInnjVgkhb4RJMhP9Fzo8PiD+vEA+JPnqS0+1dRHBJhibAzh2HNeekxP9Z8XBSMZM6SmRBYx65QeM6XsY3rKPqanLGMWqeDmOh0b/Io9+YHi3gKtdExgLznSlyjFMGnUphIMlcgY22C4DSPBxTu4IrXDe+yI6IDWbPSqGVoHoohDyip6XZVB4hFN1TgPyUaYQ5rSWQ0nZGcC6UyJukKypa4yIXX3HLLlqCdHX++HLRfS/9bbWvvHLSLNR3N6tRXdFwdxejekiYF4fDnWYa/WqSm2PqRCSy0hrbP5RxAaW8141N17tVbZ+S1fFYbWFF2+1lqg62BoBdAsqWOLroWhxTh+M8vmWuuaxp1WaWjRSn43yl35sHTLUjxiaWlqnYE4LZoJme3v13MibqepFZRL6otV5V+/Hv+xVvi+FsvZG1qh/LQ7uFXnF/HlwcEfYlDktW2r5EARUiXWc1xRWAC8tGwxsdJ9dcRnYrddMdtrjDZyAy3kXrSJ7O89u8zEZAIKxBRnFzbonWD3ZkfCrrmzP+6979nicjAnW3NZ4OS1R6GtVBa8drTek539up3NAgMvcv51WNZQitCiFBZQaqIMSrx1XrWNoWTy/w1r+hk+xjuMSVjGGC6WZ3S1xlDriqTKxzB+Ra3I4bDHne62drqmied57QR9z0D94dHnOEmvJ/pWAMm4ovL2TTcJ5cRyMlHrbkdG5c/5r82fYqt+K/iR89m2JrP9PEZyI80PsPxVT0P3FAEAAAAASUVORK5CYII=";const Im={key:0,class:"headline"},Pm={class:"main-content"},Fm={key:0,class:"video-icon"},Rm={key:1,class:"photo-icon"},Lm={class:"text-content"},Bm={class:"type"},Mm={class:"up-info"},Om={class:"up-name"},Nm=u("div",{class:"snum"},null,-1),Vm={key:0,class:"infos"},Um={class:"duration"},Hm={class:"danmu"},Gm=u("div",{class:"play"},null,-1),jm={class:"content"},Km={class:"footer"},Wm={key:1,class:"up-name"},Zm={class:"type"},zm={class:"title"},qm={key:0,class:"cv-images cv-img-3"},Ym={class:"summary"},Xm={class:"infos"},Jm={class:"footer"},Qm={class:"up-name"},ep={class:"type"},tp=ue({__name:"ShareMessage",props:{content:{type:Object,default:()=>({})},isSelf:Boolean},setup(e){const t=e,n=ut(),{videoDetail:a,articleDetail:s,pgcDetail:i}=ie(n),o=D({1:"\u5C0F\u89C6\u9891",2:"\u76F8\u7C3F",3:"\u7EAF\u6587\u5B57",4:"\u76F4\u64AD",5:"\u6295\u7A3F\u89C6\u9891",6:"\u6295\u7A3F\u4E13\u680F",7:"\u756A\u5267",8:"\u97F3\u4E50",9:"\u56FD\u4EA7\u52A8\u753B",10:"\u56FE\u7247",11:"\u52A8\u6001"}),c=K(()=>({backgroundImage:`url(${_(t.content.thumb)||_i})`})),r=D({backgroundImage:`url(${_i})`}),l=D(new Array(3).fill({backgroundImage:`url(${_i})`})),f=K(()=>{const w=t.content.source,k=t.content.id;return w===5?a.value[k]||{}:w===6?s.value[k]||{}:w===16?i.value[k]||{}:{}}),v=K(()=>{const w=[];switch(t.isSelf&&w.push("is-self"),t.content.source){case 5:case 16:w.push("video-type");break;case 6:w.push("article-type");break}return w});K(()=>Mn(t.content.thumb,60,60));const m=K(()=>`background-image: url(${Mn(t.content.thumb,60,60).srcUrl})`),g=K(()=>{let w="";const k=t.content.source,T=t.content.id;switch(k){case 1:w=`//vc.bilibili.com/video/${T}`;break;case 2:w=`//h.bilibili.com/${T}`;break;case 4:w=`//live.bilibili.com/${T}`;break;case 5:w=xl(T,t.content.bvid)||"";break;case 6:w=`//www.bilibili.com/read/cv${T}`;break;case 7:w=`//bangumi.bilibili.com/anime/${T}`;break;case 9:w=xl(T,t.content.bvid)||"";break;case 11:w=`//t.bilibili.com/${T}?tab=1`;break;case 16:w=t.content.url||"";break;default:w=""}return w.replace(/^javascript:/i,"")}),y=K(()=>t.content.headline),E=K(()=>t.content.source===16?t.content.source_desc||"":o.value[t.content.source]),_=w=>w?Mn(w,300,160,!0).srcUrl.replace(/^http:/,""):"";se(f,w=>{if((t.content.source===5||t.content.source===16)&&w.pic||t.content.thumb){let k="";t.content.source===5&&(k=w.pic||t.content.thumb||""),t.content.source===16&&(k=t.content.thumb||w.pic||""),k=Mn(k,300,160,!0).srcUrl.replace(/^http:/,"");const T=new Image;T.src=k,T.onload=()=>{c.value.backgroundImage=`url(${k})`,c.value.backgroundSize="cover"}}if(t.content.source===6){if(w.image_urls&&w.image_urls.length<3&&w.image_urls[0]){const k=Mn(w.image_urls[0],300,80,!0).srcUrl.replace(/^http:/,""),T=new Image;T.src=k,T.onload=()=>{r.value.backgroundImage=`url(${k})`,r.value.backgroundSize="cover"}}else if(w.image_urls&&w.image_urls.length>=3)for(let k=0;k<3;k++){const T=Mn(w.image_urls[k],120,105,!0).srcUrl.replace(/^http:/,""),A=new Image;A.src=T,A.onload=()=>{l[k]={backgroundImage:`url(${T})`,backgroundSize:"cover"}}}}},{immediate:!0});const p=async w=>{var L,Q,q,j,B,W,U,M;const k=new RegExp("av([0-9]+)","i"),T=new RegExp("bv1[1-9A-NP-Za-km-z]{9}","ugi"),A="([/.$*?~=#!%@&A-Za-z0-9_-]*)",F=new RegExp("ep([0-9]+)","i"),O=new RegExp("ss([0-9]+)","i"),G=new RegExp(`((https?:)?//)?(((uat-)?www\\.bilibili\\.com)|(b23\\.tv|bili22\\.cn|bili33\\.cn|bili23\\.cn|bili2233\\.cn))(/video)?/((av[0-9]+)|((BV)1[1-9A-NP-Za-km-z]{9}))($|/|)${A}`,"ugi"),X=new RegExp(`((https?:)?//)?(((uat-)?www\\.bilibili\\.com/bangumi/(play/|media/)|(b23\\.tv|bili22\\.cn|bili33\\.cn|bili23\\.cn|bili2233.cn)/)(ss|ep)[0-9]+)($|/|)${A}`,"ugi"),H=/((https?:)?\/\/)?(b23\.tv|bili22\.cn|bili33\.cn|bili23\.cn|bili2233\.cn)\/\w+/i;if(w.match(G)){const N=w.match(G),Z=(L=N[0])==null?void 0:L.match(T);if(Z!=null&&Z[0]){const oe=Z[0];return{type:"ugc",bvid:oe,fromSpmid:"main.chat.0.0.pv"}}const Y=(Q=N[0])==null?void 0:Q.match(k);if(Y!=null&&Y[0])return{type:"ugc",aid:Number(Y[1]),fromSpmid:"main.chat.0.0.pv"}}else if(w.match(X)){const N=w.match(X),Z=(q=N[0])==null?void 0:q.match(O);if(Z!=null&&Z[0])return{type:"ogv",seasonId:Number(Z[1]),fromSpmid:"main.chat.0.0.pv"};const Y=(j=N[0])==null?void 0:j.match(F);if(Y!=null&&Y[0])return{type:"ogv",epid:Number(Y[1]),fromSpmid:"main.chat.0.0.pv"}}else if(w.match(H))try{const N=await fetch(w);if(N.url){const Z=N.url;if(Z.match(G)){const Y=Z.match(G),oe=(B=Y[0])==null?void 0:B.match(T);if(oe!=null&&oe[0]){const ae=oe[0];return{type:"ugc",bvid:ae,fromSpmid:"main.chat.0.0.pv"}}const V=(W=Y[0])==null?void 0:W.match(k);if(V!=null&&V[0])return{type:"ugc",aid:Number(V[1]),fromSpmid:"main.chat.0.0.pv"}}if(Z.match(X)){const Y=Z.match(X),oe=(U=Y[0])==null?void 0:U.match(O);if(oe!=null&&oe[0])return{type:"ogv",seasonId:Number(oe[1]),fromSpmid:"main.chat.0.0.pv"};const V=(M=Y[0])==null?void 0:M.match(F);if(V!=null&&V[0])return{type:"ogv",epid:Number(V[1]),fromSpmid:"main.chat.0.0.pv"}}}}catch{}return null},C=async w=>{w.startsWith("//")&&(w="https:"+w);const k=await p(w);Rt("window/openPlayerWindow",k)},S=w=>{w.startsWith("//")&&(w="https:"+w),bn(w,"message.share")},x=async()=>{if(!g.value)return;switch(t.content.source){case 5:C(g.value);break;case 6:S(g.value);break;case 11:S(g.value);break;case 16:C(g.value);break}};return(w,k)=>(h(),b("div",{class:ne(["share-card",d(v)]),onClick:x},[[5,6,16].includes(e.content.source)?R("",!0):(h(),b(pe,{key:0},[d(y)?(h(),b("div",Im,z(d(y)),1)):R("",!0),u("div",Pm,[u("div",{class:ne(["img",{video:e.content.source===1,photo:e.content.source===2}]),style:Ge(d(m))},[e.content.source===1?(h(),b("div",Fm)):R("",!0),e.content.source===2?(h(),b("div",Rm)):R("",!0)],6),u("div",Lm,[u("div",{class:ne(["content",{"no-headline":!d(y)}])},z(e.content.title),3),u("div",Bm,z(d(E)),1)])]),u("div",Mm,[$(d(mi),{class:"up-widget",style:{color:"#999"}}),u("div",Om,z(e.content.author),1)])],64)),e.content.source===5||e.content.source===16?(h(),b(pe,{key:1},[u("div",{class:"cover",style:Ge(d(c))},[Nm,d(f).is_started?(h(),b("div",Vm,[u("span",Um,z(d(f).duration?d(F1)(d(f).duration):"-- : --"),1),u("span",Hm,z((d(f).danmaku!==void 0?d(ei)(d(f).danmaku):"-- ")+"\u5F39\u5E55"),1)])):R("",!0),Gm],4),u("div",jm,[u("span",null,z(e.content.title||d(f).title||""),1)]),u("div",Km,[e.content.source!==16&&(d(f).up_name||e.content.author)?(h(),J(d(mi),{key:0,class:"up-widget"})):R("",!0),e.content.source!==16?(h(),b("div",Wm,z(d(f).up_name||e.content.author),1)):R("",!0),u("div",Zm,z(d(E)),1)])],64)):R("",!0),e.content.source===6?(h(),b(pe,{key:2},[u("div",zm,[u("span",null,z(d(f).title||e.content.title||""),1)]),d(f).image_urls&&d(f).image_urls.length>=3?(h(),b("div",qm,[(h(!0),b(pe,null,De(l.value,(T,A)=>(h(),b("div",{key:A,style:Ge(T)},null,4))),128))])):R("",!0),!d(f).image_urls||d(f).image_urls&&d(f).image_urls.length<3?(h(),b("div",{key:1,class:"cv-images cv-img-single",style:Ge(d(r))},null,4)):R("",!0),u("div",Ym,[u("span",null,z(d(f).summary||e.content.summary),1)]),u("div",Xm,[u("span",null,z((d(f).view_num!==void 0?d(ei)(d(f).view_num):"-- ")+"\u9605\u8BFB"),1),u("span",null,z((d(f).like_num!==void 0?d(ei)(d(f).like_num):"-- ")+"\u70B9\u8D5E"),1),u("span",null,z((d(f).reply_num!==void 0?d(ei)(d(f).reply_num):"-- ")+"\u8BC4\u8BBA"),1)]),u("div",Jm,[$(d(mi),{class:"up-widget"}),u("div",Qm,z(d(f).up_name||e.content.author),1),u("div",ep,z(d(E)),1)])],64)):R("",!0)],2))}});const np={class:"content-container"},ap={class:"info-container"},sp={class:"info-title"},ip={class:"info-desc"},op={key:0,class:"source-up"},rp={class:"up-name"},lp={class:"source-business"},up=ue({__name:"ShareLiveMessage",props:{content:{type:Object,require:!0},isSelf:Boolean},setup(e){const t=e,n={1:"\u5C0F\u89C6\u9891",2:"\u76F8\u7C3F",3:"\u7EAF\u6587\u5B57",4:"\u76F4\u64AD",5:"\u6295\u7A3F\u89C6\u9891",6:"\u6295\u7A3F\u4E13\u680F",7:"\u756A\u5267",8:"\u97F3\u4E50",9:"\u56FD\u4EA7\u52A8\u753B",10:"\u56FE\u7247",11:"\u52A8\u6001",17:"\u756A\u5267"},a=K(()=>{const f=[];return t.isSelf&&f.push("is-self"),f}),s=K(()=>`background-image: url(${(t.content.cover||t.content.thumb?Mn(t.content.cover||t.content.thumb,48,48):{}).srcUrl||_i})`),i=K(()=>t.content.source===16?t.content.source_desc||"":n[t.content.source]||t.content.source||""),o=K(()=>{var f,v;return((v=(f=t.content)==null?void 0:f.url)==null?void 0:v.replace(/^http:\/\//,"https://"))||""}),c=f=>{const v=/https:\/\/live.bilibili.com\/(\d+)\?/,m=f.match(v);return m?m[1]:null},r=async f=>{if(f.startsWith("//")&&(f="https:"+f),!f.match(/https?:/))return;const v=c(f);if(v){Rt("window/openLiveRoomWindow",v);return}bn(f)},l=()=>{o.value&&r(o.value)};return(f,v)=>(h(),b("div",{class:ne(["share-container",d(a)]),onClick:l},[u("div",np,[u("div",{style:Ge(d(s)),class:"img"},null,4),u("div",ap,[u("div",sp,z(e.content.title),1),u("div",ip,z(e.content.desc),1)])]),u("div",{class:ne(["source-container",{reverse:!e.content.author}])},[e.content.author?(h(),b("div",op,[$(d(mi),{class:"up-widget"}),u("div",rp,z(e.content.author),1)])):R("",!0),u("div",lp,z(d(i)),1)],2)],2))}});const cp={key:0,class:"placeholder"},dp=u("div",{class:"tv"},null,-1),fp=[dp],vp=ue({__name:"AbnormalMessage",props:{content:{type:Object,required:!0}},setup(e){const t=e,n=D(!1),a=D({}),s=D(),i=K(()=>{const r=t.content&&t.content.jump_url&&t.content.jump_url.replace(/^http:/i,"").replace(/^javascript:/i,"")||"";return r.indexOf("bilibili://")===0?"":r});Xe(()=>{const r=new Image;r.onload=()=>{n.value=!0};let l=t.content&&t.content.pic_url;l=Mn(l,1080,540,!1).srcUrl.replace(/^http:/,""),l&&(r.src=l,a.value={"background-image":`url(${l})`})});const o=r=>{r.startsWith("//")&&(r="https:"+r),bn(r,"message.share")},c=()=>{i.value&&o(i.value)};return(r,l)=>(h(),b("div",{onClick:c,class:"component abnormal-card",ref_key:"message",ref:s},[n.value?R("",!0):(h(),b("div",cp,fp)),n.value?(h(),b("div",{key:1,style:Ge(a.value),class:"img"},null,4)):R("",!0)],512))}}),hp={class:"icon",viewBox:"0 0 16 16",fill:"currentColor"},mp=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 3.75c-1.714 0-3.208.088-4.258.174A1.45 1.45 0 0 0 2.4 5.246C2.323 6.107 2.25 7.25 2.25 8.5s.073 2.393.15 3.254a1.45 1.45 0 0 0 1.342 1.322c1.05.086 2.544.174 4.258.174s3.208-.088 4.258-.174a1.45 1.45 0 0 0 1.341-1.321c.078-.862.151-2.004.151-3.255s-.073-2.393-.15-3.255a1.45 1.45 0 0 0-1.342-1.321A52.956 52.956 0 0 0 8 3.75Zm-4.34-.823A53.955 53.955 0 0 1 8 2.75c1.747 0 3.27.09 4.34.177a2.45 2.45 0 0 1 2.255 2.228c.08.883.155 2.057.155 3.345 0 1.288-.075 2.462-.155 3.345a2.45 2.45 0 0 1-2.255 2.228c-1.07.087-2.593.177-4.34.177-1.747 0-3.27-.09-4.34-.177a2.45 2.45 0 0 1-2.255-2.229A37.662 37.662 0 0 1 1.25 8.5c0-1.288.075-2.461.155-3.344A2.45 2.45 0 0 1 3.66 2.927ZM4 7.25a.5.5 0 0 1 .5-.5h.25a.5.5 0 0 1 0 1H4.5a.5.5 0 0 1-.5-.5Zm2 0a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5Zm-.5 2a.5.5 0 0 0 0 1h.25a.5.5 0 0 0 0-1H5.5Zm2 0a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4Z"},null,-1),pp=[mp];function _p(e,t){return h(),b("svg",hp,[...pp])}var gp={render:_p};const yp={class:"im_video_card--l flex_shrink_0 mr_sm bd_radius ov_hidden"},wp={class:"im_video_card--r flex_col_between items_start h_100 py_xs"},bp={class:"b_text text_ellipsis_2l mt_0 hover_pink ts_all_fast"},Ep={key:0,class:"text3 fs_5"},kp={class:"text3 fs_5 video-card-num flex_start"},Cp={class:"flex_start"},Sp=ue({__name:"VideoMessage",props:{content:{type:Object,default:()=>({})}},setup(e){const t=e,n=K(()=>$t(t.content.danmaku||0)),a=K(()=>Bc(t.content.pub_date*1e3)),s=()=>{t.content.title&&t.content.bvid&&Cn({type:"ugc",bvid:t.content.bvid,fromSpmid:"main.chat.0.0.pv"})};return(i,o)=>{const c=Pe("VImg");return h(),b("div",{class:"im_video_card flex_start mx_lg w_100 cs_pointer u_select_none",onClick:s},[u("div",yp,[$(c,{class:"im_video_card--img cs_pointer",src:e.content.cover,width:128,height:72,rule:"1c"},null,8,["src"])]),u("div",wp,[u("p",bp,z(e.content.title||"\u5DF2\u5931\u6548"),1),u("div",null,[e.content.title?(h(),b("p",Ep,z(d(a)),1)):R("",!0),u("p",kp,[u("span",Cp,[$(d(gp)),le("\xA0"+z(d(n)),1)])])])])])}}}),$p={width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor"},xp=u("path",{d:"m8.633 7.096.53-.53-.53.53Zm0-.442.53.53-.53-.53Zm3.217 3.659.53-.53a.75.75 0 0 1 0 1.06l-.53-.53Zm-3.217 3.216-.53-.53.53.53Zm0 .442-.53.53.53-.53Zm.442 0 .53.53-.53-.53Zm3.29-3.29.53.53-.53-.53Zm0-.737-.53.53.53-.53Zm-3.29-3.29-.53.53.53-.53Zm-.972.972a1.063 1.063 0 0 1 0-1.502l1.06 1.06a.437.437 0 0 0 0-.618l-1.06 1.06Zm3.216 3.217L8.103 7.626l1.06-1.06 3.217 3.216-1.06 1.06Zm-3.216 2.156 3.216-3.217 1.06 1.06-3.216 3.217L8.103 13Zm0 1.502a1.063 1.063 0 0 1 0-1.502l1.06 1.06a.438.438 0 0 0 0-.618l-1.06 1.06Zm1.502 0a1.063 1.063 0 0 1-1.502 0l1.06-1.06a.438.438 0 0 0-.618 0l1.06 1.06Zm3.29-3.29-3.29 3.29-1.06-1.06 3.29-3.29 1.06 1.06Zm0-1.797a1.27 1.27 0 0 1 0 1.797l-1.06-1.06a.229.229 0 0 0 0 .324l1.06-1.061Zm-3.29-3.29 3.29 3.29-1.06 1.06-3.29-3.29 1.06-1.06Zm-1.502 0a1.063 1.063 0 0 1 1.502 0l-1.06 1.06c.17.171.447.171.618 0l-1.06-1.06Z"},null,-1),Ap=[xp];function Dp(e,t){return h(),b("svg",$p,[...Ap])}var Xc={render:Dp};const Tp=["textContent"],Ip={class:"header"},Pp=["textContent"],Fp=["textContent"],Rp={key:2,class:"modules"},Lp=["textContent"],Bp=["textContent"],Mp=["onClick"],Op=["textContent"],Np=ue({__name:"NotifyMessage",props:{content:{type:Object,required:!0}},setup(e){const t=e,n=K(()=>{var l;const i=["jump_text","jump_text_2","jump_text_3"],o=["jump_uri","jump_uri_2","jump_uri_3"],c=["jump_uri_config","jump_uri_2_config","jump_uri_3_config"],r=[];for(let f=0;f<3;f++){const v=t.content[i[f]]||((l=t.content[c[f]])==null?void 0:l.text),m=t.content[o[f]];v&&m&&r.push({text:v,url:m,native:m.indexOf("bilibili://")===0})}return r}),a=K(()=>{var o;const i=(o=t.content.jump_uri_config)==null?void 0:o.all_uri;return!i||i.indexOf("bilibili://")===0?"":i}),s=K(()=>{var o;const i=((o=t.content.notifier)==null?void 0:o.jump_url)||t.content.jump_uri;return!i||i.indexOf("bilibili://")===0?"":i});return(i,o)=>{var c;return h(),b("div",{class:ne(["notify-message",{active:d(a)}]),onClick:o[1]||(o[1]=()=>d(a)?d(bn)(d(a),"message.Notify"):null)},[e.content.notifier?(h(),b("div",{key:0,class:"notifier",onClick:o[0]||(o[0]=Se(r=>d(s)?d(bn)(d(s),"message.Notify"):null,["stop"]))},[u("div",{class:"avatar",style:Ge({backgroundImage:`url(${d(tc)(e.content.notifier.avatar_url,48,48)})`})},null,4),u("div",{class:"name",textContent:z(e.content.notifier.nickname)},null,8,Tp)])):R("",!0),u("div",Ip,[u("div",{class:"title",textContent:z(e.content.title)},null,8,Pp)]),e.content.text?(h(),b("div",{key:1,class:"text-content",textContent:z(e.content.text)},null,8,Fp)):R("",!0),(c=e.content.modules)!=null&&c.length?(h(),b("div",Rp,[(h(!0),b(pe,null,De(e.content.modules,(r,l)=>(h(),b("div",{class:"module",key:l},[u("div",{class:"title",textContent:z(r.title)},null,8,Lp),u("div",{class:"detail",textContent:z(r.detail)},null,8,Bp)]))),128))])):R("",!0),(h(!0),b(pe,null,De(d(n),(r,l)=>(h(),b("div",{class:ne(["link",{active:!r.native}]),key:l,onClick:Se(()=>r.native?null:d(bn)(r.url,"message.Notify"),["stop"])},[u("span",{textContent:z(r.text)},null,8,Op),$(d(Xc),{class:"arrow"})],10,Mp))),128))],2)}}});var Vp=Je(Np,[["__scopeId","data-v-4fce3e36"]]);const Up=["textContent"],Hp=ue({__name:"IMMessageItem",props:{item:{type:Object,required:!0}},setup(e){const t=e,n=Lt(),a=ut(),{userInfos:s,contextMenu:i,messageList:o,selectedMessage:c,reportDialogVisible:r,spaceFromMessage:l}=ie(a),{userInfo:f}=ie(st()),v=K(()=>![5,8,10,11].includes(t.item.msg_type)&&!m.value),m=K(()=>{var k,T;return t.item.msg_type===10&&((T=(k=p.value)==null?void 0:k.biz_content)==null?void 0:T.biz_type)===4}),g=K(()=>t.item.msg_status===1||[301,302,303,304,305].includes(t.item.msg_type)),y=K(()=>g.value?t.item.msg_status===1?`${f.value.mid===t.item.sender_uid?"\u4F60":"\u5BF9\u65B9"}\u64A4\u56DE\u4E86\u4E00\u6761\u6D88\u606F`:t.item.content||"\u672A\u77E5\u6D88\u606F":""),E=K(()=>f.value.mid===t.item.sender_uid),_=K(()=>s.value[t.item.sender_uid]),p=K(()=>R1(t.item)),C=K(()=>p.value&&(p.value.source===8||/bilibili:\/\/music/.test(p.value.url)));let S=!1;const x=k=>{if(g.value)return;const T=[{text:"\u5220\u9664",handler:()=>{const A=o.value.findIndex(F=>F.msg_key===t.item.msg_key);A>=0&&o.value.splice(A,1)}}];E.value?T.unshift({text:"\u64A4\u56DE",handler:async()=>{S||(S=!0,await a.drawbackMessage(t.item),S=!1)}}):t.item.msg_type!==13&&T.push({text:"\u4E3E\u62A5",handler:async()=>{r.value=!0}}),c.value=t.item,i.value=T,a.openContextMenu(k)},w=(k=!1)=>{n.push({name:"Space",query:{mid:k?f.value.mid:_.value.mid}}),pt.emit("close"),l.value=!0};return(k,T)=>{var A,F,O,G,X,H,L,Q;return h(),b("div",{class:"im-message-item",onContextmenu:x},[d(v)&&!d(g)?(h(),b(pe,{key:0},[d(E)?R("",!0):(h(),J(Gn,{key:0,class:"avatar talker",face:(A=d(_))==null?void 0:A.face,verifyType:(G=(O=(F=d(_))==null?void 0:F.official)==null?void 0:O.type)!=null?G:-1,nft:!!((X=d(_))!=null&&X.face_nft_new),onClick:T[0]||(T[0]=()=>w(!1))},null,8,["face","verifyType","nft"])),u("div",{class:ne(["content",{self:d(E),talker:!d(E)}])},[e.item.msg_type===1?(h(),J(d(ko),{key:0,content:d(p).content||"",isSelf:d(E)},null,8,["content","isSelf"])):R("",!0),e.item.msg_type===2?(h(),J(Tm,{key:1,content:d(p)||"",isSelf:d(E),status:e.item.msg_status},null,8,["content","isSelf","status"])):R("",!0),e.item.msg_type===12?(h(),J(d(ko),{key:2,content:d(p).rid?"cv"+d(p).rid:"",isSelf:d(E)},null,8,["content","isSelf"])):R("",!0),e.item.msg_type===7&&!d(C)&&![17].includes(d(p).source)?(h(),J(tp,{key:3,content:d(p),isSelf:d(E)},null,8,["content","isSelf"])):R("",!0),e.item.msg_type===14?(h(),J(up,{key:4,content:d(p),isSelf:d(E)},null,8,["content","isSelf"])):R("",!0),e.item.msg_type===13?(h(),J(vp,{key:5,content:d(p)},null,8,["content"])):R("",!0),![1,2,7,10,11,12,13,14].includes(e.item.msg_type)||d(m)?(h(),J(d(ko),{key:6,class:"not-support",content:"\u6682\u4E0D\u652F\u6301\u6B64\u7C7B\u578B\u6D88\u606F",isSelf:d(E)},null,8,["isSelf"])):R("",!0)],2),d(E)?(h(),J(Gn,{key:1,class:"avatar self",face:d(f).face,verifyType:(Q=(L=(H=d(f))==null?void 0:H.official)==null?void 0:L.type)!=null?Q:-1,nft:!!d(f).face_nft,onClick:T[1]||(T[1]=()=>w(!0))},null,8,["face","verifyType","nft"])):R("",!0)],64)):R("",!0),e.item.msg_type===11?(h(),J(Sp,{key:1,content:d(p)},null,8,["content"])):R("",!0),e.item.msg_type===10&&!d(m)?(h(),J(Vp,{key:2,content:d(p)},null,8,["content"])):R("",!0),d(g)?(h(),b("div",{key:3,class:"sys-notify-message",textContent:z(d(y))},null,8,Up)):R("",!0)],32)}}});var Gp=Je(Hp,[["__scopeId","data-v-731c02f4"]]);const Vr=e=>(xn("data-v-616e8200"),e=e(),An(),e),jp={class:"im-report-wrapper"},Kp=Vr(()=>u("div",{class:"im-report-mask"},null,-1)),Wp={class:"im-report-dialog"},Zp=Vr(()=>u("div",{class:"header"},"\u6211\u8981\u4E3E\u62A5",-1)),zp=Vr(()=>u("div",{class:"reason-tip"},"\u8BF7\u9009\u62E9\u4E3E\u62A5\u7684\u7406\u7531\uFF1A",-1)),qp={class:"reason-list"},Yp={class:"footer"},Xp=le("\u53D6\u6D88"),Jp=le("\u786E\u5B9A"),Qp=ue({__name:"IMReportDialog",emits:["close"],setup(e,{emit:t}){const n=ut(),a=[{type:1,name:"\u8272\u60C5\u4F4E\u4FD7"},{type:2,name:"\u653F\u6CBB\u654F\u611F"},{type:3,name:"\u8FDD\u6CD5\u6709\u5BB3"},{type:4,name:"\u5E7F\u544A\u9A9A\u6270"},{type:5,name:"\u4EBA\u8EAB\u653B\u51FB"},{type:6,name:"\u8BC8\u9A97"},{type:0,name:"\u5176\u4ED6\u95EE\u9898"}],s=D(1),i=D("");let o=!1;const c=async()=>{if(!(s.value===0&&!i.value)&&!o){o=!0;try{await n.reportCurrent(s.value,i.value),ye({content:"\u4E3E\u62A5\u6210\u529F"}),t("close")}catch(r){console.error(r),ye({content:r.message||"\u7F51\u7EDC\u5F02\u5E38"})}o=!1}};return(r,l)=>{const f=Pe("v-checkbox"),v=Pe("VButton");return h(),b("div",jp,[Kp,u("div",Wp,[$(d(Kt),{class:"close",onClick:l[0]||(l[0]=m=>t("close"))}),Zp,zp,u("div",qp,[(h(),b(pe,null,De(a,(m,g)=>$(f,{key:g,modelValue:s.value===m.type,"onUpdate:modelValue":()=>s.value=m.type,class:"reason",size:"large",theme:"pink",label:m.name},null,8,["modelValue","onUpdate:modelValue","label"])),64))]),ke(u("textarea",{class:"reason-text","onUpdate:modelValue":l[1]||(l[1]=m=>i.value=m),type:"text",maxlength:"60",placeholder:"\u8BF7\u586B\u5199\u4E3E\u62A5\u7406\u7531"},null,512),[[Ki,i.value]]),u("div",Yp,[$(v,{class:"cancel",onClick:l[2]||(l[2]=m=>t("close"))},{default:ee(()=>[Xp]),_:1}),$(v,{class:"confirm",onClick:c,type:"pink",disabled:s.value===0&&!i.value},{default:ee(()=>[Jp]),_:1},8,["disabled"])])])])}}});var e_=Je(Qp,[["__scopeId","data-v-616e8200"]]);const t_={width:"9",height:"15",viewBox:"0 0 9 15",xmlns:"http://www.w3.org/2000/svg"},n_=u("path",{d:"m7.187 2.354-.53-.53.53.53Zm0-.708-.53.53.53-.53ZM2.041 7.5l-.53-.53a.75.75 0 0 0 0 1.06l.53-.53Zm5.146 5.146.53-.53-.53.53Zm0 .708.53.53-.53-.53Zm-.707 0-.53.53.53-.53ZM1.216 8.089l-.53.53.53-.53Zm0-1.178.53.53-.53-.53ZM6.48 1.646l.53.53-.53-.53Zm1.237 1.238a1.25 1.25 0 0 0 0-1.768l-1.06 1.06a.25.25 0 0 1 0-.353l1.06 1.06ZM2.571 8.03l5.146-5.146-1.06-1.06L1.51 6.97l1.061 1.06Zm5.146 4.086L2.571 6.97l-1.06 1.06 5.146 5.147 1.06-1.06Zm0 1.768a1.25 1.25 0 0 0 0-1.768l-1.06 1.06a.25.25 0 0 1 0-.353l1.06 1.06Zm-1.767 0a1.25 1.25 0 0 0 1.767 0l-1.06-1.06a.25.25 0 0 1 .353 0l-1.06 1.06ZM.685 8.62l5.265 5.264 1.06-1.06-5.264-5.265-1.06 1.06Zm0-2.24a1.583 1.583 0 0 0 0 2.24l1.061-1.061a.083.083 0 0 1 0-.118l-1.06-1.06ZM5.95 1.116.685 6.38l1.061 1.061L7.01 2.177l-1.06-1.06Zm1.767 0a1.25 1.25 0 0 0-1.767 0l1.06 1.06a.25.25 0 0 1-.353 0l1.06-1.06Z"},null,-1),a_=[n_];function s_(e,t){return h(),b("svg",t_,[...a_])}var Ur={render:s_};const i_={width:"24",height:"24",viewBox:"0 0 24 24",fill:"#61666d"},o_=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.748 5.498a1.748 1.748 0 1 1-3.496 0 1.748 1.748 0 0 1 3.496 0Zm0 13a1.749 1.749 0 1 1-3.497 0 1.749 1.749 0 0 1 3.498 0ZM12 13.748a1.749 1.749 0 1 0 0-3.497 1.749 1.749 0 0 0 0 3.498Z"},null,-1),r_=[o_];function l_(e,t){return h(),b("svg",i_,[...r_])}var Hr={render:l_};const Gr=(e,t)=>{const n=D(!1),a=s=>{(t==null?void 0:t.value)||e.value&&s.composedPath().includes(e.value)||(n.value=!1)};return se(n,async s=>{await new Promise(i=>setTimeout(i,0)),s?(document.body.addEventListener("click",a),document.body.addEventListener("contextmenu",a)):(document.body.removeEventListener("click",a),document.body.removeEventListener("contextmenu",a))}),n};const u_={class:"dialog"},c_={class:"header"},d_=["textContent"],f_={key:1,class:"no-more"},v_=["textContent"],h_=ue({__name:"IMDialog",setup(e){const t=ut(),{activeSession:n,userInfos:a,messageList:s,messageListCursor:i,messagePanelVisibleLock:o,reportDialogVisible:c,contextMenuVisible:r}=ie(t),l=K(()=>{var A;return(A=n.value.session)==null?void 0:A.system_msg_type}),f=t.initMessageList(),v=D(null),m=D(null),g=Bs(m),y=D(!1);se(g,()=>{g.value&&C()});const E=K(()=>{var A,F,O,G,X,H;return((A=n.value.session)==null?void 0:A.system_msg_type)&&((F=n.value.session)==null?void 0:F.account_info)?{face:((G=(O=n.value.session)==null?void 0:O.account_info)==null?void 0:G.pic_url)||"",name:((H=(X=n.value.session)==null?void 0:X.account_info)==null?void 0:H.name)||""}:a.value[n.value.id]}),_=()=>{const A=v.value;A&&(A.scrollTop=A.scrollHeight-A.clientHeight,t.updateSessionAck())};Xe(async()=>{await f,await At(),_(),y.value=!0,pt.on("scrollToBottom",_),t.getSessionOptions(n.value.id.toString())}),qe(()=>{pt.off("scrollToBottom",_)});const p=A=>{const F=v.value;F.scrollTop>F.scrollHeight-F.clientHeight-10&&t.updateSessionAck()},C=async()=>{var G;let A=0,F=0;if(await t.loadMoreMessage(()=>{var X,H;A=(X=v.value)==null?void 0:X.scrollHeight,F=(H=v.value)==null?void 0:H.scrollTop})){await At();const X=(G=v.value)==null?void 0:G.scrollHeight;v.value&&(v.value.scrollTop=X-A+F)}},S=()=>{var A,F;(A=n.value)!=null&&A.from?t.setActiveSession({type:(F=n.value)==null?void 0:F.from}):t.setActiveSession(null)},x=D(null),w=Gr(x,K(()=>o.value>0)),k=A=>{const F=new Date(A),O=(()=>{const X=new Date;return X.setHours(0,0,0,0),X.getTime()})(),G=`${("0"+F.getHours()).slice(-2)}:${("0"+F.getMinutes()).slice(-2)}`;return O<F.getTime()?G:O-1e3*60*60*24<F.getTime()?`\u6628\u5929 ${G}`:`${F.getMonth()+1}\u6708${F.getDate()}\u65E5 ${G}`},T=A=>{const F=s.value;return!(F[A-1]&&F[A].timestamp-F[A-1].timestamp<300)};return(A,F)=>{var O;return h(),b("div",u_,[u("div",c_,[u("div",{class:"back",onClick:S},[$(d(Ur))]),u("div",{class:"name",textContent:z((O=d(E))==null?void 0:O.name)},null,8,d_),u("div",{class:ne(["options-btn",{active:d(w)}])},[$(d(Hr),{onClick:F[0]||(F[0]=G=>w.value=!d(w))}),d(w)?(h(),b("div",{key:0,class:"options",ref_key:"optionsEl",ref:x},[$(bm)],512)):R("",!0)],2)]),u("div",{class:ne(["content",{sys_height:d(l),"lock-scroll":d(r)}]),ref_key:"container",ref:v,onScroll:p},[y.value?(h(),b("div",{key:0,class:"load-top",ref_key:"loadTop",ref:m},null,512)):R("",!0),d(i).has_more?R("",!0):(h(),b("div",f_,"\u6CA1\u6709\u66F4\u591A\u6D88\u606F\u4E86\uFF5E")),(h(!0),b(pe,null,De(d(s),(G,X)=>(h(),b(pe,{key:G.msg_key},[T(X)?(h(),b("div",{key:0,class:"time-label",textContent:z(k(G.timestamp*1e3))},null,8,v_)):R("",!0),$(Gp,{item:G},null,8,["item"])],64))),128))],34),d(l)?R("",!0):(h(),J(Wh,{key:0})),(h(),J(qa,{to:"body"},[d(c)?(h(),J(e_,{key:0,onClose:F[1]||(F[1]=G=>c.value=!1)})):R("",!0)]))])}}});var m_=Je(h_,[["__scopeId","data-v-6a177158"]]),p_="./assets/im_unfollow.56ec5de4.png",__="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAziDFwMmgzGCdmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsgszXOb+YwZIp7KHzp//HRjZASmehTAlZJanAyk/wBxWnJBUQkDA2MKkK1cXlIAYncA2SJFQEcB2XNA7HQIewOInQRhHwGrCQlyBrJvANkCyRmJQDMYXwDZOklI4ulIbKi9IMDj4urjoxBgZGJo6UHAuaSDktSKEhDtnF9QWZSZnlGi4AgMpVQFz7xkPR0FIwMjQwYGUJhDVH++AQ5LRjEOhFjKUwYG41ygoAZCLEuAgWH3NwYGwa0IMfWHQG/NZWA4EFCQWJQIdwDjN5biNGMjCJt7OwMD67T//z+HMzCwazIw/L3+///v7f///13GwMB8C6j3GwAcEGAanFDBOwAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAYKADAAQAAAABAAAAYAAAAACK+310AAAJRElEQVR4Ae1dTWzcRBR+492kUlpgAVWoSCWbC1yQSI5tgG4EV2hucGv6x7WtxL0JV5DaXmlLtzc4NYUrKCnQ9pitBAcEUrb0gET5SVFbqenuDO+N14nXa3vH3hl7NuuREtvjmffefN/Mmx/bswwsDWJloQLl8jQwPg2OMwnAqiBEFUBUQLAKMKh0mS5gA5jAP9bEtBuYrgmc3wXhNKDVarC5OsbZF5gtJknAS848lEqHAHhNAq7XuAaSQn83YJOvIiFNveLTScuVAAn6mLOANfwwCKilK0LKXAxWQfCreZORCwHihxM1KMHZzEGP4oqxZWjxq+zty8tRSUzFZ0bAVm1npVPoBqqmCjSYXOo/2kts9ov6YHLUc2dCgLh18hRwsdjTcarbmXHK7IgwSoB0NQ67Ym+N78ereSKMEIDupgrjpXM4kpnvV8ThuC/qsImuycDISTsB4vZHR6DNzw+Pu1GtAmZagzYCZCe7q0wjm9OqRRrKdAzOw5MWtYYNHfZrIcB1OWMrw+vrk0KJrWHz6ZwOl+QkVR1Mj+BPw1h5bXTAJwRwGD0+tiJunpwO4pH0eiACpL8fR/CD6zJJrRjK9HJdak1iMID9qQlwx/a8PoDunZGV87q4dSJ1v5eqD5DgC3F+ZyCoqRQMzrCDlxJjkpgA2eSQdU1m7ywxjrPADnx+NUmhEhEgO1zy+UWIQYDNsNmLjZgEXbeU+4DOUPNaV+7iIgQBsSKxCrkTFqXUAlBgBYddIzbUDINLNU7OE2ZUJmtqLYBmuNYuIauCkmU6HKJKzPrr7NsCxM1jCwAOrmgWITECCp1yLAEdvz9CSwyJIe6XYQM2W+SKmlEJ413QeKlwPVHIqcVXYNfYubikkS2gcD1xsCW8x2GOvXVpNSxXTAug2l8ELQjIp4LhkkIJcGu/rQ/Owwtid6yoRq0XhbogXGZdNzbsfPY1gP3vAezeD1CesAO31mOAR/cA7t8C+BP/zATqkKeCc4NyUJfR2j/1AcC+d4Mq87+mivAcVgz6m8CK0fzKhE0VfG6ygIK7FuxCXJAh30+13kbwg1C/jBWkihXFRGDsVFBsFwHi++PzRlzPrhfR7bwf1G3vNZFgxD1iX0BvBfpCtwsqwRHfPX2nL0yrybr3DcAf3wKQT1YJBNLegwDk2nSHvQfQlu90SwX5SibAqid4qwW4K3iG3uPZ/YqnL/q4jn733tfq4JMkIooIo3y6wx4Fm9PoxJeQ5eJmJ+8WATDu1NLI05aHRiBpg4mamtYWlXxuZyxTbhMgHDPuh9Q8+l3FLLvSPDRoswOHvcJKAqT7YVDzIrUf79/uL3LfO/3TRKUgf607/HNHt8RteT43JAkw7n7IV1MHGxdolEQkJBl9UFoa3k59GCc5+T2y9clfyfMlyTGOXwNh6IyC2KEkeVOlpY6SAIur6QSkbjCTGkv9iYlOvccO+hQL6m4LEExxnNgjJVnE+pf9W0IyiXpTU80nG7MJNVLD5JBovPxvNjo7WsjdkOuwKRD4mdR8X6E3W8878lNQX1wmp1RQGvfbErw5SNb24Ge4Dr7XmY37CRaOJlC/XgnGZn/9G9pAtuQREPuy/PiZha5KmzeJJl+0DPz6x8lGPzoso5HZz5+5+nXISyODiaoDDkymyastz2Mk4CcE4snf2kT2FUS68gZfGsmQAPrsP+8gSfg0GxIIfCKcWl7+YRL7AEsePUpgDJPggW96kqVMLKvgPMCCFuAZ7JFgonZuuTrDM1yvLEpHQQRA/i7IbyyRoNs/Wwm+LLQkwF98O85phHLnEz0PyOkhewNlkUwLA7UAe4Mcow/wVIrWdUiGxcFuAgi4tOtH2a7rpKaYCNhInTurjGnWaNLkyao823o2kADc5qsIOSHAkABB+6sVIRcEmGjSRKyZi/JCKTofeOAAh7sFFnkhIFsAa+alfuT1CoYuSEBj5IHICwDE3qFNTfPSP/J6EXvHfV+96IhzqAxyN193JizgRg4GjLhK2sUXPwCWKHCxKo/FvwwRwC2UMbgEtPlyhpoLVRJ5vioP9E/2AwJkBF0XwTACuG81O1Bvkha3Bbj6rruH4r9xBGjT8E7YJuBpq+5FFkfDCDiu+yEtWwQUbsgw6Nvir3vup4sAeV/A0na64swIAm3cBtkXtloAxbn7GRSTMh8+mk9FM/gbBV0ESG2CXdCsVY+4B7/okZOrFNHjYXoJcDvjjVztDFNOz3hVg4n3ilR1R6bD2h/ywxA9BLidMe9hKlJuVjf+wxag+g5pXm87x2LRW/spOYvKI24eX8fb1aj7ucbTfg4vzeLeDq+6ezv4jcnjQwu//tBzqv2Xp8JudX8p70/B2VEcpK74o6w5pzfdvE+JaBsE70t8+rLRmvc+/WiF135KEdkC6CZuW3MN/8/TeRHSIiDqWPuPRuXu6QO6EjpPz+C1fR1yl5E2X+CQ3mkvxVkYS4A7Y+NEQhFSISCW/LPeMBGxBFAGOXTiws65QViJrIkTF8KGnUHz+hIgM7Tai9gXNIOZi+soBBCrCcKsf1AiQM4NnPYciiv6g76YSr8/x2bqSljFjoKCutzfTBFrwfji2o8A7pQ7W2/4Y+LOlVqAJ8DdF59HDqm8dKN7ZEeTgE84JSKAMsiORRQjI8KiKwj8CZPZi/WuOIWLRC7IL0/8eOw0MOecP25kzwn8N5P/fgzhlZoAylzsLy0hRLeTvOZTTgoDEUAC3I6Z45IFq+Ll6ASBH7aw9lxSnx8EaGACSKC4vVAFXsKFO1bFyxEInaFm59WSQQqcuBMOUyan25vtGfzR5hGYMWMZJ9oz/ZYYwnAKi9PSAvyC3X6Bnd1xrUG6HCfVSMePT/BcOwGkQLqkdmkRGDsSVDic12IZVzXP6Kr1fgyMEOApGP7WgL4eH0xF/fqFV85BjkYJ8AwbOiLI3QBbSju298qtcsyEAM8Q+4nAGi+wk93N66qLaV7Z0h4zJcAzUm6TX6Ktki153ElvhuNbgSZdjVf24DEXAjwj3PmDUwPat9rk1smeQv9Rvo7Pr2dZ2/3qvfNcCfCMoOM2GayG/vcNJGTaf3/wc3Qv4KxCu30DnuHLWbmYfnZbQ0DQULGGPyD6sDwNjOMfqyJ4k+ifK3KLNYGbTLHATl9ynI4PjGjrBUbfPvO7mL6JrasBe1oNWwAPlvN/MigE4rwUFeMAAAAASUVORK5CYII=";const g_={viewBox:"0 0 40 40"},y_=u("circle",{cx:"20",cy:"20",r:"20",fill:"#48D1EA"},null,-1),w_=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.76 18.446a3.4 3.4 0 0 1 3.4-3.4h1.432l3.059-1.962c1.73-1.11 4.003.133 4.003 2.189V25.39c0 2.056-2.273 3.298-4.003 2.188l-3.059-1.962H13.16a3.4 3.4 0 0 1-3.4-3.4v-3.77Zm14.247 6.065a5.666 5.666 0 0 0 1.866-4.218 5.666 5.666 0 0 0-1.877-4.227.888.888 0 0 0-1.267.079.921.921 0 0 0 .078 1.286 3.831 3.831 0 0 1 1.271 2.862 3.832 3.832 0 0 1-1.263 2.855.921.921 0 0 0-.075 1.287c.329.376.896.41 1.267.076Zm5.353-4.18a8.033 8.033 0 0 1-3.328 6.535.889.889 0 0 1-1.251-.216.92.92 0 0 1 .213-1.271 6.201 6.201 0 0 0 2.571-5.047c0-2.03-.97-3.894-2.57-5.047a.92.92 0 0 1-.213-1.27.889.889 0 0 1 1.25-.217 8.033 8.033 0 0 1 3.328 6.534Z",fill:"#fff"},null,-1),b_=[y_,w_];function E_(e,t){return h(),b("svg",g_,[...b_])}var k_={render:E_};const C_={width:"16",height:"16",viewBox:"0 0 16 16",fill:"#C9CCD0"},S_=u("path",{d:"m14.833 14.204-.94-.94a.904.904 0 0 0-.017-.528c-.568-1.68-.966-4.3-1.223-6.522A4.681 4.681 0 0 0 8.88 2.157c.003-.028.009-.054.009-.083a.89.89 0 0 0-1.778 0c0 .032.006.062.01.093a4.674 4.674 0 0 0-2.718 1.607L3.278 2.649a.443.443 0 1 0-.628.627l11.556 11.556a.444.444 0 1 0 .627-.628ZM3.52 5.392c-.08.264-.139.539-.172.822-.257 2.222-.655 4.841-1.223 6.522-.198.583.22 1.19.836 1.19h3.51c.308.53.874.89 1.53.89.655 0 1.224-.36 1.53-.89h2.523L3.519 5.392Z"},null,-1),$_=[S_];function x_(e,t){return h(),b("svg",C_,[...$_])}var A_={render:x_};const D_={key:0,class:"avatar-container"},T_=["src"],I_=["src"],P_={class:"im-li-info"},F_=["textContent"],R_=["title","textContent"],L_={class:"time-label"},B_=["textContent"],M_={class:"notify"},O_={key:1,class:"red-dot"},N_=["textContent"],V_=ue({__name:"IMListItem",props:{item:{type:Object,required:!0},from:{type:String,default:""}},setup(e){const t=e,n=ut(),{userInfos:a,notifyConfig:s,unreadCount:i,imUnreadCount:o,contextMenu:c,selectedSession:r}=ie(n),{userInfo:l}=ie(st()),f=K(()=>{var k,T,A,F;return{user:((k=t.item.session)==null?void 0:k.unread_count)||0,system:((T=i.value)==null?void 0:T.sys_msg)||0,unfollow:((A=o.value)==null?void 0:A.unfollow_unread)||0,dustbin:((F=o.value)==null?void 0:F.dustbin_unread)||0}[t.item.type]}),v=K(()=>{var k,T,A,F,O,G,X;if(((k=t.item.session)==null?void 0:k.system_msg_type)&&((T=t.item.session)==null?void 0:T.account_info))return{face:((F=(A=t.item.session)==null?void 0:A.account_info)==null?void 0:F.pic_url)||"",name:((G=(O=t.item.session)==null?void 0:O.account_info)==null?void 0:G.name)||""};const w=((X=t.item.session)==null?void 0:X.talker_id)||"";return a.value[w]}),m=K(()=>{var k;return{user:((k=v.value)==null?void 0:k.name)||"",system:"\u7CFB\u7EDF\u901A\u77E5",unfollow:"\u672A\u5173\u6CE8\u4EBA\u6D88\u606F",dustbin:"\u7591\u4F3C\u4E0D\u826F\u6D88\u606F"}[t.item.type]}),g=K(()=>{var w;return t.item.type==="user"&&((w=t.item.session)==null?void 0:w.last_msg)?L1(t.item.session,l.value.mid,E)||"":t.item.content||""}),y=K(()=>{var w,k;return["dustbin","unfollow"].includes(t.item.type)?f.value?"dot":"arrow":!((w=t.item.session)!=null&&w.is_dnd)&&f.value&&s.value.msg_notify===2?"dot":!((k=t.item.session)!=null&&k.is_dnd)&&f.value&&s.value.msg_notify===1?"number":"arrow"}),E={},_=w=>{const k=Math.round(w/1e3),T=Date.now();if(T<k)return"";if(T-k<=6e4)return"\u521A\u521A";if(T-k<36e5)return Math.floor((T-k)/6e4)+"\u5206\u949F\u524D";if(T-k<864e5)return Math.floor((T-k)/36e5)+"\u5C0F\u65F6\u524D";if(new Date().setHours(0,0,0,0)-k<864e5)return"\u6628\u5929";const A=new Date(k),F=A.getFullYear(),O=A.getMonth()+1,G=A.getDate();return F===new Date().getFullYear()?`${O}\u6708${G}\u65E5`:`${F}\u5E74${O}\u6708${G}\u65E5`},p=()=>{var w;n.setActiveSession({type:t.item.type,id:(w=t.item.session)==null?void 0:w.talker_id,session:t.item.session,from:t.from})};K(()=>{var w;return(w=t.item.session)==null?void 0:w.system_msg_type});const C=K(()=>{var w,k;return(k=(w=t.item)==null?void 0:w.session)==null?void 0:k.top_ts}),S=(w,k)=>{const T=c.value.findIndex(A=>A.key==="top");T>=0&&(c.value[T].text=k)},x=w=>{var A;r.value=t.item;const k=()=>{c.value=[{text:"\u5168\u90E8\u6807\u8BB0\u4E3A\u5DF2\u8BFB",handler:async()=>{try{await n.handleClearSubListUnread(),ye({content:"\u6807\u8BB0\u6210\u529F"})}catch(F){ye({content:F.message||"\u7F51\u7EDC\u5F02\u5E38"})}}},{text:"\u6E05\u7A7A\u5217\u8868",handler:async()=>{try{await n.handleClearSubList(),ye({content:"\u6E05\u7A7A\u6210\u529F"})}catch(F){ye({content:F.message||"\u7F51\u7EDC\u5F02\u5E38"})}}},{text:"\u8BBE\u7F6E",handler:n.toSettingsPage}],n.openContextMenu(w)},T={unfollow:k,dustbin:k,user:()=>{var O,G;const F=[{key:"top",text:C.value?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876",handler:async()=>{await n.toggleSetTop(),S("top",C.value?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876")}},{key:"dnd",text:`${(O=t.item.session)!=null&&O.is_dnd?"\u5173\u95ED":"\u6D88\u606F"}\u514D\u6253\u6270`,handler:async()=>{var X;n.toggleMessageDnd(t.item.session,Number(!t.item.session.is_dnd)),S("dnd",`${(X=t.item.session)!=null&&X.is_dnd?"\u5173\u95ED":"\u6D88\u606F"}\u514D\u6253\u6270`)}},{text:"\u5220\u9664\u4F1A\u8BDD",handler:async()=>{try{await n.removeSession(t.item.session,!0),ye({content:"\u5220\u9664\u6210\u529F"})}catch(X){ye({content:X.message||"\u7F51\u7EDC\u5F02\u5E38"})}}}];(G=t.item.session)!=null&&G.unread_count&&F.unshift({text:"\u6807\u8BB0\u4E3A\u5DF2\u8BFB",handler:async()=>{try{await n.updateSessionAck(),ye({content:"\u6807\u8BB0\u6210\u529F"})}catch(X){ye({content:X.message||"\u7F51\u7EDC\u5F02\u5E38"})}}}),c.value=F,n.openContextMenu(w)}};(A=T[t.item.type])==null||A.call(T)};return(w,k)=>{var T,A;return h(),J(Wi((T=e.item.session)!=null&&T.top_ts?"span":"div"),{class:ne(["im-list-item",{"top-ts":(A=e.item.session)==null?void 0:A.top_ts}]),onClick:p,onContextmenu:x},{default:ee(()=>{var F,O,G,X,H,L,Q,q;return[e.item.type==="user"?(h(),b("div",D_,[$(Gn,{face:((F=d(v))==null?void 0:F.face)||"",verifyType:(X=(G=(O=d(v))==null?void 0:O.official)==null?void 0:G.type)!=null?X:-1,nft:!!((H=d(v))!=null&&H.face_nft_new),width:40,height:40},null,8,["face","verifyType","nft"])])):R("",!0),e.item.type==="system"?(h(),J(d(k_),{key:1,class:"avatar-container"})):R("",!0),e.item.type==="unfollow"?(h(),b("img",{key:2,class:"im-unfollow-icon",src:d(p_)},null,8,T_)):R("",!0),e.item.type==="dustbin"?(h(),b("img",{key:3,class:"im-dustbin-icon",src:d(__)},null,8,I_)):R("",!0),u("div",P_,[u("div",{class:"im-li-title",textContent:z(d(m))},null,8,F_),u("div",{class:"im-li-content",title:d(g),textContent:z(d(g))},null,8,R_)]),u("div",L_,[(L=e.item.session)!=null&&L.session_ts?(h(),b("div",{key:0,class:"time",textContent:z(_((Q=e.item.session)==null?void 0:Q.session_ts))},null,8,B_)):R("",!0),(q=e.item.session)!=null&&q.is_dnd?(h(),J(d(A_),{key:1,class:"bell"})):R("",!0)]),u("div",M_,[d(y)==="arrow"?(h(),J(d(Xc),{key:0,class:"a-right"})):R("",!0),d(y)==="dot"?(h(),b("div",O_)):R("",!0),d(y)==="number"?(h(),b("div",{key:2,class:"unread-count",textContent:z(d(f)>99?"99+":d(f))},null,8,N_)):R("",!0)])]}),_:1},40,["class"])}}});var Jc=Je(V_,[["__scopeId","data-v-010cbe3a"]]);const U_={class:"sn-item"},H_={class:"header"},G_=["textContent"],j_=["textContent"],K_={class:"content"},W_=["textContent"],Z_=["textContent","onClick"],z_=["href","onClick"],q_=le(" \u7F51\u9875\u94FE\u63A5 "),Y_={key:3},X_=["textContent","onClick"],J_=["textContent","onClick"],Q_=["textContent","onClick"],e2=["textContent"],t2=ue({__name:"SystemNotifyItem",props:{item:{type:Object,required:!0}},setup(e){const t=e,n=ut(),a=l=>{const f=y=>y.reduce((E,_)=>E.concat(Array.isArray(_)?f(_):_),[]),v=(y,E)=>_=>{const p=_.match(y)||[],C=_.split(y);return[p.map(E),C]};return((y,E)=>{const _=y.map(C=>C.match instanceof RegExp?v(C.match,C.replace):S=>{const[x,w]=C.match(S);return[x.map(C.replace),w]}),p=(C,S)=>{const x=_[C];return x?S.map(w=>{const[k,T]=x(w),A=p(C+1,T),F=[];for(let O=0;O<k.length;O++)F.push(A[O]),F.push(k[O]);return F.push(A[k.length]),F}):S};return f(p(0,[E]))})([{match:/#\{.*?\}\{.*?\}/,replace:y=>{const E=y.match(/#\{(.*?)\}\{"?(.*?)"?\}/);return{type:"s-link",text:E[1]||"",url:E[2]}}},{match:/(?:(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:bilibili|biligame)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:acg|b23)\.tv(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)dl\.(?:hdslb)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?))/g,replace:y=>({type:"link",url:y})},{match:/\[br]/g,replace:()=>({type:"br"})},{match:/av\d+/gi,replace:y=>({type:"avid",id:y})},{match:/bv1[\d\w]{9}/gi,replace:y=>({type:"bvid",id:y})},{match:/cv\d+/gi,replace:y=>({type:"cvid",id:y})},{match:/#[^\n\r#@]{1,32}?#/g,replace:y=>({type:"tag",tag:y})}],l)},s=K(()=>{const l=(()=>{const f=t.item.content;try{return JSON.parse(f).web||f}catch{return f}})();return a(l||"")}),i=l=>{!l||l.indexOf("bilibili://")===0||$s(l,"message.SystemNotify")},o=D(null),c=Gr(o),r=async l=>{c.value=!1;try{await n.deleteSystemNotify(l),ye({content:"\u5220\u9664\u6210\u529F"})}catch(f){ye({content:f.message||"\u7F51\u7EDC\u5F02\u5E38"})}};return(l,f)=>(h(),b("div",U_,[u("div",H_,[u("div",{class:"title",textContent:z(e.item.title)},null,8,G_),u("div",{class:"time-ago",textContent:z(d(B1)(new Date(e.item.time_at).getTime()))},null,8,j_),$(d(Hr),{class:"options-btn",onClick:f[0]||(f[0]=v=>c.value=!d(c))}),d(c)?(h(),b("div",{key:0,class:"option-list",ref_key:"optionsEl",ref:o},[u("div",{class:"option",onClick:f[1]||(f[1]=v=>r(e.item.id))},"\u5220\u9664")],512)):R("",!0)]),u("div",K_,[(h(!0),b(pe,null,De(d(s),(v,m)=>(h(),b(pe,{key:m},[v.length?(h(),b("span",{key:0,textContent:z(v)},null,8,W_)):R("",!0),v.type==="s-link"?(h(),b("span",{key:1,class:"c-link",textContent:z(v.text),onClick:g=>i(v.url)},null,8,Z_)):R("",!0),v.type==="link"?(h(),b("span",{key:2,class:"c-link",href:v.url,onClick:g=>i(v.url)},[$(d(Yc)),q_],8,z_)):R("",!0),v.type==="br"?(h(),b("br",Y_)):R("",!0),v.type==="avid"?(h(),b("span",{key:4,class:"c-link",textContent:z(v.id),onClick:g=>d(Cn)({type:"ugc",aid:v.id})},null,8,X_)):R("",!0),v.type==="bvid"?(h(),b("span",{key:5,class:"c-link",textContent:z(v.id),onClick:g=>d(Cn)({type:"ugc",bvid:v.id})},null,8,J_)):R("",!0),v.type==="cvid"?(h(),b("span",{key:6,class:"c-link",textContent:z(v.id),onClick:g=>d($s)("https://www.bilibili.com/read/cv"+v.id,"message.Article")},null,8,Q_)):R("",!0),v.type==="tag"?(h(),b("span",{key:7,class:"c-link",textContent:z(v.tag)},null,8,e2)):R("",!0)],64))),128))])]))}});var n2=Je(t2,[["__scopeId","data-v-13f15987"]]);const a2=e=>(xn("data-v-1c60552c"),e=e(),An(),e),s2={class:"system-notify"},i2={class:"header"},o2=a2(()=>u("div",{class:"title"},"\u7CFB\u7EDF\u901A\u77E5",-1)),r2={class:"content page_scroller"},l2={class:"content-wrap"},u2=ue({__name:"SystemNotify",setup(e){const t=ut(),{systemNotifyList:n}=ie(t),a=()=>{t.setActiveSession(null)};Xe(()=>{t.systemNotifyUpdateAck()});const s=D(null),i=Bs(s);return se(i,()=>{i.value&&t.systemNotifyLoadMore()}),(o,c)=>(h(),b("div",s2,[u("div",i2,[u("div",{class:"back",onClick:a},[$(d(Ur))]),o2]),u("div",r2,[u("div",l2,[(h(!0),b(pe,null,De(d(n),r=>(h(),J(n2,{class:"sn-li",key:r.id,item:r},null,8,["item"]))),128)),u("div",{class:"load-more",ref_key:"loadMoreEl",ref:s},null,512)])])]))}});var c2=Je(u2,[["__scopeId","data-v-1c60552c"]]);const d2={class:"im-sub-list"},f2={class:"header"},v2=["textContent"],h2={class:"options-btn"},m2={class:"option-list",ref:"el"},p2=ue({__name:"IMSubList",setup(e){const t={unfollow:"\u672A\u5173\u6CE8\u4EBA\u6D88\u606F",dustbin:"\u7591\u4F3C\u4E0D\u826F\u6D88\u606F"},n=K(()=>{var _,p;return t[(_=i.value)==null?void 0:_.type]||t[(p=i.value)==null?void 0:p.from]}),a=ut(),{subSessionList:s,activeSession:i,contextMenuVisible:o}=ie(a),c=K(()=>{var _,p;return((_=i.value)==null?void 0:_.from)||((p=i.value)==null?void 0:p.type)});a.fetchSubSessionList().then(()=>{pt.emit("subListLoaded")});const r=D(null),l=Bs(r);se(l,_=>{_&&a.fetchSubSessionList(!0)});const f=()=>{a.setActiveSession(null)},v=D(null),m=Gr(v);let g=!1;const y=async()=>{if(!g){g=!0,m.value=!1;try{await a.handleClearSubListUnread(),ye({content:"\u6807\u8BB0\u6210\u529F"})}catch(_){ye({content:_.message||"\u7F51\u7EDC\u5F02\u5E38"})}g=!1}},E=async()=>{if(!g){g=!0,m.value=!1;try{await a.handleClearSubList(),ye({content:"\u6E05\u7A7A\u6210\u529F"})}catch(_){ye({content:_.message||"\u7F51\u7EDC\u5F02\u5E38"})}g=!1}};return(_,p)=>(h(),b("div",d2,[u("div",f2,[u("div",{class:"back",onClick:f},[$(d(Ur))]),u("div",{class:"name",textContent:z(d(n)||"")},null,8,v2),u("div",h2,[$(d(Hr),{onClick:p[0]||(p[0]=C=>m.value=!d(m))}),d(m)?(h(),b("div",{key:0,class:"options",ref_key:"optionsEl",ref:v},[u("div",m2,[u("div",{class:"option",onClick:y},"\u5168\u90E8\u6807\u8BB0\u4E3A\u5DF2\u8BFB"),u("div",{class:"option",onClick:E},"\u6E05\u7A7A\u5217\u8868"),u("div",{class:"option",onClick:p[1]||(p[1]=(...C)=>d(a).toSettingsPage&&d(a).toSettingsPage(...C))},"\u8BBE\u7F6E")],512)],512)):R("",!0)])]),u("div",{class:ne(["content page_scroller",{"lock-scroll":d(o)}]),ref:"container"},[(h(!0),b(pe,null,De(d(s),C=>(h(),J(Jc,{key:C.talker_id,item:{type:"user",session:C},from:d(c)},null,8,["item","from"]))),128)),u("div",{class:"load-more",ref_key:"loadMoreEl",ref:r},null,512)],2)]))}});var _2=Je(p2,[["__scopeId","data-v-7c3f7450"]]);const g2=["onClick"],y2=ue({__name:"MessageContextMenu",setup(e){const t=D(null),n=ut(),{contextMenu:a,contextMenuVisible:s,contextMenuPosition:i,messagePanelVisibleLock:o}=ie(n),c=K(()=>{const v=a.value.length*40+24;let m=i.value.y;return m+v>window.innerHeight&&(m=m-v),{left:i.value.x+"px",top:m+"px"}}),r=f=>{f.composedPath().some(v=>v===t.value)||(s.value=!1,document.body.removeEventListener("click",r),document.body.removeEventListener("contextmenu",r))};se(s,async()=>{s.value?(o.value+=1,await new Promise(f=>setTimeout(f,0)),document.body.addEventListener("click",r),document.body.addEventListener("contextmenu",r)):o.value=Math.max(0,o.value-1)});const l=async f=>{var v;(v=f.handler)==null||v.call(f),s.value=!1};return(f,v)=>(h(),J(qa,{to:"body"},[d(s)?(h(),b("div",{key:0,class:"msg-context-menu",ref_key:"container",ref:t,style:Ge(d(c))},[(h(!0),b(pe,null,De(d(a),(m,g)=>(h(),b("div",{class:"option",key:g,onClick:()=>l(m)},z(m.text),9,g2))),128))],4)):R("",!0)]))}});var w2=Je(y2,[["__scopeId","data-v-f50d9a3c"]]);const b2=e=>(xn("data-v-577337b8"),e=e(),An(),e),E2={class:"panel-im"},k2={key:1,class:"im-empty"},C2=b2(()=>u("div",{class:"im-empty-text"},"\u6682\u65F6\u6CA1\u6709\u6D88\u606F\u54E6~",-1)),S2=ue({__name:"MessageIM",setup(e){const t=ut(),{sessionList:n,activeSession:a,sessionListCursor:s,contextMenuVisible:i}=ie(t),o=K(()=>n.value.filter(f=>{var v;return((v=f.session)==null?void 0:v.system_msg_type)!==8})),c=D(null),r=Bs(c);se(r,f=>{f&&t.loadMoreSession()});const l=D(!0);return pt.on("openMessage",()=>{l.value=!1,setTimeout(()=>{l.value=!0},500)}),(f,v)=>(h(),b(pe,null,[u("div",{class:ne(["panel-im-wrap pd_lg",{"lock-scroll":d(i)}])},[u("div",E2,[!d(s).initialized&&!d(o).length?(h(),J(Zn,{key:0,"is-small":""})):R("",!0),d(s).initialized&&!d(o).length?(h(),b("div",k2,[u("div",{class:"im-empty-img",style:Ge({backgroundImage:`url(${d(Xv)})`})},null,4),C2])):R("",!0),(h(!0),b(pe,null,De(d(o),m=>{var g;return h(),J(Jc,{key:`${m.type}_${((g=m.session)==null?void 0:g.talker_id)||""}`,item:m},null,8,["item"])}),128)),u("div",{class:"load-more",ref_key:"loadMoreEl",ref:c},null,512)])],2),(h(),J(qa,{to:"#message-pages-container"},[$(yt,{name:"message-page-slide"},{default:ee(()=>{var m;return[((m=d(a))==null?void 0:m.type)==="system"?(h(),J(c2,{key:0,class:"im-window"})):R("",!0)]}),_:1}),$(yt,{name:"message-page-slide"},{default:ee(()=>[["unfollow","dustbin"].some(m=>{var g,y;return m===((g=d(a))==null?void 0:g.type)||m===((y=d(a))==null?void 0:y.from)})?(h(),J(_2,{key:0,class:"im-window"})):R("",!0)]),_:1}),$(yt,{name:"message-page-slide",css:l.value},{default:ee(()=>{var m;return[((m=d(a))==null?void 0:m.type)==="user"?(h(),J(m_,{key:0,class:"im-window"})):R("",!0)]}),_:1},8,["css"])])),$(w2)],64))}});var $2=Je(S2,[["__scopeId","data-v-577337b8"]]);const x2=["textContent"],A2=ue({__name:"Name",props:{name:{type:String,required:!0},isVip:{type:Boolean,default:!1},hoverPink:{type:Boolean,default:!1}},setup(e){return(t,n)=>(h(),b("span",{class:ne(["user_name u_select_none cs_pointer",{"is-vip":e.isVip,hover_pink:e.hoverPink}]),textContent:z(e.name)},null,10,x2))}});const D2={class:"message_notification_item"},T2={class:"message_notification_item--main"},I2={class:"message_notification_item--body"},P2={class:"message_notification_item--details"},F2={class:"message_notification_item--details--author"},R2=["textContent"],L2={key:0,class:"message_notification_item--details--content"},B2={class:"message_notification_item--bottom"},M2=["textContent"],O2={class:"message_notification_item--reference"},N2={key:0,class:"message_notification_item--reference--img"},V2=["textContent"],jr=ue({__name:"NotificationItem",props:{users:{type:Object,required:!0},pubText:{type:String,required:!0},pubTs:{type:Number,default:()=>Date.now()},contentNodes:{type:Array,default:null},reference:{type:Object,required:!0}},setup(e){const t=e,n=Lt(),{spaceFromMessage:a}=ie(ut()),s=K(()=>{let o=t.pubTs;return o<9466848e5&&(o*=1e3),Bc(o)}),i=o=>{n.push({name:"Space",query:{mid:o}}),pt.emit("close"),a.value=!0};return(o,c)=>(h(),b("div",D2,[u("div",T2,[u("div",{class:ne(["message_notification_item--avatar",{"is-overlap--front":e.users.length===2}])},[$(Gn,{face:e.users[0].face,onClick:c[0]||(c[0]=Se(r=>i(e.users[0].mid),["stop"]))},null,8,["face"])],2),e.users[1]?(h(),b("div",{key:0,class:ne(["message_notification_item--avatar",{"is-overlap--back":e.users.length===2}])},[$(Gn,{face:e.users[1].face,onClick:c[1]||(c[1]=Se(r=>i(e.users[1].mid),["stop"]))},null,8,["face"])],2)):R("",!0),u("div",I2,[u("div",P2,[u("div",F2,[(h(!0),b(pe,null,De(e.users,(r,l)=>(h(),b(pe,{key:l},[$(A2,{name:r.name,hoverPink:"",onClick:Se(f=>i(r.mid),["stop"])},null,8,["name","onClick"]),le(" "+z(l!==e.users.length-1?"\u3001":""),1)],64))),128)),u("span",{class:"text2",textContent:z(e.pubText)},null,8,R2)]),e.contentNodes&&e.contentNodes.length?(h(),b("div",L2,[$(d(Pr),{nodes:e.contentNodes,lines:"2",unfold:!1,"show-action":!1},null,8,["nodes"])])):R("",!0)]),u("div",B2,[u("div",{class:"text3 flex_shrink_0",textContent:z(d(s))},null,8,M2),xs(o.$slots,"actions")])]),u("div",O2,[e.reference.type==="img"?(h(),b("div",N2,[$(qc,{src:e.reference.img},null,8,["src"])])):(h(),b("span",{key:1,class:"text3",textContent:z(e.reference.text)},null,8,V2))])]),xs(o.$slots,"extension")]))}});const U2=["onClick"],H2={class:"message_notification_reply_box--avatar_wrap"},G2={class:"message_notification_item--avatar"},j2={class:"message_notification_reply_box--input_wrap"},K2=["placeholder"],W2=["disabled","onClick"],Qc=ue({__name:"NotificationReplyBox",props:{placeholder:{type:String,default:"\u8BF7\u81EA\u89C9\u9075\u5B88\u4E92\u8054\u7F51\u76F8\u5173\u7684\u653F\u7B56\u6CD5\u89C4\uFF0C\u4E25\u7981\u53D1\u5E03\u8272\u60C5\u3001\u66B4\u529B\u3001\u53CD\u52A8\u7684\u8A00\u8BBA\u3002"},oid:{type:Number,required:!0},type:{type:Number,required:!0},root:{type:Number,required:!0},parent:{type:Number,required:!0},replyNickname:{type:String,default:""}},emits:["done"],setup(e,{emit:t}){const n=e,{userInfo:a}=ie(st()),s=D("");async function i(){try{await Uf({oid:n.oid,type:n.type,root:n.root,parent:n.parent,message:n.replyNickname?`\u56DE\u590D @${n.replyNickname} :${s.value}`:s.value,scene:"msg",from:"im-reply"}),ye({content:"\u53D1\u9001\u6210\u529F"}),t("done")}catch(o){ye({content:o.message||`\u7535\u6CE2\u65E0\u6CD5\u5230\u8FBE~${o.code}`})}}return(o,c)=>(h(),b("div",{class:"message_notification_reply_box flex_center",onClick:Se(r=>{},["stop"])},[u("div",H2,[u("div",G2,[$(Gn,{face:d(a).face},null,8,["face"])])]),u("div",j2,[ke(u("textarea",{class:"message_notification_reply_box--input bili_textarea",placeholder:e.placeholder,"onUpdate:modelValue":c[0]||(c[0]=r=>s.value=r)},`\r
      `,8,K2),[[Ki,s.value]]),u("button",{class:"message_notification_reply_box--btn",disabled:!s.value,onClick:Se(i,["stop"])},"\u56DE\u590D",8,W2)])],8,U2))}}),Z2={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},z2=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.333 7.833A5.333 5.333 0 0 1 6.667 2.5h2.666a5.333 5.333 0 0 1 .304 10.658c-.639.819-1.688 1.844-3.163 2.246a.655.655 0 0 1-.692-.232.678.678 0 0 1-.086-.687c.22-.509.27-.976.241-1.368a5.334 5.334 0 0 1-4.604-5.284ZM6.667 3.5a4.333 4.333 0 0 0-.26 8.659.5.5 0 0 1 .46.4 3.81 3.81 0 0 1-.028 1.65c.957-.44 1.674-1.204 2.14-1.838a.5.5 0 0 1 .398-.205A4.333 4.333 0 0 0 9.333 3.5H6.667Z",fill:"currentColor"},null,-1),q2=[z2];function Y2(e,t){return h(),b("svg",Z2,[...q2])}var ed={render:Y2};const X2={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},J2=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.283 2.53a.532.532 0 0 0-.455.17c-.176.206-.248.375-.336.625l-.03.088c-.088.253-.2.576-.433.988-.398.707-.77 1.134-1.228 1.535-.375.329-.757.553-1.134.66v7.054a71.403 71.403 0 0 0 5.291-.073c.607-.031 1.134-.332 1.409-.82.385-.685.86-1.69 1.147-2.873.268-1.103.39-2.01.446-2.649.025-.296-.21-.568-.573-.568h-3.322a.5.5 0 0 1-.462-.69v-.001l.003-.007.01-.027a7.863 7.863 0 0 0 .178-.49 6.62 6.62 0 0 0 .269-1.047c.078-.522.059-.94-.146-1.329-.22-.416-.469-.526-.634-.546Zm1.493 3.137h2.61c.883 0 1.651.708 1.57 1.654a18.718 18.718 0 0 1-.47 2.799 12.521 12.521 0 0 1-1.248 3.127c-.465.828-1.328 1.282-2.228 1.329a72.39 72.39 0 0 1-3.677.092c-1.47 0-2.815-.045-3.768-.088-1.072-.05-1.971-.845-2.086-1.936a25.492 25.492 0 0 1-.146-2.642c0-.913.059-1.74.127-2.397.12-1.148 1.104-1.938 2.212-1.938h1.495c.212 0 .542-.104.975-.483.375-.329.674-.668 1.017-1.274.186-.33.272-.577.358-.825l.032-.092c.104-.294.225-.599.52-.944a1.531 1.531 0 0 1 1.33-.512c.55.064 1.059.421 1.403 1.073.347.658.342 1.326.25 1.942a7.313 7.313 0 0 1-.276 1.115Zm-6.11 7.956V6.667h-.994c-.642 0-1.156.448-1.217 1.041-.066.63-.122 1.423-.122 2.294 0 .952.067 1.843.14 2.537.061.575.535 1.014 1.138 1.042.312.014.668.029 1.056.042Z",fill:"currentColor"},null,-1),Q2=[J2];function e5(e,t){return h(),b("svg",X2,[...Q2])}var t5={render:e5};const n5={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a5=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 3.833c0-.92-.746-1.666-1.667-1.666H6.667C5.747 2.167 5 2.913 5 3.833v.334H1.833a.5.5 0 0 0 0 1h12.334a.5.5 0 0 0 0-1H11v-.334Zm-1 .334H6v-.334c0-.368.298-.666.667-.666h2.666c.369 0 .667.298.667.666v.334Zm-6.333 2.5a.5.5 0 0 0-1 0v5.436c0 1.333.99 2.479 2.344 2.592.872.073 1.944.138 2.989.138s2.117-.065 2.989-.138c1.354-.113 2.344-1.26 2.344-2.592V6.667a.5.5 0 1 0-1 0v5.436c0 .84-.618 1.528-1.428 1.596-.856.071-1.898.134-2.905.134s-2.05-.063-2.905-.134c-.81-.068-1.428-.757-1.428-1.596V6.667Zm2.666.833a.5.5 0 0 1 .5.5v2.333a.5.5 0 1 1-1 0V8a.5.5 0 0 1 .5-.5Zm3.834.5a.5.5 0 0 0-1 0v2.333a.5.5 0 1 0 1 0V8Z",fill:"currentColor"},null,-1),s5=[a5];function i5(e,t){return h(),b("svg",n5,[...s5])}var Kr={render:i5};const o5=["onClick"],r5=le("\u56DE\u590D"),l5=["onClick"],u5=["onClick"],c5=le("\u5220\u9664"),d5=ue({__name:"NotificationReplyItem",props:{data:{type:Object,required:!0},focus:{type:Boolean,default:!1}},emits:["focus","like","delete","click"],setup(e,{emit:t}){const n=e,a=D(!1),s=D(""),i=K(()=>{let _="";const p=n.data.item.business,C=n.data.counts,S=n.data.is_multi;return!p||p==="\u8BC4\u8BBA"?_="\u56DE\u590D\u4E86\u6211\u7684\u8BC4\u8BBA":p==="\u5F39\u5E55"?_=n.data.item.target_id>0?"\u56DE\u590D\u4E86\u6211\u7684\u5F39\u5E55":"\u5BF9\u6211\u7684\u5F39\u5E55\u53D1\u8868\u4E86\u8BC4\u8BBA":S?_=`\u7B49\u4EBA\u5BF9\u6211\u7684${p}\u53D1\u8868\u4E86${C}\u6761\u8BC4\u8BBA`:C>1?_=`\u5BF9\u6211\u7684${p}\u53D1\u8868\u4E86${C}\u6761\u8BC4\u8BBA`:_=`\u5BF9\u6211\u7684${p}\u53D1\u8868\u4E86\u8BC4\u8BBA`,_}),o=K(()=>Lr(n.data.item.source_content,(n.data.item.at_details||[]).map(_=>({name:_.nickname,mid:_.mid})))),c=K(()=>`\u56DE\u590D @${n.data.user.nickname}`),r=K(()=>!n.data.item.title&&!n.data.item.image&&!n.data.item.desc),l=K(()=>r.value?{type:"img",img:""}:n.data.item.image?{type:"img",img:n.data.item.image}:{type:"text",text:n.data.item.title||n.data.item.desc}),f=K(()=>!r.value&&!n.data.item.hide_reply_button),v=K(()=>f.value||!n.data.item.hide_like_button);se(()=>n.focus,_=>{_?a.value=!0:(s.value="",a.value=!1)});function m(){t("focus",!a.value)}function g(){t("like")}function y(){t("delete")}function E(){t("click")}return(_,p)=>(h(),J(jr,{users:[{face:e.data.user.avatar,name:e.data.user.nickname,mid:e.data.user.mid}],"pub-text":d(i),"pub-ts":e.data.reply_time,"content-nodes":d(o),reference:d(l),class:ne(e.focus?"is-focus":""),onClick:Se(E,["stop"])},{actions:ee(()=>[d(f)?(h(),b("span",{key:0,class:"message_notification_item--action",onClick:Se(m,["stop"])},[$(d(ed)),r5],8,o5)):R("",!0),d(v)?(h(),b("span",{key:1,class:ne(["message_notification_item--action",{"is-active":!!e.data.item.like_state}]),onClick:Se(g,["stop"])},[$(d(t5)),le(z(e.data.item.like_state?"\u5DF2\u8D5E":"\u70B9\u8D5E"),1)],10,l5)):R("",!0),u("span",{class:"message_notification_item--action hover_visible",onClick:Se(y,["stop"])},[$(d(Kr)),c5],8,u5)]),extension:ee(()=>[a.value?(h(),J(Qc,{key:0,placeholder:d(c),oid:e.data.item.subject_id,type:e.data.item.business_id,root:e.data.item.root_id||e.data.item.source_id,parent:e.data.item.source_id,"reply-nickname":e.data.item.target_id?e.data.user.nickname:"",onDone:m},null,8,["placeholder","oid","type","root","parent","reply-nickname"])):R("",!0)]),_:1},8,["users","pub-text","pub-ts","content-nodes","reference","class","onClick"]))}});const Ji=ue({__name:"LoadMoreTriggerShim",props:{height:{type:Number,default:0},block:{type:Boolean,default:!1}},emits:["trigger"],setup(e,{emit:t}){const n=D(null),a=Bs(n);return se(a,()=>{a.value&&t("trigger")}),(s,i)=>(h(),b("div",{ref_key:"elRef",ref:n,class:ne(["load_more_trigger_shim",{block:e.block}]),style:Ge({height:e.height?`${e.height}px`:""})},null,6))}});const f5={},v5={class:"datastatus--empty"},h5=u("img",{src:Tc},null,-1),m5=u("p",null,"\u6CA1\u6709\u4F60\u60F3\u8981\u7684\u5185\u5BB9~",-1),p5=[h5,m5];function _5(e,t){return h(),b("div",v5,p5)}var Wr=Je(f5,[["render",_5]]);const g5={class:"message_reply h_100"},y5={key:1,class:"message_mention_item_wrap"},w5=ue({__name:"MessageReply",setup(e){const t={id:0,time:0},{list:n,status:a}=Mr([]),s=D(-1);async function i(){if(a.value!=="noMore"&&a.value!=="loading")try{a.value="loading";const l=await ah(t.id,t.time);if(n.value.push(...l.items||[]),console.log(l.cursor),l.cursor.is_end){n.value.length?a.value="noMore":a.value="empty";return}t.id=l.cursor.id,t.time=l.cursor.time,n.value.length?a.value="loaded":a.value="empty"}catch(l){console.log(l),n.value.length||(a.value="error")}}async function o(l){try{if(!await kn({content:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",message:"\u5220\u9664\u8BE5\u6761\u901A\u77E5\u540E\u5C06\u65E0\u6CD5\u6062\u590D",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"}))return;const v=n.value[l];await Rr(v.id,1),n.value.splice(l,1)}catch(f){ye({content:f.message})}}async function c(l){var f,v,m,g,y,E;try{const _=n.value[l],p=String((f=_.item)==null?void 0:f.subject_id),C=(v=_.item)==null?void 0:v.like_state;((m=_.item)==null?void 0:m.type)==="danma"?await Hf({oid:p,dmid:(g=_.item)==null?void 0:g.source_id,op:C===1?2:1,scene:"msg",from:"im-reply"}):await Gf({oid:p,type:(y=_.item)==null?void 0:y.business_id,rpid:(E=_.item)==null?void 0:E.source_id,action:C===1?0:1,from:"im-reply",scene:"msg"}),C!==1?(ye({content:"\u70B9\u8D5E\u6210\u529F"}),_.item.like_state=1):_.item.like_state=0}catch(_){ye({content:_.message})}}function r(l){const f=n.value[l],v=$r(f);xr(v)}return i(),(l,f)=>(h(),b("div",g5,[d(n).length?(h(),b("div",y5,[(h(!0),b(pe,null,De(d(n),(v,m)=>(h(),J(d5,{key:v.id,data:v,focus:s.value===m,onFocus:g=>s.value=g?m:-1,onLike:()=>c(m),onDelete:()=>o(m),onClick:()=>r(m)},null,8,["data","focus","onFocus","onLike","onDelete","onClick"]))),128))])):(h(),b(pe,{key:0},[d(a)==="error"?(h(),J(Zn,{key:0,"is-small":""})):d(a)==="empty"?(h(),J(Wr,{key:1})):d(a)==="loading"?(h(),J(Yi,{key:2})):R("",!0)],64)),d(n).length&&d(a)!=="noMore"&&d(a)!=="loading"?(h(),J(Ji,{key:2,block:"",onTrigger:i})):R("",!0)]))}});const b5={class:"message_mention h_100"},E5={key:1,class:"message_mention_item_wrap"},k5=["onClick"],C5=le(" \u56DE\u590D "),S5=["onClick"],$5=le(" \u5220\u9664\u8BE5\u901A\u77E5 "),x5=ue({__name:"MessageMention",setup(e){const t={id:0,time:0},{list:n,status:a}=Mr([]),s=D(-1);function i(l){const f=!l.item.title&&!l.item.image&&!l.item.desc,v={id:l.id,users:[{face:l.user.avatar,name:l.user.nickname,mid:l.user.mid}],pubTs:l.at_time,pubText:`\u5728${l.item.business}\u4E2D@\u4E86\u6211`,contentNodes:Lr(l.item.source_content,(l.item.at_details||[]).map(m=>({name:m.nickname,mid:m.mid}))),reference:{type:f||l.item.image?"img":"text",img:"",text:""},showReplayAction:!f&&!l.item.hide_reply_button,replyBoxProps:{placeholder:`\u56DE\u590D @${l.user.nickname}`,oid:l.item.subject_id,type:l.item.business_id,root:l.item.root_id||l.item.source_id,parent:l.item.parent||0,replyNickname:l.item.target_id?l.user.nickname:""},url:l.item.uri,openState:$r(l)};return v.reference.type==="img"?v.reference.img=l.item.image:v.reference.text=l.item.title||l.item.desc,v}async function o(){if(a.value!=="noMore"&&a.value!=="loading")try{a.value="loading";const l=await sh(t.id,t.time);if(n.value.push(...(l.items||[]).map(i)),l.cursor.is_end){n.value.length?a.value="noMore":a.value="empty";return}t.id=l.cursor.id,t.time=l.cursor.time,n.value.length?a.value="loaded":a.value="empty"}catch(l){console.log(l),n.value.length||(a.value="error")}}async function c(l){try{if(!await kn({content:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",message:"\u5220\u9664\u8BE5\u6761\u901A\u77E5\u540E\u5C06\u65E0\u6CD5\u6062\u590D",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"}))return;const v=n.value[l];await Rr(v.id,2),n.value.splice(l,1)}catch(f){ye({content:f.message})}}function r(l){const f=n.value[l];xr(f.openState)}return o(),(l,f)=>(h(),b("div",b5,[d(n).length?(h(),b("div",E5,[(h(!0),b(pe,null,De(d(n),(v,m)=>(h(),J(jr,{key:v.id,users:v.users,"pub-text":v.pubText,"content-nodes":v.contentNodes,"pub-ts":v.pubTs,reference:v.reference,onClick:()=>r(m)},{actions:ee(()=>[v.showReplayAction?(h(),b("span",{key:0,class:"message_notification_item--action",onClick:Se(()=>{s.value=m},["stop"])},[$(d(ed)),C5],8,k5)):R("",!0),u("span",{class:"message_notification_item--action hover_visible",onClick:Se(g=>c(m),["stop"])},[$(d(Kr)),$5],8,S5)]),extension:ee(()=>[s.value===m?(h(),J(Qc,M1({key:0},v.replyBoxProps,{onDone:f[0]||(f[0]=()=>{s.value=-1})}),null,16)):R("",!0)]),_:2},1032,["users","pub-text","content-nodes","pub-ts","reference","onClick"]))),128))])):(h(),b(pe,{key:0},[d(a)==="error"?(h(),J(Zn,{key:0,"is-small":""})):d(a)==="empty"?(h(),J(Wr,{key:1})):d(a)==="loading"?(h(),J(Yi,{key:2})):R("",!0)],64)),d(n).length&&d(a)!=="noMore"&&d(a)!=="loading"?(h(),J(Ji,{key:2,block:"",onTrigger:o})):R("",!0)]))}}),A5={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},D5=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.748 2.555a.75.75 0 1 0-1.496 0A5.001 5.001 0 0 0 3 7.5v2.861a.236.236 0 0 1-.07.167l-.518.52c-.63.63-.471 1.62.188 2.056l-.87.87a.5.5 0 1 0 .706.708L13.73 3.389a.5.5 0 0 0-.707-.707l-1.386 1.386a4.99 4.99 0 0 0-2.888-1.513Zm-1.9 10.933a1.25 1.25 0 0 0 2.303 0 57.09 57.09 0 0 1-2.302 0Zm-1.051-.03-.065-.002a.297.297 0 0 1-.199-.509l.329-.328a.502.502 0 0 1 .37-.147A58.24 58.24 0 0 0 8 12.5c1.787 0 3.479-.092 4.682-.179a.326.326 0 0 0 .2-.566l-.52-.52a1.236 1.236 0 0 1-.362-.873V7.5c0-.212-.017-.42-.048-.623a.58.58 0 0 1 .153-.502c.276-.276.742-.169.813.215.054.295.082.6.082.91v2.861c0 .063.025.123.07.167l.518.52c.802.8.326 2.187-.834 2.27-.708.052-1.584.105-2.55.14a2.25 2.25 0 0 1-4.407 0Zm5.132-8.683-7.55 7.55-.061-.004a.326.326 0 0 1-.2-.566l.52-.52c.232-.231.362-.546.362-.873V7.5a4 4 0 0 1 6.929-2.725Z",fill:"currentColor"},null,-1),T5=[D5];function I5(e,t){return h(),b("svg",A5,[...T5])}var P5={render:I5};const F5={key:0,class:"message_like_items_tag"},R5=["onClick"],L5=le("\u5220\u9664\u8BE5\u901A\u77E5"),B5=["onClick"],M5=ue({__name:"MessageLike",setup(e){const t={id:0,time:0},{list:n,status:a}=Mr([]),s=D(!1);function i(f){const v=!f.item.title&&!f.item.image&&!f.item.desc,m={id:f.id,users:f.users.slice(0,2).map(g=>({face:g.avatar,name:g.nickname,mid:g.mid})),pubTs:f.like_time,pubText:`${f.counts>1?`\u7B49\u603B\u8BA1${f.counts}\u4EBA`:""}\u8D5E\u4E86\u6211\u7684${f.item.business}`,contentNodes:Lr(f.item.source_content,(f.item.at_details||[]).map(g=>({name:g.nickname,mid:g.mid}))),reference:{type:v||f.item.image?"img":"text",img:"",text:""},noticeState:f.notice_state,last:0,url:f.item.uri,openState:$r(f)};return m.reference.type==="img"?m.reference.img=f.item.image:m.reference.text=f.item.title||f.item.desc,m}async function o(){if(a.value!=="noMore"&&a.value!=="loading")try{a.value="loading";const{latest:f,total:v}=await ih(t.id,t.time),m=(f.items||[]).map(i),g=(v.items||[]).map(i);if(m.length&&(s.value=!0,m[0].tag="\u6700\u65B0",g[0].tag="\u7D2F\u8BA1",m.forEach(y=>{y.last=f.last_view_at||0})),n.value.push(...m,...g),v.cursor.is_end){n.value.length?a.value="noMore":a.value="empty";return}t.id=v.cursor.id,t.time=v.cursor.time,n.value.length?a.value="loaded":a.value="empty"}catch(f){console.log(f),n.value.length||(a.value="error")}}async function c(f){try{if(!await kn({content:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",message:"\u8BE5\u6761\u901A\u77E5\u5220\u9664\u540E\uFF0C\u5F53\u6709\u65B0\u70B9\u8D5E\u65F6\u4F1A\u91CD\u65B0\u51FA\u73B0\u5728\u5217\u8868",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"}))return;const m=n.value[f];await Rr(m.id,0),n.value.splice(f,1)}catch(v){ye({content:v.message})}}async function r(f){try{const v=n.value[f];if(!v.noticeState&&!await kn({content:"\u8FD9\u6761\u5185\u5BB9\u7684\u70B9\u8D5E\u5C06\u4E0D\u518D\u901A\u77E5\uFF0C\u4F46\u4ECD\u53EF\u5728\u5217\u8868\u5185\u67E5\u770B\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",cancelText:"\u53D6\u6D88",confirmText:"\u786E\u5B9A"}))return;await oh(v.id,0,v.noticeState),n.value[f].noticeState=v.noticeState?0:1}catch(v){ye({content:v.message})}}async function l(f){const v=n.value[f];xr(v.openState)}return o(),(f,v)=>(h(),b("div",{class:ne(["message_like h_100",{"no-padding-top":s.value}])},[d(n).length?(h(!0),b(pe,{key:1},De(d(n),(m,g)=>(h(),b("div",{class:"message_like_item_wrap",key:m.id},[m.tag?(h(),b("div",F5,z(m.tag),1)):R("",!0),$(jr,{class:"mssage_like_item",users:m.users,"pub-text":m.pubText,"content-nodes":m.contentNodes,"pub-ts":m.pubTs,reference:m.reference,onClick:()=>l(g)},{actions:ee(()=>[u("span",{class:"message_notification_item--action hover_visible",onClick:Se(y=>c(g),["stop"])},[$(d(Kr)),L5],8,R5),u("span",{class:"message_notification_item--action hover_visible",onClick:Se(y=>r(g),["stop"])},[$(d(P5)),le(z(m.noticeState?"\u63A5\u6536\u901A\u77E5":"\u4E0D\u518D\u901A\u77E5"),1)],8,B5)]),_:2},1032,["users","pub-text","content-nodes","pub-ts","reference","onClick"])]))),128)):(h(),b(pe,{key:0},[d(a)==="error"?(h(),J(Zn,{key:0,"is-small":""})):d(a)==="empty"?(h(),J(Wr,{key:1})):d(a)==="loading"?(h(),J(Yi,{key:2})):R("",!0)],64)),d(n).length&&d(a)!=="noMore"&&d(a)!=="loading"?(h(),J(Ji,{key:2,block:"",onTrigger:o})):R("",!0)],2))}});const O5={},N5={class:"dynamic_card_skeleton"},V5=nc('<div class="dynamic_card_skeleton--header"><div class="dynamic_card_skeleton--avatar"></div><div class="dynamic_card_skeleton--name"></div><div class="dynamic_card_skeleton--time"></div></div><div class="dynamic_card_skeleton--content"><div class="dynamic_card_skeleton--desc"></div><div class="dynamic_card_skeleton--desc"></div><div class="dynamic_card_skeleton--desc is-mini"></div></div><div class="dynamic_card_skeleton--footer"><div class="dynamic_card_skeleton--action"></div><div class="dynamic_card_skeleton--action"></div><div class="dynamic_card_skeleton--action"></div></div>',3),U5=[V5];function H5(e,t){return h(),b("div",N5,U5)}var G5=Je(O5,[["render",H5]]);const j5={width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},K5=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.156.495a.2.2 0 0 0-.312 0L1.06 3.975a.2.2 0 0 0 .156.325H3v2.8c0 .11.09.2.2.2h1.6a.2.2 0 0 0 .2-.2V4.3h1.784a.2.2 0 0 0 .156-.325L4.156.495Z",fill:"currentColor"},null,-1),W5=[K5];function Z5(e,t){return h(),b("svg",j5,[...W5])}var z5={render:Z5};const q5={class:"dynamic_card_module_author flex_row"},Y5=["onClick"],X5={class:"dynamic_card_module_author--info"},J5=["textContent","onClick"],Q5={class:"dynamic_card_module_author--info--pub u_select_none"},e6=["textContent"],t6={key:0,class:"pub-badge ml_4 flex_shrink_0 flex_start mt_n1"},n6={key:0,class:"dynamic_card_module_author--tag"},a6=le(" \u7F6E\u9876 "),s6=ue({__name:"ModuleAuthor",props:{data:{type:Object,required:!0}},emits:["moreClick"],setup(e,{emit:t}){var w;const n=e,a=Lt(),s=We("dynamicID"),{userInfo:i}=ie(st()),o=O1(),{active:c}=ie(o),r=K(()=>{var k;return ji((k=n.data.user)==null?void 0:k.vip)}),l=K(()=>{var k;return((k=n.data.user)==null?void 0:k.mid)||0}),f=K(()=>{const k=[];return n.data.more.three_point_items.forEach(T=>{if(T.type===Ln.THREE_POINT_AUTOPLAY){k.push({...T,label:c.value?`\u5173\u95ED${T.label}`:`\u5F00\u542F${T.label}`});return}k.push(T)}),k}),{isFollow:v}=Kc(l.value,!!((w=n.data.relation)!=null&&w.following)),m=()=>{de.emit("hidePopover"),a.push({name:"Space",query:{mid:l.value,fromOuterSpmId:"main.dynamic-comprehensive.0.0.pv"}}),pt.emit("close")},g=()=>{if(!i.value.isLogin){jt("moduleAuthor.handleReport");return}de.emit("reportDynamic",{id:s,uid:l.value})},y=async k=>{await kn({content:k.content,cancelText:k.cancel,confirmText:k.confirm})&&(await jf(String(s)),t("more-click",{type:"REMOVE"}))},E=async()=>{try{const k=v.value;if(k&&!await kn({content:"\u786E\u8BA4\u53D6\u6D88\u5173\u6CE8\u5417\uFF1F",cancelText:"\u6211\u70B9\u9519\u4E86",confirmText:"\u786E\u8BA4"}))return;await Nc(l.value,k),k?(t("more-click",{type:"REMOVE",data:{mid:l.value}}),ye({content:`\u5DF2\u53D6\u6D88\u5BF9\u7528\u6237 ${n.data.user.name} \u7684\u5173\u6CE8`})):ye({content:"\u5173\u6CE8\u6210\u529F"})}catch(k){ye({content:k.message})}},_=k=>{N1(k),ye({content:"\u590D\u5236\u94FE\u63A5\u6210\u529F"})},p=async k=>{try{await Kf(k),t("more-click",{type:"TOP"})}catch(T){ye({content:T.message})}},C=async k=>{if(!i.value.isLogin){jt("moduleAuthor.handleWatchLater");return}try{await Wf(k.aid),V1({aid:k.aid}),ye({content:"\u5DF2\u6DFB\u52A0\u81F3\u7A0D\u540E\u518D\u770B"})}catch(T){ye({content:T.message||"\u6DFB\u52A0\u5931\u8D25"})}},S=()=>{o.setActive(!c.value)},x=async k=>{var T;switch(k.type){case Ln.THREE_POINT_REPORT:g();break;case Ln.THREE_POINT_WATCH_LATER:C(k.params);break;case Ln.THREE_POINT_AUTOPLAY:S();break;case Ln.THREE_POINT_DELETE:y(k.modal);break;case Ln.THREE_POINT_FOLLOWING:E();break;case Ln.THREE_POINT_COPY:_((T=k.params)==null?void 0:T.link);break;case Ln.THREE_POINT_TOP:p(k.params);break}};return(k,T)=>{var F;const A=Pe("VImg");return h(),b("div",q5,[u("div",{class:"dynamic_card_module_author--avatar",onClick:Se(m,["stop"])},[$(Gn,{face:e.data.user.face},null,8,["face"])],8,Y5),u("div",X5,[u("div",{class:ne(["dynamic_card_module_author--info--name u_select_none cs_pointer",{"is-vip":d(r)}]),textContent:z(e.data.user.name),onClick:Se(m,["stop"])},null,10,J5),u("div",Q5,[u("div",{class:"pub-text text_ellipsis",textContent:z(e.data.pub_text)},null,8,e6),(F=e.data.icon_badge)!=null&&F.render_img?(h(),b("div",t6,[$(A,{class:"v_align_baseline",src:d(hi)(e.data.icon_badge.render_img),alt:e.data.icon_badge.text},null,8,["src","alt"])])):R("",!0)])]),e.data.is_top?(h(),b("div",n6,[$(d(z5)),a6])):R("",!0),$(yc,{class:"dynamic_card_module_author--more p_relative",items:d(f),onSelect:x},{default:ee(()=>[$(d(dc),{class:"dynamic_card_module_author--more--btn"})]),_:1},8,["items"])])}}});const i6={class:"dynamic_card_module_desc"},td=ue({__name:"ModuleDesc",props:{data:{type:Object,required:!0},unfold:{type:Boolean,default:!0}},setup(e){return(t,n)=>(h(),b("div",i6,[$(d(Pr),{nodes:e.data.rich_text_nodes,unfold:e.unfold,"action-texts":["\u5C55\u5F00\u5168\u90E8","\u6536\u8D77"]},null,8,["nodes","unfold"])]))}});const o6={class:"dynamic_card_module_forward_author flex_row"},r6=["onClick"],l6=["onClick"],u6=ue({__name:"ModuleForwardAuthor",props:{data:{type:Object,required:!0}},setup(e){const{data:t}=e,n=Lt(),a=K(()=>{var r;return{name:t.user.name,mid:t.user.mid,isVip:ji(t.user.vip),isFollow:!!((r=t.relation)!=null&&r.following),showFollow:!!t.show_follow}}),s=()=>{n.push({name:"Space",query:{mid:a.value.mid}}),pt.emit("close")},{isFollow:i}=Kc(a.value.mid,a.value.isFollow),o=D(!1),c=async()=>{try{const r=i.value;if(r&&!await kn({content:"\u786E\u8BA4\u53D6\u6D88\u5173\u6CE8\u5417\uFF1F",cancelText:"\u6211\u70B9\u9519\u4E86",confirmText:"\u786E\u8BA4"}))return;await Nc(a.value.mid,r),r?(ye({content:`\u5DF2\u53D6\u6D88\u5BF9\u7528\u6237 ${a.value.name} \u7684\u5173\u6CE8`}),o.value=!1):(ye({content:"\u5173\u6CE8\u6210\u529F"}),o.value=!0)}catch(r){ye({content:r.message})}};return(r,l)=>(h(),b("div",o6,[u("div",{class:ne(["dynamic_card_module_forward_author--name cs_pointer u_select_none",{"is-vip":d(a).isVip}]),onClick:Se(s,["stop"])}," @"+z(d(a).name),11,r6),o.value||d(a).showFollow?(h(),b("div",{key:0,class:ne(["dynamic_card_module_forward_author--follow flex_center cs_pointer",{"is-checked":d(i)}]),onClick:Se(c,["stop"])},z(d(i)?"\u5DF2\u5173\u6CE8":"+ \u5173\u6CE8"),11,l6)):R("",!0)]))}});var c6=ue({props:{data:{type:Object,required:!0}},setup(e){const{modules:t,id_str:n}=e.data.item;mt("dynamicID",n),mt("setCardClickBehavior",o);const a=D(null),s=We("detailed"),i=We("dynamicScene");function o(f){a.value=f}const c=fc(),r=f=>{if(f.stopPropagation(),!c.text.value){if(a.value)return a.value();de.emit("hidePopover"),de.emit("viewDynamicDetails",{id:n,scene:i})}},l=f=>{switch(f.module_type){case pn.MODULE_TYPE_AUTHOR:return $(u6,{data:f.module_author},null);case pn.MODULE_TYPE_DESC:return $(td,{data:f.module_desc,unfold:s},null);case pn.MODULE_TYPE_DYNAMIC:return $(nd,{data:f.module_dynamic},null);default:return null}};return()=>$("div",{class:"dynamic_card_forward b_radius",onClick:r},[t.map(l)])}});const d6=["onClick"],f6=u("div",{class:"dynamic_card_archive--cover--img"},[u("img",{class:"p_center",src:hc})],-1),v6={class:"dynamic_card_archive--title"},h6={class:"flex_between"},m6={class:"title-text text_ellipsis"},p6=["src"],_6={class:"dynamic_card_archive--stats"},g6={class:"dynamic_card_archive--stats--duration"},y6={key:0,class:"dynamic_card_archive--stats--item"},w6={class:"dynamic_card_archive--stats--text"},b6={key:1,class:"dynamic_card_archive--stats--item"},E6={class:"dynamic_card_archive--stats--text"},k6={class:"dynamic_card_archive--stats--item"},C6={class:"dynamic_card_archive--stats--text"},S6=u("div",{class:"dynamic_card_archive--play"},null,-1),$6=u("div",{class:"dynamic_card_archive--tips"},"\u70B9\u51FB\u8FDB\u5165\u8BE6\u60C5\u9875",-1),x6=ue({__name:"DynArchive",props:{playerOption:{type:Object,default:()=>({guide:""})},imgCbStr:{type:String,default:""},imgLazy:{type:String,default:"lazy"},disableScale:{type:Boolean,default:!1},data:{type:Object,required:!0}},setup(e){var m;const t=e,n=D(!1),a=We("pageSpmId"),i=We("detailed")?D(null):We("scrollContainerRef"),o=D(null);Number(t.data.aid);const c=t.data.bvid,r=t.data.epid||0,{isPlaying:l,stopPlayer:f}=ac(i,o,"video",r?{episodeId:(m=t.data.open_player_params)==null?void 0:m.epid,iid:"pc_app_dynamic_all"}:{bvid:c,iid:"pc_app_dynamic_all"},t.data.autoplay),v=()=>{de.emit("hidePopover"),f();const g=a?`${a}.pv`:"",y=t.data.open_player_params||{type:"ugc",bvid:c};Cn({...y,fromSpmid:g})};return(g,y)=>{var E,_,p;return h(),b("div",{class:"dynamic_card_archive",onClick:Se(v,["stop"])},[u("div",{ref_key:"coverRef",ref:o,class:"dynamic_card_archive--cover"},[f6,ke($(d(Za),{class:"dynamic_card_archive--cover--img","cb-str":e.imgCbStr,src:e.data.cover,alt:e.data.title,width:555,height:312,loading:e.imgLazy,"bfs-style":"pc-dynamic-cover",rule:"1c",onError:y[0]||(y[0]=C=>n.value=!0)},null,8,["cb-str","src","alt","loading"]),[[Fe,!n.value]])],512),u("div",{class:ne({"dynamic_card_archive--mask":!0,"is-hidden":d(l)})},[u("div",v6,[u("div",h6,[u("span",m6,z(e.data.title),1),((E=e.data.badge)==null?void 0:E.text)&&((_=e.data.badge)==null?void 0:_.text)!=="\u6295\u7A3F\u89C6\u9891"?(h(),b("span",{key:0,class:"title-badge text_nowrap flex_center",style:Ge({backgroundColor:e.data.badge.bg_color,color:e.data.badge.color})},[e.data.badge.icon_url?(h(),b("img",{key:0,src:e.data.badge.icon_url,alt:""},null,8,p6)):R("",!0),le(" "+z((p=e.data.badge)==null?void 0:p.text),1)],4)):R("",!0)])]),u("div",_6,[u("span",g6,z(e.data.duration_text),1),e.data.enable_vt?(h(),b("span",y6,[$(d(vc),{class:"dynamic_card_archive--stats--icon"}),u("span",w6,z(e.data.stat.vt),1)])):(h(),b("span",b6,[$(d(Zf),{class:"dynamic_card_archive--stats--icon"}),u("span",E6,z(e.data.stat.play),1)])),u("span",k6,[$(d(zf),{class:"dynamic_card_archive--stats--icon"}),u("span",C6,z(e.data.stat.danmaku),1)])]),S6],2),$6],8,d6)}}});const A6=["onClick"],D6={key:0,class:"dynamic_card_draw--item--surplus flex_center"},T6={key:1,class:"dynamic_card_draw--item--badge"},I6=ue({__name:"DynDraw",props:{data:{type:Object,required:!0}},setup(e){const t=e,n=K(()=>{switch(t.data.items.length){case 1:return"one";case 2:return"grid2";case 3:return"grid3";case 4:return"grid4";case 5:case 6:return"grid6";case 8:return"grid8";case 7:case 9:default:return"grid9"}}),a=K(()=>{const{items:l}=t.data;return n.value==="one"?lh(l[0]):{width:104,height:104,bfsStyle:"pc-dynamic-column"}}),s=We("galleryContainer"),i=We("galleryFixed"),o=l=>{de.emit("hidePopover"),de.emit("visitGallery",{container:s,items:t.data.items.map(f=>({src:f.src,width:f.width,height:f.height,size:f.size,tags:[]})),index:l,key:`draw_${t.data.id}`,fixed:i})},c=(l,f)=>t.data.items.length>9&&f===8?"":l.width/l.height<1/3?"\u957F\u56FE":l.src.match(/.gif$/)?"\u52A8\u56FE":"",r=l=>l.width/l.height<1/3?"!header":"1c";return(l,f)=>(h(),b("div",{class:ne(["dynamic_card_draw",{[d(n)]:!0}])},[(h(!0),b(pe,null,De(e.data.items.slice(0,9),(v,m)=>(h(),b("div",{class:"dynamic_card_draw--item",key:m,style:Ge({width:`${d(a).width}px`,height:`${d(a).height}px`}),onClick:Se(g=>o(m),["stop"])},[$(d(Za),{class:"dynamic_card_draw--item--img",src:v.src.replace("pre-",""),width:d(a).width,height:d(a).height,loading:"lazy","bfs-style":d(a).bfsStyle,rule:r(v)},null,8,["src","width","height","bfs-style","rule"]),m===8&&e.data.items.length>9?(h(),b("div",D6," +"+z(e.data.items.length-9),1)):R("",!0),c(v,m)?(h(),b("div",T6,z(c(v,m)),1)):R("",!0)],12,A6))),128))],2))}}),P6={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F6=u("rect",{x:"5",y:"2",width:"2",height:"9",rx:"1",fill:"#fff"},null,-1),R6=u("rect",{x:"1",y:"5",width:"2",height:"6",rx:"1",fill:"#fff"},null,-1),L6=u("rect",{x:"9",y:"7",width:"2",height:"4",rx:"1",fill:"#fff"},null,-1),B6=[F6,R6,L6];function M6(e,t){return h(),b("svg",P6,[...B6])}var O6={render:M6};const N6=["onClick"],V6=u("div",{class:"dynamic_card_live_rcmd--cover--img"},[u("img",{class:"p_center",src:hc})],-1),U6={class:"dynamic_card_live_rcmd--mask--top flex_row"},H6=["textContent"],G6={class:"dynamic_card_live_rcmd--badge flex_row"},j6=["textContent"],K6={class:"dynamic_card_live_rcmd--mask--bottom"},W6=["textContent"],Z6=u("div",{class:"dynamic_card_live_rcmd--tips"},"\u70B9\u51FB\u8FDB\u5165\u8BE6\u60C5\u9875",-1),z6=ue({__name:"DynLiveRcmd",props:{disableInlinePlayer:{type:Boolean,default:!1},playerOption:{type:Object,default:()=>({guide:""})},imgCbStr:{type:String,default:""},imgLazy:{type:String,default:"lazy"},data:{type:Object,required:!0}},setup(e){var _,p;const t=e,n=D(!1),a=We("setCardClickBehavior"),i=We("detailed")?D(null):We("scrollContainerRef"),o=D(null),c=K(()=>{var C,S;return(S=(C=t.data.card_info)==null?void 0:C.live_play_info)==null?void 0:S.cover}),r=K(()=>{var C,S;return((S=(C=t.data.card_info)==null?void 0:C.live_play_info)==null?void 0:S.title)||""}),l=K(()=>{var S;const{live_status:C}=((S=t.data.card_info)==null?void 0:S.live_play_info)||{};return C===1}),f=K(()=>{var C,S,x;return{leftText:(x=(S=(C=t.data.card_info)==null?void 0:C.live_play_info)==null?void 0:S.watched_show)==null?void 0:x.text_large,rightText:l.value?"\u76F4\u64AD\u4E2D":"\u5DF2\u7ED3\u675F"}}),v=K(()=>{var C,S;return((S=(C=t.data.card_info)==null?void 0:C.live_play_info)==null?void 0:S.area_name)||""}),m=(p=(_=t.data.card_info)==null?void 0:_.live_play_info)==null?void 0:p.room_id,{isPlaying:g,stopPlayer:y}=ac(i,o,"live",{roomId:m});function E(){de.emit("hidePopover"),y(),U1(m)}return a(E),(C,S)=>(h(),b("div",{class:"dynamic_card_live_rcmd",onClick:Se(E,["stop"])},[u("div",{ref_key:"coverRef",ref:o,class:"dynamic_card_live_rcmd--cover"},[V6,ke($(d(Za),{class:"dynamic_card_live_rcmd--cover--img","cb-str":e.imgCbStr,src:d(c),width:555,height:312,loading:e.imgLazy,"bfs-style":"pc-dynamic-cover",rule:"1c",onError:S[0]||(S[0]=x=>n.value=!0)},null,8,["cb-str","src","loading"]),[[Fe,!n.value]])],512),u("div",{class:ne({"dynamic_card_live_rcmd--mask":!0,"is-hidden":d(g)})},[u("div",U6,[u("div",{class:"dynamic_card_live_rcmd--title",textContent:z(d(r))},null,8,H6),u("div",G6,[d(l)?(h(),b("div",{key:0,class:"dynamic_card_live_rcmd--badge--left",textContent:z(d(f).leftText)},null,8,j6)):R("",!0),u("div",{class:ne(["dynamic_card_live_rcmd--badge--right flex_center",{"is-active":d(l)}])},[d(l)?(h(),J(d(O6),{key:0,class:"dynamic_card_live_rcmd--badge--right--icon"})):R("",!0),le(" "+z(d(f).rightText),1)],2)])]),u("div",K6,[u("div",{class:"dynamic_card_live_rcmd--area",textContent:z(d(v))},null,8,W6)])],2),Z6],8,N6))}});var nd=ue({props:{data:{type:Object,required:!0}},setup(e){return()=>$("div",{class:"dynamic_card_content"},[(()=>{switch(e.data.type){case ti.MDL_DYN_TYPE_FORWARD:return $(c6,{data:e.data.dyn_forward},null);case ti.MDL_DYN_TYPE_ARCHIVE:return $(x6,{data:e.data.dyn_archive},null);case ti.MDL_DYN_TYPE_DRAW:return $(I6,{data:e.data.dyn_draw},null);case ti.MDL_DYN_TYPE_LIVE_RCMD:return $(z6,{data:e.data.dyn_live_rcmd},null);default:return null}})()])}});const q6={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y6=u("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2Zm0 15c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.4 1-1 1Zm1-5c0 .6-.4 1-1 1s-1-.4-1-1V8c0-.6.4-1 1-1s1 .4 1 1v4Z",fill:"currentColor"},null,-1),X6=[Y6];function J6(e,t){return h(),b("svg",q6,[...X6])}var Q6={render:J6};const eg=["onClick"],tg=["textContent"],ng=ue({__name:"ModuleItemNull",props:{data:{type:Object,default:()=>({icon:"",text:""})}},setup(e){return(t,n)=>(h(),b("div",{class:"dynamic_card_module_item_null",onClick:Se(a=>{},["stop"])},[$(d(Q6)),u("span",{textContent:z(e.data.text)},null,8,tg)],8,eg))}}),ag={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},sg=u("path",{d:"M9.868 7.25h.6V3.308a.7.7 0 0 1 1.158-.529l6.964 6.037a.9.9 0 0 1 0 1.36l-6.964 6.036a.7.7 0 0 1-1.158-.53V12.04h-.6c-2.055 0-3.594.376-4.917 1.154-1.058.622-1.945 1.483-2.836 2.538.081-2.302.49-4.31 1.49-5.784C4.701 8.33 6.582 7.25 9.868 7.25Z",stroke:"currentColor","stroke-width":"1.2"},null,-1),ig=[sg];function og(e,t){return h(),b("svg",ag,[...ig])}var rg={render:og};const lg={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ug=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.929 3C4.393 3 1.5 5.7 1.5 9s2.893 6 6.429 6h.505l.918 3 3.367-3h.352c3.536 0 6.429-2.7 6.429-6s-2.893-6-6.429-6H7.93Zm10.285 6c0 2.647-2.307 4.8-5.143 4.8h-.867l-.373.332-1.827 1.629-.334-1.09-.267-.871H7.93c-2.836 0-5.143-2.153-5.143-4.8s2.307-4.8 5.143-4.8h5.142c2.836 0 5.143 2.153 5.143 4.8Z",fill:"currentColor"},null,-1),cg=[ug];function dg(e,t){return h(),b("svg",lg,[...cg])}var fg={render:dg};const vg={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},hg=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.125 15.62H7.25V6.806H6.125v8.812Zm6.625-10h4.688c.562 0 1.125.25 1.5.75.312.437.375 1.062.25 1.562l-2 6.625c-.313 1.25-1.375 2.126-2.688 2.187H4a2.036 2.036 0 0 1-1.938-1.062c-.187-.375-.312-.75-.312-1.125V7.869c0-.812.438-1.562 1.125-1.937.375-.188.75-.25 1.125-.313h2.813l3.062-3.812c.625-.688 1.75-.75 2.438-.125.374.375.624.875.562 1.437l-.125 2.5Zm4.563 1.124H11.5l.125-1.312.188-2.313a.576.576 0 0 0-.438-.687.504.504 0 0 0-.563.187L7.938 6.307l-.375.5h-3.75c-.126 0-.25.062-.376.125a1.031 1.031 0 0 0-.562.937v6.688c0 .187.063.437.188.564.187.373.562.56.937.498h10.5c.25 0 .438-.062.625-.186.5-.251.875-.689.938-1.25l2-6.564 1.125.25-1.125-.25c.062-.187 0-.437-.063-.625-.188-.125-.438-.25-.688-.25l.125-1.125-.125 1.125Z",fill:"currentColor"},null,-1),mg=[hg];function pg(e,t){return h(),b("svg",vg,[...mg])}var _g={render:pg};const gg={width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yg=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.125 15.62H7.25V6.806H6.125v8.812Zm6.625-10h4.688c.562 0 1.125.25 1.5.75.312.437.375 1.062.25 1.562l-2 6.625c-.313 1.25-1.375 2.126-2.688 2.187H4a2.036 2.036 0 0 1-1.938-1.062c-.187-.375-.312-.75-.312-1.125V7.869c0-.812.438-1.562 1.125-1.937.375-.188.75-.25 1.125-.313h2.813l3.062-3.812c.625-.688 1.75-.75 2.438-.125.374.375.624.875.562 1.437l-.125 2.5Z",fill:"#F69"},null,-1),wg=[yg];function bg(e,t){return h(),b("svg",gg,[...wg])}var Eg={render:bg};const kg={class:"dynamic_card_module_stat flex_center"},Cg={class:"dynamic_card_module_stat--action--prefix flex_center"},Sg=["textContent"],$g={class:"dynamic_card_module_stat--action--prefix flex_center"},xg=["textContent"],Ag={class:"dynamic_card_module_stat--action--prefix flex_center"},Dg=["textContent"],Tg=ue({__name:"ModuleStat",props:{data:{type:Object,required:!0},defaultForwardContent:{type:Array,default:()=>[]}},setup(e){var v,m,g,y,E;const{data:t,defaultForwardContent:n}=e,a=We("dynamicID"),s=We("pageSpmId"),{likeState:i,likeText:o,handleLike:c}=jc(a,s||"",{count:((v=t.like)==null?void 0:v.count)||0,active:!!t.like.like_state},"\u70B9\u8D5E"),{forwardText:r,handleForward:l}=Gc(a,((m=t.forward)==null?void 0:m.count)||0,"\u8F6C\u53D1",n,(g=t.forward)==null?void 0:g.is_forbidden,(y=t.forward)==null?void 0:y.forbidden_msg),{commentText:f}=mh(a,((E=t.comment)==null?void 0:E.count)||0,"\u8BC4\u8BBA");return(_,p)=>{var C,S;return h(),b("div",kg,[u("div",{class:ne(["dynamic_card_module_stat--action flex_center cs_pointer is-forward",{"is-disabled":(C=e.data.forward)==null?void 0:C.is_forbidden}]),onClick:p[0]||(p[0]=Se(()=>{var x;return!((x=e.data.forward)!=null&&x.is_forbidden)&&d(l)()},["stop"]))},[u("div",Cg,[$(d(rg),{class:"dynamic_card_module_stat--action--ico"})]),u("span",{textContent:z(d(r))},null,8,Sg)],2),u("div",{class:ne(["dynamic_card_module_stat--action flex_center cs_pointer is-comment",{"is-pervious":(S=e.data.comment)==null?void 0:S.is_pervious}]),"data-comment-on":1},[u("div",$g,[$(d(fg),{class:"dynamic_card_module_stat--action--ico"})]),u("span",{textContent:z(d(f))},null,8,xg)],2),u("div",{class:ne(["dynamic_card_module_stat--action flex_center cs_pointer is-like",{"is-active":d(i).active}]),onClick:p[1]||(p[1]=Se((...x)=>d(c)&&d(c)(...x),["stop"]))},[u("div",Ag,[d(i).active?(h(),J(d(Eg),{key:0,class:"dynamic_card_module_stat--action--ico"})):(h(),J(d(_g),{key:1,class:"dynamic_card_module_stat--action--ico"}))]),u("span",{textContent:z(d(o))},null,8,Dg)],2)])}}});var Ig=ue({name:"DynamicCard",props:{data:{type:Object,required:!0},detailed:{type:Boolean,default:!1}},emits:["remove","refresh"],setup(e,{emit:t}){const{modules:n,type:a,id_str:s}=e.data,i=D(null);function o(p){i.value=p}mt("dynamicID",s),mt("detailed",e.detailed),mt("setCardClickBehavior",o);const c=We("dynamicScene"),r=K(()=>n.find(C=>C.module_type==="MODULE_TYPE_AUTHOR").module_author),l=K(()=>{var C,S,x,w;if(a!=="DYNAMIC_TYPE_FORWARD")return[];const p=n==null?void 0:n.find(k=>k.module_type==="MODULE_TYPE_DESC");return p!=null&&p.module_desc?Oc({uid:(S=(C=r.value)==null?void 0:C.user)==null?void 0:S.mid,name:(w=(x=r.value)==null?void 0:x.user)==null?void 0:w.name},p.module_desc.rich_text_nodes):[]}),f=fc(),v=p=>{if(f.text.value)return;if(i.value)return i.value();de.emit("hidePopover");const C=Boolean(p.target.dataset.commentOn);de.emit("viewDynamicDetails",{id:s,commentOn:C,scene:c})},m=({type:p,data:C})=>{switch(p){case"REMOVE":t("remove",C!=null&&C.mid?ch(C.mid):null);break;case"TOP":t("refresh");break}},g=p=>{switch(p.module_type){case pn.MODULE_TYPE_AUTHOR:return $(s6,{data:p.module_author,onMoreClick:m},null);case pn.MODULE_TYPE_DESC:return $(td,{data:p.module_desc,unfold:e.detailed},null);case pn.MODULE_TYPE_DYNAMIC:return $(nd,{data:p.module_dynamic},null);case pn.MODULE_TYPE_ITEM_NULL:return $(ng,{data:p.module_item_null},null);case pn.MODULE_TYPE_STAT:return $(Tg,{data:p.module_stat,"default-forward-content":l.value},null);default:return null}},y=D(""),E=D(null),_=()=>{var w;const{x:p,width:C,height:S}=((w=E.value)==null?void 0:w.getBoundingClientRect())||{},x=document.querySelector(".app_dynamic--content-aside .up_list");if(p&&x){const{x:k,width:T}=x.getBoundingClientRect(),A=60,F=p+C/2-(k+T/2)-A,O=S/2-A;y.value=`${F},${O}`}};return Xe(()=>{_(),window.addEventListener("resize",_),Va.on("initDynCardOffset",_)}),qe(()=>{window.removeEventListener("resize",_),Va.off("initDynCardOffset",_)}),()=>$("div",{class:"dynamic_card p_relative",ref:E,onClick:v},[n.map(g),$("span",{class:"gamepad-cursor","data-tp":"dynCard","data-offset":y.value},null)])}});const Pg={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Fg=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.284 2.03a.532.532 0 0 0-.456.17c-.176.206-.248.375-.336.625l-.03.088c-.088.253-.2.576-.432.988-.4.707-.771 1.134-1.229 1.535-.375.329-.757.553-1.134.66v7.054a71.399 71.399 0 0 0 5.291-.073c.607-.031 1.134-.332 1.409-.82.385-.685.86-1.69 1.147-2.873.269-1.103.39-2.01.446-2.649.025-.296-.21-.568-.573-.568h-3.322a.5.5 0 0 1-.462-.69v-.001l.003-.007.01-.027a7.863 7.863 0 0 0 .178-.49c.105-.316.218-.706.269-1.047.078-.522.059-.94-.146-1.329-.22-.416-.469-.526-.633-.546Zm1.492 3.137h2.61c.883 0 1.651.708 1.57 1.654a18.69 18.69 0 0 1-.47 2.799 12.517 12.517 0 0 1-1.248 3.127c-.465.828-1.327 1.282-2.228 1.329-.87.044-2.158.092-3.676.092-1.472 0-2.816-.045-3.769-.088-1.072-.05-1.97-.845-2.086-1.936a25.49 25.49 0 0 1-.146-2.642c0-.913.059-1.74.127-2.397.12-1.148 1.104-1.938 2.212-1.938h1.495c.212 0 .542-.104.975-.483.375-.329.675-.668 1.017-1.274.186-.33.272-.577.358-.825l.032-.092c.104-.294.225-.599.52-.944a1.531 1.531 0 0 1 1.33-.512c.551.064 1.059.421 1.403 1.073.347.658.342 1.326.25 1.942a7.302 7.302 0 0 1-.276 1.115Zm-6.11 7.956V6.167h-.994c-.642 0-1.156.448-1.217 1.041-.066.63-.122 1.423-.122 2.294 0 .952.067 1.843.14 2.537.061.575.536 1.014 1.138 1.042.313.014.668.029 1.056.042Z",fill:"currentColor"},null,-1),Rg=[Fg];function Lg(e,t){return h(),b("svg",Pg,[...Rg])}var Bg={render:Lg};const Mg={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Og=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.546 5.167h-3.028c.148-.323.304-.73.363-1.123a4.02 4.02 0 0 0 .012-.963c-.033-.323-.108-.684-.258-.968-.316-.6-.753-1.022-1.277-1.125-.559-.109-1.04.175-1.327.61-.24.364-.334.668-.42.945l-.002.009a4.034 4.034 0 0 1-.372.896c-.342.606-.62.92-.996 1.249-.193.17-.392.285-.574.358v9.095a72.314 72.314 0 0 0 5.418-.079c.853-.045 1.67-.475 2.115-1.256.421-.74.96-1.858 1.286-3.195.305-1.253.432-2.271.483-2.964.064-.852-.629-1.49-1.423-1.49Zm-8.88 8.956V5.167H3.536c-1.029 0-1.943.734-2.06 1.799a23.448 23.448 0 0 0-.142 2.536c0 1.057.079 2.039.16 2.772.112 1.013.947 1.753 1.942 1.8.355.016.77.034 1.232.049Z",fill:"#F69"},null,-1),Ng=[Og];function Vg(e,t){return h(),b("svg",Mg,[...Ng])}var Ug={render:Vg};const Hg={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Gg=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.105 2.773a.167.167 0 0 0-.272.13v2.275a.5.5 0 0 1-.444.496c-.923.105-2.083.437-3.068 1.343-.9.827-1.702 2.175-2.015 4.388.756-1.026 1.595-1.666 2.435-2.04a5.295 5.295 0 0 1 2.636-.427.5.5 0 0 1 .456.498v2.329c0 .14.163.217.272.129l5.127-4.173a.5.5 0 0 0 0-.775L8.105 2.773Zm-1.272.13c0-.984 1.141-1.526 1.903-.906l5.127 4.173a1.5 1.5 0 0 1 0 2.327l-5.127 4.172c-.762.62-1.903.078-1.903-.905V9.916c-.518.005-1.096.1-1.685.362-.765.341-1.58.978-2.321 2.134a.877.877 0 0 1-.97.368c-.327-.087-.662-.395-.617-.87.263-2.767 1.207-4.53 2.404-5.63 1.03-.946 2.205-1.363 3.19-1.535V2.902Z",fill:"currentColor"},null,-1),jg=[Gg];function Kg(e,t){return h(),b("svg",Hg,[...jg])}var Wg={render:Kg};const Zg={class:"dynamic_forward_item"},zg=["onClick"],qg={class:"dynamic_forward_item--header"},Yg=["onClick"],Xg=["textContent"],Jg={class:"dynamic_forward_item--content"},Qg={class:"dynamic_forward_item--footer flex_row"},ey=["textContent"],ty=["textContent"],ny=ue({__name:"ForwardItem",props:{data:{type:Object,required:!0}},setup(e){var v,m,g,y,E;const{data:t}=e,n=K(()=>{var _;return ji((_=t.user)==null?void 0:_.vip)}),a=We("pageSpmId"),{likeState:s,likeText:i,handleLike:o}=jc(t.id_str,a,{count:((v=t.stat.like)==null?void 0:v.count)||0,active:!!((m=t.stat.like)!=null&&m.state)},""),{forwardText:c,handleForward:r}=Gc(t.id_str,((g=t.stat.forward)==null?void 0:g.count)||0,"",Oc({uid:(y=t.user)==null?void 0:y.mid,name:(E=t.user)==null?void 0:E.name},t.content.rich_text_nodes)),l=Lt(),f=()=>{var _;l.push({name:"Space",query:{mid:(_=t.user)==null?void 0:_.mid}}),pt.emit("close")};return(_,p)=>(h(),b("div",Zg,[u("div",{class:"dynamic_forward_item--avatar",onClick:Se(f,["stop"])},[$(Gn,{face:e.data.user.face},null,8,["face"])],8,zg),u("div",qg,[u("div",{class:ne(["dynamic_forward_item--uname",{"is-vip":d(n)}]),onClick:Se(f,["stop"])},[u("span",null,z(e.data.user.name),1)],10,Yg),u("div",{class:"dynamic_forward_item--pub",textContent:z(e.data.pub_time)},null,8,Xg)]),u("div",Jg,[$(d(Pr),{nodes:e.data.content.rich_text_nodes,unfold:!1,lines:"4"},null,8,["nodes"])]),u("div",Qg,[u("div",{class:ne(["dynamic_forward_item--action",{"is-active":d(s).active}]),onClick:p[0]||(p[0]=Se((...C)=>d(o)&&d(o)(...C),["stop"]))},[d(s).active?(h(),J(d(Ug),{key:0})):(h(),J(d(Bg),{key:1})),d(i)?(h(),b("span",{key:2,textContent:z(d(i))},null,8,ey)):R("",!0)],2),u("div",{class:"dynamic_forward_item--action",onClick:p[1]||(p[1]=Se((...C)=>d(r)&&d(r)(...C),["stop"]))},[$(d(Wg)),d(c)?(h(),b("span",{key:0,textContent:z(d(c))},null,8,ty)):R("",!0)])])]))}});const ay=["onClick"],sy={class:"dynamic_details_viewer--panel--tabs flex_start flex_inline"},iy={class:"dynamic_details_viewer--panel--tabscontent"},oy={class:"dynamic_details_viewer--forward",style:{padding:"0 20px"}},ry={key:0,class:"dynamic_details_viewer--panel--empty"},ly=le(" \u8FD8\u6CA1\u6709\u4EBA\u8F6C\u53D1"),uy=u("br",null,null,-1),cy=le("\u5FEB\u8F6C\u53D1\u5206\u4EAB\u7ED9\u5C0F\u4F19\u4F34\u5427~ "),dy=[ly,uy,cy],fy={class:"dynamic_details_viewer--comment"},vy={class:"pc-comment-tab-header"},hy=u("span",null,"\u8BE6\u60C5",-1),my={class:"pc-comment-tab-header"},py=u("span",null,"\u5BF9\u8BDD\u5217\u8868",-1),_y=u("br",null,null,-1),gy=le("\u9876\u90E8 "),yy={key:1,class:"dynamic_details_viewer--error"},wy=u("img",{src:Ic},null,-1),by=["onClick"],Ey=["onClick"],ky=ue({__name:"DetailsViewer",props:{active:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=e,a=-10,s=[{key:"1",name:"\u8F6C\u53D1"},{key:"2",name:"\u8BC4\u8BBA"}],{routePositions:i}=ie(H1()),o=D(null),c=ve=>{i.value.DynamicComment=ve.target.scrollTop},r=D(null),l=D(null),f=D(null),v=D(!1),m=D(!1),g=D(!1),y=K(()=>p.value==="list"?v.value:p.value==="detail"?m.value:g.value),{commentsInstance:E,initComment:_,currentCommentType:p,clearComment:C,changeComment:S}=wc("dynamic"),x=ve=>{switch(ve){case"list":Ga({element:r.value});break;case"detail":Ga({element:l.value});break;case"dialog":Ga({element:f.value});break}},w=()=>{r.value&&r.value.scrollTop>=250?v.value=!0:v.value=!1},k=()=>{l.value&&l.value.scrollTop>=250?m.value=!0:m.value=!1},T=()=>{f.value&&f.value.scrollTop>=250?g.value=!0:g.value=!1};Gi(()=>{setTimeout(()=>{if(o.value){const ve=i.value.DynamicComment;wn(ve)&&(o.value.scrollTop=ve)}}),Va.emit("commentsReload")}),mt("galleryFixed",n.fixed);const A=We("pageSpmId"),F=We("fromOuterSpmId"),O=We("dynamicScene"),G=D("2"),X=D(null),H=D(null),L=ca({visible:!1,transitionStatus:"ready",toggleResolve:null,commentOn:!1,showContent:!1,showPopup:!1,showSubPage:!1,loading:!1,error:!1,errorMsg:"",id:"",rid:"",type:0,jumpReplyId:0,card:null,forward:{noMore:!1,items:ca([]),offset:"",page:0,total:0}}),Q=K(()=>{var Ce,Ae;const ve=(Ae=(Ce=L.card)==null?void 0:Ce.modules)==null?void 0:Ae.find(Ye=>Ye.module_type==="MODULE_TYPE_STAT");return ve==null?void 0:ve.module_stat}),q=K(()=>{var Ae;const ve={oid:0,type:0};if(!L.card)return ve;const Ce=(Ae=L.card.modules)==null?void 0:Ae.find(Ye=>Ye.module_type==="MODULE_TYPE_STAT");return Ce&&(ve.oid=Ce.module_stat.comment.comment_id,ve.type=Ce.module_stat.comment.comment_type),ve}),j=()=>{L.error||!H.value||o.value.scrollTo({top:H.value.offsetHeight+a,behavior:"smooth"})},B={start(){if(L.toggleResolve){this.show(),L.toggleResolve=null;return}L.visible=!0,L.transitionStatus="start"},async show(){L.showContent=!0,L.transitionStatus="entering",await At(),o.value&&(o.value.scrollTo({top:0}),L.commentOn&&setTimeout(()=>{j()},400))},hide(){L.showContent=!1,L.transitionStatus="leaving"},end(){if(L.toggleResolve){L.toggleResolve();return}L.visible=!1,L.transitionStatus="end"}};function W(){L.showSubPage=!1}function U(){L.showPopup=!1}const M=(ve=!1)=>{if(ve){L.showPopup&&setTimeout(()=>{U(),L.showSubPage&&setTimeout(()=>{W()},150)},150),B.hide();return}if(L.transitionStatus==="entered"){if(L.showPopup){if(L.showSubPage){W();return}U();return}B.hide()}};Va.on("closeCommentDetails",()=>M(!0));const N=()=>{de.emit("removeDynamic",{id:L.id}),M()};async function Z(){if(G.value==="1"){if(L.forward.items.length)return;await _e()}else{if(E.value)return;await At(),await Oa(300),await ae()}}se(G,()=>Z());async function Y(){!L.forward.items.length||await _e()}const oe=()=>{L.transitionStatus==="start"&&B.show()};Va.on("commentsReload",()=>{C({container:r.value,detailContainer:l.value,dialogContainer:f.value}),r.value&&ae()});const V=We("galleryContainer");async function ae(){_({oid:q.value.oid,type:q.value.type,spmInfo:{spmid:A,from_spmid:"",from_outer_spmid:F},seekHandler:ve=>{Cn(ve)},previewImageHandler:(ve,Ce)=>{de.emit("hidePopover"),de.emit("visitGallery",{container:V,downloadable:!1,items:ve.map(Ae=>({src:Ae.img_src,width:Ae.img_width,height:Ae.img_height,size:Ae.img_size,tags:[]})),index:Ce,fixed:n.fixed})}},{container:r.value,detailContainer:l.value,dialogContainer:f.value})}async function _e(){if(!L.forward.noMore){L.forward.page++;try{const{has_more:ve,items:Ce,offset:Ae,total:Ye}=await Yf({id:L.id,offset:L.forward.offset,page:L.forward.page});if(typeof Ce=="undefined"&&typeof ve=="undefined"){L.forward.page--;return}L.forward.offset=Ae,Ce!=null&&Ce.length&&L.forward.items.push(...Ce),ve?Ce!=null&&Ce.length||_e():L.forward.noMore=!0,L.forward.total=Ye}catch(ve){console.log(ve)}}}const we=async()=>{if(!L.loading){L.loading=!0;try{const ve=await Xf(L.type?L.rid:L.id,!1,L.type);if(!ve.item){L.error=!0,L.loading=!1;return}L.card=ve.item,await Z()}catch(ve){console.log(ve),L.error=!0,L.errorMsg=ve.message||""}L.loading=!1}};function fe(){L.card=null,L.error=!1,L.errorMsg="",gc(L.forward.items),L.forward.offset="",L.forward.page=0,L.forward.total=0,L.forward.noMore=!1,C({container:r.value,detailContainer:l.value,dialogContainer:f.value}),G.value="2"}const Ue=async({id:ve,commentOn:Ce,rid:Ae,type:Ye,scene:he,jumpReplyId:nt})=>{if(O===he&&!!n.active&&!(!ve&&!(Ae&&Ye))){if(L.commentOn=Ce,ve!==L.id||Ae!==L.rid&&Ye!==L.type)L.visible&&await new Promise(ct=>{L.toggleResolve=ct,M()}),L.id=ve,L.rid=Ae,L.type=Ye,L.jumpReplyId=nt||0;else if(L.visible){L.commentOn&&j();return}fe(),await we(),B.start()}};de.on("viewDynamicDetails",Ue),document.addEventListener("keyup",ge);function ge(ve){if(!!L.showContent)switch(ve.keyCode){case 27:M();break}}return qe(()=>{de.off("viewDynamicDetails",Ue),Va.off("closeCommentDetails")}),t({close:()=>M(!0)}),(ve,Ce)=>{const Ae=Pe("v-tab-item"),Ye=Pe("v-tabs");return h(),b("div",{class:ne(["dynamic_details_viewer flex_col ov_hidden",{"is-transparent":!L.visible,"is-fixed":e.fixed,hidden:!L.showContent}]),ref_key:"rootEl",ref:X,onTransitionend:oe,onClick:Ce[7]||(Ce[7]=Se(()=>M(),["stop"]))},[ke(u("div",{onClick:Ce[0]||(Ce[0]=Se(()=>M(),["stop"])),class:"dynamic_details_viewer--btn p_absolute bd_radius_50 flex_center cs_pointer"},[$(d(qf),{class:"dynamic_details_viewer--btn--close"})],512),[[Fe,L.visible]]),$(yt,{name:"dynamic_details_viewer--transition",onAfterEnter:Ce[5]||(Ce[5]=he=>L.transitionStatus="entered"),onAfterLeave:Ce[6]||(Ce[6]=he=>B.end())},{default:ee(()=>[ke(u("div",{ref_key:"pageScrollRef",ref:o,class:ne(["dynamic_details_viewer--content ov_auto_y",{"is-fade":L.showPopup}]),onClick:Se(he=>{},["stop"]),onScrollPassive:c},[L.card?(h(),b(pe,{key:0},[u("div",{class:"dynamic_details_viewer--card",ref_key:"cardRef",ref:H},[(h(),J(d(Ig),{key:L.card.id_str,data:L.card,detailed:"",onRemove:N},null,8,["data"]))],512),u("div",{class:"dynamic_details_viewer--panel",style:Ge({marginTop:a+"px"})},[u("div",sy,[$(Ye,{class:"mt_xs no_drag","auto-adjustment":"","active-key":G.value,"onUpdate:active-key":Ce[1]||(Ce[1]=he=>G.value=he),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!1,"tabs-gutter":30,"slider-width":18},{default:ee(()=>[(h(),b(pe,null,De(s,he=>{var nt,ct;return $(Ae,{key:he.key,tab:he.name,disabled:he.key==="1"&&((ct=(nt=d(Q))==null?void 0:nt.forward)==null?void 0:ct.is_forbidden)},null,8,["tab","disabled"])}),64))]),_:1},8,["active-key"])]),u("div",iy,[ke(u("div",oy,[(h(!0),b(pe,null,De(L.forward.items,he=>(h(),J(ny,{key:he.id_str,data:he},null,8,["data"]))),128)),L.forward.items.length===0&&L.forward.noMore?(h(),b("div",ry,dy)):R("",!0),$(Ji,{onTrigger:Y})],512),[[Fe,G.value==="1"]]),ke(u("div",fy,[u("div",{class:"dynamic--comment",id:"pc-comment-container",ref_key:"commentDom",ref:r,onScroll:w},null,544),d(p)==="detail"||d(p)==="dialog"?(h(),b("div",{key:0,class:"dynamic--comment",id:"pc-comment-detail-container",ref_key:"commentDetailDom",ref:l,onScroll:k},[u("div",vy,[u("span",{onClick:Ce[2]||(Ce[2]=he=>d(S)("list")),class:"pc-comment-back-icon change-left"},[$(d(Si))]),hy])],544)):R("",!0),d(p)==="dialog"?(h(),b("div",{key:1,class:"dynamic--comment",id:"pc-comment-dialog-container",ref_key:"commentDialogDom",ref:f,onScroll:T},[u("div",my,[u("span",{onClick:Ce[3]||(Ce[3]=he=>d(S)("detail")),class:"pc-comment-back-icon"},[$(d(Si))]),py])],544)):R("",!0),ke(u("div",{title:"\u56DE\u5230\u9876\u90E8",class:"pc-comment-top-button",onClick:Ce[4]||(Ce[4]=he=>x(d(p)))},[$(d(mc),{class:"icon-to-top"}),_y,gy],512),[[Fe,d(y)]])],512),[[Fe,G.value==="2"]])])],4)],64)):L.error?(h(),b("div",yy,[wy,u("p",null,z(L.errorMsg||"\u539F\u52A8\u6001\u4E0D\u89C1\u60F9~"),1)])):(h(),J(G5,{key:2}))],42,ay),[[Fe,L.showContent]])]),_:1}),$(yt,{name:"dynamic_details_viewer--popup--transition"},{default:ee(()=>[ke(u("div",{class:"dynamic_details_viewer--popup",onClick:Se(he=>{},["stop"])},[u("div",{class:ne(["dynamic_details_viewer--comment--detail",{"is-left":L.showSubPage}])},null,2),$(yt,{name:"dynamic_details_viewer--slide--transition"},{default:ee(()=>[ke(u("div",{class:"dynamic_details_viewer--comment--dialog",onClick:Se(he=>{},["stop"])},null,8,Ey),[[Fe,L.showSubPage]])]),_:1})],8,by),[[Fe,L.showPopup]])]),_:1})],34)}}}),Cy={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Sy=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.43 3.51c.17.17.17.446 0 .617L5.025 9.53a.679.679 0 0 1-.96 0l-2.98-2.98a.436.436 0 1 1 .617-.617l2.843 2.843L9.813 3.51c.17-.17.446-.17.617 0Z",fill:"#fff"},null,-1),$y=[Sy];function xy(e,t){return h(),b("svg",Cy,[...$y])}var Ay={render:xy};const Dy={class:"base_radio--input"},Ty={class:"base_radio--inner"},Iy=["value"],Py={class:"base_radio--label"},Xl=ue({__name:"Radio",props:{active:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1}},emits:["update:active"],setup(e,{emit:t}){const n=e;function a(){t("update:active",n.value)}return(s,i)=>(h(),b("label",{class:ne(["base_radio",{"is-checked":e.active===e.value}]),role:"radio",onClick:a},[u("span",Dy,[u("span",Ty,[$(d(Ay))]),u("input",{class:"base_radio--original",type:"radio","aria-hidden":"true",value:e.value},null,8,Iy)]),u("span",Py,[xs(s.$slots,"default")])],2))}});const Fy={class:"dynamic_report_popup--header"},Ry=u("div",{class:"dynamic_report_popup--title"},"\u4E3E\u62A5",-1),Ly=["onClick"],By={class:"dynamic_report_popup--content"},My={class:"dynamic_report_popup--section--title"},Oy={class:"dynamic_report_popup--section--content"},Ny={class:"dynamic_report_popup--section"},Vy=le("\u5176\u4ED6"),Uy={class:"dynamic_report_popup--footer flex_between"},Hy=le("\u53D6\u6D88"),Gy=le("\u786E\u5B9A"),jy=ue({__name:"ReportPopup",props:{active:{type:Boolean,default:!1}},emits:["done"],setup(e,{expose:t,emit:n}){const a=e,{userInfo:s}=ie(st()),i=D(null),o=D(-1),c=D(""),r=ca([{title:"\u8FDD\u53CD\u6CD5\u5F8B\u6CD5\u89C4",options:[{label:"\u8272\u60C5",value:1},{label:"\u8FDD\u6CD5\u4FE1\u606F",value:3}]},{title:"\u4FB5\u72AF\u4E2A\u4EBA\u6743\u76CA",options:[{label:"\u4EBA\u8EAB\u653B\u51FB",value:5}]},{title:"\u6709\u5BB3\u793E\u533A\u73AF\u5883",options:[{label:"\u5783\u573E\u5E7F\u544A",value:4},{label:"\u8BDD\u9898\u4E0D\u76F8\u5173",value:7},{label:"\u5F15\u6218",value:8}]}]),l={id:"",uid:0};function f(){y()}async function v(){if(o.value===-1)return ye({content:"\u8BF7\u9009\u62E9\u4E3E\u62A5\u539F\u56E0"});if(o.value===0&&!c.value)return ye({content:"\u8BF7\u586B\u5199\u4E3E\u62A5\u7406\u7531"});try{await Jf({id:l.id,uid:l.uid,type:o.value,desc:c.value}),ye({content:"\u60A8\u7684\u4E3E\u62A5\u5DF2\u63D0\u4EA4\u6210\u529F"}),y()}catch{ye({content:"\u63D0\u4EA4\u5931\u8D25"})}}function m(){o.value=-1,c.value="",l.id="",l.uid=0}const g=_=>{i.value.show(),l.id=_.id,l.uid=_.uid},y=async()=>{m(),i.value.hide()},E=({id:_,uid:p})=>{if(!!a.active){if(!s.value.isLogin){jt("reportPopup.onReportDynamic");return}g({id:_,uid:p})}};return de.on("reportDynamic",E),qe(()=>{de.off("reportDynamic",E)}),t({show:g,hide:y}),(_,p)=>{const C=Pe("VButton");return h(),J(bc,{"custom-class":"dynamic_report_popup",ref_key:"popupRef",ref:i,onWrapClick:y},{default:ee(()=>[u("div",Fy,[Ry,u("div",{class:"dynamic_report_popup--close",onClick:Se(y,["stop"])},[$(d(Kt))],8,Ly)]),u("div",By,[(h(!0),b(pe,null,De(r,(S,x)=>(h(),b("div",{class:"dynamic_report_popup--section",key:x},[u("div",My,z(S.title),1),u("div",Oy,[(h(!0),b(pe,null,De(S.options,(w,k)=>(h(),b("div",{key:k,class:"dynamic_report_popup--section--option"},[$(Xl,{value:w.value,active:o.value,"onUpdate:active":p[0]||(p[0]=T=>o.value=T)},{default:ee(()=>[le(z(w.label),1)]),_:2},1032,["value","active"])]))),128))])]))),128)),u("div",Ny,[$(Xl,{value:0,active:o.value,"onUpdate:active":p[1]||(p[1]=S=>o.value=S)},{default:ee(()=>[Vy]),_:1},8,["active"]),ke(u("textarea",{class:"dynamic_report_popup--desc","onUpdate:modelValue":p[2]||(p[2]=S=>c.value=S),type:"text",maxlength:"60",placeholder:"\u8BF7\u586B\u5199\u4E3E\u62A5\u7406\u7531"},null,512),[[Fe,o.value===0],[Ki,c.value]])])]),u("div",Uy,[$(C,{class:"dynamic_report_popup--btn",onClick:f},{default:ee(()=>[Hy]),_:1}),$(C,{class:"dynamic_report_popup--btn",onClick:v,type:"pink"},{default:ee(()=>[Gy]),_:1})])]),_:1},512)}}}),Ky=ue({__name:"AllSupplements",props:{active:{type:Boolean,default:!1},detailsViewerFixed:{type:Boolean,default:!1}},setup(e,{expose:t}){const n=D(null);function a(){de.emit("leaveGallery"),n.value&&n.value.close()}return ht.on("gpBack",a),qe(()=>{a(),ht.off("gpBack",a)}),t({close:a}),(s,i)=>(h(),b(pe,null,[$(ky,{ref_key:"detailsViewer",ref:n,active:e.active,fixed:e.detailsViewerFixed},null,8,["active","fixed"]),$(Ec,{active:e.active},null,8,["active"]),$(jy,{active:e.active},null,8,["active"])],64))}});const Zr=e=>(xn("data-v-0e0a21da"),e=e(),An(),e),Wy={class:"message-panel-container"},Zy={class:"header"},zy=Zr(()=>u("span",{class:"title"},"\u6D88\u606F",-1)),qy={class:"nav-tabs"},Yy={class:"num-wrap"},Xy=["textContent","onClick"],Jy={class:"content"},Qy=Zr(()=>u("div",{id:"message-pages-container"},null,-1)),e3={class:"message-panel-supplements"},t3=Zr(()=>u("div",{class:"message-panel-gallery"},null,-1)),n3=ue({__name:"Message",props:{visible:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:t}){const n=e;mt("pageSpmId",""),mt("fromOuterSpmId",""),mt("dynamicScene","message"),mt("fromOuterSpmId",""),mt("galleryContainer",".message-panel-gallery");const a=[{key:"chat",name:"\u804A\u5929\u5217\u8868",component:$2},{key:"reply",name:"\u56DE\u590D\u6211\u7684",component:w5},{key:"at",name:"@\u6211\u7684",component:x5},{key:"like",name:"\u6536\u5230\u7684\u8D5E",component:M5}],s=[52,148,228,324],i=D(null),o=D(null),c=D(null),r=D(!1),l=D("chat"),f=ut(),{notifyType:v,unreadCount:m,activeSession:g,activeComment:y,activeLikeDetails:E,messagePanelVisibleLock:_}=ie(f),p=K(()=>({chat:m.value.chat+m.value.sys_msg,reply:m.value.reply,at:m.value.at,like:m.value.like})),C=()=>{var H;return(H=c.value)==null?void 0:H.close()},S=()=>f.closeSubPage(),x=()=>C(),w=H=>{if(!n.visible)return;const L=document.querySelector(".app_sidebar .settings-item.message"),Q=document.querySelector(".app_sidebar .settings-item.theme"),q=document.querySelector(".app_space .message-btn"),j=document.querySelector(".base_alert"),B=document.querySelector(".message-panel-supplements > *"),W=document.querySelector(".message-panel-gallery > .v_gallery");_.value||H.composedPath().some(U=>[i==null?void 0:i.value,L,Q,q,j,B,W].includes(U))||(t("change",!1),setTimeout(()=>{S()},300))};Xe(()=>{r.value=!0,pt.on("close",()=>{t("change",!1)}),pt.on("openMessage",()=>{l.value="chat"}),document.body.addEventListener("contextmenu",w,{passive:!0,capture:!0}),document.body.addEventListener("click",w,{passive:!0,capture:!0})}),qe(()=>{document.body.removeEventListener("contextmenu",w,{capture:!0}),document.body.removeEventListener("click",w,{capture:!0}),pt.off("close")});const k=D(n.visible);se(()=>n.visible,async()=>{n.visible?(k.value=!1,await At(),k.value=!0):C()});const T=K(()=>a.find(H=>H.key===l.value)),A=H=>{l.value=H,H!=="chat"&&(m.value[H]=0)},F=K(()=>g.value||y.value||E.value),O=f.init();qe(O),mt("viewComment",H=>{o.value.view(H)});let G=Date.now();const X=H=>{xe({type:"pv",spm_info:`main.${H}.0.0`},{appPageViewInfo:{duration:Date.now()-G,pvstart:G,pvend:Date.now()}})};return se(()=>n.visible,H=>{H?G=Date.now():X(l.value)}),se(l,(H,L)=>{const Q=Date.now();Q-G>1e3&&X(L),G=Q}),(H,L)=>{const Q=Pe("v-tab-item"),q=Pe("v-tabs");return h(),J(qa,{to:"body"},[u("div",Wy,[$(yt,{name:"message-drawer"},{default:ee(()=>[ke(u("div",{class:"message-panel",ref_key:"messagePanel",ref:i,onClickCapture:x},[r.value?(h(),b("div",{key:0,class:ne(["message-home",{"is-back":d(F)}])},[u("div",Zy,[zy,$(d(Lc),{class:"setting",onClick:d(f).toSettingsPage},null,8,["onClick"])]),u("div",qy,[k.value?(h(),J(q,{key:0,class:"no_drag","auto-adjustment":"",activeKey:l.value,"onUpdate:activeKey":L[0]||(L[0]=j=>l.value=j),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!0,"tabs-gutter":36,"slider-width":18,onTabChange:A},{default:ee(()=>[(h(),b(pe,null,De(a,j=>$(Q,{key:j.key,tab:j.name,showZero:!1},null,8,["tab"])),64))]),_:1},8,["activeKey"])):R("",!0),u("div",Yy,[(h(),b(pe,null,De(a,(j,B)=>ke(u("span",{class:"num",key:j.key,style:Ge({left:s[B]+"px"}),textContent:z(d(p)[j.key]>99?"99+":d(p)[j.key]),onClick:W=>A(j.key)},null,12,Xy),[[Fe,[0,1].includes(d(v))&&d(p)[j.key]>0]])),64))])]),u("div",Jy,[(h(),J(Wi(d(T).component)))])],2)):R("",!0),Qy],544),[[Fe,e.visible]])]),_:1})]),ke(u("div",e3,[$(Ky,{ref_key:"dynamicAllSupplements",ref:c,active:e.visible},null,8,["active"])],512),[[Fe,e.visible]]),t3])}}});var a3=Je(n3,[["__scopeId","data-v-0e0a21da"]]);const s3={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},i3=u("path",{d:"m12.995 13.858 4.301-4.301a.995.995 0 0 1 1.408 1.407l-5.47 5.47a1.745 1.745 0 0 1-2.468 0l-5.47-5.47a.995.995 0 0 1 1.408-1.407l4.301 4.301V3.75a.995.995 0 1 1 1.99 0v10.108zM4.255 19.75c0-.55.445-.995.995-.995h13.5a.995.995 0 1 1 0 1.99H5.25a.995.995 0 0 1-.995-.995z",fill:"currentColor"},null,-1),o3=[i3];function r3(e,t){return h(),b("svg",s3,[...o3])}var l3={render:r3};const u3={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},c3=u("path",{d:"M8.543 3.043a1 1 0 0 0 0 1.414l7.366 7.366a.25.25 0 0 1 0 .354l-7.366 7.366a1 1 0 1 0 1.414 1.414l7.366-7.366a2.25 2.25 0 0 0 0-3.182L9.957 3.043a1 1 0 0 0-1.414 0z",fill:"currentColor"},null,-1),d3=[c3];function f3(e,t){return h(),b("svg",u3,[...d3])}var v3={render:f3};const h3={key:0,class:"icon-num p_center fs_5 text2"},m3={class:"game-popover-content"},p3={class:"game-popover-scroll scrollbar_sm"},_3={class:"game-icon flex_shrink_0 mr_sm"},g3={class:"game-info w_100 text_left"},y3={class:"b_text fs_ mt_0 mb_xs text_ellipsis"},w3={key:0,class:"text2 fs_5 lh_md mb_xs"},b3={key:1,class:"text2 fs_5 lh_md mb_xs"},E3={key:2,class:"text2 fs_5 lh_md mb_xs"},k3={class:"download-progress"},C3={class:"game-item-action"},S3=["onClick"],$3=["onClick"],x3={class:"popover-footer"},A3=le(" \u67E5\u770B\u4E0B\u8F7D "),D3=ue({__name:"GameIconPopover",setup(e){const t=Lt(),n=D(!1),{isNewDownload:a,downloadingGames:s,downloadPageList:i,isGameIconHover:o}=ie(sc()),c=K(()=>s.value.find(C=>C.gameStatus==="downloading")||i.value[0]||{}),r=K(()=>o.value&&i.value.length>0||n.value||a.value&&s.value.length>0);let l=!1,f=null;const v=()=>{l||(clearTimeout(f),n.value=!0)},m=()=>{clearTimeout(f),f=setTimeout(()=>{n.value=!1,a.value=!1},300)};let g=null;const y=()=>{n.value=!1,a.value=!1,l=!0,clearTimeout(g),g=setTimeout(()=>l=!1,500)},E=C=>{Be("game/sendAction",{type:"resume",data:{id:C.id}}),xe({type:"click",spm_info:"main.game-float.download.button.click"},{msg:JSON.stringify({game_base_id:C.game_base_id,button_name:"start"})})},_=C=>{Be("game/sendAction",{type:"pause",data:{id:C.id}}),xe({type:"click",spm_info:"main.game-float.download.button.click"},{msg:JSON.stringify({game_base_id:C.game_base_id,button_name:"pause"})})},p=()=>{y(),t.push({name:"MyGame"}),setTimeout(()=>de.emit("toMyGameDownloadsTab")),xe({type:"click",spm_info:"main.game-float.download.button.click"},{msg:JSON.stringify({game_base_id:c.value.game_base_id,button_name:"view"})})};return se(r,C=>{C&&xe({type:"show",spm_info:"main.game-float.download.0.show"},{msg:JSON.stringify({game_base_id:c.value.game_base_id})})},{immediate:!0}),(C,S)=>{var w;const x=Pe("VImg");return h(),b(pe,null,[u("div",{class:"game-download-icon",onMouseover:v,onMouseleave:S[0]||(S[0]=k=>m())},[d(i).length>1?(h(),b("span",h3,z(d(i).length),1)):(h(),J(d(l3),{key:1,class:"p_center"})),u("span",{class:"progress-circle",style:Ge(`--progress: ${((w=d(c).progress)==null?void 0:w.progress)||0};`)},null,4)],32),$(yt,{name:"fade",mode:"out-in"},{default:ee(()=>[d(r)?(h(),b("div",{key:0,class:"game-download-popover cs_auto",onMouseover:v,onMouseleave:y},[u("div",m3,[u("div",p3,[(h(!0),b(pe,null,De(d(i),(k,T)=>{var A,F,O;return h(),b("div",{class:ne(["game-popover-item flex_between",{mt_sm:T!==0}]),key:k.id},[u("div",_3,[$(x,{class:"bili-article-card__cover",src:k.icon,width:52,height:52,rule:"1c"},null,8,["src"])]),u("div",g3,[u("h3",y3,z(k.title||"\u6E38\u620F\u6807\u9898"),1),k.gameStatus==="downloading"?(h(),b("p",w3," \u6B63\u5728\u4E0B\u8F7D "+z(((A=k.progress)==null?void 0:A._progress)||"--")+" \xB7 "+z(((F=k.progress)==null?void 0:F._speed)||"--"),1)):k.gameStatus==="pending"?(h(),b("p",b3,"\u7B49\u5F85\u4E0B\u8F7D")):k.gameStatus==="paused"?(h(),b("p",E3,"\u5DF2\u6682\u505C")):R("",!0),u("div",k3,[u("div",{class:"progress-percent",style:Ge({width:`${((O=k.progress)==null?void 0:O.progress)||0}%`})},null,4)])]),u("div",C3,[k.gameStatus==="paused"?(h(),b("span",{key:0,class:"game-action-btn cs_pointer",onClick:G=>E(k)},[$(d(kc))],8,S3)):(h(),b("span",{key:1,class:"game-action-btn cs_pointer",onClick:G=>_(k)},[$(d(Cc))],8,$3))])],2)}),128))]),u("div",x3,[u("span",{class:"view-download float_right text2 fs_5 flex_end ts_all_fast cs_pointer",onClick:p},[A3,$(d(v3),{class:"ml_2"})])])])],32)):R("",!0)]),_:1})],64)}}});const T3={class:"app_sidebar--pages"},I3={class:"app_sidebar--pages-wrap"},P3=u("p",{class:"b_text text3"},"\u9996\u9875",-1),F3=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),R3=u("p",{class:"b_text text3"},"\u7CBE\u9009",-1),L3=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),B3={class:"pages-item"},M3=u("p",{class:"b_text text3"},"\u52A8\u6001",-1),O3=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),N3=u("p",{class:"b_text text3"},"\u6211\u7684",-1),V3=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),U3={class:"app_sidebar--settings"},H3={class:"settings-item pb_xs",title:"\u7A7A\u95F4"},G3={key:0},j3=["src"],K3={key:1},W3=["src"],Z3=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),z3={key:0,class:"settings-item sidebar-game"},q3={key:0,class:"sidebar-game-icon"},Y3={key:0,class:"sidebar-game-dot"},X3={key:1,class:"sidebar-game-svg"},J3={key:0,class:"sidebar-game-dot"},Q3=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),e4=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),t4={key:0,class:"msg-dot"},n4=["textContent"],a4=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),s4=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),i4={class:"settings-item",title:"\u8BBE\u7F6E"},o4=u("span",{class:"gamepad-cursor","data-tp":"sidebar"},null,-1),r4=ue({__name:"AppSidebar",setup(e){const{appTheme:t}=ie(da()),n=nn(),a=Lt(),{lastRootRouteName:s,isOnHistoryGoBack:i,subRoutesStack:o,isAllowGoGack:c,localSpmId:r}=ie(pa()),l=D(!1),f=D(""),v=D(""),m=D(""),g=D(null),y=K(()=>n.path.startsWith("/page/home")&&!c.value),E=K(()=>n.path.startsWith("/page/dynamic")),_=K(()=>n.path.startsWith("/page/mine")),p=K(()=>n.name==="Settings"),C=K(()=>n.name==="GameCenter"||n.name==="MyGame"),S=K(()=>n.name==="Space"),x=D(Math.random()),w=D(!1),k=D({}),T=D(!1),A=D(!1),F=D(window.innerHeight);let O=!1,G="",X=null,H=null,L=null;const{appInfo:Q}=ie(da()),{abTestInfo:q}=ie(G1()),{userInfo:j}=ie(st()),B=ut(),{notifyType:W,totalUnreadCount:U,settingFromMessage:M,spaceFromMessage:N}=ie(B),{fromOuterSpmId:Z}=ie(j1()),{downloadPageList:Y,isGameIconHover:oe,isNewDownload:V,downloadListLength:ae,isShowGameEntry:_e}=ie(sc()),we=K(()=>({spm_info:"main.main.left-sidebar.game",msg:{is_redpoint:k.value.red_dot,is_icon:!!k.value.icon,spmid:r.value}}));se(n,()=>{c.value=!!n.meta.isSubPage||!!n.query.allowGoBack},{deep:!0,immediate:!0}),se(c,Te=>{Te||de.emit("quitSearch")});const fe=K(()=>j.value.face?cc(j.value.face,{w:30*window.devicePixelRatio|0,h:30*window.devicePixelRatio|0,s:!0,ext:"webp",style:"pc-avatar"}):pi),Ue=()=>{clearTimeout(X),w.value=!1;const Te=new Image;Te.onload=()=>{w.value=!0},Te.onerror=()=>{w.value=!1,X=setTimeout(()=>Ue(),1e4)},Te.src=fe.value},ge=()=>clearTimeout(X),ve=async()=>{const Te=await rh(j.value.mid);k.value=Te,window.gameEntryInfo=Te,de.emit("gameEntryInfoUpdated");const Ze=Date.now();T.value=Te.icon&&(!Te.icon_begin_time||Te.icon_begin_time<Ze)&&(!Te.icon_end_time||Te.icon_end_time>Ze),A.value=!1};ve(),L=setInterval(ve,1e3*60*5);let Ce=null;const Ae=()=>{clearTimeout(Ce),Ce=setTimeout(()=>{oe.value=!1},300)};let Ye=null;const he=()=>{V.value=!0,clearTimeout(Ye),Ye=setTimeout(()=>{V.value=!1},8e3)};se(ae,(Te,Ze)=>{Ze===0&&Te>0&&he()});const nt=()=>{i.value=!0,clearTimeout(H),H=setTimeout(()=>i.value=!1,500)},ct=()=>{xe({type:"click",spm_info:"main.main.main-page.page-back"},{msg:JSON.stringify({page:r.value})}),c.value&&(M.value&&p.value?(M.value=!1,l.value=!0):N.value&&S.value&&(N.value=!1,l.value=!0),O=!0,G=location.href,a.back(),nt(),setTimeout(()=>{location.href===G?(a.back(),setTimeout(()=>{location.href===G?a.replace({name:s.value||"Home"}):Ft()},200)):Ft()},200))};de.on("pageGoGack",ct);const Ft=()=>{!o.value.length&&c.value&&(O=!0,a.back(),setTimeout(()=>Ft()))},Dn=()=>{c.value?(O?o.value.pop():(o.value.push(n.name),o.value.length>2&&o.value.shift()),O=!1):(o.value=[],O=!1,s.value=n.name)},rn=Te=>{Te.preventDefault(),!y.value&&f.value?a.push({path:f.value}):a.push({name:"HomeRecommends"})},Tn=()=>{n.name==="Selected"&&Ie.emit("refreshSelectedPage")},re=Te=>{Te.preventDefault(),!_.value&&m.value&&m.value!=="/page/mine-download-collection"?a.push({path:m.value}):a.push({name:"MineHistory"})},be=()=>{jt("appSidebar.handleAvatarClick")},Qe=()=>{!q.value.sidebar_upload_toappbrowser||Q.value.chid==="sd-ms-pc"?Be("window/openUploadWindow"):bn("https://member.bilibili.com/platform/upload/video/frame","sidebar.UploadVideo")},dt=()=>{j.value.isLogin?(l.value=!l.value,l.value&&(N.value=!1,M.value=!1,B.updateNewSessionList())):jt("appSidebar.handleMessageClick")};pt.on("openMessagePanel",()=>{l.value||(l.value=!0)}),pt.on("closeMessagePanel",()=>{l.value&&(l.value=!1,N.value=!1,M.value=!1)});const it=()=>{a.push({name:"Space",query:{mid:""}})};let ft=null;const ot=async Te=>{try{fh(),ft=(await Al()).data}catch(Ze){console.info(Ze)}},qt=()=>{ft&&(ft=null)};let Ne=!1;const Yt=async Te=>{if(Ne)return;Ne=!0;let Ze=!1;try{const Bt=ft?await ft:(await Al()).data;ft=null,ho(Te),Ze=!0;const ln=g.value.getBoundingClientRect();await vh(Bt,ln,Te)}catch(Bt){console.info(Bt),Ze||ho(Te)}finally{Ne=!1,xe({type:"click",spm_info:"main.main.main-page.theme"},{msg:JSON.stringify({to_theme:Te})})}};Ve("window/updateMainWindowTheme",({data:Te})=>{ho(Te)}),se(j,Te=>{Te.isLogin&&Ue(),x.value=Math.random()},{immediate:!0}),se(n,()=>{Dn(),y.value?f.value=n.path:E.value?(v.value=n.path,Z.value="main.homepage-navigation.0.0.pv"):_.value&&(m.value=n.path)},{immediate:!0});const In=Ir(({height:Te})=>{F.value=Te},!0);return qe(()=>{clearTimeout(X),clearTimeout(H),clearInterval(L),de.off("pageGoGack",ct),In.off()}),(Te,Ze)=>{const Bt=Pe("v-button"),ln=Pe("VImg"),zn=Hn("report");return h(),b("div",{class:ne(["app_sidebar draggable flex_col_between py_xl text_center",{"sidebar-short":F.value<740}])},[u("div",T3,[$(Bt,{class:ne(["app_sidebar--pages-back no_drag p_relative",{mt_xs:d(It),deactive:!d(c)}]),active:d(c),"active-shrink":d(c),onClick:ct},{default:ee(()=>[$(d(Rc)),u("span",{class:ne(["gamepad-cursor",{disabled:!d(c)}]),"data-tp":"sidebar",data:""},null,2)]),_:1},8,["active","active-shrink","class"]),u("ul",I3,[u("li",{class:"pages-item",onClickCapture:rn},[$(d(Pa),{class:"router-link",to:"/page/home"},{default:ee(()=>[$(d(bf)),P3,F3]),_:1})],32),d(q).sidebar_selected_hide2_r?R("",!0):(h(),b("li",{key:0,class:"pages-item",onClickCapture:Tn},[$(d(Pa),{class:"router-link",to:"/page/selected"},{default:ee(()=>[$(d(ov)),R3,L3]),_:1})],32)),u("li",B3,[$(d(Pa),{class:"router-link",to:"/page/dynamic"},{default:ee(()=>[$(d(dv)),M3,O3]),_:1})]),u("li",{class:"pages-item",onClickCapture:re},[$(d(Pa),{class:"router-link",to:"/page/mine"},{default:ee(()=>[$(d(pv)),N3,V3]),_:1})],32)])]),u("ul",U3,[u("li",H3,[d(j).isLogin?(h(),b("div",G3,[w.value?(h(),J(ln,{class:"avatar u_drag_none",src:d(fe),key:x.value,width:32,height:32,rule:"1c",onError:Ue,onLoad:ge,onClick:it},null,8,["src"])):(h(),b("img",{key:1,class:"avatar u_drag_none",src:d(pi),onClick:it},null,8,j3))])):(h(),b("div",K3,[u("img",{class:"avatar u_drag_none",src:d(pi),onLoad:ge,onClick:be},null,40,W3)])),Z3]),d(q).sidebar_game_entry&&d(_e)?(h(),b("li",z3,[ke((h(),J(d(Pa),{class:"router-link router-link-game",title:"\u6E38\u620F",to:"/page/bili-game/game-center",onMouseover:Ze[0]||(Ze[0]=Dt=>oe.value=!0),onMouseleave:Ae,onClick:Ze[1]||(Ze[1]=Dt=>A.value=!0)},{default:ee(()=>[T.value&&!A.value?(h(),b("div",q3,[$(ln,{class:"sidebar-game-img mt_2",src:k.value.icon,width:29,height:29,rule:"1c"},null,8,["src"]),k.value.red_dot?(h(),b("span",Y3)):R("",!0)])):(h(),b("div",X3,[$(d(Rv),{class:ne(["ico-game",{brand_pink:d(C)}])},null,8,["class"]),k.value.red_dot&&!A.value?(h(),b("span",J3)):R("",!0)]))]),_:1})),[[zn,d(we),"both"]]),d(Y).length?(h(),J(D3,{key:0})):R("",!0),Q3])):R("",!0),d(q).sidebar_upload_hide_r?R("",!0):(h(),b("li",{key:1,class:"settings-item",title:"\u6295\u7A3F",onClick:Qe},[$(d(xv),{class:"ico-upload"}),e4])),u("li",{class:"settings-item message",title:"\u6D88\u606F",onClick:dt},[$(d(Ev),{class:ne({active:l.value})},null,8,["class"]),d(W)===2&&d(U)>0?(h(),b("span",t4)):R("",!0),[0,1].includes(d(W))&&d(U)>0?(h(),b("span",{key:1,class:"msg-num",textContent:z(d(U)>99?"99+":d(U))},null,8,n4)):R("",!0),d(j).isLogin?(h(),J(a3,{key:2,visible:l.value,onChange:Ze[2]||(Ze[2]=Dt=>l.value=Dt)},null,8,["visible"])):R("",!0),a4]),u("li",{ref_key:"themeBtn",ref:g,class:"settings-item theme",title:"\u4E3B\u9898",onMouseenter:Ze[3]||(Ze[3]=Dt=>ot(d(t)!=="dark"?"dark":"light")),onMouseleave:qt,onClick:Ze[4]||(Ze[4]=Dt=>Yt(d(t)!=="dark"?"dark":"light"))},[ke($(d(Vv),null,null,512),[[Fe,d(t)!=="dark"]]),ke($(d(Kv),null,null,512),[[Fe,d(t)==="dark"]]),s4],544),u("li",i4,[$(d(Pa),{class:"router-link",to:"/page/settings"},{default:ee(()=>[$(d(Lc),{class:ne({brand_pink:d(p)})},null,8,["class"])]),_:1}),o4])])],2)}}}),l4={class:"icon mini-header__logo",viewBox:"0 0 2240 1024",xmlns:"http://www.w3.org/2000/svg",width:"140",height:"64"},u4=u("path",{d:"M2079.81 913.566c-10.013 0-18.555.8-26.936-.16-16.987-1.951-33.974-1.567-50.993-2.08-10.973-.287-10.653-.287-11.58-10.908-2.72-32.407-5.695-64.781-8.606-97.156-2.528-28.44-4.927-56.911-7.71-85.319-2.527-26.04-5.567-52.017-8.318-78.025-2.623-24.441-5.054-48.914-7.774-73.323a12681.115 12681.115 0 0 0-10.684-92.133c-3.295-27.128-6.559-54.32-10.205-81.417a20559.273 20559.273 0 0 0-17.531-125.979c-6.398-44.723-14.076-89.222-22.106-133.657-1.44-7.966-1.248-8.254 6.366-9.533 31.671-5.407 63.502-10.013 95.716-9.31 3.487.096 7.006.16 10.461.608 5.663.704 8.606 3.455 8.926 10.045 1.12 22.97 2.719 45.939 4.414 68.876 2.72 37.59 5.663 75.178 8.478 112.736 1.792 24.184 3.327 48.305 5.15 72.426 2.912 38.773 5.983 77.514 8.926 116.287 1.791 23.705 3.359 47.474 5.182 71.179 2.784 34.806 5.823 69.58 8.638 104.354 1.791 22.137 3.39 44.307 5.278 66.444 2.784 32.79 5.79 65.581 8.638 98.372 2.143 25.592 4.095 51.249 6.27 77.673zM853.67 114.918c4.639 0 11.645-.512 18.555.128 8.797.8 10.493 3.071 11.037 11.9 2.527 40.373 4.894 80.777 7.582 121.182 2.943 43.57 6.174 87.078 9.405 130.586 2.975 39.956 5.95 79.912 9.15 119.869 3.486 43.891 7.357 87.718 10.876 131.61 2.655 33.622 4.927 67.244 7.678 100.898 2.623 31.223 5.694 62.382 8.51 93.573 2.399 26.84 4.83 53.712 7.165 80.585.736 8.51.128 9.053-9.053 8.829-24.025-.576-47.922-3.391-71.947-2.72-5.503.16-7.102-2.366-8.03-7.581-1.983-11.357-1.663-22.905-2.879-34.39-3.295-30.36-5.183-60.846-7.966-91.27-2.495-27.64-5.502-55.215-8.35-82.823-2.527-25.241-5.022-50.482-7.71-75.754-2.686-24.793-5.533-49.618-8.349-74.443-2.59-22.841-5.118-45.682-7.87-68.524-4.062-33.462-8.093-66.924-12.508-100.323-4.063-30.647-8.67-61.198-12.988-91.813a3619.188 3619.188 0 0 0-19.834-124.412 1393.963 1393.963 0 0 0-5.31-28.024c-.96-4.702-.097-7.422 5.278-8.157 14.14-1.888 28.248-4.83 42.452-6.207 14.203-1.311 28.407-3.966 45.106-2.719zm1006.076 403.34c27.064 0 27.704.191 32.055 24.536 5.342 30.04 9.085 60.334 12.636 90.63 3.743 32.278 7.518 64.557 10.973 96.867 2.783 26.009 5.118 52.081 7.742 78.09 2.75 27.256 5.662 54.416 8.51 81.64 1.567 15.388 3.038 30.775 4.798 46.13.512 4.447-.832 6.815-5.215 7.326-9.245 1.056-18.426 2.272-27.64 3.264-16.89 1.823-33.814 3.614-50.737 5.182-8.733.8-9.31.32-10.94-8.126-14.845-76.617-29.72-153.171-44.436-229.82-9.79-50.962-19.322-101.955-28.92-152.916a805.526 805.526 0 0 1-3.582-21.082c-.64-4.031.447-6.622 5.022-7.71 30.487-7.134 61.294-12.636 89.734-14.012zm-1137.078 0c28.952 0 28.824.095 33.303 26.36 6.91 40.66 11.804 81.544 16.187 122.556 4.287 39.796 8.957 79.56 13.148 119.357 2.847 27.224 5.087 54.512 7.742 81.704 1.887 19.355 4.127 38.645 6.174 57.968.256 2.367.384 4.734.544 7.133.416 9.47 0 10.237-9.117 11.165-18.075 1.888-36.182 3.455-54.257 5.247-6.558.64-13.084 1.6-19.578 2.239-8.637.8-8.925.768-10.62-7.966-6.079-30.679-11.965-61.422-17.916-92.1-14.267-73.9-28.695-147.734-42.867-221.632-5.662-29.56-10.525-59.247-16.091-88.839-1.024-5.406-.256-7.933 5.342-9.245 30.2-7.038 60.59-12.54 88.006-13.948zm382.13 309.861v124.028c0 1.184-.129 2.4.031 3.583.608 6.014-1.6 8.67-7.805 8.413-8.158-.351-16.252-.127-24.41.064-17.018.32-34.07-.351-51.056 1.6-9.406 1.088-9.214.512-10.141-9.405-2.784-31.223-5.823-62.414-8.67-93.637-2.623-28.824-4.99-57.711-7.678-86.535-2.719-29.655-5.758-59.215-8.51-88.838-1.887-19.77-3.55-39.509-5.214-59.279-2.175-25.72-4.19-51.409-6.462-77.13-.96-10.844-.16-12.38 10.59-13.5a531.877 531.877 0 0 1 83.527-2.59c6.942.383 13.852 1.727 20.57 3.358 8.477 2.016 9.405 3.263 9.853 12.125.928 17.85 1.855 35.701 2.335 53.584.544 19.866.096 39.765.832 59.63 1.856 54.8 1.568 109.665 2.207 164.529zm1134.806 5.63v117.438c0 1.984-.064 3.967.032 5.983.415 5.15-1.984 6.973-6.878 6.941-12.029-.095-24.025 0-36.022.16-13.564.128-27.096.064-40.628 1.536-8.926 1.024-8.99.352-9.79-8.51-3.678-40.66-7.55-81.32-11.26-122.044-3.391-37.525-6.526-75.082-9.981-112.64-3.551-38.74-7.422-77.385-10.909-116.094-1.727-19.386-3.167-38.772-4.607-58.159-.575-8.445.352-9.949 9.886-10.717 16.57-1.311 33.078-3.55 49.777-3.263 16.635.32 33.302-.607 49.842 2.56 14.012 2.687 14.715 3.487 15.547 18.458 2.4 44.051 1.664 88.23 3.231 132.282 1.6 46.898.48 93.797 1.76 146.07zm-408.106-528.614c9.79.576 17.5.096 25.177 1.791 4.894 1.12 7.358 3.328 7.838 8.574 2.303 25.24 4.798 50.513 7.325 75.786 2.016 20.506 4.16 41.012 6.239 61.518l.192 1.184c1.663 12.924 1.28 13.276-11.293 13.98-11.197.607-22.362 1.6-33.558 2.271-7.358.448-9.694 1.696-10.91-9.021-4.19-37.813-9.053-75.53-13.691-113.311a1185.032 1185.032 0 0 0-4.287-31.8c-.928-5.981 1.408-9.276 7.006-9.756 7.358-.672 14.716-.864 19.962-1.216zm-1133.398.16c7.55.416 15.323-.16 22.937 1.6 4.35.991 6.558 2.815 6.974 7.773.928 11.837 2.751 23.641 3.87 35.478 3.552 36.31 6.91 72.65 10.238 108.992.704 7.902.544 8.062-6.846 8.606-13.116.96-26.265 1.92-39.413 2.463-7.646.352-8.605-.576-9.565-8.382-3.327-26.744-6.462-53.52-9.661-80.296-2.591-22.074-4.767-44.147-7.902-66.157-.864-6.078 1.12-7.742 5.982-8.733 7.71-1.568 15.452-1.056 23.386-1.344zm399.148 100.003c0 23.001.064 45.97-.032 69.004 0 10.333-.128 10.397-10.397 10.269a324.29 324.29 0 0 1-36.982-1.92c-7.933-.991-8.093-.735-8.317-9.149-.8-28.12-1.632-56.24-2.208-84.36-.415-19.034-.64-38.004-1.791-57.039-.608-9.821-.064-9.917 9.373-10.045 13.916-.16 27.8.48 41.62 2.591 8.318 1.28 8.702 1.28 8.734 10.493.064 23.385.064 46.77.064 70.188h-.064zm1135.382.608c0 23.033.064 46.034-.032 69.036 0 9.66-.16 9.725-9.853 9.66a505.325 505.325 0 0 1-38.133-1.79c-6.303-.48-8.158-3.136-7.742-8.862.064-.8 0-1.6 0-2.4-.96-44.402-1.92-88.774-2.815-133.177-.032-2.367-.16-4.734-.064-7.134.128-8.957.16-9.18 9.149-9.117 12.38.064 24.665.704 37.013 1.92 15.068 1.503 12.413 3.359 12.477 15.26.064 22.169.032 44.402 0 66.604zm-1565.593 54c.288 12.636.288 12.604-11.805 15.548-8.222 2.015-16.443 4.222-24.729 6.046-7.07 1.6-8.317.704-9.533-6.238-8.446-47.09-16.86-94.213-25.24-141.335-1.696-9.758-1.248-10.365 8.349-12.06 11.805-2.08 23.577-4.128 35.382-5.951 7.517-1.184 8.477-.768 9.98 7.518 2.976 16.73 5.791 33.526 7.998 50.385 3.423 26.68 6.239 53.457 9.31 80.169.256 1.951.192 3.967.288 5.918zM1731.175 323.21c15.452-2.528 31.031-5.087 46.61-7.55 5.6-.864 7.295 2.655 8.03 7.646 2.656 18.426 5.983 36.725 8.158 55.184 3.2 26.744 7.582 53.36 8.414 80.328.064 2.752.032 5.567.096 8.318.16 4.287-1.984 6.494-5.95 7.422-10.558 2.367-21.114 4.734-31.64 7.262-5.054 1.215-6.75-.928-7.581-5.855-3.167-18.746-6.814-37.397-10.045-56.08-5.47-30.774-10.781-61.581-16.092-92.388-.128-1.12 0-2.304 0-4.287zm-710.641 108.032c-.448 16.38.544 30.647-1.696 44.915-.671 4.511-1.983 7.422-6.846 7.838-10.429.864-20.826 1.696-31.19 2.751-5.023.544-6.43-1.631-7.262-6.558-2.336-14.556-1.92-29.303-3.327-43.923-2.656-27.608-3.775-55.408-5.567-83.112-.448-6.75-1.12-13.436-1.663-20.186-.288-3.775 1.215-5.886 5.246-6.046 13.5-.544 26.936-3.007 40.5-2.528 7.934.288 8.606.8 9.182 8.798.352 5.534.256 11.133.384 16.699l2.239 81.352zm1134.902-15.867c0 19.066.224 38.133-.032 57.2-.16 9.916-1.28 10.78-10.653 11.644-9.277.864-18.49 1.567-27.736 2.56-5.214.543-7.646-.993-7.965-6.975-1.344-25.336-3.168-50.673-4.927-75.978-1.376-20.986-2.943-41.94-4.415-62.893-.16-2.4-.032-4.799-.192-7.166-.224-4.191 1.056-6.654 5.759-6.814 13.116-.448 26.136-2.975 39.348-2.496 8.062.288 8.19.416 8.798 8.798 1.951 27.32 2.143 54.704 2.015 82.12zM628.296 756.172c16.571 18.235 17.403 39.828 11.932 62.414-5.502 22.585-18.042 41.204-33.238 57.903-25.497 27.896-56.304 48.498-89.062 65.997-56.4 30.135-116.19 50.161-178.572 61.998-44.883 8.477-90.054 15.003-135.705 17.499-13.916.767-27.8 1.407-41.716 1.311-10.077 0-20.186.288-30.23-.064-8.542-.32-9.79-1.791-10.494-10.717-2.591-32.022-4.798-64.077-7.646-96.1-3.327-37.109-7.23-74.186-10.812-111.295-2.624-26.84-4.895-53.745-7.774-80.52-3.327-31.544-7.07-63.023-10.717-94.565-3.327-29.112-6.526-58.287-10.045-87.431-3.935-32.279-7.998-64.493-12.316-96.708a8228.968 8228.968 0 0 0-13.213-92.997A5984.5 5984.5 0 0 0 24.375 200.27 3243.825 3243.825 0 0 0 .702 76.53c-1.151-5.502.512-7.71 5.343-9.725 46.29-19.194 92.42-38.74 138.68-58.03 8.605-3.584 17.434-6.591 26.584-8.286 6.334-1.184 7.965.128 7.773 6.494-.48 16.283.192 32.63-1.407 48.85a161.393 161.393 0 0 0-.64 13.084c-.736 58.383-1.44 116.798.096 175.213 1.344 51.185 4.03 102.338 7.006 153.491 2.335 40.372 5.694 80.745 9.15 121.053 3.39 39.508 7.517 78.953 11.388 118.462.736 7.517 1.408 8.221 9.95 7.07a381.33 381.33 0 0 1 50.832-4.191c52.881-.128 104.898 7.134 156.339 19.322 45.01 10.685 88.806 24.92 130.778 44.819 20.794 9.853 40.692 21.242 58.83 35.702 6.175 4.862 11.677 10.46 16.892 16.315zm1126.84-9.597c20.474 17.946 27.928 39.924 22.106 67.116-4.83 22.426-15.771 41.268-30.36 58.127-23.416 27.096-51.856 47.698-82.631 64.91-60.335 33.782-124.604 55.727-192.168 68.396a1151.09 1151.09 0 0 1-111.456 15.547c-21.178 1.824-42.452 4.095-66.22 2.623h-27.769c-5.406 0-8.477-1.695-8.925-8.125-2.047-28.088-4.415-56.144-6.942-84.2-2.687-29.623-5.662-59.247-8.478-88.87-2.559-27.224-4.926-54.512-7.71-81.736-2.559-25.657-5.502-51.25-8.285-76.874-2.591-24.057-5.086-48.114-7.934-72.139-3.423-29.112-7.038-58.223-10.652-87.335-3.392-27.16-6.75-54.288-10.365-81.416a6133.577 6133.577 0 0 0-12.157-87.143c-5.694-37.653-11.805-75.178-17.819-112.767a3259.149 3259.149 0 0 0-29.111-158.994c-.448-2.335-.672-4.734-1.376-7.006-1.663-5.118-.064-7.837 4.959-9.82 49.17-19.227 96.772-42.42 146.39-60.72 6.493-2.43 13.051-5.15 20.057-5.853 6.302-.64 7.902.383 7.294 7.102-3.327 36.437-1.407 73.066-3.135 109.536-1.408 29.751-1.248 59.598.256 89.382.352 7.55.64 15.131.576 22.65-.384 35.765 1.503 71.498 3.327 107.2 2.335 47.186 5.758 94.277 9.245 141.399 2.527 34.006 5.822 67.948 9.022 101.922 1.695 18.587 3.519 37.141 5.822 55.632 1.247 10.205 1.76 10.301 11.772 8.957 17.66-2.399 35.35-4.35 53.201-4.094 62.638.8 124.028 10.685 184.266 27.864 40.789 11.58 80.489 26.04 117.982 46.29a253.558 253.558 0 0 1 47.218 32.439zM308.676 922.81c23.162-11.068 135.61-98.947 144.535-113.279-54.576-23.513-109.344-45.362-168.24-63.245l23.706 176.524zm1277.198-107.52c2.879-3.103 2.559-5.503-1.344-7.23-7.774-3.551-15.484-7.326-23.353-10.557-42.004-17.18-84.2-33.814-127.483-47.378-3.775-1.152-7.646-3.775-12.477-1.536l23.322 173.454c3.455.767 4.798-.832 6.334-1.92 39.316-28.855 78.889-57.36 116.638-88.39 6.366-5.183 12.668-10.397 18.363-16.443z",fill:"var(--brand_pink)"},null,-1),c4=[u4];function d4(e,t){return h(),b("svg",l4,[...c4])}var f4={render:d4};const v4={width:"127",height:"32",viewBox:"0 0 127 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},h4=nc('<g clip-path="url(#a)" fill="var(--brand_pink)"><path d="M91.518 8.455v-1.52a.254.254 0 0 0-.252-.252h-2.3l-.948-2.224a.503.503 0 0 0-.466-.306h-2.827a.254.254 0 0 0-.237.352l.924 2.178h-2.254a.254.254 0 0 0-.252.252v1.52c0 .138.115.252.252.252h.894l-.901 22.534c0 .145.107.26.252.26h2.544a.5.5 0 0 0 .505-.49l.71-17.75h.558c.283 0 .505.23.505.505v15.198c0 .283-.23.504-.505.504h-.374a.254.254 0 0 0-.237.352l.58 1.368c.077.183.26.305.467.305h2.353c.558 0 1.016-.45 1.016-1.016V12.253c0-.558-.45-1.016-1.016-1.016h-3.263l.1-2.537h3.92a.254.254 0 0 0 .252-.252v.007ZM99.777 11.695v-1.223a.504.504 0 0 0-.504-.504h-6.488a.254.254 0 0 0-.252.252v1.52c0 .138.115.253.252.253h3.103c.168 0 .29.16.244.328l-1.36 4.486h-2.491a.254.254 0 0 0-.252.252v1.52c0 .138.114.252.252.252h2.613v10.133c0 .282-.229.504-.504.504h-.71a.254.254 0 0 0-.238.352l.581 1.367c.077.184.26.306.466.306h2.942c.558 0 1.016-.451 1.016-1.016V18.824h1.437a.255.255 0 0 0 .252-.252v-1.52a.255.255 0 0 0-.252-.253h-1.559l1.376-4.524c.06-.19.084-.39.084-.588l-.008.008ZM81.912 11.48 81.66 5.14a.506.506 0 0 0-.504-.49h-3.049a.251.251 0 0 0-.252.26l.252 6.343a.506.506 0 0 0 .504.489h3.05c.144 0 .259-.123.251-.26ZM81.767 21.88h-3.05a.5.5 0 0 0-.503.49l-.36 8.879c0 .145.108.26.253.26h3.049a.5.5 0 0 0 .504-.49l.359-8.878a.251.251 0 0 0-.252-.26ZM81.912 20.093l-.252-6.342a.506.506 0 0 0-.504-.49h-3.049a.251.251 0 0 0-.252.26l.252 6.343c.008.275.237.489.504.489h3.05c.144 0 .259-.123.251-.26ZM95.04 4.145h-2.017a.505.505 0 0 0-.504.444l-.459 3.797a.506.506 0 0 0 .504.566h2.018c.26 0 .474-.191.504-.444l.069-.565h4.73a.255.255 0 0 0 .252-.252V6.17a.255.255 0 0 0-.252-.253h-4.486l.146-1.207a.506.506 0 0 0-.505-.566ZM123.488 21.896l2.598-3.148a.504.504 0 0 0 .115-.321v-2.66c0-.236-.298-.343-.451-.16l-2.759 3.347-1.031-6.136 3.79-.458a.505.505 0 0 0 .443-.505v-1.291a.253.253 0 0 0-.283-.252l-4.286.52-1.047-6.266a.502.502 0 0 0-.497-.42h-3.828a.258.258 0 0 0-.252.297l1.161 6.93-2.17.26a.505.505 0 0 0-.443.505v1.291c0 .153.13.268.283.252l2.659-.32 1.704 10.185-3.584 4.34a.248.248 0 0 0-.061.16v2.049c0 .473.596.687.894.32l3.24-3.92.695 4.165c.084.49.504.848 1.001.848h4.119a.504.504 0 0 0 .466-.305l.58-1.368a.254.254 0 0 0-.236-.352h-1.139a.502.502 0 0 1-.497-.42l-1.199-7.152.015-.015ZM110.414 17.51l-1.062 2.498-1.062-2.498a.992.992 0 0 1-.084-.398V9.464a.255.255 0 0 0-.253-.253h-2.789a.255.255 0 0 0-.252.253v7.442c0 .275.054.543.161.795l2.628 6.181-3.087 7.267a.255.255 0 0 0 .237.352h2.575c.206 0 .39-.123.466-.306l1.46-3.43 1.459 3.43c.077.183.26.306.466.306h2.575a.254.254 0 0 0 .237-.352l-3.087-7.267 2.629-6.181c.107-.252.16-.52.16-.795V6.934c0-.557-.451-1.016-1.016-1.016h-8.107a.254.254 0 0 0-.252.252v1.52c0 .138.114.253.252.253h5.318c.283 0 .504.23.504.504v8.658c0 .137-.03.267-.084.397l.008.008Z"></path><path d="M124.726 5.161h-2.828a.255.255 0 0 0-.237.352l1.223 2.888c.076.183.26.306.466.306h2.827a.254.254 0 0 0 .237-.352l-1.222-2.888a.504.504 0 0 0-.466-.306ZM23.901 4.19l3.171-.39c.1-.015.184.062.191.153L29.303 28a.177.177 0 0 1-.175.191h-2.293c-.091 0-.175-.069-.183-.16L23.748 4.389a.167.167 0 0 1 .153-.191V4.19Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="m19.583 16.913 3.546-.435c.1-.016.19.06.198.16l1.544 12.593a.177.177 0 0 1-.145.19l-2.621.322a.153.153 0 0 1-.168-.123L19.43 17.135a.168.168 0 0 1 .153-.207v-.015ZM30.603 16.723h3.492a.17.17 0 0 1 .168.168v12.715c0 .091-.076.16-.16.16h-2.53a.168.168 0 0 1-.168-.16l-.962-12.708c0-.099.068-.183.168-.183l-.008.008ZM18.453 10.495l1.506-.183a.167.167 0 0 1 .19.145l.612 4.539a.167.167 0 0 1-.153.19l-1.2.146c-.091.008-.175-.046-.19-.138l-.902-4.523a.162.162 0 0 1 .13-.183l.007.007ZM20.815 10.371l.558 4.554a.16.16 0 0 0 .183.146l1.39-.176c.092-.008.154-.092.146-.184l-.558-4.561a.151.151 0 0 0-.176-.138l-1.398.176c-.092.015-.16.1-.145.191v-.008ZM29.945 10.42l.351 4.6c0 .083.077.144.153.144h1.23c.092 0 .16-.076.16-.16l-.098-4.592a.163.163 0 0 0-.168-.161h-1.475a.16.16 0 0 0-.16.176l.007-.008ZM32.36 10.411l.099 4.577a.17.17 0 0 0 .168.168h1.306a.17.17 0 0 0 .168-.168v-4.585a.161.161 0 0 0-.16-.16H32.52a.17.17 0 0 0-.168.168h.007ZM39.038 31.179c0 .092.077.168.169.176 6.48.74 11.056-1.574 13.135-2.85 2.032-1.254 4.829-4.28.794-6.587-4.218-2.415-8.03-2.621-11.286-2.346-.107.008-.206-.061-.214-.168-1.2-9.078-.787-17.17-.71-18.675 0-.115-.107-.191-.206-.153-.933.336-4.516 1.643-5.28 1.918a.177.177 0 0 0-.115.199c.283 1.505 2.651 14.113 3.713 28.486ZM49.4 24.967c-2.017 1.94-4.378 3.125-4.592 3.24a.167.167 0 0 1-.245-.108c-.092-.42-.458-3.071-.672-5.08-.008-.1.068-.207.19-.192 3.004.543 5.174 1.803 5.25 1.85.145.083.138.206.061.282l.008.008ZM3.721 31.18c0 .091.076.168.168.175 6.48.742 11.057-1.574 13.135-2.85 2.033-1.253 4.83-4.279.795-6.586-4.218-2.415-8.031-2.621-11.286-2.346-.107.007-.206-.061-.214-.168-1.207-9.086-.795-17.239-.71-18.736 0-.115-.108-.191-.207-.153C4.462.852.878 2.15.114 2.434A.177.177 0 0 0 0 2.632C.282 4.138 2.65 16.814 3.713 31.18h.008Zm10.361-6.213c-2.017 1.941-4.378 3.126-4.592 3.24a.167.167 0 0 1-.245-.107c-.091-.42-.458-3.071-.672-5.081-.008-.1.069-.206.191-.191 3.003.542 5.173 1.803 5.25 1.85.145.083.137.205.06.282l.008.007Z"></path><path d="m59.295 4.19 3.17-.39c.1-.014.184.062.192.154L64.697 28a.177.177 0 0 1-.176.191H62.23c-.092 0-.176-.069-.184-.16L59.142 4.389a.167.167 0 0 1 .153-.19V4.19Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="m54.978 16.913 3.545-.436c.1-.015.191.061.199.16l1.543 12.593a.177.177 0 0 1-.145.192l-2.62.32a.153.153 0 0 1-.169-.122l-2.506-12.485a.168.168 0 0 1 .153-.207v-.015ZM65.996 16.723h3.492a.17.17 0 0 1 .168.168v12.715c0 .091-.076.16-.16.16h-2.53a.168.168 0 0 1-.167-.16l-.963-12.708c0-.099.069-.183.168-.183l-.008.008ZM53.839 10.495l1.505-.183c.092-.015.176.053.19.145l.612 4.539a.167.167 0 0 1-.153.19l-1.2.146c-.09.008-.175-.046-.19-.138l-.902-4.523a.162.162 0 0 1 .13-.183l.008.007ZM56.2 10.371l.558 4.554a.16.16 0 0 0 .184.146l1.39-.176c.092-.008.153-.092.145-.184l-.557-4.561a.151.151 0 0 0-.176-.138l-1.398.176c-.092.015-.16.1-.146.191v-.008ZM65.332 10.42l.352 4.6c0 .083.076.144.153.144h1.23c.091 0 .16-.076.16-.16l-.1-4.592a.163.163 0 0 0-.167-.161h-1.475a.16.16 0 0 0-.16.176l.007-.008ZM67.746 10.411l.1 4.577a.17.17 0 0 0 .168.168h1.306a.17.17 0 0 0 .168-.168v-4.585a.161.161 0 0 0-.16-.16h-1.421a.17.17 0 0 0-.168.168h.007Z"></path></g><defs><clipPath id="a"><path fill="#fff" transform="translate(0 .5)" d="M0 0h126.575v31H0z"></path></clipPath></defs>',2),m4=[h4];function p4(e,t){return h(),b("svg",v4,[...m4])}var _4={render:p4};const g4={width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y4=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 20.281A9.281 9.281 0 1 0 11 1.72a9.281 9.281 0 0 0 0 18.562ZM13.269 7.76a.688.688 0 0 1 .972.972l-2.269 2.27 2.269 2.268a.688.688 0 1 1-.972.972L11 11.972l-2.269 2.269a.687.687 0 1 1-.972-.972L10.028 11 7.759 8.731a.688.688 0 0 1 .972-.972l2.27 2.269 2.268-2.269Z",fill:"currentColor"},null,-1),w4=[y4];function b4(e,t){return h(),b("svg",g4,[...w4])}var E4={render:b4};const k4={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C4=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.845 14.7c.293.292.13.572-.152.863-.043.065-.097.119-.14.162-.282.248-.607.399-.868.14l-3.5-3.483a6.938 6.938 0 0 1-4.238 1.445C3.121 13.827 0 10.73 0 6.913 0 3.106 3.11 0 6.947 0c3.826 0 6.947 3.095 6.947 6.913a6.908 6.908 0 0 1-1.528 4.325l3.48 3.462ZM1.636 6.903c0 2.912 2.385 5.274 5.3 5.274 2.916 0 5.3-2.362 5.3-5.274s-2.384-5.274-5.3-5.274c-2.926 0-5.3 2.372-5.3 5.274Z",fill:"currentColor"},null,-1),S4=[C4];function $4(e,t){return h(),b("svg",k4,[...S4])}var x4={render:$4};const A4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},D4=u("path",{d:"M12 4.997c-2.518 0-4.717.128-6.27.254a2.172 2.172 0 0 0-2.01 1.98 53.947 53.947 0 0 0-.22 4.766c0 1.827.106 3.498.22 4.765a2.172 2.172 0 0 0 2.01 1.98c1.553.127 3.752.255 6.27.255a78.59 78.59 0 0 0 6.27-.254 2.172 2.172 0 0 0 2.01-1.98 53.94 53.94 0 0 0 .22-4.766c0-1.829-.106-3.5-.22-4.766a2.172 2.172 0 0 0-2.01-1.98A78.579 78.579 0 0 0 12 4.997zM5.61 3.755A80.076 80.076 0 0 1 12 3.497c2.568 0 4.808.13 6.39.259a3.672 3.672 0 0 1 3.384 3.34c.117 1.3.226 3.017.226 4.9 0 1.885-.11 3.602-.226 4.9a3.672 3.672 0 0 1-3.383 3.342 80.1 80.1 0 0 1-6.391.259 80.07 80.07 0 0 1-6.39-.26 3.672 3.672 0 0 1-3.384-3.34 55.443 55.443 0 0 1-.226-4.9c0-1.883.11-3.6.226-4.9A3.672 3.672 0 0 1 5.61 3.755z",fill:"currentColor"},null,-1),T4=u("path",{d:"M6.5 15.25a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.501h-9.5a.75.75 0 0 1-.75-.75zM15.625 12.187a.938.938 0 1 1 1.875 0 .938.938 0 0 1-1.875 0zM12.58 12.187a.938.938 0 1 1 1.875 0 .938.938 0 0 1-1.875 0zM9.54 12.187a.938.938 0 1 1 1.875 0 .938.938 0 0 1-1.875 0zM6.5 12.187a.938.938 0 1 1 1.875 0 .938.938 0 0 1-1.875 0zM15.625 9.187a.938.938 0 1 1 1.875 0 .938.938 0 0 1-1.875 0zM12.58 9.187a.938.938 0 1 1 1.875 0 .938.938 0 0 1-1.875 0zM9.54 9.187a.938.938 0 1 1 1.875 0 .937.937 0 0 1-1.875 0zM6.5 9.187a.938.938 0 1 1 1.875 0 .937.937 0 0 1-1.875 0z",fill:"currentColor"},null,-1),I4=[D4,T4];function P4(e,t){return h(),b("svg",A4,[...I4])}var F4={render:P4};const R4={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},L4=u("path",{d:"M12 3.5a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17zM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12z",fill:"currentColor"},null,-1),B4=u("path",{d:"M15.536 8.464a.75.75 0 0 1 0 1.06L13.061 12l2.475 2.475a.75.75 0 0 1-1.06 1.061L12 13.06l-2.475 2.476a.75.75 0 1 1-1.061-1.06L10.939 12 8.464 9.524a.75.75 0 0 1 1.06-1.06L12 10.939l2.476-2.475a.75.75 0 0 1 1.06 0z",fill:"currentColor"},null,-1),M4=[L4,B4];function O4(e,t){return h(),b("svg",R4,[...M4])}var ad={render:O4};const N4=ue({components:{IcoClose:ad},props:{visible:{type:Boolean,default:!1},keyword:{type:String,default:""},suggestIndex:{type:Number,default:-1}},emits:["search","searchTrending","searchSuggest","searchHistory","updateSuggest"],setup(e,{emit:t}){const n=D(null),a=D(null),s=D(0),i=D(!1),o=D(!0),c=D([]),r=D([]),l=D({}),f=D("init"),v=D(!1),{searchKeyword:m}=ie(Zi()),{localSpmId:g}=ie(pa()),y=_a(),{isGamepadEnabled:E,isGamepadActive:_,isShowGpSearchPanel:p}=ie(y),C=K(()=>!e.keyword&&c.value.length),S=K(()=>!e.keyword&&f.value==="done"&&l.value&&(l.value.list||[]).length);let x=null;const w=We("searchInput"),k=We("isShowKb"),T=D(!1),A=[[{l:"`",u:"~"},{l:"1",u:"!"},{l:"2",u:"@"},{l:"3",u:"#"},{l:"4",u:"$"},{l:"5",u:"%"},{l:"6",u:"^"},{l:"7",u:"&"},{l:"8",u:"*"},{l:"9",u:"("},{l:"0",u:")"},{l:"-",u:"_"},{l:"=",u:"+"}],[{l:"q",u:"Q"},{l:"w",u:"W"},{l:"e",u:"E"},{l:"r",u:"R"},{l:"t",u:"T"},{l:"y",u:"Y"},{l:"u",u:"U"},{l:"i",u:"I"},{l:"o",u:"O"},{l:"p",u:"P"},{l:"[",u:"{"},{l:"]",u:"}"},{l:"\\",u:"|"}],[{l:"a",u:"A"},{l:"s",u:"S"},{l:"d",u:"D"},{l:"f",u:"F"},{l:"g",u:"G"},{l:"h",u:"H"},{l:"j",u:"J"},{l:"k",u:"K"},{l:"l",u:"L"},{l:";",u:":"},{l:"'",u:'"'},{l:"\u2190",u:"\u2190"}],[{l:"\u21E7",u:"\u21E7"},{l:"z",u:"Z"},{l:"x",u:"X"},{l:"c",u:"C"},{l:"v",u:"V"},{l:"b",u:"B"},{l:"n",u:"N"},{l:"m",u:"M"},{l:",",u:"<"},{l:".",u:">"},{l:"/",u:"?"},{l:"\u21B5",u:"\u21B5"}]];se(v,U=>p.value=U),se([E,k,o,m,c,l,r],()=>{p.value&&_.value&&y.flashSearchCursors(200)},{deep:!0});const F=()=>{var U;k.value=!1,(U=w==null?void 0:w.value)==null||U.focus()},O=()=>{var U;(U=w==null?void 0:w.value)==null||U.focus()},G=({l:U,u:M})=>{var N,Z,Y;U==="\u21E7"?(T.value=!T.value,(N=w==null?void 0:w.value)==null||N.focus()):U==="\u2190"?(m.value=m.value.slice(0,m.value.length-1),(Z=w==null?void 0:w.value)==null||Z.focus()):U==="\u21B5"?t("search"):(m.value=`${m.value}${T.value?M:U}`,(Y=w==null?void 0:w.value)==null||Y.focus())},X=async()=>{c.value=JSON.parse(localStorage.getItem("search_history")||"[]"),setTimeout(()=>{var M,N;s.value=((M=n.value)==null?void 0:M.clientWidth)||0;const U=((N=a.value)==null?void 0:N.clientHeight)||0;i.value=U>80})},H=async()=>{if(f.value!=="loading"){f.value="loading";try{const U=await C0({limit:10});l.value=U.trending,f.value="done"}catch{f.value="error"}}},L=async()=>{var N,Z;const U=(Z=(N=document.querySelector("meta[name=spm_prefix]"))==null?void 0:N.content)!=null?Z:"0",M={highlight:0,term:e.keyword,spmid:U};try{const Y=await S0(M);Y.code===0&&(r.value=Y.result.tag||[],t("updateSuggest",r.value))}catch(Y){console.error(Y)}},Q=U=>{c.value.splice(U,1),localStorage.setItem("search_history",JSON.stringify(c.value)),At(()=>{var N;const M=((N=a.value)==null?void 0:N.clientHeight)||0;i.value=M>80})},q=()=>{c.value=[],i.value=!1,localStorage.setItem("search_history","[]")},j=()=>{o.value=!o.value},B=(U,M,N,Z,...Y)=>{c.value=c.value.filter(oe=>oe.value!==M),c.value.unshift({value:M,timestamp:Date.now()}),At(()=>{var V;const oe=((V=a.value)==null?void 0:V.clientHeight)||0;i.value=oe>80}),t(U,M,N,Z,...Y)};se([()=>e.visible,()=>C.value],([U,M])=>{U&&M&&xe({type:"show",spm_info:"main.search-box.search_window.search_history"},{msg:JSON.stringify({showlist:c.value.map((N,Z)=>({content:N,location:Z+1})),local_spmid:g.value})})}),se([()=>e.visible,()=>i.value,()=>o.value],([U,M,N])=>{U&&M&&(N?xe({type:"show",spm_info:"main.search-box.search_window.search_history_more"},{msg:JSON.stringify({local_spmid:g.value})}):xe({type:"show",spm_info:"main.search-box.search_window.search_history_put_away"},{msg:JSON.stringify({local_spmid:g.value})}))}),se([()=>e.visible,()=>S.value],([U,M])=>{U&&M&&l.value.list.forEach((N,Z)=>{xe({type:"show",spm_info:"main.search-box.search_window.hot_search"},{msg:JSON.stringify({show_content:N.show_name,tag_type:"",search_content:N.keyword,location:Z+1,local_spmid:g.value})})})});let W=null;return se([()=>e.visible,()=>e.keyword,()=>r.value.length],([U,M,N])=>{U&&M&&N?(clearTimeout(W),W=setTimeout(()=>{r.value.forEach((Z,Y)=>{xe({type:"show",spm_info:"main.search-box.search_window.sug"},{msg:JSON.stringify({input_content:e.keyword,search_content:Z.value,location:Y+1,local_spmid:g.value})})})},300)):clearTimeout(W)}),se(()=>e.visible,U=>{if(!U){clearTimeout(x),x=null,v.value=!1;return}E.value&&_.value&&(k.value=!0),x||(x=setTimeout(()=>v.value=!0,200),H())}),se(()=>e.keyword,U=>{U?L():X()},{immediate:!0}),Xe(()=>{const U=()=>{var Z,Y;const M=((Z=n.value)==null?void 0:Z.offsetWidth)||0;if(!e.visible||s.value===M)return;s.value=M;const N=((Y=a.value)==null?void 0:Y.clientHeight)||0;i.value=N>80};window.ResizeObserver&&n.value&&new ResizeObserver(()=>U()).observe(n.value)}),{panelElRef:n,historiesElRef:a,clientWidth:s,foldVisible:i,isFold:o,localSpmId:g,histories:c,suggestions:r,trending:l,loadState:f,isShowPanel:v,isShowHistory:C,isShowTrending:S,isGamepadEnabled:E,isShowKb:k,isKbUp:T,gpkb:A,handleRemoveHistoryRecord:Q,handleClearHistory:q,toggleFold:j,emitSearch:B,trimHttp:K1,handleGpKbClick:G,handleCloseKb:F,handleFocusSearchIpt:O,xssFilter:Af}}}),V4={class:"text_center mt_xs mb_md"},U4=u("span",{class:"gamepad-cursor-search cursor-kbclose","data-tp":"kbSwitch"},null,-1),H4=["onClick"],G4=["data-tp"],j4={class:"kb-space text_center"},K4=le(" \u2014 "),W4=u("span",{class:"gamepad-cursor-search"},null,-1),Z4=[K4,W4],z4={key:0,class:"history"},q4={class:"header"},Y4=u("div",{class:"title"},"\u641C\u7D22\u5386\u53F2",-1),X4=le(" \u6E05\u7A7A "),J4=u("span",{class:"gamepad-cursor-search"},null,-1),Q4=[X4,J4],e8={ref:"historiesElRef",class:"histories"},t8=["onClick","onKeydown"],n8=["textContent"],a8=["onClick"],s8=u("svg",{viewBox:"0 0 1024 1024",width:"14",height:"14"},[u("path",{d:`M512 64.303538c-247.25636 0-447.696462 200.440102-447.696462 447.696462\r
                0 247.254314 200.440102 447.696462 447.696462 447.696462s447.696462-200.440102\r
                447.696462-447.696462S759.25636 64.303538 512 64.303538zM710.491727 665.266709c12.491499\r
                12.491499 12.489452 32.729425-0.002047 45.220924-6.246261 6.246261-14.429641 9.370415-22.611997\r
                9.370415s-16.363689-3.121084-22.60995-9.366322L512 557.222971 358.730221 710.491727\r
                c-6.246261 6.246261-14.429641 9.366322-22.611997 9.366322s-16.365736-3.125177-22.611997-9.370415\r
                c-12.491499-12.491499-12.491499-32.729425 0-45.220924l153.268756-153.266709L313.50725 358.730221\r
                c-12.491499-12.491499-12.489452-32.729425 0.002047-45.220924s32.729425-12.495592 45.220924-0.004093\r
                l153.268756 153.268756 153.268756-153.268756c12.491499-12.491499 32.729425-12.487406 45.220924\r
                0.004093s12.493545 32.729425 0.002047 45.220924L557.225017 512 710.491727 665.266709z`})],-1),i8=[s8],o8=u("span",{class:"gamepad-cursor-search","data-tp":"history"},null,-1),r8=["textContent"],l8=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:`M5.46967 9.17678C5.76256 9.46967 6.23744 9.46967 6.53033 9.17678L10.7286 4.97855\r
              C10.9238 4.78329 10.9238 4.46671 10.7286 4.27145C10.5333 4.07618 10.2167 4.07618 10.0214 4.27145L6 8.29289\r
              L1.97855 4.27145C1.78329 4.07618 1.46671 4.07618 1.27145 4.27145\r
              C1.07618 4.46671 1.07618 4.78329 1.27145 4.97855L5.46967 9.17678Z`},null,-1),u8=[l8],c8=u("span",{class:"gamepad-cursor-search"},null,-1),d8={key:1,class:"trending"},f8=u("div",{class:"header"},[u("div",{class:"title"},"\u70ED\u641C")],-1),v8={key:0,class:"trendings-single"},h8=["onClick","onKeydown"],m8=["textContent"],p8=["textContent"],_8=["src"],g8=u("span",{class:"gamepad-cursor-search","data-tp":"trend"},null,-1),y8={key:1,class:"trendings-double"},w8=["onClick","onKeydown"],b8=["textContent"],E8=["textContent"],k8=["src"],C8=u("span",{class:"gamepad-cursor-search","data-tp":"trend"},null,-1),S8=["onClick","onKeydown"],$8=["textContent"],x8=["textContent"],A8=["src"],D8=u("span",{class:"gamepad-cursor-search","data-tp":"trend"},null,-1),T8={key:2,class:"suggestions"},I8=["onClick"],P8=["innerHTML"],F8=u("span",{class:"gamepad-cursor-search","data-tp":"suggest"},null,-1),R8={key:3,class:"search-nodata p_center"},L8=u("img",{src:Tc,alt:""},null,-1),B8=u("p",{class:"text3 text_center"},"\u6682\u65E0\u63A8\u8350\u8BCD\u6761~",-1),M8=[L8,B8];function O8(e,t,n,a,s,i){const o=Pe("IcoClose"),c=Hn("report");return ke((h(),b("div",{ref:"panelElRef",class:ne(["search-panel",{visible:e.isShowPanel}])},[(h(),J(qa,{to:"body"},[e.isShowKb?(h(),b("div",{key:0,class:"gp-keyboard p_cover",onClick:t[3]||(t[3]=(...r)=>e.handleCloseKb&&e.handleCloseKb(...r))},[u("div",{class:"gp-kbd",onClick:t[2]||(t[2]=Se((...r)=>e.handleFocusSearchIpt&&e.handleFocusSearchIpt(...r),["stop"]))},[u("div",V4,[u("span",{class:"text_white cs_pointer p_relative",onClick:t[0]||(t[0]=Se((...r)=>e.handleCloseKb&&e.handleCloseKb(...r),["stop"]))},[$(o,{class:"ico-gp-close"}),U4])]),(h(!0),b(pe,null,De(e.gpkb,(r,l)=>(h(),b("ul",{key:l,class:ne(["kb-row flex_start",`row${l}`])},[(h(!0),b(pe,null,De(r,f=>(h(),b("li",{class:"kb-key flex_center fw_bold cs_pointer p_relative",key:f.l,onClick:Se(v=>e.handleGpKbClick(f),["stop"])},[le(z(e.isKbUp?f.u:f.l)+" ",1),u("span",{class:"gamepad-cursor-search","data-tp":`row${l}`},null,8,G4)],8,H4))),128))],2))),128)),u("div",j4,[u("span",{class:"p_relative cs_pointer",onClick:t[1]||(t[1]=Se(r=>e.handleGpKbClick({l:" "}),["stop"]))},Z4)])])])):R("",!0)])),e.isShowHistory?(h(),b("div",z4,[u("div",q4,[Y4,ke((h(),b("div",{class:"clear p_relative",onClick:t[4]||(t[4]=(...r)=>e.handleClearHistory&&e.handleClearHistory(...r))},Q4)),[[c,{spm_info:"main.search-box.search_window.search_history_delete_all",msg:{local_spmid:e.localSpmId}},"click"]])]),u("div",{class:"histories-wrap",style:Ge({maxHeight:e.foldVisible&&e.isFold?"92px":"172px"})},[u("div",e8,[(h(!0),b(pe,null,De(e.histories,(r,l)=>(h(),b("div",{key:r.value,class:"history-item",tabindex:"0",onClick:f=>e.emitSearch("searchHistory",r.value,l),onKeydown:fs(f=>e.emitSearch("searchHistory",r.value,l),["enter"])},[u("div",{class:"history-text",textContent:z(r.value)},null,8,n8),ke((h(),b("div",{class:"close",onClick:Se(f=>e.handleRemoveHistoryRecord(l),["stop"])},i8,8,a8)),[[c,{spm_info:"main.search-box.search_window.search_history_delete",msg:{location:l+1,content:r.value,local_spmid:e.localSpmId}},"click"]]),o8],40,t8))),128))],512)],4),e.foldVisible?ke((h(),b("div",{key:0,class:"history-fold-wrap p_relative",onClick:t[5]||(t[5]=(...r)=>e.toggleFold&&e.toggleFold(...r))},[u("div",{class:"fold-text",textContent:z(e.isFold?"\u5C55\u5F00\u66F4\u591A":"\u6536\u8D77")},null,8,r8),(h(),b("svg",{class:ne(["fold-icon",e.isFold?"fold":""]),viewBox:"0 0 12 12"},u8,2)),c8])),[[c,{spm_info:`main.search-box.search_window.${e.isFold?"search_history_more":"search_history_put_away"}`,msg:{local_spmid:e.localSpmId}},"click"]]):R("",!0)])):R("",!0),e.isShowTrending?(h(),b("div",d8,[f8,e.clientWidth<422?(h(),b("div",v8,[(h(!0),b(pe,null,De(e.trending.list||[],(r,l)=>(h(),b("div",{key:r.keyword,class:"trending-item p_relative",tabindex:"0",onClick:f=>e.emitSearch("searchTrending",r.keyword,l,e.trending.trackid),onKeydown:fs(f=>e.emitSearch("searchTrending",r.keyword,l,e.trending.trackid),["enter"])},[u("div",{class:ne(["trendings-rank",l<3?"search-rank-top":""]),textContent:z(l+1)},null,10,m8),u("div",{class:"trending-text",textContent:z(r.show_name)},null,8,p8),r.icon?(h(),b("img",{key:0,class:"trending-mark",src:`${e.trimHttp(r.icon)}@28h`},null,8,_8)):R("",!0),g8],40,h8))),128))])):R("",!0),e.clientWidth>=422?(h(),b("div",y8,[u("div",{class:"trendings-col",style:Ge({maxWidth:`${(e.clientWidth-10)/2}px`})},[(h(!0),b(pe,null,De((e.trending.list||[]).slice(0,5),(r,l)=>(h(),b("div",{key:r.keyword,class:"trending-item p_relative",tabindex:"0",onClick:f=>e.emitSearch("searchTrending",r.keyword,l,e.trending.trackid),onKeydown:fs(f=>e.emitSearch("searchTrending",r.keyword,l,e.trending.trackid),["enter"])},[u("div",{class:ne(["trendings-rank",l<3?"search-rank-top":""]),textContent:z(l+1)},null,10,b8),u("div",{class:"trending-text",textContent:z(r.show_name)},null,8,E8),r.icon?(h(),b("img",{key:0,class:"trending-mark",src:`${e.trimHttp(r.icon)}@28h`},null,8,k8)):R("",!0),C8],40,w8))),128))],4),u("div",{class:"trendings-col",style:Ge({maxWidth:`${(e.clientWidth-10)/2}px`})},[(h(!0),b(pe,null,De((e.trending.list||[]).slice(5,10),(r,l)=>(h(),b("div",{key:r.keyword,class:"trending-item p_relative",tabindex:"0",onClick:f=>e.emitSearch("searchTrending",r.keyword,l+5,e.trending.trackid),onKeydown:fs(f=>e.emitSearch("searchTrending",r.keyword,l+5,e.trending.trackid),["enter"])},[u("div",{class:"trendings-rank",textContent:z(l+6)},null,8,$8),u("div",{class:"trending-text",textContent:z(r.show_name)},null,8,x8),r.icon?(h(),b("img",{key:0,class:"trending-mark",src:`${e.trimHttp(r.icon)}@28h`},null,8,A8)):R("",!0),D8],40,S8))),128))],4)])):R("",!0)])):R("",!0),e.keyword&&e.suggestions.length?(h(),b("div",T8,[(h(!0),b(pe,null,De(e.suggestions,(r,l)=>(h(),b("div",{key:r.value,class:ne([e.suggestIndex===l?"active":"","suggest-item p_relative"]),tabindex:"0",onClick:f=>e.emitSearch("searchSuggest",r.value,l)},[u("div",{innerHTML:e.xssFilter(r.name)},null,8,P8),F8],10,I8))),128))])):R("",!0),e.keyword&&!e.suggestions.length?(h(),b("div",R8,M8)):R("",!0)],2)),[[Fe,e.visible]])}var N8=Je(N4,[["render",O8]]);const V8={class:"header_search--ipt p_relative"},U8={key:0,class:"gamepad-cursor-search","data-tp":"headerSearch"},H8={key:0,class:"gamepad-cursor-search","data-tp":"headerSearch"},G8={key:0,class:"gamepad-cursor-search","data-tp":"headerSearch"},j8=u("span",{class:"gamepad-cursor-search","data-tp":"headerSearch"},null,-1),K8=u("span",{class:"gamepad-cursor","data-tp":"header"},null,-1),W8=ue({__name:"SearchInput",setup(e){let t=null,n=!1;const a=nn(),s=Lt(),i=D(null),o=D(null),c=D([]),r=D(-1),l=D(!1),f=D(!1),v=D(!1),m=D(Ht("window/isFocused")),g=K(()=>l.value||f.value),y=K(()=>E.value?x.value:{}),{isSearchPage:E,isSearchActive:_,isFromHeaderSearch:p,keyword:C,searchKeyword:S,searchReportParams:x}=ie(Zi()),{localSpmId:w}=ie(pa()),k=_a(),{isGamepadEnabled:T,isShowGpSearchPanel:A}=ie(k);mt("searchInput",o),mt("isShowKb",v);const F=M=>{It&&E.value&&zi()},O=()=>{var N;if(n)return;n=!0;const M=S.value.trim();M?(C.value||(C.value=M),setTimeout(()=>{var V;(V=o.value)==null||V.blur(),f.value=!1;const Z=S.value.trim(),oe=JSON.parse(localStorage.getItem("search_history")||"[]").filter(ae=>ae.value!==Z);oe.unshift({value:Z,timestamp:Date.now()}),localStorage.setItem("search_history",JSON.stringify(oe.slice(0,20))),n=!1,de.emit("confirmSearch"),E.value||(p.value=!0,s.push({name:"SearchPage"}))},100)):((N=o.value)==null||N.focus(),n=!1)},G=M=>{l.value=!0,th(M.target),clearTimeout(t)},X=()=>{clearTimeout(t),t=setTimeout(()=>{m.value&&(l.value=!1)},200)},H=()=>{S.value="",o.value.focus(),clearTimeout(t)},L=()=>{v.value=!0,o.value.focus()},Q=()=>{S.value||o.value.focus()},q=()=>{l.value&&(f.value=!0)},j=()=>f.value=!1,B=M=>{c.value=M||[]},W=(M,N,Z,Y)=>{S.value=M;const oe={history:hs.HISTORY_LIST,suggest:hs.SEARCH_LIST,trending:hs.SUGGESTION};xe({type:"click",spm_info:"main.search-box.search.content"},{msg:JSON.stringify({local_spmid:w.value,type:oe[N],location:Z+1,Input_content:S.value,search_content:M,...y==null?void 0:y.value})}),O()},U=M=>{var N,Z;if(["ArrowUp","ArrowDown","Enter"].includes(M.key))return M.key==="ArrowUp"?r.value>-1?r.value--:r.value=c.value.length-1:M.key==="ArrowDown"?r.value<c.value.length-1?r.value++:r.value=-1:M.key==="Enter"&&(r.value>-1&&((N=c.value[r.value])==null?void 0:N.value)&&(S.value=(Z=c.value[r.value])==null?void 0:Z.value),O()),M.preventDefault(),!1};return de.on("search",M=>{S.value=M.trim(),O()}),se([g,c],()=>r.value=-1),se(g,M=>{M&&xe({type:"show",spm_info:"main.search-box.search_window.0"},{msg:JSON.stringify({local_spmid:w.value})})}),oa(()=>{_.value=!!(g.value||S.value||E.value)}),oa(()=>{E.value=a.name==="SearchPage",E.value||(C.value="",S.value="",f.value=!1,l.value=!1)}),Ve("window/focusChange",({data:M})=>{m.value=M,M&&l.value&&o.value.focus()}),se(a,()=>{a.name!=="SearchPage"&&(S.value="",o.value.blur())},{deep:!0}),de.on("searchFocus",()=>{var M;return(M=o.value)==null?void 0:M.focus()}),ht.on("gpBack",()=>{var M;v.value?v.value=!1:(a.name!=="SearchPage"&&(S.value=""),(M=o.value)==null||M.blur(),f.value=!1)}),(M,N)=>{const Z=Hn("report");return h(),b("div",{class:ne(["header_search pe_none",{search_active:d(_)}])},[u("div",{class:ne(["header_search--bg bg_bg1",{no_drag:d(g)}]),onDblclick:F},null,34),u("div",{class:"header_search--input no_drag pe_auto",ref_key:"inputWrapper",ref:i,onKeydown:U,onMouseover:q,onMouseleave:j},[u("div",V8,[ke(u("input",{type:"text",class:ne(["text1",{"search-input-focus":!l.value}]),ref_key:"searchInput",ref:o,placeholder:"\u641C\u7D22\u4F60\u611F\u5174\u8DA3\u7684\u89C6\u9891","onUpdate:modelValue":N[0]||(N[0]=Y=>Ar(S)?S.value=Y:null),onBlur:X,onFocus:G},null,34),[[Ki,d(S)]]),ke(u("span",{class:ne(["search-clear p_center_y",{"clear-gp":d(T)}]),onClick:H},[$(d(E4)),d(A)&&d(S)?(h(),b("span",U8)):R("",!0)],2),[[Fe,d(S)]]),d(_)&&d(T)?(h(),b("span",{key:0,class:"search-kb cs_pointer p_center_y u_select_none",onClick:L},[$(d(F4)),d(A)?(h(),b("span",H8)):R("",!0)])):R("",!0),ke((h(),b("span",{class:"search-icon cs_pointer p_center_y r_md u_select_none",onClick:O},[$(d(x4)),d(A)&&d(S)?(h(),b("span",G8)):R("",!0)])),[[Z,{spm_info:"main.search-box.search.content",msg:{local_spmid:d(w),type:d(hs).DEFAULT,Input_content:d(S),search_content:d(S),...d(y)}},"click"]]),j8,K8]),$(N8,{visible:d(g),keyword:d(S),"suggest-index":r.value,class:"search-panel-popover",onClick:Q,onUpdateSuggest:B,onSearch:O,onSearchHistory:N[1]||(N[1]=(Y,oe)=>W(Y,"history",oe)),onSearchSuggest:N[2]||(N[2]=(Y,oe)=>W(Y,"suggest",oe)),onSearchTrending:N[3]||(N[3]=(Y,oe,V)=>W(Y,"trending",oe))},null,8,["visible","keyword","suggest-index"])],544)],2)}}});const Z8={class:"app_header p_relative"},z8=u("div",{class:"app_header--dragbar draggable p_cover"},null,-1),q8={class:"app_header--left mr_xl mt_1"},Y8=u("div",{class:"app_header--center"},null,-1),X8={class:"app_header--right flex_end flex_inline"},J8=u("span",{class:"gamepad-cursor","data-tp":"header"},null,-1),Q8=u("div",{class:"app_header--right-divider mt_1"},null,-1),e7={class:"app_header--right-btns flex_between no_drag"},t7=u("span",{class:"gamepad-cursor","data-tp":"header"},null,-1),n7=u("span",{class:"gamepad-cursor","data-tp":"header"},null,-1),a7=u("span",{class:"gamepad-cursor","data-tp":"header"},null,-1),s7=ue({__name:"AppHeader",props:{isSelectedPage:Boolean,isGamePage:Boolean},setup(e){const t=nn(),n=K(()=>t.name==="UgcSeason"),a=Dr(),{isMaximized:s}=ie(a),i=()=>{zi(),xe({type:"click",spm_info:"main.main.main-page.maximize"},{msg:JSON.stringify({is_enter:!s.value,is_shortcut:!1,win_name:"main"})})};let o=!1;const c=m=>{It&&!o&&["app_header--wrapper","app_header--left","app_header--left-logo","app_header--center","app_header--right","header_search--bg"].some(g=>{var y,E;return(E=(y=m.target)==null?void 0:y.classList)==null?void 0:E.contains(g)})&&i()};let r=null;const l=m=>{o=!0,clearTimeout(r),r=setTimeout(()=>o=!1,500)},f=async()=>{await Be("window/catchClose"),await Be("window/close")},v=()=>{n.value?gn.emit("miniSelectedPlayer"):Ie.emit("miniSelectedPlayer"),xe({type:"click",spm_info:"main.play-detail.header.mini-enter"},{msg:JSON.stringify({win_name:"main",is_shortcut:!1})})};return(m,g)=>(h(),b("header",Z8,[z8,u("div",{class:ne(["app_header--wrapper flex_between p_relative",{"app_header--selected":e.isSelectedPage}]),onDblclick:c},[u("div",q8,[e.isGamePage?(h(),J(d(_4),{key:0,class:"app_header--left-logo-game"})):(h(),J(d(f4),{key:1,class:"app_header--left-logo"}))]),Y8,u("div",X8,[$(W8,{class:"app_header--right-search",onMousedown:l}),e.isSelectedPage?(h(),b("span",{key:0,title:"\u5C0F\u7A97\u6A21\u5F0F\uFF08S\uFF09",class:"right-mini right-btn-item no_drag p_relative",onClick:v},[$(d(Qf),{class:"window-btn icon-mini mt_1"}),J8])):R("",!0),d(It)?R("",!0):(h(),b(pe,{key:1},[Q8,u("div",e7,[u("span",{class:"right-btn-item p_relative",onClick:g[0]||(g[0]=(...y)=>d(Dl)&&d(Dl)(...y))},[$(d(Ef),{class:"window-btn mt_1"}),t7]),u("span",{class:"right-btn-item p_relative",onClick:i},[d(s)?(h(),J(d(Cf),{key:1,class:"window-btn mt_1"})):(h(),J(d(kf),{key:0,class:"window-btn mt_1"})),n7]),u("span",{class:"right-btn-item p_relative",onClick:f},[$(d(Kt),{class:"window-btn mt_1"}),a7])])],64))])],34)]))}}),i7={key:0,class:"video-list row gutter_md"},sd=ue({__name:"VideosSkeleton",props:{withWrapper:{type:Boolean,default:!0},itemNum:{type:Number,default:36},showAvatar:{type:Boolean,default:!1},showLoadingAnimation:{type:Boolean,default:!0}},setup(e){return(t,n)=>e.withWrapper?(h(),b("div",i7,[(h(!0),b(pe,null,De(e.itemNum,a=>(h(),b("div",{key:a,class:ne([{to_hide_xs:a>23,to_hide_md:a>29,to_hide_xl:a>35},"col_3 col_sm_1_5 mb_x40"])},[$(d($i),{showAvatar:e.showAvatar,"disable-frame":"","disable-scale":"",showLoadingAnimation:e.showLoadingAnimation,skeleton:!0},null,8,["showAvatar","showLoadingAnimation"])],2))),128))])):(h(!0),b(pe,{key:1},De(e.itemNum,a=>(h(),b("div",{key:a,class:"col_3 col_sm_1_5 mb_x40"},[$(d($i),{showAvatar:e.showAvatar,"disable-frame":"","disable-scale":"",showLoadingAnimation:e.showLoadingAnimation,skeleton:!0},null,8,["showAvatar","showLoadingAnimation"])]))),128))}}),o7={class:"app_search i_page_wrapper"},r7={class:"app_search--content i_page_content ov_hidden p_relative"},l7={key:0,class:"i_wrapper"},u7={class:"row gutter_md mt_xxl ov_overlay_y"},c7=["src"],d7=ue({__name:"Search",setup(e){const{initEnterTime:t,reportPv:n,logOpenAppPage:a}=Br({spm_id:"main.search-result.0.0",pageName:"SearchPage",routeName:"SearchPage",isCustom:!0}),s=K(()=>`${location.origin}/search.html`),i=D(null),o=ie(Zi()),{searchKeyword:c,storeKeyword:r,isSearchPage:l,isFromHeaderSearch:f,searchReportParams:v,isSearchFrameLoaded:m,isSearchModalActive:g}=o,y=D(!1),E=_a(),{isGamepadEnabled:_}=ie(E),p=()=>{var O,G;return(G=(O=i.value.contentWindow).handleInitSearch)==null?void 0:G.call(O)},C=()=>{var O,G;return(G=(O=i.value.contentWindow).handleQuitSearch)==null?void 0:G.call(O)},S=()=>{var O,G;return(G=(O=i.value.contentWindow).handleConfirmSearch)==null?void 0:G.call(O)},x=()=>{var O,G;return(G=(O=i.value.contentWindow).handleReloadSearch)==null?void 0:G.call(O)},w=()=>{var O,G;return(G=(O=i.value.contentWindow).handleCloseGameBtnModal)==null?void 0:G.call(O)},k=()=>{var O,G;g.value=!1,(G=(O=i.value.contentWindow).handleHideSearchModal)==null||G.call(O)};window.handleRestoreKeyword=()=>c.value=r.value,window.handleSetSearchParams=O=>v.value=O,window.handleWatchLaterChange=O=>de.emit("watchLaterSync",O),window.handleSearchPageReady=()=>y.value=!0,window.handleJudgeGamepadActive=()=>E.judgeGamepadActive(),window.handleShowSearchModal=O=>g.value=O,se(_,O=>{var G,X,H;return(H=(G=i.value)==null?void 0:(X=G.contentWindow).updateGamepadEnabled)==null?void 0:H.call(X,O)},{immediate:!0}),de.on("watchLaterChange",O=>{var G,X,H;return(H=(G=i.value)==null?void 0:(X=G.contentWindow).handleWatchLaterChange)==null?void 0:H.call(X,O)});let T=null;const A=O=>{i.value.contentWindow.updateSearchParams({searchKeyword:O}),y.value||(y.value=!0,p(),S())},F=O=>{var G,X;clearTimeout(T),(X=(G=i.value)==null?void 0:G.contentWindow)!=null&&X.isSearchReady?A(O):T=setTimeout(()=>F(O),200)};return se(c,O=>{O&&(r.value=c.value),F(O)},{immediate:!0}),se(l,O=>{O?(t(),a(),f.value?(f.value=!1,p()):(c.value=r.value,setTimeout(()=>x()))):(w(),clearTimeout(T),n())}),Ve("window/focusChange",({data:O})=>{l.value&&(O?t():n())}),Xe(()=>{de.on("initSearch",p),de.on("quitSearch",C),de.on("confirmSearch",S),Ho.on("hideSearchModal",k),i.value.contentDocument.addEventListener("ready",()=>m.value=!0)}),qe(()=>{de.off("initSearch",p),de.off("quitSearch",C),de.off("confirmSearch",S),Ho.off("hideSearchModal",k)}),(O,G)=>(h(),b("div",o7,[u("div",r7,[y.value?R("",!0):(h(),b("div",l7,[u("div",u7,[$(sd,{"with-wrapper":!1,"item-num":20})])])),ke(u("iframe",{id:"appSearchFrame",ref_key:"searchFrame",ref:i,class:"w_100 h_100",src:d(s),frameborder:"0"},null,8,c7),[[Fe,y.value]])])]))}});const f7={class:"game-center-webview"},v7={key:0,class:"game-center-skeleton p_cover z_index_1 bg_bg1"},h7=u("div",{class:"gc-header bili-skeleton"},null,-1),m7={class:"gc-wrapper"},p7={class:"gc-content mg_0_auto"},_7=u("div",{class:"gc-title bili-skeleton"},null,-1),g7={class:"gc-grid"},y7=u("div",{class:"gc-grid-img bili-skeleton"},null,-1),w7=u("div",{class:"gc-grid-t bili-skeleton mt_sm"},null,-1),b7=u("div",{class:"gc-grid-txt bili-skeleton mt_sm"},null,-1),E7=[y7,w7,b7],k7={key:1,class:"p_cover z_index_1 bg_bg1"},C7=["src","preload"],S7=ue({__name:"GameCenterIframe",setup(e){const{kvSDK:t}=ie(Tr()),n=D("https://game.bilibili.com/platform/home-v2?bilipc=1&source_from=2700840011&sourcefrom=2700840011");let a=localStorage.getItem("game_center_url")||"";a&&(n.value=a);const s=K(()=>{const A=n.value;return A.includes("bilipc=1")?A:A.includes("?")?A.replace(/\?/,"?bilipc=1&"):`${A}?bilipc=1`}),i=D(null),o=D(Math.random()),c=D(!1),r=D(!1),l=D(!1),f=nn();let v=null,m=null,g=!1,y=null;const E=window;(async()=>{if(a)return;const A=await t.value.get("app.game_center_url");A&&A!=n.value&&(n.value=A,o.value=Math.random())})();const p=()=>{r.value=!1,l.value=!1,clearTimeout(v)};E.handleGameCenterReady=p;const C=()=>{r.value=!1,l.value=!0,c.value=!1,clearTimeout(v)},{pageScrollTops:S}=ie(pa());S.value.GameCenter=0;const x=A=>{S.value.GameCenter=A};E.handleGameCenterScroll=x;const w=A=>{var F;A==="GameCenter"&&((F=i.value)==null||F.executeJavaScript("window.handleScrollToTop?.()"))};de.on("scrollToTop",w);const k=()=>{var A;(A=i.value)==null||A.executeJavaScript(`window.gameEntryInfo = ${JSON.stringify(E.gameEntryInfo)}`)};de.on("gameEntryInfoUpdated",k),se(i,A=>{E.gameCenterWebview=A,A&&(A.addEventListener("load-commit",()=>{k()}),A.addEventListener("ipc-message",F=>{var O;F.channel==="gameCenterReady"?p():F.channel==="gameCenterScroll"?x(F.args[0]):F.channel==="toggleWinMaximize"&&((O=E.toggleWinMaximize)==null||O.call(E))}))},{immediate:!0}),se(c,A=>{A||(S.value.GameCenter=0)});const T=()=>{clearTimeout(v);let A=0;v=setInterval(async()=>{const F=document.getElementById("game-center-webview");try{if(await F.executeJavaScript("window.inBiliPcClient")){y=setTimeout(()=>p(),800);return}}finally{}A++,A>=120&&C()},50)};return Fr("GameCenter",()=>{r.value||(r.value=!0,l.value=!1,c.value=!1,setTimeout(()=>{c.value=!0,T()},100))}),se(()=>f.name,A=>{var F;if(A==="GameCenter")clearTimeout(m),g=!0,c.value||(r.value=!0,l.value=!1,T()),c.value=!0;else if(g){if(g=!1,(F=i.value)==null||F.executeJavaScript("window.handleCloseGameBtnModal?.()"),r.value){c.value=!1,clearTimeout(v),clearTimeout(y);return}clearTimeout(m),m=setTimeout(()=>{c.value=!1},3e5)}},{immediate:!0}),qe(()=>{clearTimeout(v),clearTimeout(m),clearTimeout(y),de.off("scrollToTop",w),de.off("gameEntryInfoUpdated",k)}),(A,F)=>(h(),b("div",f7,[r.value?(h(),b("div",v7,[h7,u("div",m7,[u("div",p7,[_7,u("div",g7,[(h(),b(pe,null,De(30,O=>u("div",{class:"gc-grid-item",key:O},E7)),64))])])])])):R("",!0),!r.value&&l.value?(h(),b("div",k7,[$(Zn,{class:"mt_xxl"})])):R("",!0),c.value?(h(),b("webview",{class:"p_cover",id:"game-center-webview",ref_key:"gameCenterWebviewRef",ref:i,src:d(s),key:o.value,preload:d(ic),allowpopups:""},null,8,C7)):R("",!0)]))}});const $7={class:"my-game-iframe"},x7={key:0,class:"my-game-skeleton i_wrapper p_cover z_index_1 bg_bg1"},A7={class:"mg-header flex_start mt_xxl"},D7=u("div",{class:"mg-title bili-skeleton"},null,-1),T7={class:"mg-content"},I7=u("div",{class:"mg-item-left bili-skeleton"},null,-1),P7=u("div",{class:"mg-item-right"},[u("div",{class:"mg-t bili-skeleton mt_md"}),u("div",{class:"mg-txt bili-skeleton mt_md"})],-1),F7=[I7,P7],R7={key:1,class:"p_cover z_index_1 bg_bg1"},L7=["src"],B7=ue({__name:"MyGameIframe",setup(e){const{kvSDK:t}=ie(Tr()),n=D("https://game.bilibili.com/platform/home-v2?bilipc=1&tab=1#/mine");let a=localStorage.getItem("my_game_url")||"";a&&(n.value=a);const s=K(()=>{const x=n.value;return x.includes("bilipc=1")?x:x.includes("?")?x.replace(/\?/,"?bilipc=1&"):`${x}?bilipc=1`}),i=D(Math.random()),o=D(!1),c=D(!1),r=D(!1),l=nn();let f=null,v=null,m=!1,g=null;(async()=>{if(a)return;const x=await t.value.get("app.my_game_url");x&&x!=n.value&&(n.value=x,i.value=Math.random())})();const{pageScrollTops:E}=ie(pa());E.value.MyGame=0;const _=x=>{E.value.MyGame=x};window.handleMyGameScroll=_,de.on("scrollToTop",x=>{var w,k;if(x==="MyGame"){const T=document.getElementById("my-game-iframe");(k=(w=T==null?void 0:T.contentWindow)==null?void 0:w.handleScrollToTop)==null||k.call(w)}}),de.on("toMyGameDownloadsTab",()=>{var w,k;const x=document.getElementById("my-game-iframe");(k=(w=x==null?void 0:x.contentWindow)==null?void 0:w.handleToDownloadsTab)==null||k.call(w)}),se(o,x=>{x||(E.value.MyGame=0)});const p=()=>{clearTimeout(f);let x=0;f=setInterval(()=>{const w=document.getElementById("my-game-iframe");if(w!=null&&w.contentWindow.inBiliPcClient){g=setTimeout(()=>C(),1e3);return}x++,x>=120&&S()},50)},C=()=>{c.value=!1,r.value=!1,clearTimeout(f)};window.handleMyGameReady=C;const S=()=>{c.value=!1,r.value=!0,o.value=!1,clearTimeout(f)};return Fr("MyGame",()=>{c.value||(c.value=!0,r.value=!1,o.value=!1,setTimeout(()=>{o.value=!0,p()},100))}),se(()=>l.name,x=>{var w,k;if(x==="MyGame")clearTimeout(v),m=!0,o.value||(c.value=!0,r.value=!1,p()),o.value=!0;else if(m){m=!1;const T=document.getElementById("my-game-iframe");if((k=(w=T==null?void 0:T.contentWindow)==null?void 0:w.handleCloseGameBtnModal)==null||k.call(w),c.value){o.value=!1,clearTimeout(f),clearTimeout(g);return}clearTimeout(v),v=setTimeout(()=>{o.value=!1},3e5)}},{immediate:!0}),(x,w)=>(h(),b("div",$7,[c.value?(h(),b("div",x7,[u("div",A7,[(h(),b(pe,null,De(3,k=>u("div",{key:k,class:"bili-skeleton"})),64))]),D7,u("div",T7,[(h(),b(pe,null,De(20,k=>u("div",{class:"mg-item flex_start items_start",key:k},F7)),64))])])):R("",!0),!c.value&&r.value?(h(),b("div",R7,[$(Zn,{class:"mt_xxl"})])):R("",!0),o.value?(h(),b("iframe",{class:"p_cover",id:"my-game-iframe",src:d(s),key:i.value,frameborder:"0"},null,8,L7)):R("",!0)]))}}),M7={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},O7=u("path",{d:"M11.823 8.948a.25.25 0 0 0 .354 0L4.81 16.314a1.5 1.5 0 1 1-2.122-2.121l7.366-7.367a2.75 2.75 0 0 1 3.89 0l7.366 7.367a1.5 1.5 0 0 1-2.122 2.12l-7.366-7.365z",fill:"currentColor"},null,-1),N7=[O7];function V7(e,t){return h(),b("svg",M7,[...N7])}var U7={render:V7};const H7={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},G7=u("path",{d:"M11.823 15.055a.25.25 0 0 1 .354 0L4.81 7.69A1.5 1.5 0 0 0 2.689 9.81l7.366 7.366a2.75 2.75 0 0 0 3.89 0L21.31 9.81a1.5 1.5 0 0 0-2.122-2.121l-7.366 7.366z",fill:"currentColor"},null,-1),j7=[G7];function K7(e,t){return h(),b("svg",H7,[...j7])}var W7={render:K7};const Z7={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},z7=u("path",{d:"M11.998 2.75a1.5 1.5 0 0 1 1.5 1.5v6.25h6.252a1.5 1.5 0 1 1 0 3h-6.252v6.25a1.5 1.5 0 0 1-3 0V13.5H4.25a1.5 1.5 0 1 1 0-3h6.248V4.25a1.5 1.5 0 0 1 1.5-1.5z",fill:"currentColor"},null,-1),q7=[z7];function Y7(e,t){return h(),b("svg",Z7,[...q7])}var X7={render:Y7};const Qi=e=>(xn("data-v-0d803fd6"),e=e(),An(),e),J7={class:"avatar-image"},Q7=Qi(()=>u("div",{class:"a-cycle a-cycle-1"},null,-1)),e9=Qi(()=>u("div",{class:"a-cycle a-cycle-2"},null,-1)),t9=Qi(()=>u("div",{class:"a-cycle a-cycle-3"},null,-1)),n9={key:0,class:"live-tab p_center_x text_white bg_brand_pink bd_radius_md fs_6 flex_center text_nowrap"},a9=Qi(()=>u("img",{class:"live-gif w_md mr_xs",src:$0,alt:"live"},null,-1)),s9=le(" \u76F4\u64AD\u4E2D "),i9=[a9,s9],o9=ue({__name:"UserAvatar",props:{isShowLive:Boolean,isSmall:Boolean,isMini:Boolean,isShowLiveAni:Boolean,isOnLine:Boolean,info:{type:Object,default:()=>({})}},setup(e){const t=e,n=K(()=>t.isShowLive&&(t.info.is_live||!!t.isOnLine)),a=K(()=>{var o,c;if(!n.value){if(((o=t.info.official_verify)==null?void 0:o.type)===1)return"business";if(((c=t.info.official_verify)==null?void 0:c.type)===0)return"personal"}}),s=new Df({}),i=D(null);return se(()=>t.info,async()=>{(t.info.upic||t.info.face)&&(await At(),s.resetConfig(i.value,{avatar:t.info.upic||t.info.face,avatarWidth:86,renderWidth:86,isNFT:!!t.info.face_nft,isCenterScale:!0,iconType:a.value}))}),Xe(()=>{s.append({avatar:t.info.upic||t.info.face,avatarWidth:86,renderWidth:86,isNFT:!!t.info.face_nft,isCenterScale:!0,iconType:a.value},i.value,"avatar")}),(o,c)=>(h(),b("div",{class:ne(["search-user-avatar p_relative",{"avatar-small":e.isSmall,"avatar-mini":e.isMini}])},[u("div",{class:ne(["avatar-wrap p_relative",{"live-ani":d(n)&&e.isShowLiveAni}])},[u("div",J7,[u("div",{class:"avatar-inner",ref_key:"avatarRef",ref:i},null,512)]),d(n)&&e.isShowLiveAni?(h(),b(pe,{key:0},[Q7,e9,t9],64)):R("",!0)],2),d(n)?(h(),b("div",n9,i9)):R("",!0)],2))}});var Ot=Je(o9,[["__scopeId","data-v-0d803fd6"]]);const r9={class:"selected-staff-item flex_col"},l9={class:"staff-avatar p_relative"},u9={key:0,class:"up-bedge p_absolute t_0 r_nsm text_nowrap brand_pink"},c9=["title"],Co=ue({__name:"StaffItem",props:{staff:{type:Object,default:()=>({})},relations:{type:Object,default:()=>({})}},emits:["openUser","followUser"],setup(e,{emit:t}){const{userInfo:n}=ie(st());return(a,s)=>(h(),b("div",r9,[u("div",l9,[$(Ot,{class:"cs_pointer","is-mini":"",info:e.staff,onClick:s[0]||(s[0]=i=>t("openUser"))},null,8,["info"]),e.staff.title?(h(),b("span",u9,z(e.staff.title),1)):R("",!0),e.relations[e.staff.mid]&&!e.relations[e.staff.mid].followed||!d(n).isLogin?(h(),b("span",{key:1,class:"up-add p_absolute r_n2 b_n2 cs_pointer",onClick:s[1]||(s[1]=i=>t("followUser"))}," + ")):R("",!0)]),u("p",{class:"staff-name fs_6 text_center text_ellipsis px_xs mt_xs hover_pink ts_all_fast cs_pointer",title:e.staff.name,onClick:s[2]||(s[2]=i=>t("openUser"))},z(e.staff.name),9,c9)]))}});const d9={class:"selected-staff-group"},f9={class:"group-avatars mg_0_auto"},v9={key:0,class:"cops-three cs_pointer flex_start"},h9={key:1,class:"cops-four cs_pointer flex_col"},m9={class:"flex_start mt_nlg"},p9={key:2,class:"cops-more cs_pointer flex_col"},_9={class:"flex_start"},g9={class:"flex_start mt_nlg"},y9={class:"group-num mt_xs fs_6"},w9=ue({__name:"StaffGroup",props:{staffList:{type:Array,default:()=>[]},isShowAllStaff:Boolean},setup(e){const t=e,n=K(()=>t.staffList[1]||{}),a=K(()=>t.staffList[2]||{}),s=K(()=>t.staffList[3]||{}),i=K(()=>t.staffList[4]||{});return(o,c)=>{const r=Pe("WidgetArrow");return h(),b("div",d9,[u("div",f9,[e.staffList.length===3?(h(),b("div",v9,[$(Ot,{class:"z_index_1","is-mini":"",info:d(n)},null,8,["info"]),$(Ot,{class:"ml_nlg","is-mini":"",info:d(a)},null,8,["info"])])):R("",!0),e.staffList.length===4?(h(),b("div",h9,[$(Ot,{class:"cops1","is-mini":"",info:d(n)},null,8,["info"]),u("div",m9,[$(Ot,{class:"cops2","is-mini":"",info:d(a)},null,8,["info"]),$(Ot,{class:"cops3 ml_nlg","is-mini":"",info:d(s)},null,8,["info"])])])):R("",!0),e.staffList.length>4?(h(),b("div",p9,[u("div",_9,[$(Ot,{class:"cops1","is-mini":"",info:d(n)},null,8,["info"]),$(Ot,{class:"cops2 ml_nlg","is-mini":"",info:d(a)},null,8,["info"])]),u("div",g9,[$(Ot,{class:"cops3","is-mini":"",info:d(s)},null,8,["info"]),$(Ot,{class:"cops4 ml_nlg","is-mini":"",info:d(i)},null,8,["info"])])])):R("",!0)]),u("p",y9,[le(" \u7B49"+z(e.staffList.length)+"\u4EBA\u8054\u5408\u521B\u4F5C ",1),$(r,{class:ne(["i_icon_more ts_all_fast rotate_90 mt_0",{rotate_n90:e.isShowAllStaff}])},null,8,["class"])])])}}});const b9={class:"selected-video-desc"},E9={class:"desc-video mb_sm lh_xs flex_start"},k9={key:0,class:"desc-vd-item"},C9={key:1,class:"desc-vd-item"},S9={class:"desc-vd-item"},$9={class:"pudate item ml_lg"},x9={class:"desc-info desc-v2 text_break"},A9=["textContent","onClick"],D9=["innerHTML"],T9=ue({__name:"VideoDesc",props:{formats:{type:Object,default:()=>({})}},emits:["openUser"],setup(e,{emit:t}){return(n,a)=>(h(),b("div",b9,[u("div",E9,[e.formats.enableVt?(h(),b("span",k9,[$(d(vc)),le(" "+z(e.formats.vtDisplay||e.formats.vt),1)])):(h(),b("span",C9,[$(d(e0)),le(" "+z(e.formats.view),1)])),u("span",S9,[$(d(t0)),le(" "+z(e.formats.danmaku),1)]),u("span",$9,z(e.formats.pubdate),1)]),u("div",x9,[(h(!0),b(pe,null,De(e.formats.descMoreV2Array,s=>(h(),b(pe,{key:s.biz_id},[s.type===2?(h(),b("span",{key:0,class:"desc-info--user",textContent:z("@"+s.raw_text),onClick:i=>t("openUser",s.biz_id)},null,8,A9)):(h(),b("span",{key:1,class:"desc-info--text",innerHTML:d(W1)(d(Z1)(s.raw_text).replaceAll(/\n/gi,"<br/>"),"333.788.video.desc.click")},null,8,D9))],64))),128))])]))}}),I9={width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P9=u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M21.21 9.822c0 4.99-4.572 9.036-10.214 9.036-.323 0-.643-.014-.959-.04-.508.386-1.396 1.02-2.362 1.527-.396.208-.797.402-1.174.575-.869.4-1.808-.302-1.747-1.256l.054-.916c.041-.779.022-1.355-.008-1.743C2.358 15.355.782 12.751.782 9.822c0-4.99 4.573-9.036 10.214-9.036 5.642 0 10.215 4.046 10.215 9.036Zm-14.14 0a1.179 1.179 0 1 1-2.357 0 1.179 1.179 0 0 1 2.357 0Zm10.213 0a1.179 1.179 0 1 1-2.357 0 1.179 1.179 0 0 1 2.357 0Zm-6.285 1.179a1.179 1.179 0 1 0 0-2.357 1.179 1.179 0 0 0 0 2.357Z",fill:"#fff"},null,-1),F9=[P9];function R9(e,t){return h(),b("svg",I9,[...F9])}var L9={render:R9};const B9={ref:"toolbarWrap",class:"app_toolbar"},M9={class:"toolbar-item"},O9={class:"info-text"},N9=u("span",{class:"toolbar-item-title"},"\u70B9\u8D5E\uFF08Q\uFF09",-1),V9={class:"toolbar-item"},U9={class:"info-text"},H9=u("span",{class:"toolbar-item-title"},"\u6295\u5E01\uFF08W\uFF09",-1),G9={class:"toolbar-item"},j9={class:"info-text"},K9=u("span",{class:"toolbar-item-title"},"\u6536\u85CF\uFF08E\uFF09",-1),W9={class:"toolbar-item"},Z9={class:"info-text"},z9=u("span",{class:"toolbar-item-title"},"\u5206\u4EAB\uFF08V\uFF09",-1),q9={class:"toolbar-item"},Y9={class:"info-text"},X9=u("span",{class:"toolbar-item-title"},"\u8BC4\u8BBA\uFF08C\uFF09",-1),J9=ue({__name:"VideoToolBar",props:{from:String,info:{type:Object,default:()=>({})},formats:{type:Object,default:()=>({})},tripleData:{type:Object,default:()=>({})}},setup(e){const t=e,n=t.from==="UgcSeason"?gn:Ie,a=t.from==="UgcSeason"?qi():ga(),s=K(()=>t.info.cid),{aid:i,cid:o,hasCoined:c,faved:r,liked:l,shareNum:f,likeNum:v,coinNum:m,faveNum:g,replyNum:y,likeIo:E,likeAnim:_,coinAnim:p,favAnim:C,showLikeCombo:S,showCoinCombo:x,showFavCombo:w}=ie(a),{userInfo:k}=ie(st()),T="./assets/lib/svga/fire.svga",A="./assets/lib/svga/like_heart.svga",F="./assets/lib/svga/like_thumb.svga",O=D(!1),G=D(!1),X=D(!1),H=()=>{if(_.value)return _.value=""},L=()=>{_.value="",S.value=!1},Q=()=>{p.value="",x.value=!1},q=()=>{C.value="",w.value=!1},j=V=>{O.value||a.setLike(i.value,V)},B=()=>{a.setFav("collection")},W=V=>{a.setCoin("coinOperated",V)},U=()=>{if(!k.value.isLogin){jt("toolBar.startCombo");return}O.value||l.value&&r.value&&c.value||(H(),_.value="shake",O.value=!0,G.value=!0)},M=()=>{_.value==="shake"&&(X.value=!1,_.value=""),a.setTriple(i.value)},N=()=>{setTimeout(()=>{O.value=!1},500),_.value==="shake"&&(_.value="",X.value=!1),G.value=!1},Z=()=>{n.emit("showActionDialog","dialogShare"),xe({type:"click",spm_info:"main.play-detail.tools.share"},{msg:JSON.stringify({win_name:"main"})})};de.on("playerTriple",V=>{const{type:ae,action:_e}=V;if(ae==="ugc")switch(_e){case"start":U();break;case"cancel":N();break}});const Y=We("updateVideoData");se(v,()=>{o.value===s.value&&(Y==null||Y(o.value,"like",v.value))}),se(m,()=>{o.value===s.value&&(Y==null||Y(o.value,"coin",m.value))}),se(g,()=>{o.value===s.value&&(Y==null||Y(o.value,"favorite",g.value))}),se(f,()=>{o.value===s.value&&(Y==null||Y(o.value,"share",f.value))}),se(y,()=>{o.value===s.value&&(Y==null||Y(o.value,"reply",y.value))});const oe=We("updateTripleData");return se(l,()=>{o.value===s.value&&(oe==null||oe(o.value,"liked",l.value))}),se(r,()=>{o.value===s.value&&(oe==null||oe(o.value,"faved",r.value))}),se(c,()=>{o.value===s.value&&(oe==null||oe(o.value,"hasCoined",c.value))}),(V,ae)=>{const _e=Hn("longClick"),we=Hn("longClickLeave");return h(),b("div",B9,[u("div",M9,[ke((h(),b("div",{ref:"like",class:ne(["toolbar-item-icon like",{on:e.tripleData.liked,liking:d(E)}]),onClick:ae[2]||(ae[2]=fe=>j(fe))},[d(S)||d(_)==="base"?(h(),J(os,{key:0,class:"svga-center",onFinish:L,file:T})):R("",!0),d(_)==="heart"?(h(),J(os,{key:1,class:"svga-top",onFinish:ae[0]||(ae[0]=fe=>_.value=""),file:A})):R("",!0),d(_)==="thumb"?(h(),J(os,{key:2,class:"svga-top",onFinish:ae[1]||(ae[1]=fe=>_.value=""),file:F})):R("",!0),$(d(Sc),{class:ne(["icon",{shake:d(_)==="shake"}])},null,8,["class"]),u("span",O9,z(e.formats.like),1)],2)),[[_e,U,"800"],[we,N]]),N9]),u("div",V9,[u("div",{ref:"coin",class:ne(["toolbar-item-icon coin",{on:e.tripleData.hasCoined}]),onClick:ae[4]||(ae[4]=fe=>W(fe))},[$(Nl,{ref:"progessCoin",size:34,left:8,top:6,start:G.value,onAnimFinish:M},null,8,["start"]),d(x)?(h(),J(os,{key:0,class:"svga-center",file:T,onStart:ae[3]||(ae[3]=fe=>p.value="combo"),onFinish:Q})):R("",!0),$(d(n0),{class:"icon"}),u("span",U9,z(e.formats.coin),1)],2),H9]),u("div",G9,[u("div",{ref:"collect",class:ne(["toolbar-item-icon collect",{on:e.tripleData.faved}]),onClick:ae[7]||(ae[7]=fe=>B())},[$(Nl,{ref:"progessShare",size:34,left:8,top:6,start:G.value,onFinish:ae[5]||(ae[5]=()=>{})},null,8,["start"]),d(w)?(h(),J(os,{key:0,class:"svga-center",file:T,onStart:ae[6]||(ae[6]=fe=>C.value="combo"),onFinish:q})):R("",!0),$(d(a0),{class:"icon"}),u("span",j9,z(e.formats.favorite),1)],2),K9]),u("div",W9,[e.formats.noShare?R("",!0):(h(),b("div",{key:0,class:"toolbar-item-icon share",onClick:ae[8]||(ae[8]=fe=>Z())},[$(d(s0),{class:"icon"}),u("span",Z9,z(e.formats.share||"\u5206\u4EAB"),1)])),z9]),u("div",q9,[u("div",{class:"toolbar-item-icon comment",onClick:ae[9]||(ae[9]=fe=>d(n).emit("toggleComment",!0))},[$(d(L9),{class:"icon"}),u("span",Y9,z(e.formats.reply||"\u8BC4\u8BBA"),1)]),X9])],512)}}});const Q9={class:"selected_video pd_md pb_sm pr_sm flex_start pe_none p_relative"},ew=u("div",{class:"selected_video--bg pe_none p_cover z_index_0"},null,-1),tw={class:"video-info-wrapper pe_none p_relative z_index_1 flex_between items_end w_100"},nw={class:"video-basic pe_auto"},aw={class:"up-wrapper"},sw={key:0,class:"up-info"},iw={key:0,class:"flex_start"},ow={class:"up-details"},rw={class:"flex_start fs_4"},lw={key:0,class:"up-follow"},uw=le(" \u5173\u6CE8 "),cw=le(" \u5DF2\u5173\u6CE8 "),dw=le(" \u5DF2\u5173\u6CE8 "),fw={class:"dropdown_select--content cs_pointer"},vw={class:"mt_xs"},hw={key:1,class:"up-staff p_relative"},mw=u("h4",{class:"mb_sm fs_4"},"\u521B\u4F5C\u56E2\u961F",-1),pw={class:"staff-ups flex_start u_select_none"},_w={class:"up-cops"},gw={class:"video-wrapper mt_sm u_select_none"},yw={class:"video-tt fw_bold text_ellipsis_2l fs_3 mr_2 mb_xs"},ww={class:"ov_hidden pb_xs"},bw={key:0,class:"video-collect"},Ew={class:"collect-title lh_sm"},kw={class:"collect-index lh_sm"},Cw={class:"video-actions mb_xs pe_auto"},Sw=ue({__name:"SelectedVideoInfo",props:{from:String,info:{type:Object,default:()=>({})},video:{type:Object,default:()=>({})},tripleData:{type:Object,default:()=>({})},relations:{type:Object,default:()=>({})},isActive:Boolean,isShowComment:Boolean},emits:["updateRelations"],setup(e,{emit:t}){const n=e,a=n.from==="UgcSeason"?gn:Ie,s=D(!1),i=D(!1),o=D(null),c=D(null),r=K(()=>n.video.View||{}),l=K(()=>r.value.staff||[]),f=K(()=>l.value[0]||{}),v=K(()=>l.value[1]||{}),m=K(()=>n.video.Card||{}),g=K(()=>{var M,N,Z;return{face:(M=n.info.owner)==null?void 0:M.face,official_verify:(N=m.value.card)==null?void 0:N.official_verify,fans:$t(((Z=m.value.card)==null?void 0:Z.fans)||0),likes:$t(m.value.like_num||0)}}),y=D(!0),E=K(()=>r.value.pages||[]),_=K(()=>{const M=E.value.findIndex(N=>N.cid===n.info.cid);return M>-1?M+1:1}),p=K(()=>r.value.ugc_season||{}),C=K(()=>{var N;const M=[];return(N=p.value.sections)==null||N.forEach(Z=>{Z.episodes.forEach(Y=>{var oe;((oe=Y.pages)==null?void 0:oe.length)>1?M.push(...Y.pages):M.push(Y)})}),M}),S=K(()=>{const M=C.value.findIndex(N=>n.info.cid===N.cid);return M>-1?M+1:1}),x=K(()=>{const M=E.value.length>1||p.value.ep_count>0;let N="",Z="";return p.value.ep_count>0?(N=`\u5408\u96C6 \xB7 ${p.value.title}`,Z=`${S.value}/${C.value.length}`):E.value.length>1&&(N="\u89C6\u9891\u9009\u96C6",Z=`${_.value}/${E.value.length}`),{isShow:M,title:N,index:Z}}),{userInfo:w}=ie(st()),{reportSlideDetails:k,reportAvatarClick:T,reportFollow:A,activeItem:F}=an(),{spmid:O}=Or(),G=K(()=>{const{desc_v2:M,pubdate:N,stat:Z,rights:Y,title:oe,desc:V,enable_vt:ae,vt_display:_e,subtitle:we}=r.value;let fe=[];const Ue=M;if(Ue!=null&&Ue.length)for(const ve of Ue)fe.push(ve);else fe.push({raw_text:V,type:1});let ge=(we==null?void 0:we.list)||[];return{descMoreV2Array:fe,subtitle:ge.filter(ve=>ve.author.name),title:oe,pubdate:isNaN(Number(N))?N:Tf("YYYY-MM-DD",N*1e3),view:$t(Z==null?void 0:Z.view),danmaku:$t(Z==null?void 0:Z.danmaku),isInteractive:Y==null?void 0:Y.is_stein_gate,reprint:Y==null?void 0:Y.no_reprint,argue_msg:Z==null?void 0:Z.argue_msg,vt:$t(Z==null?void 0:Z.vt),enableVt:ae,vtDisplay:_e,like:String(Z==null?void 0:Z.like)==="--"?Z.like:$t(Z.like||0),coin:String(Z==null?void 0:Z.coin)==="--"?Z.coin:$t(Z.coin||0),favorite:String(Z==null?void 0:Z.favorite)==="--"?Z.favorite:$t(Z.favorite||0),share:String(Z==null?void 0:Z.share)==="--"?Z.share:$t(Z.share||0),reply:String(Z==null?void 0:Z.reply)==="--"?Z.reply:$t(Z.reply||0),isSteinGate:(Y==null?void 0:Y.is_stein_gate)===1,noShare:(Y==null?void 0:Y.no_share)===1,needBuy:Y==null?void 0:Y.arc_pay}});let X=!1;const H=async(M,N=!1)=>{if(!w.value.isLogin){Be("auth/requestLogin");return}if(!X){X=!0;try{await en.followChange({fid:M,act:1,re_src:N?229:1}),X=!1,y.value=!1,t("updateRelations",M,!0),A({up_mid:M,re_src:N?229:1})}catch{X=!1,ye({content:"\u5173\u6CE8\u5931\u8D25"})}}};let L=!1;const Q=async()=>{var N;if(L)return;L=!0;const M=n.info.owner.mid;try{await en.followChange({fid:M,act:((N=n.relations[M])==null?void 0:N.attribute)===1?4:2,re_src:14}),t("updateRelations",M,!1),L=!1}catch(Z){console.error(Z),L=!1,ye({content:"\u53D6\u6D88\u5173\u6CE8\u5931\u8D25"})}},q=M=>{!M||(document.fullscreenElement&&document.exitFullscreen(),T({up_mid:M}),Be("window/openMainWindowPage",{page:"SpacePage",meta:{mid:M,fromOuterSpmId:O.value}}))};se(s,M=>k(M));const{rightPanelTab:j,isShowComment:B}=ie(Ms()),W=()=>{n.from==="UgcSeason"&&j.value!=="1"?(j.value="1",B.value=!0):a.emit("toggleUgcSeason"),n.from==="UgcSeason"&&xe({type:"click",spm_info:"main.play-story.ugc-season.entrance"},{msg:JSON.stringify({})})},U=()=>{n.isActive&&(s.value=!s.value)};return a.on("toggleSelectedInfo",U),qe(()=>{a.off("toggleSelectedInfo",U)}),(M,N)=>{var V,ae,_e;const Z=Pe("v-button"),Y=Pe("VDropdown"),oe=Pe("WidgetArrow");return h(),b("div",Q9,[ew,u("div",tw,[u("div",nw,[u("div",aw,[d(l).length?(h(),b("div",hw,[mw,u("div",pw,[u("div",{class:ne(["up-self",{mr_md:d(l).length<=2,mr_xxl:d(l).length>2}])},[$(Co,{staff:d(f),relations:e.relations,onOpenUser:N[6]||(N[6]=we=>q(d(f).mid)),onFollowUser:N[7]||(N[7]=we=>H(d(f).mid,!0))},null,8,["staff","relations"])],2),u("div",_w,[d(l).length===2?(h(),J(Co,{key:0,staff:d(v),relations:e.relations,onOpenUser:N[8]||(N[8]=we=>q(d(v).mid)),onFollowUser:N[9]||(N[9]=we=>H(d(v).mid,!0))},null,8,["staff","relations"])):R("",!0),d(l).length>2?(h(),J(w9,{key:1,staffList:d(l),isShowAllStaff:i.value,onMouseenter:N[10]||(N[10]=we=>i.value=!0)},null,8,["staffList","isShowAllStaff"])):R("",!0)])]),$(yt,{name:"fade"},{default:ee(()=>{var we,fe;return[i.value?(h(),b("div",{key:0,class:ne(["all-staff p_absolute l_0 pd_sm u_select_none flex_start flex_wrap z_index_999",{t_0:((we=o.value)==null?void 0:we.offsetHeight)>300,b_0:((fe=o.value)==null?void 0:fe.offsetHeight)<=300,"staff-3":d(l).length===3,"staff-4":d(l).length===4,"staff-max":d(l).length>=5}]),onMouseleave:N[11]||(N[11]=Ue=>i.value=!1)},[(h(!0),b(pe,null,De(d(l),Ue=>(h(),b("div",{class:"staff-item my_sm",key:Ue.mid},[$(Co,{staff:Ue,relations:e.relations,onOpenUser:ge=>q(Ue.mid),onFollowUser:ge=>H(Ue.mid,!0)},null,8,["staff","relations","onOpenUser","onFollowUser"])]))),128))],34)):R("",!0)]}),_:1})])):(h(),b("div",sw,[e.info.owner?(h(),b("div",iw,[$(Ot,{class:"flex_shrink_0 u_select_none mr_xs cs_pointer","is-mini":"",info:d(g),onClick:N[0]||(N[0]=we=>q(e.info.owner.mid))},null,8,["info"]),u("div",ow,[u("h4",rw,[u("div",{class:"up-name fw_bold mr_sm hover_pink cs_pointer text_ellipsis ts_all_fast",onClick:N[1]||(N[1]=we=>q(e.info.owner.mid))},z(e.info.owner.name),1),e.relations[e.info.owner.mid]||!d(w).isLogin?(h(),b("div",lw,[!((V=e.relations[e.info.owner.mid])!=null&&V.followed)||!d(w).isLogin?(h(),J(Z,{key:0,class:"up-add flex_start",type:"pink",size:"small",onClick:N[2]||(N[2]=we=>H(e.info.owner.mid))},{default:ee(()=>[$(d(X7),{class:"mr_xs"}),uw]),_:1})):R("",!0),(ae=e.relations[e.info.owner.mid])!=null&&ae.followed?(h(),b(pe,{key:1},[y.value?(h(),J(Y,{key:1,trigger:"hover",placement:"bottom-start",classname:"selected_video--upmenu",target:".app_selected--content","click-hide":""},{content:ee(()=>[u("div",fw,[u("div",{class:"dropdown_select--option",onClick:N[4]||(N[4]=we=>d(Ie).emit("showActionDialog","dialogFollowed"))}," \u8BBE\u7F6E\u5206\u7EC4 "),u("div",{class:"dropdown_select--option",onClick:N[5]||(N[5]=we=>Q())},"\u53D6\u6D88\u5173\u6CE8")])]),default:ee(()=>[$(Z,{class:"up-menu flex_start",size:"small"},{default:ee(()=>[$(d(Vl),{class:"mr_xs"}),dw]),_:1})]),_:1})):(h(),J(Z,{key:0,class:"up-menu flex_start",size:"small",onMouseleave:N[3]||(N[3]=we=>y.value=!0)},{default:ee(()=>[$(d(Vl),{class:"mr_xs"}),cw]),_:1}))],64)):R("",!0)])):R("",!0)]),u("p",vw,z(d(g).fans)+"\u7C89\u4E1D \xB7 "+z(d(g).likes)+"\u70B9\u8D5E",1)])])):R("",!0)]))]),u("div",gw,[u("div",{class:"video-title cs_pointer",onClick:N[12]||(N[12]=we=>s.value=!s.value)},[u("p",yw,[le(z(e.info.title)+" ",1),$(oe,{class:ne(["i_icon_more ts_all_fast rotate_90",{rotate_n90:s.value}])},null,8,["class"])])]),u("div",ww,[u("div",{class:ne(["video-desc-wrap ts_all_fast auto_hide_scrollbar scrollbar_sm pr_md",{ov_hidden:!s.value,ov_overlay_y:s.value&&((_e=c.value)==null?void 0:_e.offsetHeight)>340}]),ref_key:"videoDescWrapRef",ref:o,style:Ge({height:s.value?c.value.offsetHeight+"px":0}),onWheel:N[13]||(N[13]=Se(()=>{},["stop"]))},[u("div",{class:"video-desc",ref_key:"videoDescInnerRef",ref:c},[$(T9,{formats:d(G),onOpenUser:q},null,8,["formats"])],512)],38)]),d(x).isShow?(h(),b("div",bw,[u("div",{class:"collect-content flex_start cs_pointer",onClick:W},[u("div",Ew,z(d(x).title),1),u("span",kw,z(d(x).index),1),$(oe,{class:"i_icon_more"})])])):R("",!0)])]),u("div",Cw,[$(J9,{from:e.from,info:e.info,formats:d(G),tripleData:e.tripleData},null,8,["from","info","formats","tripleData"])])])])}}});const $w={class:"app_selected--comment"},xw={class:"app_selected--comment-num"},Aw={class:"b_text fs_3 px_lg py_md mg_0 lh_xs p_relative bb_1 bc_line_light"},Dw=le(" \u8BC4\u8BBA "),Tw={class:"cmt-num fw_400 fs_6 text2"},Iw={class:"app_selected--comment-container"},Pw={class:"pc-comment-tab-header"},Fw=u("span",null,"\u8BE6\u60C5",-1),Rw={class:"pc-comment-tab-header"},Lw=le(),Bw=u("span",null,"\u5BF9\u8BDD\u5217\u8868",-1),Mw=u("br",null,null,-1),Ow=le("\u9876\u90E8 "),Nw=ue({__name:"SelectedComment",props:{aid:Number,cid:Number,fromSpmid:String,videoItemDom:String,isShowComment:Boolean,trackId:String},emits:["closeComment"],setup(e,{emit:t}){const n=e;ca({showContent:!1,showPopup:!1,showSubPage:!1});const{replyNum:a}=ie(ga()),{activeItem:s,fromItem:i}=ie(an()),{spmid:o}=Or(),c=D(null),r=D(null),l=D(null),f=D(!1),v=D(!1),m=D(!1),g=K(()=>_.value==="list"?f.value:_.value==="detail"?v.value:m.value),{commentsInstance:y,initComment:E,currentCommentType:_,clearComment:p,changeComment:C}=wc("player"),S=F=>{switch(F){case"list":Ga({element:c.value});break;case"detail":Ga({element:r.value});break;case"dialog":Ga({element:l.value});break}},x=()=>{c.value&&c.value.scrollTop>=250?f.value=!0:f.value=!1},w=()=>{r.value&&r.value.scrollTop>=250?v.value=!0:v.value=!1},k=()=>{l.value&&l.value.scrollTop>=250?m.value=!0:m.value=!1},T=()=>{y.value||E({oid:n.aid,type:1,videoOptions:{type:"ugc",aid:n.aid,trackId:n.trackId},spmInfo:{spmid:o.value,from_spmid:n.fromSpmid,from_outer_spmid:""},seekHandler:F=>{Cn({...F,p:F.p===-1?1:F.p})},previewImageHandler:(F,O)=>{de.emit("hidePopover"),de.emit("visitGallery",{container:".app_selected--wrapper",downloadable:!1,items:F.map(G=>({src:G.img_src,width:G.img_width,height:G.img_height,size:G.img_size,tags:[]})),index:O})}},{container:c.value,detailContainer:r.value,dialogContainer:l.value})},A=()=>{t("closeComment")};return Ie.on("toggleUgcSeason",()=>{A(),p({container:c.value,detailContainer:r.value,dialogContainer:l.value})}),Xe(()=>{se(()=>n.isShowComment,F=>{F&&T()}),se([()=>n.cid,s],([F,O])=>{F!==O.cid&&setTimeout(()=>p({container:c.value,detailContainer:r.value,dialogContainer:l.value}),300)},{deep:!0})}),(F,O)=>(h(),b("div",$w,[u("div",xw,[u("h3",Aw,[Dw,u("span",Tw,z(d(a)),1),u("span",{class:"app_selected--comment-close p_center_y r_md",onClick:A},[$(d(Kt))])])]),u("div",Iw,[u("div",{class:"app_selected--comment-dom",id:"pc-comment-container",ref_key:"commentDom",ref:c,onScroll:x},null,544),d(_)==="detail"||d(_)==="dialog"?(h(),b("div",{key:0,class:"app_selected--comment-dom",id:"pc-comment-detail-container",ref_key:"commentDetailDom",ref:r,onScroll:w},[u("div",Pw,[u("span",{onClick:O[0]||(O[0]=G=>d(C)("list")),class:"pc-comment-back-icon change-left"},[$(d(Si))]),Fw])],544)):R("",!0),d(_)==="dialog"?(h(),b("div",{key:1,class:"app_selected--comment-dom",id:"pc-comment-dialog-container",ref_key:"commentDialogDom",ref:l,onScroll:k},[u("div",Rw,[u("span",{onClick:O[1]||(O[1]=G=>d(C)("detail")),class:"pc-comment-back-icon"},[$(d(Si))]),Lw,Bw])],544)):R("",!0),ke(u("div",{title:"\u56DE\u5230\u9876\u90E8",class:"pc-comment-top-button",onClick:O[2]||(O[2]=G=>S(d(_)))},[$(d(mc),{class:"icon-to-top"}),Mw,Ow],512),[[Fe,d(g)]])])]))}});const Vw=["data-cid"],Uw=u("span",null,"\u8BE6\u60C5\u9875",-1),Hw=le(" \xA0 "),Gw=u("span",null,"\u8BE6\u60C5\u9875",-1),jw=["onClick"],Kw=ue({__name:"SelectedItem",props:{info:{type:Object,default:()=>({})},playingList:{type:Array,default:()=>[]},index:Number,width:Number,height:Number,activeId:Number,isOnSliding:Boolean,isWinVisiable:Boolean,isSelectedPage:Boolean,isUgcSeasonPage:Boolean},emits:["playerInited","playerEnded"],setup(e,{emit:t}){const n=e,a=Lt(),s=D(),i=D({}),o=D({}),c=D({}),r=D(!1),l=D(!1),f=D(!1),v=D(!1),m=D(!1),g=D(!1),y=D(!1),E=D(!1),_=K(()=>n.activeId&&n.activeId===n.info.cid),p=K(()=>_.value&&n.isSelectedPage),C=K(()=>p.value&&!n.isOnSliding),S=K(()=>`.app_selected--item[data-cid="${n.info.cid}"]`),x=K(()=>`${S.value} .bpx-player-summary-wrap`),w=K(()=>(n.isSelectedPage||n.isUgcSeasonPage)&&E.value&&m.value&&n.info.cid),k=window,T=D(!0),A=D(!1),F=[0,1,2,3],O=D(!1),{isGpuDisabled:G}=ie(da()),{userInfo:X}=ie(st()),H=We("hasActiveDialog"),L=an(),{reportGoToDetails:Q,reportToggleDetails:q,reportSwitchVideo:j}=L,{activeItem:B,activeVideo:W,fromItem:U,isMainMini:M,isMiniShowLike:N,isShowMiniBtns:Z,isMiniPanelHover:Y,isPlayerControlHover:oe}=ie(L);oa(()=>{B.value.cid===n.info.cid&&(W.value=i.value)});const{player:V,itemInfo:ae,fromSpmid:_e,trackId:we,firstInfo:fe,firstPlay:Ue,restartPlay:ge,heartbeat:ve,reportHistory:Ce}=Or();oa(()=>{ae.value=n.info,_e.value=`main.play-story.video.${U.value._location||0}.click`});const Ae=ga(),{resetToolStore:Ye,initToolStore:he,initTriple:nt,initFollowed:ct,setLike:Ft,setCoin:Dn,setFav:rn}=Ae,{cid:Tn}=ie(Ae),re=()=>{ve(),fe.value=null};Ie.on("refreshSelectedPage",re);const be=D(!1);se([()=>n.width,l],([I,P])=>{be.value=P?I<1360:I<980},{immediate:!0}),se(()=>n.info.cid,I=>{I&&(E.value=!1,y.value=!1,m.value=!1,A.value=!1,fe.value=null,Yt(),ot(!0),setTimeout(()=>{const P=document.querySelector(`${S.value} .video-backdrop-bg`),te=document.querySelector(`${S.value} .video-backdrop-blur`);P&&(P.style.background="#000"),te&&(te.style.background="#000")}))},{immediate:!0}),se(p,I=>{I&&Tn.value!==n.info.cid&&Ye()}),se([p,w],([I,P])=>{I&&P&&he(V.value,n.info,i.value)}),se([p,o],([I,P])=>{I&&P.init&&nt(P)}),se([p,c],([I,P])=>{var te,ce,Re;I&&((te=P[0])==null?void 0:te.followed)&&ct((Re=P[(ce=n.info.owner)==null?void 0:ce.mid])==null?void 0:Re.followed)}),mt("updateVideoData",(I,P,te)=>{I===n.info.cid&&(i.value.View.stat[P]=te)}),mt("updateTripleData",(I,P,te)=>{I===n.info.cid&&(o.value[P]=te)});let it=null,ft=0;const ot=async(I=!1)=>{if(!(!n.info.bvid||!I&&ft>3))try{i.value=await z1({bvid:n.info.bvid}),m.value=!0,qt(),Ne(),ft=0,clearTimeout(it)}catch(P){console.error(P),ft++,it=setTimeout(()=>ot(),1e3)}},qt=async()=>{if(!!n.info.bvid)try{const P=(await en.getVideoState(n.info.bvid)).data||{};o.value={init:!0,liked:P.like,faved:P.favorite,hasCoined:P.coin,orderState:P.season_fav}}catch(I){console.error(I)}},Ne=async()=>{var I;if(!!X.value.isLogin)try{const P=(((I=i.value.View)==null?void 0:I.staff)||[]).map(te=>te.mid);P.includes(n.info.owner.mid)||P.unshift(n.info.owner.mid),c.value=await x0(P)||{}}catch(P){console.error(P)}};oa(()=>{n.isSelectedPage&&g.value&&n.info.cid&&!y.value&&Yt()});const Yt=async()=>{var P,te;y.value=!0;const I={element:s.value,fullWrap:document.querySelector(".app_selected--content"),aid:n.info.id,cid:n.info.cid,channelKind:7,pcSpecialMode:!0,controlsList:new Set(["noPlaybackClue","noPBP"]),featureList:new Set(["noToast","noVVReport","noVTReport"]),storageKey:"Pc-Special",autoplay:!1,enableHEVC:!0,enableAV1:!0,hideBoxShadow:!0,iid:"pc_app_selected"};try{V.value.reload?(await V.value.reload(I),p.value&&V.value.play()):(k.nano||await k.loadBiliPlayer(),V.value=k.nano.createPlayer(I,{"bpx-primary-color":"#f69","bpx-fn-color":"#f69","bpx-fn-hover-color":"#f69"}),Te(),await V.value.connect(),document.fullscreenElement&&V.value.setSideScreen(k.nano.ScreenKind.Full),_.value||(te=(P=V.value).toggleFeature)==null||te.call(P,{shortcut:!0})),k.selectedPlayers[n.info.cid]=V.value,E.value=!0}catch(ce){console.error(ce)}},In=()=>{if(V.value.disconnect)try{p.value&&ve(),V.value.disconnect(),k.selectedPlayers[n.info.cid]=null,delete k.selectedPlayers[n.info.cid]}catch(I){console.error(I)}},Te=()=>{const I=k.nano;V.value.on(I.EventType.Player_Virtual_Action,Ze),V.value.on(I.EventType.Player_Play,ln),V.value.on(I.EventType.Player_Pause,zn),V.value.on(I.EventType.Player_Ended,Dt),V.value.on(I.EventType.Player_Danmaku_Change,uo),V.value.on(I.EventType.Player_Quality_Requested,Ws),V.value.on(I.EventType.Player_RateChange,Zs),V.value.on(I.EventType.Player_VolumeChange,wa),V.value.on(I.EventType.Player_Summary_Change,ba),V.value.on(I.EventType.Player_Aspect_Switch_Change,Ea),V.value.on(I.EventType.Player_Initialized,ka)},Ze=({detail:I})=>{var ce,Re,et,rt,Pn,Mt,Ta;if(!I)return;const P=I==null?void 0:I.data,te=k.nano;switch(I.kind){case te.InternalKind.OpenUrl:bn(eh(I.data),"selected.JumpEvent");return;case te.InternalKind.First_Playtime:(!fe.value||fe.value.aid!==((ce=I.data)==null?void 0:ce.aid))&&(fe.value=I.data,Ue(),(Re=U.value)!=null&&Re.cid||j("auto",0,B.value));return;case te.InternalKind.Report_Observer:{const Fn=(et=P==null?void 0:P.options)==null?void 0:et.spm_id,ea=Fn?Fn.split(".").slice(0,-1).join("."):"",Js="main.play-story."+ea,Qs=(P==null?void 0:P.type)==="appear"?"show":P==null?void 0:P.type;xe({type:Qs,spm_info:Js},{msg:typeof((rt=P==null?void 0:P.options)==null?void 0:rt.msg)=="string"?(Pn=P==null?void 0:P.options)==null?void 0:Pn.msg:JSON.stringify((Ta=(Mt=P==null?void 0:P.options)==null?void 0:Mt.msg)!=null?Ta:{})});break}}if(!X.value.isLogin&&I.kind<11){jt("ugcPlayer.videoEvents"+I.kind);return}switch(I.kind){case te.InternalKind.Like:Ft(n.info.id);break;case te.InternalKind.Coin:Dn();break;case te.InternalKind.Collect:rn();break;case te.InternalKind.Triple:de.emit("playerTriple",{type:"ugc",action:I.data.action});break;case te.InternalKind.Super_Quality_Guide:q1("qnPay");break}},Bt=()=>{var I,P,te,ce;T.value?(P=(I=V.value).play)==null||P.call(I):(ce=(te=V.value).pause)==null||ce.call(te)},ln=()=>{var I,P,te,ce;p.value?T.value=(P=(I=V.value).isPaused)==null?void 0:P.call(I):(ce=(te=V.value).pause)==null||ce.call(te)},zn=()=>{var I,P;T.value=(P=(I=V.value).isPaused)==null?void 0:P.call(I),C.value&&Ce()},Dt=()=>{p.value&&(H!=null&&H()?V.value.pause():t("playerEnded"))},uo=I=>{if(v.value){const P=V.value.danmaku.isOpen();dn(_o,{isDmOpen:P,idxs:Yn(F)})}},Ws=I=>{const P=V.value.getQuality();dn(go,{qn:P,idxs:Yn(F)})},Zs=I=>{if(_.value){const P=V.value.getPlaybackRate();P<3&&dn(Wo,{rate:P})}},wa=_s(()=>{const I=V.value.getVolume();dn(yo,{volume:I,idxs:Yn(F)})},200),ba=I=>{q(!I.detail),O.value=I.detail},Ea=I=>{var ce;const P=(ce=V.value)==null?void 0:ce.mediaElement(),te=!!(I.detail&&P);if(te){const{videoWidth:Re,videoHeight:et}=P;Go({width:Re,height:et})}else Go(null);xe({type:"click",spm_info:"main.play-detail.player.aspect-ratio"},{msg:JSON.stringify({win_name:"main",is_set_aspect:te})})},ka=()=>{var te,ce;if(G.value||!V.value.mediaElement)return;const I=(ce=(te=V.value).mediaElement)==null?void 0:ce.call(te),P=I==null?void 0:I.parentElement;if(P){A.value&&(A.value=!0);let Re=P.querySelector(".video-backdrop-bg"),et=P.querySelector(".video-backdrop-blur");et||(et=document.createElement("div"),et.classList.add("video-backdrop","video-backdrop-blur"),P.prepend(et)),Re||(Re=document.createElement("div"),Re.classList.add("video-backdrop","video-backdrop-bg"),P.prepend(Re));const{videoWidth:rt,videoHeight:Pn}=I;let Mt=document.createElement("canvas");Mt.width=rt,Mt.height=Pn,Mt.getContext("2d").drawImage(I,0,0,rt,Pn),Mt.toBlob(Fn=>{if(Fn){const ea=URL.createObjectURL(Fn);Re.style.background=`url(${ea})`,et.style.background=`url(${ea})`}Mt=null},"image/jpeg",.6)}},qn=I=>{var P;((P=I.key)==null?void 0:P.toLowerCase())==="d"&&as()},ts=I=>{var P;(P=I.target)!=null&&P.classList.contains("bui-danmaku-switch-input")&&as()};let ns=null;const as=()=>{v.value=!0,clearTimeout(ns),ns=setTimeout(()=>v.value=!1,200)},zs=(I,P)=>{c.value[I]&&(c.value[I].followed=P)},Ca=()=>{var I,P,te,ce;!C.value||((P=(I=V.value).pause)==null||P.call(I),Cn({type:"ugc",bvid:n.info.bvid,cid:n.info.cid,t:((ce=(te=V.value).getCurrentTime)==null?void 0:ce.call(te))||0,fromSpmid:Ui.selected,exitMini:!0}),Q())};Ie.on("viewDetails",Ca);const qs=()=>{var I,P;if(p.value){document.fullscreenElement&&document.exitFullscreen();const{cid:te,bvid:ce}=n.info,Re=((P=(I=V.value).getCurrentTime)==null?void 0:P.call(I))||0;a.push({name:"UgcSeason",query:{cid:te,bvid:ce,t:Re}})}};Ie.on("toggleUgcSeason",qs);const Sa=()=>{r.value=!1,clearTimeout($a)};let $a=null;const xa=Y1(()=>{r.value=!0,clearTimeout($a),$a=setTimeout(()=>r.value=!1,1e3)},200),Yn=I=>I.filter(P=>F.includes(P)&&P!==n.index),Xn=I=>[I.includes(n.index),Yn(I)];let Jn=null;se(p,I=>{var P,te,ce,Re,et,rt,Pn,Mt,Ta,Fn,ea,Js,Qs,wl,bl,El;if(clearTimeout(Jn),I){const{isDmOpen:co,idxs:kl}=ds(_o)||{};if(Ko(co)&&kl){const[is,Rn]=Xn(kl);is&&(co?(P=V.value.danmaku)==null||P.open():(te=V.value.danmaku)==null||te.close()),dn(_o,Rn.length?{isDmOpen:co,idxs:Rn}:null)}const{qn:Ia,idxs:Cl}=ds(go)||{};if(wn(Ia==null?void 0:Ia.newQ)&&Cl){const[is,Rn]=Xn(Cl);is&&(((Re=(ce=V.value).getQuality)==null?void 0:Re.call(ce))||{}).newQ!==Ia.newQ&&((rt=(et=V.value).requestQuality)==null||rt.call(et,Ia.newQ)),dn(go,Rn.length?{qn:Ia,idxs:Rn}:null)}const{rate:fo}=ds(Wo)||{};fo&&wn(fo)&&((Mt=(Pn=V.value).setPlaybackRate)==null||Mt.call(Pn,fo));const{volume:vo,idxs:Sl}=ds(yo)||{};if(wn(vo)&&Sl){const[is,Rn]=Xn(Sl);is&&((Fn=(Ta=V.value).setVolume)==null||Fn.call(Ta,vo)),dn(yo,Rn.length?{volume:vo,idxs:Rn}:null)}(Js=(ea=V.value).setDmSetting)==null||Js.call(ea),(wl=(Qs=V.value).toggleFeature)==null||wl.call(Qs,{shortcut:!1})}else(El=(bl=V.value).toggleFeature)==null||El.call(bl,{shortcut:!0}),de.emit("leaveGallery"),Jn=setTimeout(()=>l.value=!1,300)}),se([p,V],([I])=>{var P,te;I?V.value.play&&(n.isWinVisiable?(V.value.play(),fe.value&&ge()):f.value=!0,k.selectedPlayers.activePlayer!==V.value&&(k.selectedPlayers.activePlayer=V.value),k.biliPlayer!==V.value&&(k.biliPlayer=V.value),t("playerInited")):((te=(P=V.value).pause)==null||te.call(P),ve())});const Aa=()=>{!p.value||C.value&&(l.value=!0,xe({type:"click",spm_info:"main.play-detail.player.comment"},{msg:JSON.stringify({win_name:"main",type:"selected"})}))};Ie.on("showComment",Aa);const Qn=()=>{!p.value||l.value&&(l.value=!1)};Ie.on("hideComment",Qn);const Da=()=>{!p.value||(l.value?Qn():Aa())};Ie.on("toggleComment",Da),se(()=>n.isWinVisiable,I=>{var P,te;I?(p.value&&f.value&&((te=(P=V.value).play)==null||te.call(P),fe.value&&ge(),j("auto",0,B.value)),f.value=!1):p.value&&V.value.isPaused&&!V.value.isPaused()&&(V.value.pause(),ve(),f.value=!0)});let vt=null;const Ys=()=>{oe.value=!0},ss=()=>{oe.value=!1};se(w,I=>{var P;I&&!vt&&(vt=(P=s.value)==null?void 0:P.querySelector(".bpx-player-control-wrap"),vt&&(vt.addEventListener("mouseenter",Ys,!1),vt.addEventListener("mouseleave",ss,!1)))}),se(_,I=>{var P,te;!I&&O.value&&((te=(P=s.value)==null?void 0:P.querySelector(".bpx-player-ctrl-clear"))==null||te.click())}),se(()=>n.isSelectedPage,I=>{I&&p.value&&j("auto",0,B.value)});const Xs=I=>{Ft(n.info.id,I)};return Xe(()=>{g.value=!0,document.addEventListener("keydown",qn),document.addEventListener("mousedown",ts)}),qe(()=>{In(),clearTimeout(it),Ie.on("refreshSelectedPage",re),Ie.off("showComment",Aa),Ie.off("hideComment",Qn),Ie.off("toggleComment",Da),Ie.off("toggleUgcSeason",qs),document.removeEventListener("keydown",qn),document.removeEventListener("mousedown",ts),vt==null||vt.removeEventListener("mouseenter",Ys,!1),vt==null||vt.removeEventListener("mouseleave",ss,!1)}),(I,P)=>{const te=Pe("WidgetArrow");return h(),b("div",{class:ne(["app_selected--item app_selected--flow p_relative",{"app_selected--mini":d(M),"app_selected--item-active":r.value,"app_selected--item-deactive":!r.value,"app_selected--item-showcmt":l.value,"app_selected--item-narrow":be.value}]),"data-cid":e.info.cid,style:Ge({height:e.height+"px"}),onMouseleave:Sa,onMousemove:P[6]||(P[6]=(...ce)=>d(xa)&&d(xa)(...ce))},[u("div",{class:ne(["app_selected--player w_100 h_100",{"app_selected--shown":d(p)}]),ref_key:"selectedPlayerRef",ref:s},null,2),ke(u("div",{class:ne(["app_selected--cmtwrap bg_bg1 p_absolute r_0 t_0 b_0",{deactive:!d(_)}])},[$(Nw,{aid:e.info.id,cid:e.info.cid,videoItemDom:d(S),fromSpmid:d(_e),trackId:d(we),isShowComment:l.value,onCloseComment:P[0]||(P[0]=ce=>l.value=!1)},null,8,["aid","cid","videoItemDom","fromSpmid","trackId","isShowComment"])],2),[[Fe,l.value]]),$($c,{loading:!E.value},null,8,["loading"]),u("div",{class:"app_selected--todetail flex_between u_select_none cs_pointer",onClick:Ca},[Uw,$(te,{class:"i_icon_more"}),Hw]),$(yt,{name:"fade"},{default:ee(()=>[d(w)&&d(Z)?(h(),b("div",{key:0,class:"app_selected--todetail-mini flex_between u_select_none cs_pointer",onClick:Ca,onMouseenter:P[1]||(P[1]=ce=>Y.value=!0),onMouseleave:P[2]||(P[2]=ce=>Y.value=!1)},[Gw,$(te,{class:"i_icon_more"})],32)):R("",!0)]),_:1}),$(yt,{name:"fade"},{default:ee(()=>[d(w)&&d(Z)?(h(),b("div",{key:0,class:"app_selected--pause p_center",onClick:Se(Bt,["stop"]),onMouseenter:P[3]||(P[3]=ce=>Y.value=!0),onMouseleave:P[4]||(P[4]=ce=>Y.value=!1)},[ke($(d(Cc),{class:"pause-icon"},null,512),[[Fe,!T.value]]),ke($(d(kc),{class:"pause-icon"},null,512),[[Fe,T.value]])],40,jw)):R("",!0)]),_:1}),$(yt,{name:"fade"},{default:ee(()=>[d(w)&&d(Z)&&d(N)?(h(),b("div",{key:0,ref:"like",class:ne(["app_selected--like-mini",{on:o.value.liked}]),onClick:P[5]||(P[5]=ce=>Xs(ce))},[$(d(Sc),{class:"icon"})],2)):R("",!0)]),_:1}),d(w)?(h(),J(qa,{key:0,to:d(x)},[$(Sw,{ref:"selectedVideoInfoRef",info:e.info,video:i.value,tripleData:o.value,relations:c.value,isActive:d(p),onUpdateRelations:zs},null,8,["info","video","tripleData","relations","isActive"])],8,["to"])):R("",!0)],46,Vw)}}});const Ww=ue({__name:"DialogFollowed",props:{from:String},setup(e,{expose:t}){const n=e,a=D(!1);t({isShowDialog:a,showDialog:()=>a.value=!0,closeDialog:()=>a.value=!1});const o=n.from==="UgcSeason"?Ms():an(),{activeVideo:c}=ie(o),r=K(()=>{let{card:l}=c.value.Card||{};return{id:+(l==null?void 0:l.mid),name:l==null?void 0:l.name}});return(l,f)=>(h(),J(Os,{show:a.value,onClose:f[2]||(f[2]=v=>a.value=!1)},{default:ee(()=>[a.value?(h(),J(i0,{key:0,upName:d(r).name,upid:d(r).id,onClose:f[0]||(f[0]=v=>a.value=!1),onSave:f[1]||(f[1]=v=>a.value=!1)},null,8,["upName","upid"])):R("",!0)]),_:1},8,["show"]))}});const Zw={class:"app-cionpanel bg_bg1_float"},zw=u("div",{class:"app-cionpanel--title"},"\u6295\u5E01",-1),qw={class:"app-cionpanel--desc"},Yw=le(" \u9009\u62E9\u4F60\u7684\u6295\u5E01\u6570\u91CF "),Xw={class:"app-cionpanel--select"},Jw={class:"app-cionpanel--coin"},Qw={class:"app-cionpanel--coin-all"},eb=le(" \u786C\u5E01\u4F59\u989D\uFF1A"),tb={class:"app-cionpanel--coin-desc"},nb=le("\u540C\u65F6\u70B9\u8D5E "),ab={class:"app-cionpanel--btn"},sb=ue({__name:"DialogCoinOperated",props:{from:String},setup(e,{expose:t}){const n=e,a=n.from==="UgcSeason"?qi():ga(),s=n.from==="UgcSeason"?Ms():an(),{biliMsg:i}=a,{hasCoined:o,canCoined:c,coinNum:r,liked:l,likeNum:f,aid:v,videoData:m}=ie(a),{spmid:g,fromSpmid:y}=ie(s),{userInfo:E}=ie(st()),_=D(null),p=D(0),C=D(!0),S=D(null),x=D(null),w=D(),k=D();let T=!1;const A=D(!1);t({isShowDialog:A,showDialog:()=>A.value=!0,closeDialog:()=>A.value=!1}),se(A,B=>{var W,U,M,N;B?(C.value=!0,p.value=0,en.getExp().then(Z=>{(Z==null?void 0:Z.code)===0&&(p.value=Z.data.data)}),(W=w.value)==null||W.start(),(U=k.value)==null||U.start()):((M=w.value)==null||M.stop(),(N=k.value)==null||N.stop())});const G=K(()=>E.value.money||0),X=K(()=>{var B,W;return _.value?_.value:c.value&&o.value===0&&((W=(B=m.value)==null?void 0:B.View)==null?void 0:W.copyright)!==2?2:1}),H=K(()=>X.value>G.value?"\u786C\u5E01\u4F59\u989D\u4E0D\u8DB3":"\u4F59\u989D\u5145\u8DB3\uFF0C\u53EF\u4EE5\u6295\u5E01");se(o,()=>{_.value=null});const L=B=>{_.value=B},Q=()=>{A.value=!1},q=async B=>{var N,Z;if(T)return;T=!0;const W=X.value,U=Y=>{var oe;i({msg:"\u6295\u5E01\u6210\u529F\uFF0C\u611F\u8C22\u60A8\u7684\u652F\u6301",cd:1500}),o.value+=W,r.value+=W,((oe=Y.data)==null?void 0:oe.like)&&!l.value&&(l.value=!0,f.value++),setTimeout(()=>X1(),400),Q()},M=Y=>{i({el:B.target,msg:(Y==null?void 0:Y.message)||"\u6295\u5E01\u5931\u8D25",cd:1e3,type:"error"})};try{const Y={eab_x:(N=window.biliPlayer)!=null&&N.isPaused()?2:1,ramval:(Z=window.biliPlayer)==null?void 0:Z.getMediaInfo().absolutePlayTime,referer:"",source:"pc_client_normal",aid:v.value,multiply:W,select_like:C.value?1:0,cross_domain:!0,spmid:g.value,from_spmid:y.value,statistics:JSON.stringify({appId:Cs,platform:Ss})},oe=await en.addCoin({...Y,ga:1},{handleResCode:!1});if(oe.code===0)U(oe);else if(oe.code===-401){const V=window.CaptchaLoader;if(V){const _e=await(await V.load())(oe.data.ga_data),we=await en.addCoin({...Y,tk:_e},{handleResCode:!1});we.code===0?(U(we),xe({type:"click",spm_info:"main.play-detail.tools.coin"},{msg:JSON.stringify({win_name:"main"})})):M()}else M()}else M()}catch(Y){console.error("add coin err:",Y),Y.name!=="cancel"&&M(Y)}finally{T=!1}},j=B=>{(B.key==="w"||B.key==="W")&&A.value&&q({})};return se(S,B=>{!B||(w.value=new Gl(B),A.value&&w.value.start())}),se(x,B=>{!B||(k.value=new Gl(B),A.value&&k.value.start())}),Xe(()=>{document.addEventListener("keydown",j)}),qe(()=>{document.removeEventListener("keydown",j)}),(B,W)=>(h(),J(Os,{show:A.value,onClose:W[4]||(W[4]=U=>A.value=!1)},{default:ee(()=>{var U,M;return[u("div",Zw,[u("span",{class:"close",onClick:Q},[$(d(Kt))]),zw,u("div",qw,[Yw,u("span",null,z(d(X))+"\u4E2A",1)]),u("div",Xw,[u("div",{class:ne(d(X)===1?"on":""),onClick:W[0]||(W[0]=N=>L(1))},[u("div",{class:"coin-num-ani coin-one",ref_key:"coinOneRef",ref:S},null,512)],2),d(c)&&d(o)===0&&((M=(U=d(m))==null?void 0:U.View)==null?void 0:M.copyright)!==2?(h(),b("div",{key:0,class:ne(["app-cionpanel--select-right",d(X)===2?"on":""]),onClick:W[1]||(W[1]=N=>L(2))},[u("div",{class:"coin-num-ani coin-two",ref_key:"coinTwoRef",ref:x},null,512)],2)):R("",!0)]),u("div",Jw,[u("div",Qw,[eb,u("span",null,z(d(G)),1)]),u("div",tb,z(d(H)),1)]),u("div",{class:"app-cionpanel--like",onClick:W[2]||(W[2]=N=>C.value=!C.value)},[ke($(d(xc),null,null,512),[[Fe,!C.value]]),ke($(d(Ac),{class:"app-cionpanel--like-selected"},null,512),[[Fe,C.value]]),nb]),u("div",ab,[u("div",{class:"app-cionpanel--btn-cel text1 bd_1",onClick:Q},"\u53D6\u6D88"),u("div",{class:ne(["app-cionpanel--btn-sure text_white",{disabled:d(X)>d(G)}]),onClick:W[3]||(W[3]=N=>q(N))}," \u786E\u8BA4\u6295\u5E01\uFF08 W \uFF09 ",2)])])]}),_:1},8,["show"]))}});var ib="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAC5JREFUKBVjYMABZi5a9R+EcUgzMOGSICQ+EjQy4gs5fAFEduDgNHQ0HhnIT6sAudAOjNLnY/wAAAAASUVORK5CYII=";const ob={class:"app-collection--title"},rb=le("\u9009\u62E9\u6536\u85CF\u5939"),lb=["onClick"],ub={class:"app-collection--list-item-name"},cb=["title","textContent"],db={class:"app-collection--list-item-right"},fb={key:0},vb={key:1},hb={class:"app-collection--list-item-count"},mb=u("img",{class:"p_center_y l_md",src:ib,alt:""},null,-1),pb=le(" \u65B0\u5EFA\u6536\u85CF\u5939 "),_b=[mb,pb],gb={key:0,class:"fav-add-tip"},yb=le(" \u70B9\u51FB\u5F39\u7A97\u5185\u5176\u4ED6\u533A\u57DF\u6216ESC\u952E\uFF0C\u53D6\u6D88 "),wb=["value"],bb={type:"submit",class:"submit"},Eb={class:"bottom"},kb=["disabled"],Cb=ue({__name:"DialogCollection",props:{from:String},setup(e,{expose:t}){const n=e,a=n.from==="UgcSeason"?qi():ga(),s=n.from==="UgcSeason"?Ms():an(),{biliMsg:i}=a,{spmid:o,fromSpmid:c}=ie(s),{aid:r,faved:l,faveNum:f}=ie(a),{userInfo:v}=ie(st()),m=D([]),g=D(!1),y=D(null),E=D(null),_=D(""),p=localStorage.getItem("favCreateFolderTip"),C=D(p),S=D(!1),x=()=>S.value=!0,w=()=>S.value=!1;t({isShowDialog:S,showDialog:x,closeDialog:w});const k=B=>{var W,U,M,N;["INPUT","TEXTAREA"].includes((W=B.target)==null?void 0:W.tagName)||["BILI-COMMENTS","BILI-COMMENT-BOX","BILI-COMMENTS-REPLY-DETAIL","BILI-COMMENTS-REPLY-DIALOG","BILI-COMMENT-REPORT-FORM"].includes((U=B.target)==null?void 0:U.tagName)||((N=(M=B.target)==null?void 0:M.getAttribute)==null?void 0:N.call(M,"contenteditable"))!=="true"&&(B.key==="e"||B.key==="E")&&S.value&&(T.value&&!g.value?Q({}):setTimeout(()=>S.value=!1,300))};se(S,B=>{B&&(g.value=!1,_.value="",j())}),Xe(()=>{document.addEventListener("keydown",k)}),qe(()=>{document.removeEventListener("keydown",k)}),se(g,()=>{g.value&&At(()=>{E.value.focus()})});const T=K(()=>m.value.length?m.value.some(B=>B.checked!==!!B.favoured):!1),A=K(()=>m.value.filter(B=>B.checked&&!B.favoured).map(B=>B.id)),F=K(()=>m.value.filter(B=>!B.checked&&B.favoured).map(B=>B.id)),O=K(()=>m.value.filter(B=>B.favoured).map(B=>B.id)),G=()=>{var B;if(((B=m.value)==null?void 0:B.length)>=100){i({el:y.value,msg:"\u6536\u85CF\u5939\u4E2A\u6570\u5DF2\u8FBE\u5230\u4E0A\u9650",cd:1e3,type:"error"});return}g.value=!0},X=()=>{C.value="1",localStorage.setItem("favCreateFolderTip","1")},H=()=>{_.value="",g.value=!1},L=B=>{(!y.value||!y.value.contains(B.target))&&H()},Q=async B=>{var W,U;try{const M={eab_x:(W=window.biliPlayer)!=null&&W.isPaused()?2:1,ramval:(U=window.biliPlayer)==null?void 0:U.getMediaInfo().absolutePlayTime,referer:"",gaia_source:"pc_client_normal",rid:r.value,type:2,add_media_ids:A.value.join(","),del_media_ids:F.value.join(","),platform:"web",spmid:o.value,from_spmid:c.value,statistics:JSON.stringify({appId:Cs,platform:Ss})};let N=await en.moveFavFold({...M,ga:1},{handleResCode:!1});if(N.code===-401){const oe=window.CaptchaLoader;if(oe){const ae=await(await oe.load())(N.data.ga_data);N=await en.moveFavFold({...M,gaia_token:ae},{handleResCode:!1})}}if(N.code!==0){i({el:B.target,msg:N.message||"\u6536\u85CF\u5931\u8D25",cd:1e3,type:"error"});return}S.value=!1;const Z=A.value.length>0||F.value.length!==O.value.length;let Y="";l.value?Z||(f.value--,Y="\u53D6\u6D88\u6536\u85CF"):Z&&(f.value++,Y="\u6536\u85CF"),l.value=Z,Y&&(i({msg:Y+"\u6210\u529F",cd:1500}),Y==="\u6536\u85CF"&&xe({type:"click",spm_info:"main.play-detail.tools.collect"},{msg:JSON.stringify({win_name:"main"})})),w()}catch(M){M.name!=="cancel"&&i({el:B.target,msg:M.message||"\u6536\u85CF\u5931\u8D25",cd:1e3,type:"error"})}},q=B=>{if(B.preventDefault(),!_.value){i({el:B.target,msg:"\u8BF7\u586B\u5199\u6536\u85CF\u5939\u540D\u79F0",cd:1e3,type:"error"});return}en.addFavFold({privacy:0,title:_.value}).then(W=>{if(W.code!==0){if(W.code===61001||W.code===61002)return;i({el:B.target,msg:W.message,cd:1e3,type:"error"});return}W.data.checked=!0,W.data.favoured=!1,m.value.push(W.data),_.value="",g.value=!1}).catch(W=>{i({el:B.target,msg:W.message||"\u521B\u5EFA\u6536\u85CF\u5939\u5931\u8D25",cd:1e3,type:"error"})})};function j(){en.getFavList({type:2,rid:r.value,up_mid:v.value.mid}).then(B=>{if(B.code!==0){i({el:y.value,msg:B.message,cd:1e3,type:"error"});return}let W=B.data.list;!(W!=null&&W.length)||(W.forEach(U=>{U.checked=U.fav_state===1,U.favoured=U.fav_state===1,U.isPrivate=U.attr%2,U.attr>>=1,U.isDefault=U.attr%2===0}),m.value=[],W.forEach(U=>{U.fav_state===1&&m.value.push(U)}),W.forEach(U=>{U.fav_state!==1&&m.value.push(U)}),m.value[0].checked=!0)}).catch(B=>{i({msg:B.message||"\u52A0\u8F7D\u6536\u85CF\u5939\u5217\u8868\u5931\u8D25",cd:1e3,type:"error"})})}return(B,W)=>(h(),J(Os,{show:S.value,onClose:W[6]||(W[6]=U=>S.value=!1)},{default:ee(()=>[u("div",{class:"app-collection",onClick:W[5]||(W[5]=U=>L(U))},[u("div",ob,[rb,$(d(Kt),{class:"app-collection--close",onClick:w})]),u("div",{class:ne(["app-collection--list",{adding:g.value}])},[(h(!0),b(pe,null,De(m.value,(U,M)=>(h(),b("div",{class:ne(["app-collection--list-item",{disable:U.media_count>=(U.isDefault?5e4:1e3),active:U.checked}]),key:M,onClick:N=>U.checked=!U.checked},[u("div",ub,[ke($(d(xc),null,null,512),[[Fe,!U.checked]]),ke($(d(Ac),{class:"app-collection--selected"},null,512),[[Fe,U.checked]]),u("span",{class:"app-collection--list-item-title",title:U.title,textContent:z(U.title)},null,8,cb)]),u("div",db,[U.isPrivate?(h(),b("span",fb,"\u79C1\u5BC6")):(h(),b("span",vb,"\u516C\u5F00")),u("span",hb,z(U.media_count+(U.checked?1:0)-(U.favoured?1:0))+"\u4E2A\u5185\u5BB9",1)])],10,lb))),128))],2),u("div",{class:"add-group",ref_key:"addGroup",ref:y},[ke(u("div",{class:"add-btn p_relative ts_all_fast",onClick:W[0]||(W[0]=Se(U=>G(),["stop"]))},_b,512),[[Fe,!g.value]]),ke(u("form",{class:"input-group",onSubmit:W[3]||(W[3]=U=>q(U))},[C.value?R("",!0):(h(),b("div",gb,[yb,$(d(Kt),{onClick:Se(X,["stop"])},null,8,["onClick"])])),u("input",{ref_key:"favInput",ref:E,type:"text",maxLength:"20",placeholder:"\u6700\u591A\u53EF\u8F93\u516520\u4E2A\u5B57",value:_.value,onInput:W[1]||(W[1]=U=>_.value=U.target.value),onKeydown:W[2]||(W[2]=fs(U=>H(),["esc"]))},null,40,wb),u("button",bb,[$(d(o0))])],544),[[Fe,g.value]])],512),u("div",Eb,[u("button",{class:ne(["btn submit-move",{disable:!d(T)||g.value}]),disabled:!d(T)||g.value,onClick:W[4]||(W[4]=U=>Q(U))}," \u4FDD\u5B58\uFF08 E \uFF09 ",10,kb)])])]),_:1},8,["show"]))}});const Sb=u("div",{class:"app_share--title"},"\u5206\u4EAB\u81F3",-1),$b={class:"app_share--area"},xb={class:"app_share--area-left"},Ab=["src"],Db=u("p",null,"\u624B\u673A\u626B\u7801\u89C2\u770B/\u5206\u4EAB",-1),Tb={class:"app_share--area-right"},Ib={class:"share-btn-icon"},Pb=u("span",{class:"share-btn-text"},"QQ\u7A7A\u95F4",-1),Fb={class:"share-btn-icon"},Rb=u("span",{class:"share-btn-text"},"\u5FAE\u535A",-1),Lb={class:"share-btn-icon"},Bb=u("span",{class:"share-btn-text"},"\u52A8\u6001",-1),Mb={class:"share-btn-icon"},Ob=u("span",{class:"share-btn-text"},"\u5FAE\u4FE1",-1),Nb={class:"share-btn-icon"},Vb=u("span",{class:"share-btn-text"},"QQ",-1),Ub={class:"share-btn-icon"},Hb=u("span",{class:"share-btn-text"},"\u590D\u5236\u94FE\u63A5\uFF08V\uFF09",-1),Gb=ue({__name:"DialogShare",props:{from:String},setup(e,{expose:t}){const n=e,a=n.from==="UgcSeason"?gn:Ie,s=n.from==="UgcSeason"?qi():ga(),{aid:i,cid:o,bvid:c,page:r,videoData:l,shareNum:f,msgParent:v}=ie(s),{userInfo:m}=ie(st()),g=D(!1),y=()=>g.value=!0,E=()=>g.value=!1;t({isShowDialog:g,showDialog:y,closeDialog:E,copyShareLink:()=>O()});const p=K(()=>{let H=`https://www.bilibili.com/video/${c.value||"av"+i.value}`+(r.value>1?"?p="+r.value:"");if(m.value.mid){const L=r0(String(m.value.mid));H=H+(H.indexOf("?")===-1?"?":"&")+`vd_source=${L}`}return H}),C=K(()=>{const{title:H}=l.value.View;return`\u3010${H}\u3011${p.value}`}),S=D(""),x=D(null),w=D(!1),k=H=>p.value+(p.value.indexOf("?")===-1?"?":"&")+`share_source=${H}`,T=H=>{const{View:L}=l.value,Q=(L.desc||"").substr(0,120).replace(/http(s)?:\/\//gi,"");return{url:k(H),title:L.title,desc:L.title+" UP\u4E3B\uFF1A"+(L.owner&&L.owner.name),summary:Q,shortTitle:L.title,pic:L.pic,aid:L.aid}},A=async()=>{if(!m.value.isLogin){jt("share.shareDynmic");return}try{await F()}catch{}g.value=!1,a.emit("showActionDialog","dialogDynShare")},F=async()=>{var H,L;if(w.value)return!1;w.value=!0;try{const Q={eab_x:(H=window.biliPlayer)!=null&&H.isPaused()?2:1,ramval:(L=window.biliPlayer)==null?void 0:L.getMediaInfo().absolutePlayTime,referer:"",source:"pc_client_normal",aid:i.value};let q=await Ul({...Q,ga:1},{handleResCode:!1});if(q.code===-401){const j=window.CaptchaLoader;if(j){const W=await(await j.load())(q.data.ga_data);q=await Ul({...Q,tk:W},{handleResCode:!1})}}if((q==null?void 0:q.code)==0)return f.value=q.data,!0}catch{}finally{w.value=!1}return!1},O=async(H,L)=>{const Q=document.querySelector(".app_selected--content");h0(C.value,Q);try{await F()}catch{}return ye({content:"\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F",style:"top:calc(50% + 10px);left:calc(50% + 10px)",parent:v.value}),!1},G=async(H,L)=>{try{await F()}catch{}J1(H,L),E()},X=()=>(m0.toDataURL(k("weixin_pc"),{margin:2,width:125}).then(H=>{S.value=H}).catch(H=>{}),!1);return Xe(()=>{se(o,()=>{X()},{immediate:!0})}),(H,L)=>(h(),J(Os,{show:g.value,onClose:L[6]||(L[6]=Q=>g.value=!1)},{default:ee(()=>[u("div",{ref:"shareDialogRef",class:"app_share bg_bg1_float",onClick:L[5]||(L[5]=Se(()=>{},["stop"]))},[u("span",{class:"close",onClick:E},[$(d(Kt))]),Sb,u("div",$b,[u("div",xb,[u("div",{ref_key:"qrcodeDom",ref:x,class:"qrcode-box"},[u("img",{class:"qrcode-box-url",src:S.value,alt:""},null,8,Ab)],512),Db]),u("div",Tb,[u("div",{onClick:L[0]||(L[0]=Q=>G("qzone",T("qzone_pc"))),class:"share-btn"},[u("span",Ib,[$(d(l0))]),Pb]),u("div",{onClick:L[1]||(L[1]=Q=>G("weibo",T("weibo_pc"))),class:"share-btn"},[u("span",Fb,[$(d(u0))]),Rb]),u("div",{onClick:A,class:"share-btn"},[u("span",Lb,[$(d(c0))]),Bb]),u("div",{class:"share-btn",onClick:L[2]||(L[2]=Q=>O())},[u("span",Mb,[$(d(d0))]),Ob]),u("div",{class:"share-btn",onClick:L[3]||(L[3]=Q=>G("qq",T("qq")))},[u("span",Nb,[$(d(f0))]),Vb]),u("div",{class:"share-link share-btn",onClick:L[4]||(L[4]=Q=>O())},[u("span",Ub,[$(d(v0))]),Hb])])])],512)]),_:1},8,["show"]))}});const jb=u("div",{class:"app_mini--dragbar-left mt_nxs no_drag pe_auto"},null,-1),Kb={key:0,class:"title-slider"},Wb={class:"app_mini--dragbar-right mt_nxs no_drag pe_auto flex_start"},Zb=ue({__name:"MiniMainHeader",props:{from:String},setup(e){const t=e,n=t.from==="UgcSeason"?gn:Ie,a=t.from==="UgcSeason"?Ms():an(),{activeItem:s,isMainPined:i,isMainMini:o,isMiniHeaderHover:c,isShowMiniBtns:r}=ie(a),l=D(1e3);let f;const v=D(0),m=D(null),g=D(null),y=D(null),E=D(!1),_=K(()=>{var T;return v.value>0&&v.value<((T=g.value)==null?void 0:T.offsetWidth)-30}),p=()=>{var T,A;E.value=((T=g.value)==null?void 0:T.offsetWidth)>((A=m.value)==null?void 0:A.offsetWidth)};se([g,s],p,{flush:"post"});const C=()=>{const T=i.value;T?Be("window/unpin"):Be("window/pin"),xe({type:"click",spm_info:"main.main.main-page.toggle-pin"},{msg:JSON.stringify({win_name:"main",is_mini:o.value,is_enter:!T})})},S=(T=!0)=>{const A=i.value;!A&&T&&(Be("window/pin"),xe({type:"click",spm_info:"main.main.main-page.toggle-pin"},{msg:JSON.stringify({win_name:"main",is_mini:o.value,is_enter:!A})}))};Ve("window/pinChange",()=>i.value=Ht("window/isPined"));class x{constructor(){this.isStoped=!0,this.isRunning=!1,this.moveTimer=null,this.waitTimer=null,this.startTimer=null,this.waitDelay=2e3,this.startDelay=2e3}move(){y.value.style.marginLeft=`${-v.value}px`,v.value++,this.moveTimer=setTimeout(()=>this.step(),20)}step(){if(this.isStoped){this.isRunning=!1;return}v.value>=g.value.offsetWidth?(v.value=0,this.waitTimer=setTimeout(()=>this.move(),this.waitDelay)):this.move()}start(){this.isRunning||(this.isRunning=!0,this.isStoped=!1,v.value=0,this.startTimer=setTimeout(()=>this.step(),this.startDelay))}stop(){clearTimeout(this.moveTimer),clearTimeout(this.waitTimer),clearTimeout(this.startTimer),this.isStoped=!0,v.value=0,y.value&&(y.value.style.marginLeft=`${-v.value}px`)}}let w=new x;se([E,s],([T])=>{T?(w.stop(),w=new x,w.start()):w.stop()},{flush:"post"});const k=()=>{n.emit("unminiSelectedPlayer"),xe({type:"click",spm_info:"main.play-detail.header.mini-eixt"},{msg:JSON.stringify({win_name:"main",is_shortcut:!1})})};return Xe(()=>{f=Ir(({width:T})=>{l.value=T,p()},!0),Ie.all.has("miniSelectedPlayerPin")||Ie.on("miniSelectedPlayerPin",S),gn.all.has("miniUgcPlayerPin")||gn.on("miniUgcPlayerPin",S)}),qe(()=>{pc(f),Ie.off("miniSelectedPlayerPin",S),gn.off("miniUgcPlayerPin",S)}),(T,A)=>(h(),J(yt,{name:"fade"},{default:ee(()=>[d(r)?(h(),b("div",{key:0,class:"app_mini--dragbar draggable flex_between",onMouseenter:A[0]||(A[0]=F=>c.value=!0),onMouseleave:A[1]||(A[1]=F=>c.value=!1)},[jb,u("div",{ref_key:"titleWrapRef",ref:m,class:ne(["app_mini--dragbar-center mt_nxs mx_sm flex_start",{"text-gradient":E.value,"text-gradient-left":d(_)}])},[u("div",{ref_key:"titleSliderRef",ref:y,class:"flex_start"},[u("div",{ref_key:"titleTextRef",ref:g,class:"title-slider pr_xxl"},z(d(s).title),513),E.value?(h(),b("div",Kb,z(d(s).title),1)):R("",!0)],512)],2),u("div",Wb,[$(d(K0),{class:ne(["app_mini_ico ico_pin mr_sm",{rotate_n45:d(i)}]),onClick:C},null,8,["class"]),$(d(p0),{class:ne(["app_mini_ico ico_full",{mr_sm:!d(It)}]),onClick:k},null,8,["class"]),d(It)?R("",!0):(h(),J(d(Kt),{key:0,class:"app_mini_ico ico_close",onClick:d(Q1)},null,8,["onClick"]))])],32)):R("",!0)]),_:1}))}});const zb=e=>(xn("data-v-60c67add"),e=e(),An(),e),qb={class:"datastatus--error p_relative"},Yb={class:"error-box p_center"},Xb=zb(()=>u("img",{class:"error-img",src:A0,alt:""},null,-1)),Jb=["textContent"],Qb=le("\u518D\u8BD5\u4E00\u6B21"),eE=ue({__name:"DataError",props:{text:{type:String,default:""},showRefresh:{type:Boolean,default:!0}},emits:["refresh"],setup(e,{emit:t}){const n=e;return(a,s)=>{const i=Pe("VButton");return h(),b("div",qb,[u("div",Yb,[Xb,n.text?(h(),b("div",{key:0,class:"error-message",textContent:z(n.text)},null,8,Jb)):R("",!0),e.showRefresh?(h(),J(i,{key:1,type:"pink",size:"large",onClick:s[0]||(s[0]=o=>t("refresh"))},{default:ee(()=>[Qb]),_:1})):R("",!0)])])}}});var tE=Je(eE,[["__scopeId","data-v-60c67add"]]);const nE={key:0,class:"app_selected--err p_cover z_index_999"},aE=u("span",{class:"gamepad-cursor","data-tp":"selectedBtn"},null,-1),sE=["data-offset"],iE={key:0,class:"load-error p_center"},oE=u("img",{class:"error-img",src:Ic,alt:""},null,-1),rE=u("p",{class:"text_center mt_lg"},"\u54CE\u5440\uFF01\u597D\u50CF\u52A0\u8F7D\u5931\u8D25\u4E86>.<",-1),lE=[oE,rE],uE={class:"flex_col items_start"},cE=["onClick"],dE={key:0},fE={key:1},vE={key:2},hE={key:3},mE={key:4},pE=u("span",{class:"gamepad-cursor-player"},null,-1),_E=ue({__name:"Selected",props:{isPlayerPage:Boolean,isSelectedPage:Boolean,isUgcSeasonPage:Boolean},setup(e){const t=e,n=D(null),a=D(null),s=D(null),i=D(null),o=D(null),c=300,r=500,l=D(!1),f=D(!1),v=D(null),m=D(0),g=D(0),y=D(ef()),E=D([]),_=D([]),p=D([]),C=D(!1),S=D(null),x=D(0),w=D(0),k=K(()=>-w.value*g.value),T=_a(),{isShowGpPlayerMenu:A}=ie(T),F=[{id:"toggleComment",text:"\u4FA7\u8FB9\u680F\uFF08\u8BC4\u8BBA\uFF09"},{id:"toggleDetails",text:"\u7B80\u4ECB"},{id:"toDetails",text:"\u8BE6\u60C5\u9875"},{id:"togglePlay",text:"\u6682\u505C"},{id:"toggleDm",text:"\u6253\u5F00/\u5173\u95ED \u5F39\u5E55"},{id:"playRatePlass",text:"\u500D\u901F +"},{id:"playRateMinus",text:"\u500D\u901F -"},{id:"toggleMute",text:"\u9759\u97F3"},{id:"volumePlass",text:"\u97F3\u91CF +"},{id:"volumeMinus",text:"\u97F3\u91CF -"},{id:"fullscreen",text:"\u5168\u5C4F"}],O=Ht("app/launchAction",{action:"getIsHightCpu"}),G=O?[0,1,2,3]:[0,1,2],X=O?4:3,H=D(G),L=K(()=>{const[I,P,te,ce]=H.value;return{[I]:0,[P]:1,[te]:2,[ce]:3}}),Q=D(1),q=D(10),j=D(!1),B={INIT:0,REFRESH:3,LOAD_MORE:4},W=ga(),{msgParent:U}=ie(W),{handlePageFadeIn:M}=Hc(".app_selected--content",!0),{initEnterTime:N,reportPv:Z,logOpenAppPage:Y}=Br({spm_id:Ui.selected,pageName:"Selected",routeName:"Selected",isCustom:!0}),oe=an(),{reportSwitchVideo:V,reportRefresh:ae}=oe,{activeItem:_e,fromItem:we,isMainMini:fe,isMiniShowLike:Ue,isMainMouseOver:ge,isMainHeaderOver:ve,isMouseActive:Ce,isShowMiniBtns:Ae,isMiniPanelHover:Ye}=ie(oe);se([_,w],([I,P])=>{_e.value=I[P]||{}},{deep:!0}),se(_e,(I,P)=>{Go(null),he.dispatchEvent(new CustomEvent("setAspect",{detail:"unaspect"})),I&&(we.value=P)}),oa(()=>{window.isMiniPlayer=fe.value});const he=window;he.selectedPlayers={},se(_,I=>{Object.keys(he.selectedPlayers).forEach(P=>{P!=="activePlayer"&&I.every(te=>String(te.cid)!==String(P))&&delete he.selectedPlayers[P]})},{deep:!0}),he.appRequestLogin=()=>jt("videoPlayer"),he.appRequestFullScreen=I=>{tf().then(()=>I())},dn(Wo,null);let nt=!1;const ct=async()=>{await Oa(100),!(!t.isSelectedPage||j.value||nt)&&(nt=!0,setTimeout(()=>nt=!1,1e3),de.emit("leaveGallery"),we.value={},l.value=!1,_.value=[],E.value=[],p.value=[],w.value=0,Q.value=1,Ne(B.REFRESH),ae())};Ie.on("refreshSelectedPage",ct);let Ft=null,Dn=null,rn=null;const Tn=()=>{clearTimeout(Ft),clearTimeout(Dn),clearTimeout(rn)},re=()=>{fe.value=!0,de.emit("leaveGallery"),pt.emit("closeMessagePanel"),vt(),Tn(),Ft=setTimeout(()=>{Be("window/miniMainWindow"),Ie.emit("miniSelectedPlayerPin",!0),It&&fe.value&&(Tl(Ae.value),Dn=setTimeout(()=>{Ae.value&&it()},1200))},50)},be=()=>{Tn(),Be("window/unminiMainWindow"),rn=setTimeout(()=>{Ie.emit("miniSelectedPlayerPin",!1)},500)};Ie.on("miniSelectedPlayer",re),Ie.on("unminiSelectedPlayer",be);const Qe=()=>{setTimeout(()=>{fe.value?(be(),xe({type:"click",spm_info:"main.play-detail.header.mini-eixt"},{msg:JSON.stringify({win_name:"main",is_shortcut:!0})})):(re(),xe({type:"click",spm_info:"main.play-detail.header.mini-enter"},{msg:JSON.stringify({win_name:"main",is_shortcut:!0})}))})};se(fe,()=>{var I,P,te;he.dispatchEvent(new CustomEvent("setAspect",{detail:"unaspect"})),(te=(P=(I=he.selectedPlayers)==null?void 0:I.activePlayer)==null?void 0:P.setState)==null||te.call(P,{[he.nano.InternalKind.DmSetting]:{noDmHover:fe.value}})},{immediate:!0}),se(Ae,()=>{It&&fe.value&&Tl(Ae.value)},{immediate:!0}),Ve("window/mainWindowMiniChange",({data:I})=>{fe.value=I,setTimeout(()=>Te())}),Ve("window/mainWindowMouseLeave",()=>ge.value=!1),Ve("window/playerWindowMiniChange",({data:I})=>{I&&fe.value&&be()});const dt=D(!1),it=()=>{nf(),dt.value=!0,ge.value=!0},ft=()=>dt.value=!1;se([dt,ge],([I,P])=>{ve.value=!I&&P});let ot=null;const qt=()=>{Ce.value=!0,fe.value&&!ge.value&&it(),clearTimeout(ot),ot=setTimeout(()=>Ce.value=!1,1e3)},Ne=async I=>{if(!j.value){j.value=!0,C.value=!1;try{const te=((await Mc(Q.value,q.value,"CLIENT_SELECTED",I)).item||[]).filter(ce=>!!ce.cid).map((ce,Re)=>(ce._location=(Q.value-1)*q.value+Re+1,ce));E.value=E.value.concat(te),Q.value++,j.value=!1}catch{j.value=!1,C.value=!0}if(l.value=!0,_.value.length<X){const P=E.value.splice(0,X-_.value.length);_.value=_.value.concat(P)}I===B.REFRESH&&V("auto",0,_.value[0])}},Yt=_s(async(I,P)=>{if(!f.value&&(E.value.length<X&&Ne(Q.value>1?B.LOAD_MORE:B.INIT),!!E.value.length)){if(f.value=!0,_e.value=_.value[w.value+1],x.value=-g.value,await Oa(c),V(I,P,_e.value),f.value=!1,await Oa(),w.value>0){const te=E.value.shift();if(_.value.push(te),_.value.length>X){const ce=_.value.shift();p.value.push(ce)}H.value.push(H.value.shift()),S.value.append(S.value.firstElementChild)}else w.value=1;x.value=0}},r),In=_s(async(I,P)=>{if(!f.value&&w.value!==0){if(f.value=!0,_e.value=_.value[w.value-1],x.value=g.value,await Oa(c),V(I,P,_e.value),f.value=!1,await Oa(),p.value.length>0){const te=p.value.pop();_.value.unshift(te);const ce=_.value.pop();E.value.unshift(ce),H.value.unshift(H.value.pop()),S.value.prepend(S.value.lastElementChild)}else w.value=0;x.value=0}},r),Te=()=>{if(!!v.value&&(m.value=v.value.offsetWidth,g.value=v.value.offsetHeight,!g.value)){const I=document.querySelector(".app_container");I&&(m.value=I.offsetWidth,g.value=I.offsetHeight)}},Ze=200;let Bt=!0,ln=0,zn=0,Dt=0;const uo=I=>{const P=Date.now();if(Bt=P-ln>Ze,ln=P,It){const te=I.deltaY>0,ce=zn>0,Re=te!==ce,et=Math.abs(I.deltaY)>Math.abs(zn);zn=I.deltaY,Bt||Re||et?(Dt++,Dt>100&&(Dt=100),Dt>2&&Ws(I.deltaY)):Dt=0}else Bt&&Ws(I.deltaY)},Ws=_s(I=>{I<0?In("roll",2):Yt("roll",1)},300,!0,!1),Zs=I=>{if(!!t.isSelectedPage&&Fa(I.target,".app_selected--item")){const P=Fa(I.target,".bpx-player-hotkey-panel");if(!Fa(I.target,".all-staff")&&!Fa(I.target,".bili-dialog-m")&&!Fa(I.target,".app_selected--cmtwrap")&&!Fa(I.target,".video-desc-wrap.ov_overlay_y")&&!P&&uo(I),!P)return I.stopPropagation(),!1}};let wa=!1,ba=!1,Ea=!1,ka=!1,qn=!1;const ts=I=>{const{target:P,key:te,ctrlKey:ce,shiftKey:Re,altKey:et,metaKey:rt}=I||{};if((P==null?void 0:P.getAttribute("contenteditable"))!=="true"&&!(["INPUT","TEXTAREA"].includes(P==null?void 0:P.tagName)&&(P==null?void 0:P.getAttribute("type"))!=="checkbox")&&!["BILI-COMMENTS","BILI-COMMENT-BOX","BILI-COMMENTS-REPLY-DETAIL","BILI-COMMENTS-REPLY-DIALOG","BILI-COMMENT-REPORT-FORM"].includes(P==null?void 0:P.tagName)&&!(ce||et||rt)&&!!t.isSelectedPage){if(["ArrowLeft","ArrowRight"].includes(te)&&Re){wo(te==="ArrowRight",v.value);return}if(["ArrowUp","ArrowDown"].includes(te)){if(Re){bo(te==="ArrowUp",v.value);return}return wa||(wa=!0,te==="ArrowUp"?In("keyboard",2):Yt("keyboard",1)),I.stopPropagation(),I.preventDefault(),!1}if(!Re){if(te==="Escape"){vt(),Ie.emit("hideComment");return}if(/^[wec]$/i.test(te)&&fe.value)return I.stopPropagation(),I.preventDefault(),!1;if(/^x$/i.test(te)){!fe.value&&!ba&&(ba=!0,Ie.emit("toggleSelectedInfo"));return}if(/^c$/i.test(te)){!fe.value&&!Ea&&(Ea=!0,Ie.emit("toggleComment"));return}if(/^v$/i.test(te)){!fe.value&&!ka&&(ka=!0,Ys());return}if(/^s$/i.test(te)){if(document.fullscreenElement)return;if(!qn){qn=!0,Qe();return}}}}},ns=I=>{if(["ArrowUp","ArrowDown"].includes(I.key)){wa=!1;return}if(/^x$/i.test(I.key)){ba=!1;return}if(/^c$/i.test(I.key)){Ea=!1;return}if(/^v$/i.test(I.key)){ka=!1;return}if(/^s$/i.test(I.key)){qn=!1;return}};Ve("window/focusChange",()=>{wa=ba=Ea=ka=qn=!1});const as=()=>{var I;return(I=he.biliPlayer)==null?void 0:I.danmaku.isOpen()},zs=()=>{var I;return(I=he.biliPlayer)==null?void 0:I.getMuted()},Ca=()=>{var I;return(I=he.biliPlayer)==null?void 0:I.isPaused()},qs=({id:I})=>{var P,te,ce,Re,et;switch(["playRatePlass","playRateMinus","volumePlass","volumeMinus"].includes(I)||(A.value=!1),I){case"toggleComment":Ie.emit("toggleComment");break;case"toggleDetails":Ie.emit("toggleSelectedInfo");break;case"toDetails":Ie.emit("viewDetails");break;case"fullscreen":document.dispatchEvent(new KeyboardEvent("keydown",{key:"f",code:"KeyF",keyCode:70,bubbles:!0,cancelable:!0})),T.flashPageCursors(It?1e3:500);break;case"togglePlay":{Ca()?(P=he.biliPlayer)==null||P.play():(te=he.biliPlayer)==null||te.pause();break}case"toggleDm":{const rt=as();rt?(ce=he.biliPlayer)==null||ce.danmaku.close():(Re=he.biliPlayer)==null||Re.danmaku.open(),xi(rt?"\u5F39\u5E55\u5DF2\u5173\u95ED":"\u5F39\u5E55\u5DF2\u6253\u5F00",v.value);break}case"playRatePlass":wo(!0);break;case"playRateMinus":wo(!1);break;case"toggleMute":{const rt=zs();(et=he.biliPlayer)==null||et.setMuted(!rt),xi(rt?"\u5DF2\u53D6\u6D88\u9759\u97F3":"\u5DF2\u9759\u97F3",v.value);break}case"volumePlass":bo(!0);break;case"volumeMinus":bo(!1);break}};ht.on("gpArrowUp",()=>{!t.isSelectedPage||In("keyboard",2)}),ht.on("gpArrowDown",()=>{!t.isSelectedPage||Yt("keyboard",1)});let Sa=null,$a=0,xa=!1;const Yn=()=>{var P,te;if(!t.isPlayerPage)return;const I=(te=(P=he.biliPlayer)==null?void 0:P.getCurrentTime)==null?void 0:te.call(P);if(I){let ce=I-5;ce<0&&(ce=0),he.biliPlayer.seek(ce)}};ht.on("gpPlayBack",Yn),ht.on("gpPlayBackContinue",()=>{!t.isPlayerPage||(clearInterval(Sa),Sa=setInterval(Yn,500))}),ht.on("gpPlayForward",()=>{var P,te;if(!t.isPlayerPage)return;const I=(te=(P=he.biliPlayer)==null?void 0:P.getCurrentTime)==null?void 0:te.call(P);if(I){const ce=he.biliPlayer.getDuration();let Re=I+5;Re>ce&&(Re=ce-1),he.biliPlayer.seek(Re)}}),ht.on("gpPlayForwardContinue",()=>{var P,te;if(!t.isPlayerPage)return;clearInterval(Sa);const I=(te=(P=he.biliPlayer)==null?void 0:P.getPlaybackRate)==null?void 0:te.call(P);wn(I)&&(xa=!0,$a=I,he.biliPlayer.setPlaybackRate(3))}),ht.on("gpPlayRestore",()=>{!t.isPlayerPage||(clearInterval(Sa),xa&&(xa=!1,he.biliPlayer.setPlaybackRate($a)))}),ht.on("gpTripleStart",()=>{!t.isPlayerPage||de.emit("playerTriple",{type:"ugc",action:"start"})}),ht.on("gpTripleCancel",()=>{!t.isPlayerPage||de.emit("playerTriple",{type:"ugc",action:"cancel"})}),ht.on("gpToggleLike",()=>{!t.isPlayerPage||W.setLike(_e.value.id)}),ht.on("gpBack",()=>{!t.isPlayerPage||fe.value&&(document.fullscreenElement?document.dispatchEvent(new KeyboardEvent("keydown",{key:"f",code:"KeyF",keyCode:70,bubbles:!0,cancelable:!0})):be())}),se(()=>t.isSelectedPage,I=>{I?(N(),Y(),E.value.length<X&&Ne(Q.value>1?B.LOAD_MORE:B.INIT),setTimeout(()=>Te())):fe.value&&setTimeout(()=>be())},{immediate:!0}),se(()=>t.isSelectedPage,I=>{I?M():Z()}),Ve("window/focusChange",({data:I})=>{t.isSelectedPage&&(I?N():Z())});let Xn=null;Ve("window/fullScreenChange",({data:I})=>{clearInterval(Xn),Xn=setInterval(()=>{(I&&document.fullscreenElement||!I&&!document.fullscreenElement)&&(clearInterval(Xn),Te())})}),Ve("window/visibleChange",({data:I})=>{It&&Ht("window/isMinimized")||(y.value=I,!I&&fe.value&&(Ht("config/getBossShortcutHide")||setTimeout(()=>be(),200)))});const Jn={dialogFollowed:n,dialogCoinOperated:a,dialogCollection:s,dialogShare:i,dialogDynShare:o},Aa=Object.keys(Jn),Qn=()=>Aa.some(I=>{var P;return(P=Jn[I])==null?void 0:P.value.isShowDialog}),Da=I=>{var P;Qn()||(I==="dialogDynShare"?o.value.show({rid:_e.value.id,type:8}):(P=Jn[I])==null||P.value.showDialog())},vt=()=>{Aa.forEach(I=>{var P,te;return(te=(P=Jn[I])==null?void 0:P.value)==null?void 0:te.closeDialog()})};Ie.on("showActionDialog",Da),Ie.on("closeActionDialog",vt),se(_e,()=>vt()),mt("hasActiveDialog",Qn);const Ys=()=>{Qn()?i.value.isShowDialog&&(i.value.copyShareLink(),i.value.closeDialog(),xe({type:"click",spm_info:"main.play-detail.share.shortcut"},{msg:JSON.stringify({win_name:"main",is_open:!1})})):(Da("dialogShare"),xe({type:"click",spm_info:"main.play-detail.share.shortcut"},{msg:JSON.stringify({win_name:"main",is_open:!0})}))},ss=I=>{if(fe.value)return I.preventDefault(),I.stopPropagation(),!1};let Xs;return Xe(()=>{Te(),Xs=Ir(({width:I,height:P})=>{Ue.value=P>=290},!0),window.addEventListener("resize",Te),document.addEventListener("wheel",Zs,!0),document.addEventListener("keydown",ts,!0),document.addEventListener("keyup",ns,!0),document.addEventListener("contextmenu",ss,!0),setTimeout(()=>U.value=v.value)}),qe(()=>{Ie.off("refreshSelectedPage",ct),Ie.off("miniSelectedPlayer",re),Ie.off("unminiSelectedPlayer",be),Ie.off("showActionDialog",Da),Ie.off("closeActionDialog",vt),pc(Xs),clearTimeout(rn),window.removeEventListener("resize",Te),document.removeEventListener("wheel",Zs,!0),document.removeEventListener("keydown",ts,!0),document.removeEventListener("keyup",ns,!0),document.removeEventListener("contextmenu",ss,!0)}),(I,P)=>{const te=Pe("v-button");return ke((h(),b("div",{class:ne(["app_selected i_page_wrapper",{"app_selected--active":d(Ae),"app_selected--deactive":!d(Ae)}])},[u("div",{class:"app_selected--content i_page_content ov_hidden p_relative",onMouseenter:it,onMousemove:qt,onMouseleave:ft},[!j.value&&!_.value.length&&l.value&&C.value?(h(),b("div",nE,[d(fe)?(h(),J(Zn,{key:0,"hide-text":"",class:"size-sm p_center"})):(h(),J(tE,{key:1,class:"mt_xxl",onRefresh:ct}))])):R("",!0),$(Zb),$(yt,{name:"fade"},{default:ee(()=>[e.isSelectedPage&&(!d(fe)||d(Ae))?(h(),b("div",{key:0,class:ne(["app_selected--btns p_center_y flex_col",{r_md:d(Ae),btns_mini:d(fe)}])},[$(te,{"active-shrink":"",class:"p_relative mb_sm",title:"\u5207\u6362\u89C6\u9891\uFF08\u9F20\u6807\u6EDA\u8F6E\u5411\u4E0A/\u952E\u76D8\u2191\uFF09",disabled:w.value===0,onClick:P[0]||(P[0]=ce=>d(In)("click",2)),onMouseenter:P[1]||(P[1]=ce=>Ye.value=!0),onMouseleave:P[2]||(P[2]=ce=>Ye.value=!1)},{default:ee(()=>[$(d(U7)),aE]),_:1},8,["disabled"]),$(te,{"active-shrink":"",class:"p_relative",title:"\u5207\u6362\u89C6\u9891\uFF08\u9F20\u6807\u6EDA\u8F6E\u5411\u4E0B/\u952E\u76D8\u2193\uFF09",onClick:P[3]||(P[3]=ce=>d(Yt)("click",1)),onMouseenter:P[4]||(P[4]=ce=>Ye.value=!0),onMouseleave:P[5]||(P[5]=ce=>Ye.value=!1)},{default:ee(()=>[$(d(W7)),u("span",{class:"gamepad-cursor","data-tp":"selectedBtn","data-offset":m.value*3/4},null,8,sE)]),_:1})],2)):R("",!0)]),_:1}),u("div",{ref_key:"selderWrapperRef",ref:v,class:ne(["app_selected--wrapper ov_hidden bd_1 bc_line_light",{no_drag:!d(fe)}])},[u("div",{class:ne(["app_selected--slider min_h_100",{is_transition:f.value}]),style:Ge({marginTop:d(k)+"px",transform:x.value?`translateY(${x.value}px)`:""})},[$($c,{loading:j.value&&!_.value.length||!l.value},null,8,["loading"]),!j.value&&!_.value.length?(h(),b("div",iE,lE)):R("",!0),u("div",{class:"app_selected--items-wrap",ref_key:"selectedItemWrapRef",ref:S},[(h(!0),b(pe,null,De(d(G),ce=>(h(),J(Kw,{key:ce,index:ce,info:_.value[d(L)[ce]],playingList:_.value,isOnSliding:f.value,width:m.value,height:g.value,activeId:d(_e).cid,isWinVisiable:y.value,isSelectedPage:e.isSelectedPage,isUgcSeasonPage:e.isUgcSeasonPage,onPlayerEnded:P[6]||(P[6]=Re=>d(Yt)("auto",1))},null,8,["index","info","playingList","isOnSliding","width","height","activeId","isWinVisiable","isSelectedPage","isUgcSeasonPage"]))),128))],512)],6)],2),$(Ww,{ref_key:"dialogFollowedRef",ref:n},null,512),$(sb,{ref_key:"dialogCoinOperatedRef",ref:a},null,512),$(Cb,{ref_key:"dialogCollectionRef",ref:s},null,512),$(Gb,{ref_key:"dialogShareRef",ref:i},null,512),$(Ec,{ref_key:"dialogDynShareRef",ref:o},null,512),d(A)&&e.isSelectedPage&&!d(fe)?(h(),b("div",{key:1,id:"gamepad-player-menu",onClick:P[8]||(P[8]=ce=>A.value=!1)},[u("div",{class:"gp-menu-wrapper",onClick:P[7]||(P[7]=Se(()=>{},["stop"]))},[u("ul",uE,[(h(),b(pe,null,De(F,ce=>u("li",{class:"p_relative",key:ce.id,onClick:Re=>qs(ce)},[ce.id==="togglePlay"?(h(),b("span",dE,z(Ca()?"\u64AD\u653E":"\u6682\u505C"),1)):ce.id==="toggleDm"?(h(),b("span",fE,z(as()?"\u5173\u95ED\u5F39\u5E55":"\u6253\u5F00\u5F39\u5E55"),1)):ce.id==="toggleMute"?(h(),b("span",vE,z(zs()?"\u53D6\u6D88\u9759\u97F3":"\u9759\u97F3"),1)):ce.id==="fullscreen"?(h(),b("span",hE,z(d(_0)()?"\u9000\u51FA\u5168\u5C4F":"\u5168\u5C4F\u64AD\u653E"),1)):(h(),b("span",mE,z(ce.text),1)),pE],8,cE)),64))])])])):R("",!0)],32)],2)),[[Fe,e.isSelectedPage]])}}});var fa={exports:{}};const gE="2.0.0",id=256,yE=Number.MAX_SAFE_INTEGER||9007199254740991,wE=16,bE=id-6,EE=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var eo={MAX_LENGTH:id,MAX_SAFE_COMPONENT_LENGTH:wE,MAX_SAFE_BUILD_LENGTH:bE,MAX_SAFE_INTEGER:yE,RELEASE_TYPES:EE,SEMVER_SPEC_VERSION:gE,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const kE=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var to=kE;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:s}=eo,i=to;t=e.exports={};const o=t.re=[],c=t.safeRe=[],r=t.src=[],l=t.t={};let f=0;const v="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",s],[v,a]],g=E=>{for(const[_,p]of m)E=E.split(`${_}*`).join(`${_}{0,${p}}`).split(`${_}+`).join(`${_}{1,${p}}`);return E},y=(E,_,p)=>{const C=g(_),S=f++;i(E,S,_),l[E]=S,r[S]=_,o[S]=new RegExp(_,p?"g":void 0),c[S]=new RegExp(C,p?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${v}*`),y("MAINVERSION",`(${r[l.NUMERICIDENTIFIER]})\\.(${r[l.NUMERICIDENTIFIER]})\\.(${r[l.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${r[l.NUMERICIDENTIFIERLOOSE]})\\.(${r[l.NUMERICIDENTIFIERLOOSE]})\\.(${r[l.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${r[l.NUMERICIDENTIFIER]}|${r[l.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${r[l.NUMERICIDENTIFIERLOOSE]}|${r[l.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${r[l.PRERELEASEIDENTIFIER]}(?:\\.${r[l.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${r[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[l.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${v}+`),y("BUILD",`(?:\\+(${r[l.BUILDIDENTIFIER]}(?:\\.${r[l.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${r[l.MAINVERSION]}${r[l.PRERELEASE]}?${r[l.BUILD]}?`),y("FULL",`^${r[l.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${r[l.MAINVERSIONLOOSE]}${r[l.PRERELEASELOOSE]}?${r[l.BUILD]}?`),y("LOOSE",`^${r[l.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${r[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${r[l.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${r[l.XRANGEIDENTIFIER]})(?:\\.(${r[l.XRANGEIDENTIFIER]})(?:\\.(${r[l.XRANGEIDENTIFIER]})(?:${r[l.PRERELEASE]})?${r[l.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${r[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[l.XRANGEIDENTIFIERLOOSE]})(?:${r[l.PRERELEASELOOSE]})?${r[l.BUILD]}?)?)?`),y("XRANGE",`^${r[l.GTLT]}\\s*${r[l.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${r[l.GTLT]}\\s*${r[l.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${r[l.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",r[l.COERCEPLAIN]+`(?:${r[l.PRERELEASE]})?(?:${r[l.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",r[l.COERCE],!0),y("COERCERTLFULL",r[l.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${r[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${r[l.LONETILDE]}${r[l.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${r[l.LONETILDE]}${r[l.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${r[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${r[l.LONECARET]}${r[l.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${r[l.LONECARET]}${r[l.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${r[l.GTLT]}\\s*(${r[l.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${r[l.GTLT]}\\s*(${r[l.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${r[l.GTLT]}\\s*(${r[l.LOOSEPLAIN]}|${r[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${r[l.XRANGEPLAIN]})\\s+-\\s+(${r[l.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${r[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[l.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(fa,fa.exports);const CE=Object.freeze({loose:!0}),SE=Object.freeze({}),$E=e=>e?typeof e!="object"?CE:e:SE;var zr=$E;const Jl=/^[0-9]+$/,od=(e,t)=>{const n=Jl.test(e),a=Jl.test(t);return n&&a&&(e=+e,t=+t),e===t?0:n&&!a?-1:a&&!n?1:e<t?-1:1},xE=(e,t)=>od(t,e);var rd={compareIdentifiers:od,rcompareIdentifiers:xE};const ai=to,{MAX_LENGTH:Ql,MAX_SAFE_INTEGER:si}=eo,{safeRe:eu,t:tu}=fa.exports,AE=zr,{compareIdentifiers:Ra}=rd;class Nt{constructor(t,n){if(n=AE(n),t instanceof Nt){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Ql)throw new TypeError(`version is longer than ${Ql} characters`);ai("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const a=t.trim().match(n.loose?eu[tu.LOOSE]:eu[tu.FULL]);if(!a)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>si||this.major<0)throw new TypeError("Invalid major version");if(this.minor>si||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>si||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<si)return i}return s}):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(ai("SemVer.compare",this.version,this.options,t),!(t instanceof Nt)){if(typeof t=="string"&&t===this.version)return 0;t=new Nt(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Nt||(t=new Nt(t,this.options)),Ra(this.major,t.major)||Ra(this.minor,t.minor)||Ra(this.patch,t.patch)}comparePre(t){if(t instanceof Nt||(t=new Nt(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const a=this.prerelease[n],s=t.prerelease[n];if(ai("prerelease compare",n,a,s),a===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(a===void 0)return-1;if(a===s)continue;return Ra(a,s)}while(++n)}compareBuild(t){t instanceof Nt||(t=new Nt(t,this.options));let n=0;do{const a=this.build[n],s=t.build[n];if(ai("prerelease compare",n,a,s),a===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(a===void 0)return-1;if(a===s)continue;return Ra(a,s)}while(++n)}inc(t,n,a){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,a),this.inc("pre",n,a);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,a),this.inc("pre",n,a);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(a)?1:0;if(!n&&a===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&a===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(n){let i=[n,s];a===!1&&(i=[n]),Ra(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}var St=Nt;const nu=St,DE=(e,t,n=!1)=>{if(e instanceof nu)return e;try{return new nu(e,t)}catch(a){if(!n)return null;throw a}};var Ya=DE;const TE=Ya,IE=(e,t)=>{const n=TE(e,t);return n?n.version:null};var PE=IE;const FE=Ya,RE=(e,t)=>{const n=FE(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var LE=RE;const au=St,BE=(e,t,n,a,s)=>{typeof n=="string"&&(s=a,a=n,n=void 0);try{return new au(e instanceof au?e.version:e,n).inc(t,a,s).version}catch{return null}};var ME=BE;const su=Ya,OE=(e,t)=>{const n=su(e,null,!0),a=su(t,null,!0),s=n.compare(a);if(s===0)return null;const i=s>0,o=i?n:a,c=i?a:n,r=!!o.prerelease.length;if(!!c.prerelease.length&&!r)return!c.patch&&!c.minor?"major":o.patch?"patch":o.minor?"minor":"major";const f=r?"pre":"";return n.major!==a.major?f+"major":n.minor!==a.minor?f+"minor":n.patch!==a.patch?f+"patch":"prerelease"};var NE=OE;const VE=St,UE=(e,t)=>new VE(e,t).major;var HE=UE;const GE=St,jE=(e,t)=>new GE(e,t).minor;var KE=jE;const WE=St,ZE=(e,t)=>new WE(e,t).patch;var zE=ZE;const qE=Ya,YE=(e,t)=>{const n=qE(e,t);return n&&n.prerelease.length?n.prerelease:null};var XE=YE;const iu=St,JE=(e,t,n)=>new iu(e,n).compare(new iu(t,n));var Zt=JE;const QE=Zt,ek=(e,t,n)=>QE(t,e,n);var tk=ek;const nk=Zt,ak=(e,t)=>nk(e,t,!0);var sk=ak;const ou=St,ik=(e,t,n)=>{const a=new ou(e,n),s=new ou(t,n);return a.compare(s)||a.compareBuild(s)};var qr=ik;const ok=qr,rk=(e,t)=>e.sort((n,a)=>ok(n,a,t));var lk=rk;const uk=qr,ck=(e,t)=>e.sort((n,a)=>uk(a,n,t));var dk=ck;const fk=Zt,vk=(e,t,n)=>fk(e,t,n)>0;var no=vk;const hk=Zt,mk=(e,t,n)=>hk(e,t,n)<0;var Yr=mk;const pk=Zt,_k=(e,t,n)=>pk(e,t,n)===0;var ld=_k;const gk=Zt,yk=(e,t,n)=>gk(e,t,n)!==0;var ud=yk;const wk=Zt,bk=(e,t,n)=>wk(e,t,n)>=0;var Xr=bk;const Ek=Zt,kk=(e,t,n)=>Ek(e,t,n)<=0;var Jr=kk;const Ck=ld,Sk=ud,$k=no,xk=Xr,Ak=Yr,Dk=Jr,Tk=(e,t,n,a)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Ck(e,n,a);case"!=":return Sk(e,n,a);case">":return $k(e,n,a);case">=":return xk(e,n,a);case"<":return Ak(e,n,a);case"<=":return Dk(e,n,a);default:throw new TypeError(`Invalid operator: ${t}`)}};var cd=Tk;const Ik=St,Pk=Ya,{safeRe:ii,t:oi}=fa.exports,Fk=(e,t)=>{if(e instanceof Ik)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let n=null;if(!t.rtl)n=e.match(t.includePrerelease?ii[oi.COERCEFULL]:ii[oi.COERCE]);else{const r=t.includePrerelease?ii[oi.COERCERTLFULL]:ii[oi.COERCERTL];let l;for(;(l=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),r.lastIndex=l.index+l[1].length+l[2].length;r.lastIndex=-1}if(n===null)return null;const a=n[2],s=n[3]||"0",i=n[4]||"0",o=t.includePrerelease&&n[5]?`-${n[5]}`:"",c=t.includePrerelease&&n[6]?`+${n[6]}`:"";return Pk(`${a}.${s}.${i}${o}${c}`,t)};var Rk=Fk,Lk=Me;Me.Node=va;Me.create=Me;function Me(e){var t=this;if(t instanceof Me||(t=new Me),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(s){t.push(s)});else if(arguments.length>0)for(var n=0,a=arguments.length;n<a;n++)t.push(arguments[n]);return t}Me.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Me.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Me.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Me.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Mk(this,arguments[e]);return this.length};Me.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Ok(this,arguments[e]);return this.length};Me.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Me.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Me.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,a=0;n!==null;a++)e.call(t,n.value,a,this),n=n.next};Me.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,a=this.length-1;n!==null;a--)e.call(t,n.value,a,this),n=n.prev};Me.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Me.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Me.prototype.map=function(e,t){t=t||this;for(var n=new Me,a=this.head;a!==null;)n.push(e.call(t,a.value,this)),a=a.next;return n};Me.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Me,a=this.tail;a!==null;)n.push(e.call(t,a.value,this)),a=a.prev;return n};Me.prototype.reduce=function(e,t){var n,a=this.head;if(arguments.length>1)n=t;else if(this.head)a=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;a!==null;s++)n=e(n,a.value,s),a=a.next;return n};Me.prototype.reduceReverse=function(e,t){var n,a=this.tail;if(arguments.length>1)n=t;else if(this.tail)a=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;a!==null;s--)n=e(n,a.value,s),a=a.prev;return n};Me.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Me.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Me.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Me;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=0,s=this.head;s!==null&&a<e;a++)s=s.next;for(;s!==null&&a<t;a++,s=s.next)n.push(s.value);return n};Me.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Me;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var a=this.length,s=this.tail;s!==null&&a>t;a--)s=s.prev;for(;s!==null&&a>e;a--,s=s.prev)n.push(s.value);return n};Me.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var a=0,s=this.head;s!==null&&a<e;a++)s=s.next;for(var i=[],a=0;s&&a<t;a++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var a=0;a<n.length;a++)s=Bk(this,s,n[a]);return i};Me.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var a=n.prev;n.prev=n.next,n.next=a}return this.head=t,this.tail=e,this};function Bk(e,t,n){var a=t===e.head?new va(n,null,t,e):new va(n,t,t.next,e);return a.next===null&&(e.tail=a),a.prev===null&&(e.head=a),e.length++,a}function Mk(e,t){e.tail=new va(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Ok(e,t){e.head=new va(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function va(e,t,n,a){if(!(this instanceof va))return new va(e,t,n,a);this.list=a,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{require("./iterator.js")(Me)}catch{}const Nk=Lk,na=Symbol("max"),hn=Symbol("length"),La=Symbol("lengthCalculator"),ys=Symbol("allowStale"),sa=Symbol("maxAge"),fn=Symbol("dispose"),ru=Symbol("noDisposeOnSet"),lt=Symbol("lruList"),Vt=Symbol("cache"),dd=Symbol("updateAgeOnGet"),So=()=>1;class Vk{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[na]=t.max||1/0;const n=t.length||So;if(this[La]=typeof n!="function"?So:n,this[ys]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[sa]=t.maxAge||0,this[fn]=t.dispose,this[ru]=t.noDisposeOnSet||!1,this[dd]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[na]=t||1/0,ls(this)}get max(){return this[na]}set allowStale(t){this[ys]=!!t}get allowStale(){return this[ys]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[sa]=t,ls(this)}get maxAge(){return this[sa]}set lengthCalculator(t){typeof t!="function"&&(t=So),t!==this[La]&&(this[La]=t,this[hn]=0,this[lt].forEach(n=>{n.length=this[La](n.value,n.key),this[hn]+=n.length})),ls(this)}get lengthCalculator(){return this[La]}get length(){return this[hn]}get itemCount(){return this[lt].length}rforEach(t,n){n=n||this;for(let a=this[lt].tail;a!==null;){const s=a.prev;lu(this,t,a,n),a=s}}forEach(t,n){n=n||this;for(let a=this[lt].head;a!==null;){const s=a.next;lu(this,t,a,n),a=s}}keys(){return this[lt].toArray().map(t=>t.key)}values(){return this[lt].toArray().map(t=>t.value)}reset(){this[fn]&&this[lt]&&this[lt].length&&this[lt].forEach(t=>this[fn](t.key,t.value)),this[Vt]=new Map,this[lt]=new Nk,this[hn]=0}dump(){return this[lt].map(t=>Ai(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[lt]}set(t,n,a){if(a=a||this[sa],a&&typeof a!="number")throw new TypeError("maxAge must be a number");const s=a?Date.now():0,i=this[La](n,t);if(this[Vt].has(t)){if(i>this[na])return Ka(this,this[Vt].get(t)),!1;const r=this[Vt].get(t).value;return this[fn]&&(this[ru]||this[fn](t,r.value)),r.now=s,r.maxAge=a,r.value=n,this[hn]+=i-r.length,r.length=i,this.get(t),ls(this),!0}const o=new Uk(t,n,i,s,a);return o.length>this[na]?(this[fn]&&this[fn](t,n),!1):(this[hn]+=o.length,this[lt].unshift(o),this[Vt].set(t,this[lt].head),ls(this),!0)}has(t){if(!this[Vt].has(t))return!1;const n=this[Vt].get(t).value;return!Ai(this,n)}get(t){return $o(this,t,!0)}peek(t){return $o(this,t,!1)}pop(){const t=this[lt].tail;return t?(Ka(this,t),t.value):null}del(t){Ka(this,this[Vt].get(t))}load(t){this.reset();const n=Date.now();for(let a=t.length-1;a>=0;a--){const s=t[a],i=s.e||0;if(i===0)this.set(s.k,s.v);else{const o=i-n;o>0&&this.set(s.k,s.v,o)}}}prune(){this[Vt].forEach((t,n)=>$o(this,n,!1))}}const $o=(e,t,n)=>{const a=e[Vt].get(t);if(a){const s=a.value;if(Ai(e,s)){if(Ka(e,a),!e[ys])return}else n&&(e[dd]&&(a.value.now=Date.now()),e[lt].unshiftNode(a));return s.value}},Ai=(e,t)=>{if(!t||!t.maxAge&&!e[sa])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[sa]&&n>e[sa]},ls=e=>{if(e[hn]>e[na])for(let t=e[lt].tail;e[hn]>e[na]&&t!==null;){const n=t.prev;Ka(e,t),t=n}},Ka=(e,t)=>{if(t){const n=t.value;e[fn]&&e[fn](n.key,n.value),e[hn]-=n.length,e[Vt].delete(n.key),e[lt].removeNode(t)}};class Uk{constructor(t,n,a,s,i){this.key=t,this.value=n,this.length=a,this.now=s,this.maxAge=i||0}}const lu=(e,t,n,a)=>{let s=n.value;Ai(e,s)&&(Ka(e,n),e[ys]||(s=void 0)),s&&t.call(a,s.value,s.key,e)};var Hk=Vk;class ws{constructor(t,n){if(n=jk(n),t instanceof ws)return t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease?t:new ws(t.raw,n);if(t instanceof Yo)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(a=>this.parseRange(a.trim())).filter(a=>a.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const a=this.set[0];if(this.set=this.set.filter(s=>!cu(s[0])),this.set.length===0)this.set=[a];else if(this.set.length>1){for(const s of this.set)if(s.length===1&&Xk(s[0])){this.set=[s];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){const a=((this.options.includePrerelease&&qk)|(this.options.loose&&Yk))+":"+t,s=uu.get(a);if(s)return s;const i=this.options.loose,o=i?xt[bt.HYPHENRANGELOOSE]:xt[bt.HYPHENRANGE];t=t.replace(o,rC(this.options.includePrerelease)),je("hyphen replace",t),t=t.replace(xt[bt.COMPARATORTRIM],Wk),je("comparator trim",t),t=t.replace(xt[bt.TILDETRIM],Zk),je("tilde trim",t),t=t.replace(xt[bt.CARETTRIM],zk),je("caret trim",t);let c=t.split(" ").map(v=>Jk(v,this.options)).join(" ").split(/\s+/).map(v=>oC(v,this.options));i&&(c=c.filter(v=>(je("loose invalid filter",v,this.options),!!v.match(xt[bt.COMPARATORLOOSE])))),je("range list",c);const r=new Map,l=c.map(v=>new Yo(v,this.options));for(const v of l){if(cu(v))return[v];r.set(v.value,v)}r.size>1&&r.has("")&&r.delete("");const f=[...r.values()];return uu.set(a,f),f}intersects(t,n){if(!(t instanceof ws))throw new TypeError("a Range is required");return this.set.some(a=>du(a,n)&&t.set.some(s=>du(s,n)&&a.every(i=>s.every(o=>i.intersects(o,n)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new Kk(t,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(lC(this.set[n],t,this.options))return!0;return!1}}var zt=ws;const Gk=Hk,uu=new Gk({max:1e3}),jk=zr,Yo=ao,je=to,Kk=St,{safeRe:xt,t:bt,comparatorTrimReplace:Wk,tildeTrimReplace:Zk,caretTrimReplace:zk}=fa.exports,{FLAG_INCLUDE_PRERELEASE:qk,FLAG_LOOSE:Yk}=eo,cu=e=>e.value==="<0.0.0-0",Xk=e=>e.value==="",du=(e,t)=>{let n=!0;const a=e.slice();let s=a.pop();for(;n&&a.length;)n=a.every(i=>s.intersects(i,t)),s=a.pop();return n},Jk=(e,t)=>(je("comp",e,t),e=tC(e,t),je("caret",e),e=Qk(e,t),je("tildes",e),e=aC(e,t),je("xrange",e),e=iC(e,t),je("stars",e),e),Et=e=>!e||e.toLowerCase()==="x"||e==="*",Qk=(e,t)=>e.trim().split(/\s+/).map(n=>eC(n,t)).join(" "),eC=(e,t)=>{const n=t.loose?xt[bt.TILDELOOSE]:xt[bt.TILDE];return e.replace(n,(a,s,i,o,c)=>{je("tilde",e,a,s,i,o,c);let r;return Et(s)?r="":Et(i)?r=`>=${s}.0.0 <${+s+1}.0.0-0`:Et(o)?r=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:c?(je("replaceTilde pr",c),r=`>=${s}.${i}.${o}-${c} <${s}.${+i+1}.0-0`):r=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,je("tilde return",r),r})},tC=(e,t)=>e.trim().split(/\s+/).map(n=>nC(n,t)).join(" "),nC=(e,t)=>{je("caret",e,t);const n=t.loose?xt[bt.CARETLOOSE]:xt[bt.CARET],a=t.includePrerelease?"-0":"";return e.replace(n,(s,i,o,c,r)=>{je("caret",e,s,i,o,c,r);let l;return Et(i)?l="":Et(o)?l=`>=${i}.0.0${a} <${+i+1}.0.0-0`:Et(c)?i==="0"?l=`>=${i}.${o}.0${a} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.0${a} <${+i+1}.0.0-0`:r?(je("replaceCaret pr",r),i==="0"?o==="0"?l=`>=${i}.${o}.${c}-${r} <${i}.${o}.${+c+1}-0`:l=`>=${i}.${o}.${c}-${r} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${c}-${r} <${+i+1}.0.0-0`):(je("no pr"),i==="0"?o==="0"?l=`>=${i}.${o}.${c}${a} <${i}.${o}.${+c+1}-0`:l=`>=${i}.${o}.${c}${a} <${i}.${+o+1}.0-0`:l=`>=${i}.${o}.${c} <${+i+1}.0.0-0`),je("caret return",l),l})},aC=(e,t)=>(je("replaceXRanges",e,t),e.split(/\s+/).map(n=>sC(n,t)).join(" ")),sC=(e,t)=>{e=e.trim();const n=t.loose?xt[bt.XRANGELOOSE]:xt[bt.XRANGE];return e.replace(n,(a,s,i,o,c,r)=>{je("xRange",e,a,s,i,o,c,r);const l=Et(i),f=l||Et(o),v=f||Et(c),m=v;return s==="="&&m&&(s=""),r=t.includePrerelease?"-0":"",l?s===">"||s==="<"?a="<0.0.0-0":a="*":s&&m?(f&&(o=0),c=0,s===">"?(s=">=",f?(i=+i+1,o=0,c=0):(o=+o+1,c=0)):s==="<="&&(s="<",f?i=+i+1:o=+o+1),s==="<"&&(r="-0"),a=`${s+i}.${o}.${c}${r}`):f?a=`>=${i}.0.0${r} <${+i+1}.0.0-0`:v&&(a=`>=${i}.${o}.0${r} <${i}.${+o+1}.0-0`),je("xRange return",a),a})},iC=(e,t)=>(je("replaceStars",e,t),e.trim().replace(xt[bt.STAR],"")),oC=(e,t)=>(je("replaceGTE0",e,t),e.trim().replace(xt[t.includePrerelease?bt.GTE0PRE:bt.GTE0],"")),rC=e=>(t,n,a,s,i,o,c,r,l,f,v,m,g)=>(Et(a)?n="":Et(s)?n=`>=${a}.0.0${e?"-0":""}`:Et(i)?n=`>=${a}.${s}.0${e?"-0":""}`:o?n=`>=${n}`:n=`>=${n}${e?"-0":""}`,Et(l)?r="":Et(f)?r=`<${+l+1}.0.0-0`:Et(v)?r=`<${l}.${+f+1}.0-0`:m?r=`<=${l}.${f}.${v}-${m}`:e?r=`<${l}.${f}.${+v+1}-0`:r=`<=${r}`,`${n} ${r}`.trim()),lC=(e,t,n)=>{for(let a=0;a<e.length;a++)if(!e[a].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let a=0;a<e.length;a++)if(je(e[a].semver),e[a].semver!==Yo.ANY&&e[a].semver.prerelease.length>0){const s=e[a].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0},us=Symbol("SemVer ANY");class Di{static get ANY(){return us}constructor(t,n){if(n=fu(n),t instanceof Di){if(t.loose===!!n.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),Ao("comparator",t,n),this.options=n,this.loose=!!n.loose,this.parse(t),this.semver===us?this.value="":this.value=this.operator+this.semver.version,Ao("comp",this)}parse(t){const n=this.options.loose?vu[hu.COMPARATORLOOSE]:vu[hu.COMPARATOR],a=t.match(n);if(!a)throw new TypeError(`Invalid comparator: ${t}`);this.operator=a[1]!==void 0?a[1]:"",this.operator==="="&&(this.operator=""),a[2]?this.semver=new mu(a[2],this.options.loose):this.semver=us}toString(){return this.value}test(t){if(Ao("Comparator.test",t,this.options.loose),this.semver===us||t===us)return!0;if(typeof t=="string")try{t=new mu(t,this.options)}catch{return!1}return xo(t,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof Di))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new pu(t.value,n).test(this.value):t.operator===""?t.value===""?!0:new pu(this.value,n).test(t.semver):(n=fu(n),n.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||xo(this.semver,"<",t.semver,n)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||xo(this.semver,">",t.semver,n)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}}var ao=Di;const fu=zr,{safeRe:vu,t:hu}=fa.exports,xo=cd,Ao=to,mu=St,pu=zt,uC=zt,cC=(e,t,n)=>{try{t=new uC(t,n)}catch{return!1}return t.test(e)};var so=cC;const dC=zt,fC=(e,t)=>new dC(e,t).set.map(n=>n.map(a=>a.value).join(" ").trim().split(" "));var vC=fC;const hC=St,mC=zt,pC=(e,t,n)=>{let a=null,s=null,i=null;try{i=new mC(t,n)}catch{return null}return e.forEach(o=>{i.test(o)&&(!a||s.compare(o)===-1)&&(a=o,s=new hC(a,n))}),a};var _C=pC;const gC=St,yC=zt,wC=(e,t,n)=>{let a=null,s=null,i=null;try{i=new yC(t,n)}catch{return null}return e.forEach(o=>{i.test(o)&&(!a||s.compare(o)===1)&&(a=o,s=new gC(a,n))}),a};var bC=wC;const Do=St,EC=zt,_u=no,kC=(e,t)=>{e=new EC(e,t);let n=new Do("0.0.0");if(e.test(n)||(n=new Do("0.0.0-0"),e.test(n)))return n;n=null;for(let a=0;a<e.set.length;++a){const s=e.set[a];let i=null;s.forEach(o=>{const c=new Do(o.semver.version);switch(o.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!i||_u(c,i))&&(i=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!n||_u(n,i))&&(n=i)}return n&&e.test(n)?n:null};var CC=kC;const SC=zt,$C=(e,t)=>{try{return new SC(e,t).range||"*"}catch{return null}};var xC=$C;const AC=St,fd=ao,{ANY:DC}=fd,TC=zt,IC=so,gu=no,yu=Yr,PC=Jr,FC=Xr,RC=(e,t,n,a)=>{e=new AC(e,a),t=new TC(t,a);let s,i,o,c,r;switch(n){case">":s=gu,i=PC,o=yu,c=">",r=">=";break;case"<":s=yu,i=FC,o=gu,c="<",r="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(IC(e,t,a))return!1;for(let l=0;l<t.set.length;++l){const f=t.set[l];let v=null,m=null;if(f.forEach(g=>{g.semver===DC&&(g=new fd(">=0.0.0")),v=v||g,m=m||g,s(g.semver,v.semver,a)?v=g:o(g.semver,m.semver,a)&&(m=g)}),v.operator===c||v.operator===r||(!m.operator||m.operator===c)&&i(e,m.semver))return!1;if(m.operator===r&&o(e,m.semver))return!1}return!0};var Qr=RC;const LC=Qr,BC=(e,t,n)=>LC(e,t,">",n);var MC=BC;const OC=Qr,NC=(e,t,n)=>OC(e,t,"<",n);var VC=NC;const wu=zt,UC=(e,t,n)=>(e=new wu(e,n),t=new wu(t,n),e.intersects(t,n));var HC=UC;const GC=so,jC=Zt;var KC=(e,t,n)=>{const a=[];let s=null,i=null;const o=e.sort((f,v)=>jC(f,v,n));for(const f of o)GC(f,t,n)?(i=f,s||(s=f)):(i&&a.push([s,i]),i=null,s=null);s&&a.push([s,null]);const c=[];for(const[f,v]of a)f===v?c.push(f):!v&&f===o[0]?c.push("*"):v?f===o[0]?c.push(`<=${v}`):c.push(`${f} - ${v}`):c.push(`>=${f}`);const r=c.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return r.length<l.length?r:t};const bu=zt,el=ao,{ANY:To}=el,cs=so,tl=Zt,WC=(e,t,n={})=>{if(e===t)return!0;e=new bu(e,n),t=new bu(t,n);let a=!1;e:for(const s of e.set){for(const i of t.set){const o=zC(s,i,n);if(a=a||o!==null,o)continue e}if(a)return!1}return!0},ZC=[new el(">=0.0.0-0")],Eu=[new el(">=0.0.0")],zC=(e,t,n)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===To){if(t.length===1&&t[0].semver===To)return!0;n.includePrerelease?e=ZC:e=Eu}if(t.length===1&&t[0].semver===To){if(n.includePrerelease)return!0;t=Eu}const a=new Set;let s,i;for(const g of e)g.operator===">"||g.operator===">="?s=ku(s,g,n):g.operator==="<"||g.operator==="<="?i=Cu(i,g,n):a.add(g.semver);if(a.size>1)return null;let o;if(s&&i){if(o=tl(s.semver,i.semver,n),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const g of a){if(s&&!cs(g,String(s),n)||i&&!cs(g,String(i),n))return null;for(const y of t)if(!cs(g,String(y),n))return!1;return!0}let c,r,l,f,v=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1;v&&v.prerelease.length===1&&i.operator==="<"&&v.prerelease[0]===0&&(v=!1);for(const g of t){if(f=f||g.operator===">"||g.operator===">=",l=l||g.operator==="<"||g.operator==="<=",s){if(m&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===m.major&&g.semver.minor===m.minor&&g.semver.patch===m.patch&&(m=!1),g.operator===">"||g.operator===">="){if(c=ku(s,g,n),c===g&&c!==s)return!1}else if(s.operator===">="&&!cs(s.semver,String(g),n))return!1}if(i){if(v&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===v.major&&g.semver.minor===v.minor&&g.semver.patch===v.patch&&(v=!1),g.operator==="<"||g.operator==="<="){if(r=Cu(i,g,n),r===g&&r!==i)return!1}else if(i.operator==="<="&&!cs(i.semver,String(g),n))return!1}if(!g.operator&&(i||s)&&o!==0)return!1}return!(s&&l&&!i&&o!==0||i&&f&&!s&&o!==0||m||v)},ku=(e,t,n)=>{if(!e)return t;const a=tl(e.semver,t.semver,n);return a>0?e:a<0||t.operator===">"&&e.operator===">="?t:e},Cu=(e,t,n)=>{if(!e)return t;const a=tl(e.semver,t.semver,n);return a<0?e:a>0||t.operator==="<"&&e.operator==="<="?t:e};var qC=WC;const Io=fa.exports,Su=eo,YC=St,$u=rd,XC=Ya,JC=PE,QC=LE,eS=ME,tS=NE,nS=HE,aS=KE,sS=zE,iS=XE,oS=Zt,rS=tk,lS=sk,uS=qr,cS=lk,dS=dk,fS=no,vS=Yr,hS=ld,mS=ud,pS=Xr,_S=Jr,gS=cd,yS=Rk,wS=ao,bS=zt,ES=so,kS=vC,CS=_C,SS=bC,$S=CC,xS=xC,AS=Qr,DS=MC,TS=VC,IS=HC,PS=KC,FS=qC;var xu={parse:XC,valid:JC,clean:QC,inc:eS,diff:tS,major:nS,minor:aS,patch:sS,prerelease:iS,compare:oS,rcompare:rS,compareLoose:lS,compareBuild:uS,sort:cS,rsort:dS,gt:fS,lt:vS,eq:hS,neq:mS,gte:pS,lte:_S,cmp:gS,coerce:yS,Comparator:wS,Range:bS,satisfies:ES,toComparators:kS,maxSatisfying:CS,minSatisfying:SS,minVersion:$S,validRange:xS,outside:AS,gtr:DS,ltr:TS,intersects:IS,simplifyRange:PS,subset:FS,SemVer:YC,re:Io.re,src:Io.src,tokens:Io.t,SEMVER_SPEC_VERSION:Su.SEMVER_SPEC_VERSION,RELEASE_TYPES:Su.RELEASE_TYPES,compareIdentifiers:$u.compareIdentifiers,rcompareIdentifiers:$u.rcompareIdentifiers};const sn=e=>(xn("data-v-84ec51ec"),e=e(),An(),e),RS={class:"root_container"},LS={class:"update_container"},BS={class:"win_btn"},MS={key:0,class:"update_dialog"},OS=sn(()=>u("p",{class:"update_dialog_title"},"\u65B0\u7248\u672C\u66F4\u65B0\u63D0\u793A",-1)),NS=["textContent"],VS=le("\u6682\u4E0D\u66F4\u65B0"),US=le("\u7ACB\u5373\u66F4\u65B0"),HS={key:1,class:"already_new"},GS=sn(()=>u("p",{class:"already_new_title"},"\u68C0\u67E5\u66F4\u65B0",-1)),jS=sn(()=>u("div",{class:"already_new_info"},"\u4F60\u5F53\u524D\u4F7F\u7528\u7684\u54D4\u54E9\u54D4\u54E9\u662F\u6700\u65B0\u7248\u672C",-1)),KS={class:"already_new_btn confirm"},WS=le("\u77E5\u9053\u4E86"),ZS={key:2,class:"downloading_progress"},zS={class:"downloading_progress_info"},qS=sn(()=>u("span",{class:"downloading_progress_tips"},"\u6B63\u5728\u4E3A\u60A8\u4E0B\u8F7D\u6700\u65B0\u7248\u54D4\u54E9\u54D4\u54E9\uFF0C\u8BF7\u7A0D\u540E...",-1)),YS={class:"downloading_progress_bar"},XS={key:0,class:"downloading_progress_btn"},JS=le("\u53D6\u6D88\u66F4\u65B0"),QS=le("\u540E\u53F0\u4E0B\u8F7D"),e$={key:3,class:"downLoaded_dialog"},t$=sn(()=>u("p",{class:"downLoaded_dialog_title"},"\u4E0B\u8F7D\u6210\u529F",-1)),n$=sn(()=>u("div",{class:"downLoaded_dialog_info"},"\u91CD\u542F\u5B89\u88C5\u4EE5\u66F4\u65B0\u5230\u6700\u65B0\u7248\u672C\u54D4\u54E9\u54D4\u54E9",-1)),a$={class:"downLoaded_dialog_btn confirm"},s$=le("\u7ACB\u5373\u5B89\u88C5"),i$={key:4,class:"already_new"},o$=sn(()=>u("p",{class:"already_new_title"},"\u66F4\u65B0\u5931\u8D25",-1)),r$=sn(()=>u("div",{class:"already_new_info"},"\u8BF7\u5230\u54D4\u54E9\u54D4\u54E9\u5B98\u7F51\u4E0B\u8F7D\u6700\u65B0\u7248\u672C",-1)),l$={class:"already_new_btn confirm"},u$=le(" \u524D\u5F80\u5B98\u7F51\u4E0B\u8F7D "),c$={key:0,class:"update_cancellation_dialog"},d$={class:"win_btn"},f$=sn(()=>u("p",{class:"update_cancellation_dialog_title"},"\u54D4\u54E9\u54D4\u54E9\u5B89\u88C5",-1)),v$=sn(()=>u("div",{class:"update_cancellation_dialog_info"},"\u54D4\u54E9\u54D4\u54E9\u6B63\u5728\u66F4\u65B0\uFF0C\u70B9\u51FB\u201C\u786E\u8BA4\u201D\u53D6\u6D88\u66F4\u65B0",-1)),h$={class:"update_cancellation_dialog_btn"},m$=le("\u53D6\u6D88"),p$=le("\u786E\u8BA4"),_$=ue({__name:"UpdateDialog",emits:["close"],setup(e,{emit:t}){const n=D("tipNew"),a=D(!1),s=D(""),i=D(!1),o=D(0),c=D(!1),r=Lt(),{appInfo:l}=ie(da());K(()=>l.value.device==="win"?l.value.is_win7or8:l.value.device==="mac"?xu.lt(l.value.sys_version,"14.0.0"):!1);const f=()=>{Be("update/downloadUpdate")},v=()=>{Be("update/quitAndInstall")},m=()=>a.value=!1,g=()=>{c.value=!0},y=()=>{c.value=!1},E=()=>{c.value=!1,a.value=!1,Be("update/cancelUpdate")},_=async C=>{var x,w,k,T,A,F;(x=C==null?void 0:C.data)!=null&&x.isAvailable?(n.value="tipNew",s.value=(w=C==null?void 0:C.data)==null?void 0:w.news):((k=C==null?void 0:C.data)==null?void 0:k.isAvailable)==!1?n.value="alreadyNew":(T=C==null?void 0:C.data)!=null&&T.iserror&&(n.value="updateError");const S=await sf();a.value=!0,typeof((A=C==null?void 0:C.data)==null?void 0:A.forceUpdate)=="string"&&xu.lte(S,(F=C==null?void 0:C.data)==null?void 0:F.forceUpdate)&&(i.value=!0,r.push({name:"HomeRecommends"}))},p=C=>{var S,x,w;(S=C==null?void 0:C.data)!=null&&S.isShowModal&&(a.value=!0),o.value=((x=C==null?void 0:C.data)==null?void 0:x.percent)||10,n.value="downloading",(w=C==null?void 0:C.data)!=null&&w.isDownloaded&&(n.value="downloaded")};return Ve("update/updateInfo",_),Ve("update/downloadProgress",p),(C,S)=>{const x=Pe("v-button");return h(),J(Os,{show:a.value,zIndex:999},{default:ee(()=>[u("div",RS,[ke(u("div",LS,[u("div",BS,[i.value?R("",!0):(h(),J(d(Kt),{key:0,class:"close_btn",onClick:m}))]),n.value=="tipNew"?(h(),b("div",MS,[OS,u("div",{class:"update_dialog_info",style:{"text-align":"left",margin:"0px 50px 24px 50px"},textContent:z(s.value)},null,8,NS),u("div",{class:ne(["update_dialog_btn",{force_update_btn:i.value}])},[i.value?R("",!0):(h(),J(x,{key:0,class:"normal_vbtn",onClick:m},{default:ee(()=>[VS]),_:1})),$(x,{class:"accent_vbtn",onClick:f},{default:ee(()=>[US]),_:1})],2)])):R("",!0),n.value=="alreadyNew"?(h(),b("div",HS,[GS,jS,u("div",KS,[$(x,{class:"accent_vbtn",onClick:m},{default:ee(()=>[WS]),_:1})])])):R("",!0),n.value=="downloading"?(h(),b("div",ZS,[u("div",zS,[qS,u("div",YS,[u("div",{class:"downloading_progress_cent",style:Ge({width:`${Math.floor(o.value)}%`})},null,4)])]),i.value?R("",!0):(h(),b("div",XS,[$(x,{class:"normal_vbtn",onClick:g},{default:ee(()=>[JS]),_:1}),$(x,{class:"accent_vbtn",onClick:m},{default:ee(()=>[QS]),_:1})]))])):R("",!0),n.value=="downloaded"?(h(),b("div",e$,[t$,n$,u("div",a$,[$(x,{class:"accent_vbtn",onClick:v},{default:ee(()=>[s$]),_:1})])])):R("",!0),n.value=="updateError"?(h(),b("div",i$,[o$,r$,u("div",l$,[$(x,{class:"accent_vbtn",onClick:S[0]||(S[0]=w=>d(af)("https://app.bilibili.com?spm_id_from=pc_desktop_app","settings.Update"))},{default:ee(()=>[u$]),_:1})])])):R("",!0)],512),[[Fe,!c.value]]),c.value?(h(),b("div",c$,[u("div",d$,[$(d(Kt),{class:"close_btn",onClick:y})]),f$,v$,u("div",h$,[$(x,{class:"normal_vbtn",onClick:y},{default:ee(()=>[m$]),_:1}),$(x,{class:"accent_vbtn",onClick:E},{default:ee(()=>[p$]),_:1})])])):R("",!0)])]),_:1},8,["show"])}}});var g$=Je(_$,[["__scopeId","data-v-84ec51ec"]]);const y$={class:"content-wrapper"},w$=u("h3",{class:"b_text text1 text_center mt_0"},"\u624B\u67C4\u7A97\u53E3\u64CD\u4F5C",-1),b$=le(" \u8FD4\u56DE\u4E0A\u4E00\u9875 "),E$=u("span",{class:"gamepad-cursor-modal"},null,-1),k$=le(" \u6253\u5F00\u64AD\u653E\u7A97\u53E3 "),C$=u("span",{class:"gamepad-cursor-modal"},null,-1),S$=le(" \u6253\u5F00\u76F4\u64AD\u95F4\u7A97\u53E3 "),$$=u("span",{class:"gamepad-cursor-modal"},null,-1),x$=le(" \u6253\u5F00\u6D4F\u89C8\u5668\u7A97\u53E3 "),A$=u("span",{class:"gamepad-cursor-modal"},null,-1),D$=u("span",{class:"gamepad-cursor-modal"},null,-1),T$=le(" \u7A97\u53E3\u5C45\u4E2D "),I$=u("span",{class:"gamepad-cursor-modal"},null,-1),P$=le(" \u5173\u95ED\u5F53\u524D\u7A97\u53E3 "),F$=u("span",{class:"gamepad-cursor-modal"},null,-1),R$=u("span",{class:"gamepad-cursor-modal cursor-modal-close"},null,-1),L$=ue({__name:"MainGamePadDialog",setup(e){const t=_a(),{isShowGpMenuModal:n,isShowGpPlayerMenu:a}=ie(t),{isAllowGoGack:s}=ie(pa()),{isMaximized:i,playerWindowVisible:o,liveRoomWindowVisible:c,isUniversalWinVisible:r}=ie(Dr()),{isMainMini:l}=ie(an()),f=nn(),v=K(()=>["Selected","UgcSeason"].includes(f.name));se([v,l,a],([S,x,w])=>{(!S||x)&&w&&(a.value=!1)});const m=()=>{n.value=!1,de.emit("pageGoGack")},g=()=>{n.value=!1,of()},y=()=>{n.value=!1,rf()},E=()=>{n.value=!1,Be("window/launchUniversalAction",{action:"focus"})},_=()=>{n.value=!1,zi()},p=()=>{n.value=!1,!i.value&&Be("system/gamepadAction",{action:"centerWindow"})},C=()=>{n.value=!1,ta()};return(S,x)=>{const w=Pe("v-button"),k=Pe("v-dialog");return h(),J(k,{visible:d(n),"onUpdate:visible":x[0]||(x[0]=T=>Ar(n)?n.value=T:null),"class-name":"i_dialog py_lg",el:d(v)?".app_selected--content":"body",width:420,"is-show-default-footer":!1,onCancel:x[1]||(x[1]=T=>n.value=!1)},{default:ee(()=>[u("div",y$,[w$,d(s)?(h(),J(w,{key:0,class:"dropdown_select--button w_100 mt_sm p_relative fs_4 text_left",onClick:m},{default:ee(()=>[b$,E$]),_:1})):R("",!0),d(o)?(h(),J(w,{key:1,class:"dropdown_select--button w_100 mt_sm p_relative fs_4 text_left",onClick:g},{default:ee(()=>[k$,C$]),_:1})):R("",!0),d(c)?(h(),J(w,{key:2,class:"dropdown_select--button w_100 mt_sm p_relative fs_4 text_left",onClick:y},{default:ee(()=>[S$,$$]),_:1})):R("",!0),d(r)?(h(),J(w,{key:3,class:"dropdown_select--button w_100 mt_sm p_relative fs_4 text_left",onClick:E},{default:ee(()=>[x$,A$]),_:1})):R("",!0),$(w,{class:"dropdown_select--button w_100 mt_sm p_relative fs_4 text_left",onClick:_},{default:ee(()=>[le(z(d(i)?"\u7A97\u53E3\u9000\u51FA\u6700\u5927\u5316":"\u7A97\u53E3\u6700\u5927\u5316")+" ",1),D$]),_:1}),$(w,{class:"dropdown_select--button w_100 mt_sm p_relative fs_4 text_left",onClick:p},{default:ee(()=>[T$,I$]),_:1}),$(w,{class:"dropdown_select--button w_100 mt_sm p_relative fs_4 text_left",onClick:C},{default:ee(()=>[P$,F$]),_:1}),R$])]),_:1},8,["visible","el"])}}});const B$=["href"],ri=ue({__name:"Link",props:{href:{type:String,default:""}},setup(e){const t=e;function n(a){a.preventDefault(),$s(t.href)}return(a,s)=>(h(),b("a",{href:e.href,class:"base_link",onClick:n},[xs(a.$slots,"default")],8,B$))}});const M$=u("div",{class:"privacy_policy_dialog--header flex_center"},[u("div",{class:"privacy_policy_dialog--title"},"\u54D4\u54E9\u54D4\u54E9\u7528\u6237\u534F\u8BAE\u4E0E\u9690\u79C1\u4FDD\u62A4")],-1),O$={class:"privacy_policy_dialog--content ov_y_auto"},N$=le(" \u611F\u8C22\u60A8\u4FE1\u4EFB\u5E76\u4F7F\u7528\u54D4\u54E9\u54D4\u54E9PC\u5BA2\u6237\u7AEF\u3002"),V$=u("br",null,null,-1),U$=le(" \u6211\u4EEC\u5C06\u6839\u636E"),H$=le("\u53CA"),G$=le("\u6765\u5E2E\u52A9\u60A8\u4E86\u89E3\u6211\u4EEC\u5728\u6536\u96C6\u3001\u4F7F\u7528\u3001\u5B58\u50A8\u3001\u548C\u5171\u4EAB\u60A8\u4E2A\u4EBA\u4FE1\u606F\u7684\u60C5\u51B5\u4EE5\u53CA\u60A8\u4EAB\u6709\u7684\u76F8\u5173\u6743\u5229\u3002 "),j$=u("br",null,null,-1),K$=u("p",null,"\u5728\u60A8\u4F7F\u7528\u54D4\u54E9\u54D4\u54E9PC\u5BA2\u6237\u7AEF\u89C6\u9891\u89C2\u770B\u670D\u52A1\u65F6\uFF0C\u6211\u4EEC\u5C06\u6536\u96C6\u60A8\u7684\u8BBE\u5907\u4FE1\u606F\u3001\u64CD\u4F5C\u65E5\u5FD7\u53CA\u6D4F\u89C8\u8BB0\u5F55\u7B49\u4FE1\u606F\u3002",-1),W$=u("p",null,"\u5728\u60A8\u4F7F\u7528\u54D4\u54E9\u54D4\u54E9PC\u5BA2\u6237\u7AEF\u56FE\u6587\u52A8\u6001\u3001\u5206\u4EAB\u3001\u8BC4\u8BBA\u3001\u6536\u85CF\u7B49\u670D\u52A1\u65F6\uFF0C\u6211\u4EEC\u9700\u8981\u83B7\u53D6\u60A8\u7684\u8BBE\u5907\u5B58\u50A8\u7B49\u4FE1\u606F\u3002",-1),Z$=u("br",null,null,-1),z$=u("p",null,"\u60A8\u53EF\u4EE5\u5728\u76F8\u5173\u9875\u9762\u8BBF\u95EE\u3001\u4FEE\u6539\u3001\u5220\u9664\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\u6216\u7BA1\u7406\u60A8\u7684\u6388\u6743\u3002",-1),q$=u("br",null,null,-1),Y$=u("p",null,"\u6211\u4EEC\u4F1A\u91C7\u7528\u884C\u4E1A\u5185\u9886\u5148\u7684\u5B89\u5168\u6280\u672F\u4FDD\u62A4\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\u3002",-1),X$=u("br",null,null,-1),J$=le(" \u60A8\u53EF\u4EE5\u901A\u8FC7\u9605\u8BFB\u5B8C\u6574\u7684"),Q$=le("\u548C"),ex=le("\u6765\u4E86\u89E3\u8BE6\u7EC6\u4FE1\u606F\u3002 "),tx=ue({__name:"PrivacyPolicyDialog",setup(e){const t=[{href:"https://www.bilibili.com/protocal/licence.html",text:"\u300A\u54D4\u54E9\u54D4\u54E9\u5F39\u5E55\u7F51\u7528\u6237\u4F7F\u7528\u534F\u8BAE\u300B"},{href:"https://www.bilibili.com/blackboard/protocal/privacy-pc-desktop.html",text:"\u300A\u54D4\u54E9\u54D4\u54E9PC\u5BA2\u6237\u7AEF\u9690\u79C1\u653F\u7B56\u300B"}],n=D(null);async function a(){await kn({content:"\u786E\u8BA4\u9000\u51FA\u54D4\u54E9\u54D4\u54E9",cancelText:"\u9000\u51FA",confirmText:"\u53D6\u6D88"})||(await Be("auth/disagreePrivacyPolicy"),Be("app/quitApp"))}async function s(){await Be("store/setData",Il,!0),Be("auth/acceptPrivacyPolicy"),n.value.hide()}return Xe(()=>{let i=Ht("store/getData",Il);typeof i!="boolean"&&(i=!1),i||n.value.show()}),(i,o)=>(h(),J(bc,{ref_key:"popupRef",ref:n,"custom-class":"privacy_policy_dialog",mask:!1,"fade-opacity":.95},{default:ee(()=>[M$,u("div",O$,[u("p",null,[N$,V$,U$,$(ri,{href:t[0].href},{default:ee(()=>[le(z(t[0].text),1)]),_:1},8,["href"]),H$,$(ri,{href:t[1].href},{default:ee(()=>[le(z(t[1].text),1)]),_:1},8,["href"]),G$]),j$,K$,W$,Z$,z$,q$,Y$,X$,u("p",null,[J$,$(ri,{href:t[0].href},{default:ee(()=>[le(z(t[0].text),1)]),_:1},8,["href"]),Q$,$(ri,{href:t[1].href},{default:ee(()=>[le(z(t[1].text),1)]),_:1},8,["href"]),ex])]),u("div",{class:"privacy_policy_dialog--footer"},[u("div",{class:"privacy_policy_dialog--cancel",onClick:a},"\u4E0D\u540C\u610F"),u("div",{class:"privacy_policy_dialog--confirm",onClick:s},"\u540C\u610F\u5E76\u7EE7\u7EED")])]),_:1},8,["fade-opacity"]))}});var nx="switch",Po=Pc+"_"+nx,ax={disabled:{type:Boolean,default:!1},value:{type:Boolean,default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""}},sx=ue({name:"VSwitch",inheritAttrs:!1,props:ax,emits:["change"],setup:function(e,t){t.slots,t.attrs;var n=t.emit,a=D(),s=D(),i=D(e.value),o=function(l){e.disabled||(i.value=!i.value,At(function(){n("change",i.value),a.value&&(a.value.checked=Boolean(i.value))}))},c=function(l){l.preventDefault(),o()},r=function(){var l=i.value?e.activeColor:e.inactiveColor;s.value.style.borderColor=l,s.value.style.backgroundColor=l};return Xe(function(){(e.activeColor||e.inactiveColor)&&r()}),se(function(){return i.value},function(){s.value&&(e.activeColor||e.inactiveColor)&&r()}),se(function(){return e.value},function(){i.value=e.value}),function(){return wt("div",{class:[Po+"--switch",i.value&&"is-checked",e.disabled&&"is-disabled"],onClick:c,"aria-checked":i.value,"aria-disabled":e.disabled},wt("input",{class:[Po+"-input"],type:"checkbox",ref:a,onChange:o}),wt("span",{class:[Po+"-core"],ref:s}))}}}),ix=Fc(sx),ox="notification",un=Pc+"_"+ox,rx={showCloseIcon:{type:Boolean,default:!0},target:{type:String,default:"body"},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},id:{type:Number,default:0},duration:{type:Number,default:0},offset:{type:Number,default:0},zIndex:{type:Number,default:3e3},titleText:{type:String,default:""},className:{type:String,default:""},onClose:Function},vd=ue({name:"VNotification",inheritAttrs:!1,props:rx,emits:["destroy"],setup:function(e,t){var n=t.slots;t.attrs;var a=t.emit,s=t.expose,i=D(!1),o,c=function(){i.value=!1};s({cancel:c});var r=function(){return wt("div",{class:un+"-group-close",onClick:c},wt("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wt("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.46967 0.46967C0.176777 0.762563 0.176777 1.23744 0.46967 1.53033L6.01041 7.07107L0.46967 12.6118C0.176777 12.9047 0.176777 13.3796 0.46967 13.6725C0.762564 13.9654 1.23744 13.9654 1.53033 13.6725L7.07107 8.13173L12.6118 13.6725C12.9047 13.9654 13.3796 13.9654 13.6725 13.6725C13.9654 13.3796 13.9654 12.9047 13.6725 12.6118L8.13173 7.07107L13.6725 1.53033C13.9654 1.23744 13.9654 0.762563 13.6725 0.46967C13.3796 0.176777 12.9047 0.176777 12.6118 0.46967L7.07107 6.01041L1.53033 0.46967C1.23744 0.176777 0.762563 0.176777 0.46967 0.46967Z",fill:"var(--text2)"})))},l=function(){var p,C,S=(p=n.prefix)===null||p===void 0?void 0:p.call(n);return S&&wt("div",{class:un+"-prefix"},(C=n.prefix)===null||C===void 0?void 0:C.call(n))},f=function(){var p,C=wt("div",{id:e.id+"",class:[un,e.className,v.value],style:g.value,onMouseleave:E,onMouseenter:_},l(),wt("div",{class:un+"-group"},e.titleText&&wt("div",{class:un+"-group-title"},e.titleText),wt("div",{class:un+"-group-content"},(p=n.default)===null||p===void 0?void 0:p.call(n)),e.showCloseIcon&&r()));return ke(C,[[Fe,i.value]])},v=K(function(){return e.position.endsWith("right")?un+"-right":un+"-left"}),m=K(function(){return e.position.startsWith("top")?"top":"bottom"}),g=K(function(){var p;return p={},p[m.value]=e.offset+"px",p.zIndex=e.zIndex,p}),y=function(){a("destroy")},E=function(){e.duration>0&&(o=setTimeout(function(){i.value=!1},e.duration))},_=function(){o&&clearTimeout(o)};return Xe(function(){E(),i.value=!0}),function(){return wt(yt,{name:un,onBeforeLeave:function(){var p;return(p=e.onClose)===null||p===void 0?void 0:p.call(e)},onAfterLeave:y},function(){return f()})}}}),Ua=globalThis&&globalThis.__assign||function(){return Ua=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ua.apply(this,arguments)},lx=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Au=0,hd=16,Ti={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},Du={zIndex:3e3,id:0,offset:0,position:"top-right",target:"body",onClose:function(e){},default:null,prefix:null},ux=function(e,t,n){var a,s;n===void 0&&(n=function(_){});var i=Ti[t],o=i.findIndex(function(_){var p;return((p=_.component)===null||p===void 0?void 0:p.props.id)===e});if(o!==-1){var c=i[o];if(!!c){n==null||n(c);var r=(a=c==null?void 0:c.el)===null||a===void 0?void 0:a.offsetHeight,l=(s=t==null?void 0:t.split("-"))===null||s===void 0?void 0:s[0];i.splice(o,1);for(var f=i.length,v=o;v<f;v++){var m=i[v],g=m.el,y=m.component,E=parseInt(g==null?void 0:g.style[l],10)-r-hd;y.props.offset=E}}}},cx=function(){var e,t;try{for(var n=lx(Object.values(Ti)),a=n.next();!a.done;a=n.next()){var s=a.value;s.forEach(function(i){var o,c,r;return(r=(c=(o=i.component)===null||o===void 0?void 0:o.exposed)===null||c===void 0?void 0:c.cancel)===null||r===void 0?void 0:r.call(c)})}}catch(i){e={error:i}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},md=function(e){e===void 0&&(e=Du),e=Ua(Ua({},Du),e);var t=e.offset,n=e.position;Ti[n].forEach(function(c){var r;t+=((r=c==null?void 0:c.el)===null||r===void 0?void 0:r.offsetHeight)+hd});var a=e.id+ ++Au,s=$(vd,Ua(Ua({},e),{zIndex:e.zIndex+ ++Au,id:a,offset:t,onClose:function(){ux(a,n,e.onClose)}}),{default:e.default,prefix:e.prefix});s.props.onDestroy=function(){Pl(null,i)};var i=document.createElement("div"),o=document.querySelector(e.target);return Pl(s,i),Ti[n].push(s),o==null||o.appendChild(i.firstElementChild),{close:function(){var c,r,l;return(l=(r=(c=s.component)===null||c===void 0?void 0:c.exposed)===null||r===void 0?void 0:r.cancel)===null||l===void 0?void 0:l.call(r)}}};md.closeAll=cx;var dx=md,fx=Fc(vd),Tu=W0(dx,"$notify");const vx={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},hx=u("path",{d:"M7.833 2.667c1.672 0 3.129.079 4.156.156 1.162.088 2.112.963 2.225 2.148a26.757 26.757 0 0 1 0 5.058c-.113 1.185-1.063 2.061-2.225 2.149a56.014 56.014 0 0 1-4.156.156c-1.67 0-3.128-.079-4.155-.156-1.162-.088-2.112-.964-2.225-2.149a26.738 26.738 0 0 1 0-5.057c.113-1.185 1.063-2.061 2.225-2.149a56.061 56.061 0 0 1 4.155-.156ZM4.525 13.75c0-.262.213-.475.475-.475h6a.475.475 0 0 1 0 .95H5a.475.475 0 0 1-.475-.475Z",fill:"#fff"},null,-1),mx=u("path",{d:"M8 11.693c.262 0 .475.213.475.475v1.5a.475.475 0 0 1-.95 0v-1.5c0-.262.213-.475.475-.475Z",fill:"#fff"},null,-1),px=[hx,mx];function _x(e,t){return h(),b("svg",vx,[...px])}var gx={render:_x};const yx={class:"app-game-notice"},wx={class:"game-notice-content flex_start w_100"},bx={class:"notice-game-icon mr_sm flex_shrink_0"},Ex={class:"notice-game-info w_100"},kx={class:"b_text mt_0 text_ellipsis"},Cx=u("p",{class:"text2 fs_5x"},"\u5DF2\u4E0B\u8F7D\u5B8C\u6210\uFF0C\u53EF\u4EE5\u3010\u6211\u7684\u6E38\u620F\u3011\u4E2D\u67E5\u770B",-1),Sx={class:"game-notice-action float_right mt_sm"},$x=le("\u67E5\u770B"),xx=u("span",null,"\u5B89\u88C5\u6E38\u620F",-1),Ax=le("\u67E5\u770B"),Dx=ue({__name:"CompleteNotice",props:{gameId:Number},emits:["action","install"],setup(e,{emit:t}){const n=e,a=D({});Be("game/getGameInfo",n.gameId).then(({data:c})=>{a.value=c||{},xe({type:"show",spm_info:"main.game-float.download-complete.0.show"},{msg:JSON.stringify({game_base_id:a.value.game_base_id})})});const s=K(()=>{var c;return lf&&!a.value.isInstalled&&((c=a.value.downloadPath)==null?void 0:c.endsWith(".exe"))}),i=()=>{t("action"),xe({type:"click",spm_info:"main.game-float.download-complete.button.click"},{msg:JSON.stringify({game_base_id:a.value.game_base_id,button_name:"view"})})},o=()=>{t("install"),xe({type:"click",spm_info:"main.game-float.download-complete.button.click"},{msg:JSON.stringify({game_base_id:a.value.game_base_id,button_name:"install"})})};return(c,r)=>(h(),b("div",yx,[u("div",wx,[u("div",bx,[a.value.icon?(h(),J(d(Za),{key:0,class:"game-icon-img",src:a.value.icon,width:46,height:46,rule:"1c"},null,8,["src"])):R("",!0)]),u("div",Ex,[u("h4",kx,z(a.value.title),1),Cx])]),u("div",Sx,[d(s)?(h(),b(pe,{key:0},[$(d(ja),{size:"small",type:"grey",onClick:i},{default:ee(()=>[$x]),_:1}),$(d(ja),{class:"ml_sm",size:"small",type:"pink",onClick:o},{default:ee(()=>[$(d(gx)),xx]),_:1})],64)):(h(),J(d(ja),{key:1,class:"px_lg",size:"small",type:"pink",onClick:i},{default:ee(()=>[Ax]),_:1}))])]))}}),Tx=u("p",{class:"b_text text2"},"\u91CD\u542F\u54D4\u54E9\u54D4\u54E9\u53EF\u4EE5\u5347\u7EA7\u5230\u65B0\u7248\u672C~",-1),Ix={class:"float_right mt_sm"},Px=le("\u73B0\u5728\u5347\u7EA7"),Fx=le("\u7A0D\u540E\u518D\u8BF4"),Rx=ue({__name:"Notification",emits:["action"],setup(e,{emit:t}){const n=()=>{Be("update/updatePatchNow"),t("action")},a=()=>{Be("update/updatePatchLater"),t("action")};return(s,i)=>(h(),b(pe,null,[Tx,u("div",Ix,[$(d(ja),{size:"small",type:"pink",class:"mr_sm",onClick:n},{default:ee(()=>[Px]),_:1}),$(d(ja),{size:"small",onClick:a},{default:ee(()=>[Fx]),_:1})])],64))}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Le=function(){return Le=Object.assign||function(t){for(var n,a=1,s=arguments.length;a<s;a++){n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Le.apply(this,arguments)};function Xo(e,t,n){if(n||arguments.length===2)for(var a=0,s=t.length,i;a<s;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}var Ke=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,tt=Object.keys,gt=Array.isArray;typeof Promise!="undefined"&&!Ke.Promise&&(Ke.Promise=Promise);function Ct(e,t){return typeof t!="object"||tt(t).forEach(function(n){e[n]=t[n]}),e}var Ds=Object.getPrototypeOf,Lx={}.hasOwnProperty;function Pt(e,t){return Lx.call(e,t)}function za(e,t){typeof t=="function"&&(t=t(Ds(e))),(typeof Reflect=="undefined"?tt:Reflect.ownKeys)(t).forEach(function(n){Sn(e,n,t[n])})}var pd=Object.defineProperty;function Sn(e,t,n,a){pd(e,t,Ct(n&&Pt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},a))}function Xa(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Sn(e.prototype,"constructor",e),{extend:za.bind(null,e.prototype)}}}}var Bx=Object.getOwnPropertyDescriptor;function nl(e,t){var n=Bx(e,t),a;return n||(a=Ds(e))&&nl(a,t)}var Mx=[].slice;function io(e,t,n){return Mx.call(e,t,n)}function _d(e,t){return t(e)}function ms(e){if(!e)throw new Error("Assertion Failed")}function gd(e){Ke.setImmediate?setImmediate(e):setTimeout(e,0)}function yd(e,t){return e.reduce(function(n,a,s){var i=t(a,s);return i&&(n[i[0]]=i[1]),n},{})}function Ox(e,t,n){try{e.apply(null,n)}catch(a){t&&t(a)}}function En(e,t){if(typeof t=="string"&&Pt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],a=0,s=t.length;a<s;++a){var i=En(e,t[a]);n.push(i)}return n}var o=t.indexOf(".");if(o!==-1){var c=e[t.substr(0,o)];return c==null?void 0:En(c,t.substr(o+1))}}function Gt(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){ms(typeof n!="string"&&"length"in n);for(var a=0,s=t.length;a<s;++a)Gt(e,t[a],n[a])}else{var i=t.indexOf(".");if(i!==-1){var o=t.substr(0,i),c=t.substr(i+1);if(c==="")n===void 0?gt(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var r=e[o];(!r||!Pt(e,o))&&(r=e[o]={}),Gt(r,c,n)}}else n===void 0?gt(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Nx(e,t){typeof t=="string"?Gt(e,t,void 0):"length"in t&&[].map.call(t,function(n){Gt(e,n,void 0)})}function wd(e){var t={};for(var n in e)Pt(e,n)&&(t[n]=e[n]);return t}var Vx=[].concat;function bd(e){return Vx.apply([],e)}var Ed="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(bd([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return Ke[e]}),Ux=Ed.map(function(e){return Ke[e]});yd(Ed,function(e){return[e,!0]});var On=null;function Ns(e){On=typeof WeakMap!="undefined"&&new WeakMap;var t=Jo(e);return On=null,t}function Jo(e){if(!e||typeof e!="object")return e;var t=On&&On.get(e);if(t)return t;if(gt(e)){t=[],On&&On.set(e,t);for(var n=0,a=e.length;n<a;++n)t.push(Jo(e[n]))}else if(Ux.indexOf(e.constructor)>=0)t=e;else{var s=Ds(e);t=s===Object.prototype?{}:Object.create(s),On&&On.set(e,t);for(var i in e)Pt(e,i)&&(t[i]=Jo(e[i]))}return t}var Hx={}.toString;function Qo(e){return Hx.call(e).slice(8,-1)}var er=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",Gx=typeof er=="symbol"?function(e){var t;return e!=null&&(t=e[er])&&t.apply(e)}:function(){return null},Na={};function _n(e){var t,n,a,s;if(arguments.length===1){if(gt(e))return e.slice();if(this===Na&&typeof e=="string")return[e];if(s=Gx(e)){for(n=[];a=s.next(),!a.done;)n.push(a.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var al=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},on=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function kd(e,t){on=e,Cd=t}var Cd=function(){return!0},jx=!new Error("").stack;function ya(){if(jx)try{throw ya.arguments,new Error}catch(e){return e}return new Error}function tr(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(Cd).map(function(a){return`
`+a}).join("")):""}var Kx=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Sd=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],sl=Kx.concat(Sd),Wx={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ja(e,t){this._e=ya(),this.name=e,this.message=t}Xa(Ja).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+tr(this._e,2))}},toString:function(){return this.name+": "+this.message}});function $d(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,a,s){return s.indexOf(n)===a}).join(`
`)}function Ii(e,t,n,a){this._e=ya(),this.failures=t,this.failedKeys=a,this.successCount=n,this.message=$d(e,t)}Xa(Ii).from(Ja);function bs(e,t){this._e=ya(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=$d(e,t)}Xa(bs).from(Ja);var il=sl.reduce(function(e,t){return e[t]=t+"Error",e},{}),Zx=Ja,$e=sl.reduce(function(e,t){var n=t+"Error";function a(s,i){this._e=ya(),this.name=n,s?typeof s=="string"?(this.message=""+s+(i?`
 `+i:""),this.inner=i||null):typeof s=="object"&&(this.message=s.name+" "+s.message,this.inner=s):(this.message=Wx[t]||n,this.inner=null)}return Xa(a).from(Zx),e[t]=a,e},{});$e.Syntax=SyntaxError;$e.Type=TypeError;$e.Range=RangeError;var Iu=Sd.reduce(function(e,t){return e[t+"Error"]=$e[t],e},{});function zx(e,t){if(!e||e instanceof Ja||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Iu[e.name])return e;var n=new Iu[e.name](t||e.message,e);return"stack"in e&&Sn(n,"stack",{get:function(){return this.inner.stack}}),n}var oo=sl.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=$e[t]),e},{});oo.ModifyError=Ii;oo.DexieError=Ja;oo.BulkError=bs;function He(){}function Vs(e){return e}function qx(e,t){return e==null||e===Vs?t:function(n){return t(e(n))}}function ha(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Yx(e,t){return e===He?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var a=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?ha(a,this.onsuccess):a),s&&(this.onerror=this.onerror?ha(s,this.onerror):s),i!==void 0?i:n}}function Xx(e,t){return e===He?t:function(){e.apply(this,arguments);var n=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ha(n,this.onsuccess):n),a&&(this.onerror=this.onerror?ha(a,this.onerror):a)}}function Jx(e,t){return e===He?t:function(n){var a=e.apply(this,arguments);Ct(n,a);var s=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?ha(s,this.onsuccess):s),i&&(this.onerror=this.onerror?ha(i,this.onerror):i),a===void 0?o===void 0?void 0:o:Ct(a,o)}}function Qx(e,t){return e===He?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function ol(e,t){return e===He?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var a=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then(function(){return t.apply(a,i)})}return t.apply(this,arguments)}}var Ts={},eA=100,tA=20,xd=100,rl=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,Ds(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Ds(t),e]}(),nr=rl[0],Pi=rl[1],ar=rl[2],Ad=Pi&&Pi.then,gi=nr&&nr.constructor,ll=!!ar,sr=!1,nA=ar?function(){ar.then(li)}:Ke.setImmediate?setImmediate.bind(null,li):Ke.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){li(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(li,0)},Is=function(e,t){ps.push([e,t]),Fi&&(nA(),Fi=!1)},ir=!0,Fi=!0,la=[],yi=[],or=null,rr=Vs,Wa={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ru,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Ru(e[0],e[1])}catch{}})}},Ee=Wa,ps=[],ua=0,wi=[];function me(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=He,this._lib=!1;var t=this._PSD=Ee;if(on&&(this._stackHolder=ya(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Ts)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ur(this,this._value);return}this._state=null,this._value=null,++t.ref,Td(this,e)}var lr={get:function(){var e=Ee,t=Ri;function n(a,s){var i=this,o=!e.global&&(e!==Ee||t!==Ri),c=o&&!$n(),r=new me(function(l,f){ul(i,new Dd(Bi(a,e,o,c),Bi(s,e,o,c),l,f,e))});return on&&Fd(r,this),r}return n.prototype=Ts,n},set:function(e){Sn(this,"then",e&&e.prototype===Ts?lr:{get:function(){return e},set:lr.set})}};za(me.prototype,{then:lr,_then:function(e,t){ul(this,new Dd(null,null,e,t,Ee))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(a){return a instanceof t?n(a):bi(a)}):this.then(null,function(a){return a&&a.name===t?n(a):bi(a)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),bi(t)})},stack:{get:function(){if(this._stack)return this._stack;try{sr=!0;var e=Pd(this,[],tA),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{sr=!1}}},timeout:function(e,t){var n=this;return e<1/0?new me(function(a,s){var i=setTimeout(function(){return s(new $e.Timeout(t))},e);n.then(a,s).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&Sn(me.prototype,Symbol.toStringTag,"Dexie.Promise");Wa.env=Rd();function Dd(e,t,n,a,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=a,this.psd=s}za(me,{all:function(){var e=_n.apply(null,arguments).map(Li);return new me(function(t,n){e.length===0&&t([]);var a=e.length;e.forEach(function(s,i){return me.resolve(s).then(function(o){e[i]=o,--a||t(e)},n)})})},resolve:function(e){if(e instanceof me)return e;if(e&&typeof e.then=="function")return new me(function(n,a){e.then(n,a)});var t=new me(Ts,!0,e);return Fd(t,or),t},reject:bi,race:function(){var e=_n.apply(null,arguments).map(Li);return new me(function(t,n){e.map(function(a){return me.resolve(a).then(t,n)})})},PSD:{get:function(){return Ee},set:function(e){return Ee=e}},totalEchoes:{get:function(){return Ri}},newPSD:jn,usePSD:es,scheduler:{get:function(){return Is},set:function(e){Is=e}},rejectionMapper:{get:function(){return rr},set:function(e){rr=e}},follow:function(e,t){return new me(function(n,a){return jn(function(s,i){var o=Ee;o.unhandleds=[],o.onunhandled=i,o.finalize=ha(function(){var c=this;sA(function(){c.unhandleds.length===0?s():i(c.unhandleds[0])})},o.finalize),e()},t,n,a)})}});gi&&(gi.allSettled&&Sn(me,"allSettled",function(){var e=_n.apply(null,arguments).map(Li);return new me(function(t){e.length===0&&t([]);var n=e.length,a=new Array(n);e.forEach(function(s,i){return me.resolve(s).then(function(o){return a[i]={status:"fulfilled",value:o}},function(o){return a[i]={status:"rejected",reason:o}}).then(function(){return--n||t(a)})})})}),gi.any&&typeof AggregateError!="undefined"&&Sn(me,"any",function(){var e=_n.apply(null,arguments).map(Li);return new me(function(t,n){e.length===0&&n(new AggregateError([]));var a=e.length,s=new Array(a);e.forEach(function(i,o){return me.resolve(i).then(function(c){return t(c)},function(c){s[o]=c,--a||n(new AggregateError(s))})})})}));function Td(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var a=e._lib&&Us();n&&typeof n.then=="function"?Td(e,function(s,i){n instanceof me?n._then(s,i):n.then(s,i)}):(e._state=!0,e._value=n,Id(e)),a&&Hs()}},ur.bind(null,e))}catch(n){ur(e,n)}}function ur(e,t){if(yi.push(t),e._state===null){var n=e._lib&&Us();t=rr(t),e._state=!1,e._value=t,on&&t!==null&&typeof t=="object"&&!t._promise&&Ox(function(){var a=nl(t,"stack");t._promise=e,Sn(t,"stack",{get:function(){return sr?a&&(a.get?a.get.apply(t):a.value):e.stack}})}),iA(e),Id(e),n&&Hs()}}function Id(e){var t=e._listeners;e._listeners=[];for(var n=0,a=t.length;n<a;++n)ul(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),ua===0&&(++ua,Is(function(){--ua===0&&cl()},[]))}function ul(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ua,Is(aA,[n,e,t])}function aA(e,t,n){try{or=t;var a,s=t._value;t._state?a=e(s):(yi.length&&(yi=[]),a=e(s),yi.indexOf(s)===-1&&oA(t)),n.resolve(a)}catch(i){n.reject(i)}finally{or=null,--ua===0&&cl(),--n.psd.ref||n.psd.finalize()}}function Pd(e,t,n){if(t.length===n)return t;var a="";if(e._state===!1){var s=e._value,i,o;s!=null?(i=s.name||"Error",o=s.message||s,a=tr(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+a)}return on&&(a=tr(e._stackHolder,2),a&&t.indexOf(a)===-1&&t.push(a),e._prev&&Pd(e._prev,t,n)),t}function Fd(e,t){var n=t?t._numPrev+1:0;n<eA&&(e._prev=t,e._numPrev=n)}function li(){Us()&&Hs()}function Us(){var e=ir;return ir=!1,Fi=!1,e}function Hs(){var e,t,n;do for(;ps.length>0;)for(e=ps,ps=[],n=e.length,t=0;t<n;++t){var a=e[t];a[0].apply(null,a[1])}while(ps.length>0);ir=!0,Fi=!0}function cl(){var e=la;la=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var t=wi.slice(0),n=t.length;n;)t[--n]()}function sA(e){function t(){e(),wi.splice(wi.indexOf(t),1)}wi.push(t),++ua,Is(function(){--ua===0&&cl()},[])}function iA(e){la.some(function(t){return t._value===e._value})||la.push(e)}function oA(e){for(var t=la.length;t;)if(la[--t]._value===e._value){la.splice(t,1);return}}function bi(e){return new me(Ts,!1,e)}function ze(e,t){var n=Ee;return function(){var a=Us(),s=Ee;try{return Kn(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{Kn(s,!1),a&&Hs()}}}var _t={awaits:0,echoes:0,id:0},rA=0,Ei=[],Fo=0,Ri=0,lA=0;function jn(e,t,n,a){var s=Ee,i=Object.create(s);i.parent=s,i.ref=0,i.global=!1,i.id=++lA;var o=Wa.env;i.env=ll?{Promise:me,PromiseProp:{value:me,configurable:!0,writable:!0},all:me.all,race:me.race,allSettled:me.allSettled,any:me.any,resolve:me.resolve,reject:me.reject,nthen:Pu(o.nthen,i),gthen:Pu(o.gthen,i)}:{},t&&Ct(i,t),++s.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=es(i,e,n,a);return i.ref===0&&i.finalize(),c}function Qa(){return _t.id||(_t.id=++rA),++_t.awaits,_t.echoes+=xd,_t.id}function $n(){return _t.awaits?(--_t.awaits===0&&(_t.id=0),_t.echoes=_t.awaits*xd,!0):!1}(""+Ad).indexOf("[native code]")===-1&&(Qa=$n=He);function Li(e){return _t.echoes&&e&&e.constructor===gi?(Qa(),e.then(function(t){return $n(),t},function(t){return $n(),at(t)})):e}function uA(e){++Ri,(!_t.echoes||--_t.echoes===0)&&(_t.echoes=_t.id=0),Ei.push(Ee),Kn(e,!0)}function cA(){var e=Ei[Ei.length-1];Ei.pop(),Kn(e,!1)}function Kn(e,t){var n=Ee;if((t?_t.echoes&&(!Fo++||e!==Ee):Fo&&(!--Fo||e!==Ee))&&Ld(t?uA.bind(null,e):cA),e!==Ee&&(Ee=e,n===Wa&&(Wa.env=Rd()),ll)){var a=Wa.env.Promise,s=e.env;Pi.then=s.nthen,a.prototype.then=s.gthen,(n.global||e.global)&&(Object.defineProperty(Ke,"Promise",s.PromiseProp),a.all=s.all,a.race=s.race,a.resolve=s.resolve,a.reject=s.reject,s.allSettled&&(a.allSettled=s.allSettled),s.any&&(a.any=s.any))}}function Rd(){var e=Ke.Promise;return ll?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Ke,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Pi.then,gthen:e.prototype.then}:{}}function es(e,t,n,a,s){var i=Ee;try{return Kn(e,!0),t(n,a,s)}finally{Kn(i,!1)}}function Ld(e){Ad.call(nr,e)}function Bi(e,t,n,a){return typeof e!="function"?e:function(){var s=Ee;n&&Qa(),Kn(t,!0);try{return e.apply(this,arguments)}finally{Kn(s,!1),a&&Ld($n)}}}function Pu(e,t){return function(n,a){return e.call(this,Bi(n,t),Bi(a,t))}}var Fu="unhandledrejection";function Ru(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var a,s={promise:t,reason:e};if(Ke.document&&document.createEvent?(a=document.createEvent("Event"),a.initEvent(Fu,!0,!0),Ct(a,s)):Ke.CustomEvent&&(a=new CustomEvent(Fu,{detail:s}),Ct(a,s)),a&&Ke.dispatchEvent&&(dispatchEvent(a),!Ke.PromiseRejectionEvent&&Ke.onunhandledrejection))try{Ke.onunhandledrejection(a)}catch{}on&&a&&!a.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var at=me.reject;function cr(e,t,n,a){if(!e.idbdb||!e._state.openComplete&&!Ee.letThrough&&!e._vip){if(e._state.openComplete)return at(new $e.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return at(new $e.DatabaseClosed);e.open().catch(He)}return e._state.dbReadyPromise.then(function(){return cr(e,t,n,a)})}else{var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===il.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return cr(e,t,n,a)})):at(i)}return s._promise(t,function(i,o){return jn(function(){return Ee.trans=s,a(i,o,s)})}).then(function(i){return s._completion.then(function(){return i})})}}var Lu="3.2.7",ia=String.fromCharCode(65535),dr=-1/0,cn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bd="String expected.",Es=[],ro=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),dA=ro,fA=ro,Md=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},lo="__dbnames",Ro="readonly",Lo="readwrite";function ma(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Od={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ui(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Ns(t),delete t[e]),t}:function(t){return t}}var vA=function(){function e(){}return e.prototype._trans=function(t,n,a){var s=this._tx||Ee.trans,i=this.name;function o(r,l,f){if(!f.schema[i])throw new $e.NotFound("Table "+i+" not part of transaction");return n(f.idbtrans,f)}var c=Us();try{return s&&s.db===this.db?s===Ee.trans?s._promise(t,o,a):jn(function(){return s._promise(t,o,a)},{trans:s,transless:Ee.transless||Ee}):cr(this.db,t,[this.name],o)}finally{c&&Hs()}},e.prototype.get=function(t,n){var a=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(s){return a.core.get({trans:s,key:t}).then(function(i){return a.hook.reading.fire(i)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(gt(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=tt(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var a=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&n.every(function(g){return v.keyPath.indexOf(g)>=0})){for(var m=0;m<n.length;++m)if(n.indexOf(v.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(v,m){return v.keyPath.length-m.keyPath.length})[0];if(a&&this.db._maxKey!==ia){var s=a.keyPath.slice(0,n.length);return this.where(s).equals(s.map(function(v){return t[v]}))}!a&&on&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function c(v,m){try{return o.cmp(v,m)===0}catch{return!1}}var r=n.reduce(function(v,m){var g=v[0],y=v[1],E=i[m],_=t[m];return[g||E,g||!E?ma(y,E&&E.multi?function(p){var C=En(p,m);return gt(C)&&C.some(function(S){return c(_,S)})}:function(p){return c(_,En(p,m))}):y]},[null,null]),l=r[0],f=r[1];return l?this.where(l.name).equals(t[l.keyPath]).filter(f):a?this.filter(f):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,gt(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(a){if(!a)return a;var s=Object.create(t.prototype);for(var i in a)if(Pt(a,i))try{s[i]=a[i]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){Ct(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var a=this,s=this.schema.primKey,i=s.auto,o=s.keyPath,c=t;return o&&i&&(c=ui(o)(t)),this._trans("readwrite",function(r){return a.core.mutate({trans:r,type:"add",keys:n!=null?[n]:null,values:[c]})}).then(function(r){return r.numFailures?me.reject(r.failures[0]):r.lastResult}).then(function(r){if(o)try{Gt(t,o,r)}catch{}return r})},e.prototype.update=function(t,n){if(typeof t=="object"&&!gt(t)){var a=En(t,this.schema.primKey.keyPath);if(a===void 0)return at(new $e.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?tt(n).forEach(function(s){Gt(t,s,n[s])}):n(t,{value:t,primKey:a})}catch{}return this.where(":id").equals(a).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var a=this,s=this.schema.primKey,i=s.auto,o=s.keyPath,c=t;return o&&i&&(c=ui(o)(t)),this._trans("readwrite",function(r){return a.core.mutate({trans:r,type:"put",values:[c],keys:n!=null?[n]:null})}).then(function(r){return r.numFailures?me.reject(r.failures[0]):r.lastResult}).then(function(r){if(o)try{Gt(t,o,r)}catch{}return r})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"delete",keys:[t]})}).then(function(a){return a.numFailures?me.reject(a.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Od})}).then(function(n){return n.numFailures?me.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(a){return n.core.getMany({keys:t,trans:a}).then(function(s){return s.map(function(i){return n.hook.reading.fire(i)})})})},e.prototype.bulkAdd=function(t,n,a){var s=this,i=Array.isArray(n)?n:void 0;a=a||(i?void 0:n);var o=a?a.allKeys:void 0;return this._trans("readwrite",function(c){var r=s.schema.primKey,l=r.auto,f=r.keyPath;if(f&&i)throw new $e.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new $e.InvalidArgument("Arguments objects and keys must have the same length");var v=t.length,m=f&&l?t.map(ui(f)):t;return s.core.mutate({trans:c,type:"add",keys:i,values:m,wantResults:o}).then(function(g){var y=g.numFailures,E=g.results,_=g.lastResult,p=g.failures,C=o?E:_;if(y===0)return C;throw new bs(s.name+".bulkAdd(): "+y+" of "+v+" operations failed",p)})})},e.prototype.bulkPut=function(t,n,a){var s=this,i=Array.isArray(n)?n:void 0;a=a||(i?void 0:n);var o=a?a.allKeys:void 0;return this._trans("readwrite",function(c){var r=s.schema.primKey,l=r.auto,f=r.keyPath;if(f&&i)throw new $e.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new $e.InvalidArgument("Arguments objects and keys must have the same length");var v=t.length,m=f&&l?t.map(ui(f)):t;return s.core.mutate({trans:c,type:"put",keys:i,values:m,wantResults:o}).then(function(g){var y=g.numFailures,E=g.results,_=g.lastResult,p=g.failures,C=o?E:_;if(y===0)return C;throw new bs(s.name+".bulkPut(): "+y+" of "+v+" operations failed",p)})})},e.prototype.bulkDelete=function(t){var n=this,a=t.length;return this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"delete",keys:t})}).then(function(s){var i=s.numFailures,o=s.lastResult,c=s.failures;if(i===0)return o;throw new bs(n.name+".bulkDelete(): "+i+" of "+a+" operations failed",c)})},e}();function Gs(e){var t={},n=function(c,r){if(r){for(var l=arguments.length,f=new Array(l-1);--l;)f[l-1]=arguments[l];return t[c].subscribe.apply(null,f),e}else if(typeof c=="string")return t[c]};n.addEventType=i;for(var a=1,s=arguments.length;a<s;++a)i(arguments[a]);return n;function i(c,r,l){if(typeof c=="object")return o(c);r||(r=Qx),l||(l=He);var f={subscribers:[],fire:l,subscribe:function(v){f.subscribers.indexOf(v)===-1&&(f.subscribers.push(v),f.fire=r(f.fire,v))},unsubscribe:function(v){f.subscribers=f.subscribers.filter(function(m){return m!==v}),f.fire=f.subscribers.reduce(r,l)}};return t[c]=n[c]=f,f}function o(c){tt(c).forEach(function(r){var l=c[r];if(gt(l))i(r,c[r][0],c[r][1]);else if(l==="asap")var f=i(r,Vs,function(){for(var m=arguments.length,g=new Array(m);m--;)g[m]=arguments[m];f.subscribers.forEach(function(y){gd(function(){y.apply(null,g)})})});else throw new $e.InvalidArgument("Invalid event config")})}}function js(e,t){return Xa(t).from({prototype:e}),t}function hA(e){return js(vA.prototype,function(n,a,s){this.db=e,this._tx=s,this.name=n,this.schema=a,this.hook=e._allTables[n]?e._allTables[n].hook:Gs(null,{creating:[Yx,He],reading:[qx,Vs],updating:[Jx,He],deleting:[Xx,He]})})}function Ba(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Bo(e,t){e.filter=ma(e.filter,t)}function Mo(e,t,n){var a=e.replayFilter;e.replayFilter=a?function(){return ma(a(),t())}:t,e.justLimit=n&&!a}function mA(e,t){e.isMatch=ma(e.isMatch,t)}function ki(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new $e.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Bu(e,t,n){var a=ki(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function ci(e,t,n,a){var s=e.replayFilter?ma(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},o=function(c,r,l){if(!s||s(r,l,function(m){return r.stop(m)},function(m){return r.fail(m)})){var f=r.primaryKey,v=""+f;v==="[object ArrayBuffer]"&&(v=""+new Uint8Array(f)),Pt(i,v)||(i[v]=!0,t(c,r,l))}};return Promise.all([e.or._iterate(o,n),Mu(Bu(e,a,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return Mu(Bu(e,a,n),ma(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Mu(e,t,n,a){var s=a?function(o,c,r){return n(a(o),c,r)}:n,i=ze(s);return e.then(function(o){if(o)return o.start(function(){var c=function(){return o.continue()};(!t||t(o,function(r){return c=r},function(r){o.stop(r),c=He},function(r){o.fail(r),c=He}))&&i(o.value,o,function(r){return c=r}),c()})})}function kt(e,t){try{var n=Ou(e),a=Ou(t);if(n!==a)return n==="Array"?1:a==="Array"?-1:n==="binary"?1:a==="binary"?-1:n==="string"?1:a==="string"?-1:n==="Date"?1:a!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return _A(Nu(e),Nu(t));case"Array":return pA(e,t)}}catch{}return NaN}function pA(e,t){for(var n=e.length,a=t.length,s=n<a?n:a,i=0;i<s;++i){var o=kt(e[i],t[i]);if(o!==0)return o}return n===a?0:n<a?-1:1}function _A(e,t){for(var n=e.length,a=t.length,s=n<a?n:a,i=0;i<s;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return n===a?0:n<a?-1:1}function Ou(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Qo(e);return n==="ArrayBuffer"?"binary":n}function Nu(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var gA=function(){function e(){}return e.prototype._read=function(t,n){var a=this._ctx;return a.error?a.table._trans(null,at.bind(null,a.error)):a.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,at.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=ma(n.algorithm,t)},e.prototype._iterate=function(t,n){return ci(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),a=Object.create(this._ctx);return t&&Ct(a,t),n._ctx=a,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(a){return ci(n,t,a,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(a){var s=n._ctx,i=s.table.core;if(Ba(s,!0))return i.count({trans:a,query:{index:ki(s,i.schema),range:s.range}}).then(function(c){return Math.min(c,s.limit)});var o=0;return ci(s,function(){return++o,!1},a,i).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var a=t.split(".").reverse(),s=a[0],i=a.length-1;function o(l,f){return f?o(l[a[f]],f-1):l[s]}var c=this._ctx.dir==="next"?1:-1;function r(l,f){var v=o(l,i),m=o(f,i);return v<m?-c:v>m?c:0}return this.toArray(function(l){return l.sort(r)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(a){var s=n._ctx;if(s.dir==="next"&&Ba(s,!0)&&s.limit>0){var i=s.valueMapper,o=ki(s,s.table.core.schema);return s.table.core.query({trans:a,limit:s.limit,values:!0,query:{index:o,range:s.range}}).then(function(r){var l=r.result;return i?l.map(i):l})}else{var c=[];return ci(s,function(r){return c.push(r)},a,s.table.core).then(function(){return c})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Ba(n)?Mo(n,function(){var a=t;return function(s,i){return a===0?!0:a===1?(--a,!1):(i(function(){s.advance(a),a=0}),!1)}}):Mo(n,function(){var a=t;return function(){return--a<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Mo(this._ctx,function(){var n=t;return function(a,s,i){return--n<=0&&s(i),n>=0}},!0),this},e.prototype.until=function(t,n){return Bo(this._ctx,function(a,s,i){return t(a.value)?(s(i),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return Bo(this._ctx,function(n){return t(n.value)}),mA(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(a,s){t(s.key,s)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(a,s){t(s.primaryKey,s)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var a=[];return this.each(function(s,i){a.push(i.key)}).then(function(){return a}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Ba(n,!0)&&n.limit>0)return this._read(function(s){var i=ki(n,n.table.core.schema);return n.table.core.query({trans:s,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(function(s){var i=s.result;return i}).then(t);n.keysOnly=!n.isMatch;var a=[];return this.each(function(s,i){a.push(i.primaryKey)}).then(function(){return a}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var a={};return Bo(this._ctx,function(s){var i=s.primaryKey.toString(),o=Pt(a,i);return a[i]=!0,!o}),this},e.prototype.modify=function(t){var n=this,a=this._ctx;return this._write(function(s){var i;if(typeof t=="function")i=t;else{var o=tt(t),c=o.length;i=function(p){for(var C=!1,S=0;S<c;++S){var x=o[S],w=t[x];En(p,x)!==w&&(Gt(p,x,w),C=!0)}return C}}var r=a.table.core,l=r.schema.primaryKey,f=l.outbound,v=l.extractKey,m=n.db._options.modifyChunkSize||200,g=[],y=0,E=[],_=function(p,C){var S=C.failures,x=C.numFailures;y+=p-x;for(var w=0,k=tt(S);w<k.length;w++){var T=k[w];g.push(S[T])}};return n.clone().primaryKeys().then(function(p){var C=function(S){var x=Math.min(m,p.length-S);return r.getMany({trans:s,keys:p.slice(S,S+x),cache:"immutable"}).then(function(w){for(var k=[],T=[],A=f?[]:null,F=[],O=0;O<x;++O){var G=w[O],X={value:Ns(G),primKey:p[S+O]};i.call(X,X.value,X)!==!1&&(X.value==null?F.push(p[S+O]):!f&&kt(v(G),v(X.value))!==0?(F.push(p[S+O]),k.push(X.value)):(T.push(X.value),f&&A.push(p[S+O])))}var H=Ba(a)&&a.limit===1/0&&(typeof t!="function"||t===Oo)&&{index:a.index,range:a.range};return Promise.resolve(k.length>0&&r.mutate({trans:s,type:"add",values:k}).then(function(L){for(var Q in L.failures)F.splice(parseInt(Q),1);_(k.length,L)})).then(function(){return(T.length>0||H&&typeof t=="object")&&r.mutate({trans:s,type:"put",keys:A,values:T,criteria:H,changeSpec:typeof t!="function"&&t}).then(function(L){return _(T.length,L)})}).then(function(){return(F.length>0||H&&t===Oo)&&r.mutate({trans:s,type:"delete",keys:F,criteria:H}).then(function(L){return _(F.length,L)})}).then(function(){return p.length>S+x&&C(S+m)})})};return C(0).then(function(){if(g.length>0)throw new Ii("Error modifying one or more objects",g,y,E);return p.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Ba(t)&&(t.isPrimKey&&!fA||n.type===3)?this._write(function(a){var s=t.table.core.schema.primaryKey,i=n;return t.table.core.count({trans:a,query:{index:s,range:i}}).then(function(o){return t.table.core.mutate({trans:a,type:"deleteRange",range:i}).then(function(c){var r=c.failures;c.lastResult,c.results;var l=c.numFailures;if(l)throw new Ii("Could not delete some values",Object.keys(r).map(function(f){return r[f]}),o-l);return o-l})})}):this.modify(Oo)},e}(),Oo=function(e,t){return t.value=null};function yA(e){return js(gA.prototype,function(n,a){this.db=e;var s=Od,i=null;if(a)try{s=a()}catch(l){i=l}var o=n._ctx,c=o.table,r=c.hook.reading.fire;this._ctx={table:c,index:o.index,isPrimKey:!o.index||c.schema.primKey.keyPath&&o.index===c.schema.primKey.name,range:s,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:r!==Vs?r:null}})}function wA(e,t){return e<t?-1:e===t?0:1}function bA(e,t){return e>t?-1:e===t?0:1}function Tt(e,t,n){var a=e instanceof Vd?new e.Collection(e):e;return a._ctx.error=n?new n(t):new TypeError(t),a}function Ma(e){return new e.Collection(e,function(){return Nd("")}).limit(0)}function EA(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function kA(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function CA(e,t,n,a,s,i){for(var o=Math.min(e.length,a.length),c=-1,r=0;r<o;++r){var l=t[r];if(l!==a[r])return s(e[r],n[r])<0?e.substr(0,r)+n[r]+n.substr(r+1):s(e[r],a[r])<0?e.substr(0,r)+a[r]+n.substr(r+1):c>=0?e.substr(0,c)+t[c]+n.substr(c+1):null;s(e[r],l)<0&&(c=r)}return o<a.length&&i==="next"?e+n.substr(e.length):o<e.length&&i==="prev"?e.substr(0,n.length):c<0?null:e.substr(0,c)+a[c]+n.substr(c+1)}function di(e,t,n,a){var s,i,o,c,r,l,f,v=n.length;if(!n.every(function(E){return typeof E=="string"}))return Tt(e,Bd);function m(E){s=EA(E),i=kA(E),o=E==="next"?wA:bA;var _=n.map(function(p){return{lower:i(p),upper:s(p)}}).sort(function(p,C){return o(p.lower,C.lower)});c=_.map(function(p){return p.upper}),r=_.map(function(p){return p.lower}),l=E,f=E==="next"?"":a}m("next");var g=new e.Collection(e,function(){return Bn(c[0],r[v-1]+a)});g._ondirectionchange=function(E){m(E)};var y=0;return g._addAlgorithm(function(E,_,p){var C=E.key;if(typeof C!="string")return!1;var S=i(C);if(t(S,r,y))return!0;for(var x=null,w=y;w<v;++w){var k=CA(C,S,c[w],r[w],o,l);k===null&&x===null?y=w+1:(x===null||o(x,k)>0)&&(x=k)}return _(x!==null?function(){E.continue(x+f)}:p),!1}),g}function Bn(e,t,n,a){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:a}}function Nd(e){return{type:1,lower:e,upper:e}}var Vd=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,a,s){a=a!==!1,s=s===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(a||s)&&!(a&&s)?Ma(this):new this.Collection(this,function(){return Bn(t,n,!a,!s)})}catch{return Tt(this,cn)}},e.prototype.equals=function(t){return t==null?Tt(this,cn):new this.Collection(this,function(){return Nd(t)})},e.prototype.above=function(t){return t==null?Tt(this,cn):new this.Collection(this,function(){return Bn(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Tt(this,cn):new this.Collection(this,function(){return Bn(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Tt(this,cn):new this.Collection(this,function(){return Bn(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Tt(this,cn):new this.Collection(this,function(){return Bn(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Tt(this,Bd):this.between(t,t+ia,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):di(this,function(n,a){return n.indexOf(a[0])===0},[t],ia)},e.prototype.equalsIgnoreCase=function(t){return di(this,function(n,a){return n===a[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=_n.apply(Na,arguments);return t.length===0?Ma(this):di(this,function(n,a){return a.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=_n.apply(Na,arguments);return t.length===0?Ma(this):di(this,function(n,a){return a.some(function(s){return n.indexOf(s)===0})},t,ia)},e.prototype.anyOf=function(){var t=this,n=_n.apply(Na,arguments),a=this._cmp;try{n.sort(a)}catch{return Tt(this,cn)}if(n.length===0)return Ma(this);var s=new this.Collection(this,function(){return Bn(n[0],n[n.length-1])});s._ondirectionchange=function(o){a=o==="next"?t._ascending:t._descending,n.sort(a)};var i=0;return s._addAlgorithm(function(o,c,r){for(var l=o.key;a(l,n[i])>0;)if(++i,i===n.length)return c(r),!1;return a(l,n[i])===0?!0:(c(function(){o.continue(n[i])}),!1)}),s},e.prototype.notEqual=function(t){return this.inAnyRange([[dr,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=_n.apply(Na,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Tt(this,cn)}var n=t.reduce(function(a,s){return a?a.concat([[a[a.length-1][1],s]]):[[dr,s]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var a=this,s=this._cmp,i=this._ascending,o=this._descending,c=this._min,r=this._max;if(t.length===0)return Ma(this);if(!t.every(function(w){return w[0]!==void 0&&w[1]!==void 0&&i(w[0],w[1])<=0}))return Tt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",$e.InvalidArgument);var l=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;function v(w,k){for(var T=0,A=w.length;T<A;++T){var F=w[T];if(s(k[0],F[1])<0&&s(k[1],F[0])>0){F[0]=c(F[0],k[0]),F[1]=r(F[1],k[1]);break}}return T===A&&w.push(k),w}var m=i;function g(w,k){return m(w[0],k[0])}var y;try{y=t.reduce(v,[]),y.sort(g)}catch{return Tt(this,cn)}var E=0,_=f?function(w){return i(w,y[E][1])>0}:function(w){return i(w,y[E][1])>=0},p=l?function(w){return o(w,y[E][0])>0}:function(w){return o(w,y[E][0])>=0};function C(w){return!_(w)&&!p(w)}var S=_,x=new this.Collection(this,function(){return Bn(y[0][0],y[y.length-1][1],!l,!f)});return x._ondirectionchange=function(w){w==="next"?(S=_,m=i):(S=p,m=o),y.sort(g)},x._addAlgorithm(function(w,k,T){for(var A=w.key;S(A);)if(++E,E===y.length)return k(T),!1;return C(A)?!0:(a._cmp(A,y[E][1])===0||a._cmp(A,y[E][0])===0||k(function(){m===i?w.continue(y[E][0]):w.continue(y[E][1])}),!1)}),x},e.prototype.startsWithAnyOf=function(){var t=_n.apply(Na,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Ma(this):this.inAnyRange(t.map(function(n){return[n,n+ia]})):Tt(this,"startsWithAnyOf() only works with strings")},e}();function SA(e){return js(Vd.prototype,function(n,a,s){this.db=e,this._ctx={table:n,index:a===":id"?null:a,or:s};var i=e._deps.indexedDB;if(!i)throw new $e.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(o,c){return i.cmp(c,o)},this._max=function(o,c){return i.cmp(o,c)>0?o:c},this._min=function(o,c){return i.cmp(o,c)<0?o:c},this._IDBKeyRange=e._deps.IDBKeyRange})}function Qt(e){return ze(function(t){return Ps(t),e(t.target.error),!1})}function Ps(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Fs="storagemutated",Nn="x-storagemutated-1",Wn=Gs(null,Fs),$A=function(){function e(){}return e.prototype._lock=function(){return ms(!Ee.global),++this._reculock,this._reculock===1&&!Ee.global&&(Ee.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ms(!Ee.global),--this._reculock===0)for(Ee.global||(Ee.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{es(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&Ee.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var a=this.db.idbdb,s=this.db._state.dbOpenError;if(ms(!this.idbtrans),!t&&!a)switch(s&&s.name){case"DatabaseClosedError":throw new $e.DatabaseClosed(s);case"MissingAPIError":throw new $e.MissingAPI(s.message,s);default:throw new $e.OpenFailed(s)}if(!this.active)throw new $e.TransactionInactive;return ms(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):a.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=ze(function(i){Ps(i),n._reject(t.error)}),t.onabort=ze(function(i){Ps(i),n.active&&n._reject(new $e.Abort(t.error)),n.active=!1,n.on("abort").fire(i)}),t.oncomplete=ze(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Wn.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,a){var s=this;if(t==="readwrite"&&this.mode!=="readwrite")return at(new $e.ReadOnly("Transaction is readonly"));if(!this.active)return at(new $e.TransactionInactive);if(this._locked())return new me(function(o,c){s._blockedFuncs.push([function(){s._promise(t,n,a).then(o,c)},Ee])});if(a)return jn(function(){var o=new me(function(c,r){s._lock();var l=n(c,r,s);l&&l.then&&l.then(c,r)});return o.finally(function(){return s._unlock()}),o._lib=!0,o});var i=new me(function(o,c){var r=n(o,c,s);r&&r.then&&r.then(o,c)});return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),a=me.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return a});else{n._waitingFor=a,n._waitingQueue=[];var s=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var i=n._waitingFor;return new me(function(o,c){a.then(function(r){return n._waitingQueue.push(ze(o.bind(null,r)))},function(r){return n._waitingQueue.push(ze(c.bind(null,r)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new $e.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(Pt(n,t))return n[t];var a=this.schema[t];if(!a)throw new $e.NotFound("Table "+t+" not part of transaction");var s=new this.db.Table(t,a,this);return s.core=this.db.core.table(t),n[t]=s,s},e}();function xA(e){return js($A.prototype,function(n,a,s,i,o){var c=this;this.db=e,this.mode=n,this.storeNames=a,this.schema=s,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Gs(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new me(function(r,l){c._resolve=r,c._reject=l}),this._completion.then(function(){c.active=!1,c.on.complete.fire()},function(r){var l=c.active;return c.active=!1,c.on.error.fire(r),c.parent?c.parent._reject(r):l&&c.idbtrans&&c.idbtrans.abort(),at(r)})})}function fr(e,t,n,a,s,i,o){return{name:e,keyPath:t,unique:n,multi:a,auto:s,compound:i,src:(n&&!o?"&":"")+(a?"*":"")+(s?"++":"")+Ud(t)}}function Ud(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Hd(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:yd(n,function(a){return[a.name,a]})}}function AA(e){return e.length===1?e[0]:e}var Rs=function(e){try{return e.only([[]]),Rs=function(){return[[]]},[[]]}catch{return Rs=function(){return ia},ia}};function vr(e){return e==null?function(){}:typeof e=="string"?DA(e):function(t){return En(t,e)}}function DA(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return En(n,e)}}function Vu(e){return[].slice.call(e)}var TA=0;function ks(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function IA(e,t,n){function a(v,m){var g=Vu(v.objectStoreNames);return{schema:{name:v.name,tables:g.map(function(y){return m.objectStore(y)}).map(function(y){var E=y.keyPath,_=y.autoIncrement,p=gt(E),C=E==null,S={},x={name:y.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C,compound:p,keyPath:E,autoIncrement:_,unique:!0,extractKey:vr(E)},indexes:Vu(y.indexNames).map(function(w){return y.index(w)}).map(function(w){var k=w.name,T=w.unique,A=w.multiEntry,F=w.keyPath,O=gt(F),G={name:k,compound:O,keyPath:F,unique:T,multiEntry:A,extractKey:vr(F)};return S[ks(F)]=G,G}),getIndexByKeyPath:function(w){return S[ks(w)]}};return S[":id"]=x.primaryKey,E!=null&&(S[ks(E)]=x.primaryKey),x})},hasGetAll:g.length>0&&"getAll"in m.objectStore(g[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function s(v){if(v.type===3)return null;if(v.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var m=v.lower,g=v.upper,y=v.lowerOpen,E=v.upperOpen,_=m===void 0?g===void 0?null:t.upperBound(g,!!E):g===void 0?t.lowerBound(m,!!y):t.bound(m,g,!!y,!!E);return _}function i(v){var m=v.name;function g(_){var p=_.trans,C=_.type,S=_.keys,x=_.values,w=_.range;return new Promise(function(k,T){k=ze(k);var A=p.objectStore(m),F=A.keyPath==null,O=C==="put"||C==="add";if(!O&&C!=="delete"&&C!=="deleteRange")throw new Error("Invalid operation type: "+C);var G=(S||x||{length:1}).length;if(S&&x&&S.length!==x.length)throw new Error("Given keys array must have same length as given values array.");if(G===0)return k({numFailures:0,failures:{},results:[],lastResult:void 0});var X,H=[],L=[],Q=0,q=function(N){++Q,Ps(N)};if(C==="deleteRange"){if(w.type===4)return k({numFailures:Q,failures:L,results:[],lastResult:void 0});w.type===3?H.push(X=A.clear()):H.push(X=A.delete(s(w)))}else{var j=O?F?[x,S]:[x,null]:[S,null],B=j[0],W=j[1];if(O)for(var U=0;U<G;++U)H.push(X=W&&W[U]!==void 0?A[C](B[U],W[U]):A[C](B[U])),X.onerror=q;else for(var U=0;U<G;++U)H.push(X=A[C](B[U])),X.onerror=q}var M=function(N){var Z=N.target.result;H.forEach(function(Y,oe){return Y.error!=null&&(L[oe]=Y.error)}),k({numFailures:Q,failures:L,results:C==="delete"?S:H.map(function(Y){return Y.result}),lastResult:Z})};X.onerror=function(N){q(N),M(N)},X.onsuccess=M})}function y(_){var p=_.trans,C=_.values,S=_.query,x=_.reverse,w=_.unique;return new Promise(function(k,T){k=ze(k);var A=S.index,F=S.range,O=p.objectStore(m),G=A.isPrimaryKey?O:O.index(A.name),X=x?w?"prevunique":"prev":w?"nextunique":"next",H=C||!("openKeyCursor"in G)?G.openCursor(s(F),X):G.openKeyCursor(s(F),X);H.onerror=Qt(T),H.onsuccess=ze(function(L){var Q=H.result;if(!Q){k(null);return}Q.___id=++TA,Q.done=!1;var q=Q.continue.bind(Q),j=Q.continuePrimaryKey;j&&(j=j.bind(Q));var B=Q.advance.bind(Q),W=function(){throw new Error("Cursor not started")},U=function(){throw new Error("Cursor not stopped")};Q.trans=p,Q.stop=Q.continue=Q.continuePrimaryKey=Q.advance=W,Q.fail=ze(T),Q.next=function(){var M=this,N=1;return this.start(function(){return N--?M.continue():M.stop()}).then(function(){return M})},Q.start=function(M){var N=new Promise(function(Y,oe){Y=ze(Y),H.onerror=Qt(oe),Q.fail=oe,Q.stop=function(V){Q.stop=Q.continue=Q.continuePrimaryKey=Q.advance=U,Y(V)}}),Z=function(){if(H.result)try{M()}catch(Y){Q.fail(Y)}else Q.done=!0,Q.start=function(){throw new Error("Cursor behind last entry")},Q.stop()};return H.onsuccess=ze(function(Y){H.onsuccess=Z,Z()}),Q.continue=q,Q.continuePrimaryKey=j,Q.advance=B,Z(),N},k(Q)},T)})}function E(_){return function(p){return new Promise(function(C,S){C=ze(C);var x=p.trans,w=p.values,k=p.limit,T=p.query,A=k===1/0?void 0:k,F=T.index,O=T.range,G=x.objectStore(m),X=F.isPrimaryKey?G:G.index(F.name),H=s(O);if(k===0)return C({result:[]});if(_){var L=w?X.getAll(H,A):X.getAllKeys(H,A);L.onsuccess=function(B){return C({result:B.target.result})},L.onerror=Qt(S)}else{var Q=0,q=w||!("openKeyCursor"in X)?X.openCursor(H):X.openKeyCursor(H),j=[];q.onsuccess=function(B){var W=q.result;if(!W)return C({result:j});if(j.push(w?W.value:W.primaryKey),++Q===k)return C({result:j});W.continue()},q.onerror=Qt(S)}})}}return{name:m,schema:v,mutate:g,getMany:function(_){var p=_.trans,C=_.keys;return new Promise(function(S,x){S=ze(S);for(var w=p.objectStore(m),k=C.length,T=new Array(k),A=0,F=0,O,G=function(Q){var q=Q.target;(T[q._pos]=q.result)!=null,++F===A&&S(T)},X=Qt(x),H=0;H<k;++H){var L=C[H];L!=null&&(O=w.get(C[H]),O._pos=H,O.onsuccess=G,O.onerror=X,++A)}A===0&&S(T)})},get:function(_){var p=_.trans,C=_.key;return new Promise(function(S,x){S=ze(S);var w=p.objectStore(m),k=w.get(C);k.onsuccess=function(T){return S(T.target.result)},k.onerror=Qt(x)})},query:E(r),openCursor:y,count:function(_){var p=_.query,C=_.trans,S=p.index,x=p.range;return new Promise(function(w,k){var T=C.objectStore(m),A=S.isPrimaryKey?T:T.index(S.name),F=s(x),O=F?A.count(F):A.count();O.onsuccess=ze(function(G){return w(G.target.result)}),O.onerror=Qt(k)})}}}var o=a(e,n),c=o.schema,r=o.hasGetAll,l=c.tables.map(function(v){return i(v)}),f={};return l.forEach(function(v){return f[v.name]=v}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(v){var m=f[v];if(!m)throw new Error("Table '"+v+"' not found");return f[v]},MIN_KEY:-1/0,MAX_KEY:Rs(t),schema:c}}function PA(e,t){return t.reduce(function(n,a){var s=a.create;return Le(Le({},n),s(n))},e)}function FA(e,t,n,a){var s=n.IDBKeyRange;n.indexedDB;var i=PA(IA(t,s,a),e.dbcore);return{dbcore:i}}function dl(e,t){var n=e._novip,a=t.db,s=FA(n._middlewares,a,n._deps,t);n.core=s.dbcore,n.tables.forEach(function(i){var o=i.name;n.core.schema.tables.some(function(c){return c.name===o})&&(i.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=i.core))})}function Mi(e,t,n,a){var s=e._novip;n.forEach(function(i){var o=a[i];t.forEach(function(c){var r=nl(c,i);(!r||"value"in r&&r.value===void 0)&&(c===s.Transaction.prototype||c instanceof s.Transaction?Sn(c,i,{get:function(){return this.table(i)},set:function(l){pd(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):c[i]=new s.Table(i,o))})})}function hr(e,t){var n=e._novip;t.forEach(function(a){for(var s in a)a[s]instanceof n.Table&&delete a[s]})}function RA(e,t){return e._cfg.version-t._cfg.version}function LA(e,t,n,a){var s=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,s);i.create(n),i._completion.catch(a);var o=i._reject.bind(i),c=Ee.transless||Ee;jn(function(){Ee.trans=i,Ee.transless=c,t===0?(tt(s).forEach(function(r){fl(n,r,s[r].primKey,s[r].indexes)}),dl(e,n),me.follow(function(){return e.on.populate.fire(i)}).catch(o)):BA(e,t,i,n).catch(o)})}function BA(e,t,n,a){var s=e._novip,i=[],o=s._versions,c=s._dbSchema=vl(s,s.idbdb,a),r=!1,l=o.filter(function(v){return v._cfg.version>=t});l.forEach(function(v){i.push(function(){var m=c,g=v._cfg.dbschema;pr(s,m,a),pr(s,g,a),c=s._dbSchema=g;var y=Gd(m,g);y.add.forEach(function(x){fl(a,x[0],x[1].primKey,x[1].indexes)}),y.change.forEach(function(x){if(x.recreate)throw new $e.Upgrade("Not yet support for changing primary key");var w=a.objectStore(x.name);x.add.forEach(function(k){return mr(w,k)}),x.change.forEach(function(k){w.deleteIndex(k.name),mr(w,k)}),x.del.forEach(function(k){return w.deleteIndex(k)})});var E=v._cfg.contentUpgrade;if(E&&v._cfg.version>t){dl(s,a),n._memoizedTables={},r=!0;var _=wd(g);y.del.forEach(function(x){_[x]=m[x]}),hr(s,[s.Transaction.prototype]),Mi(s,[s.Transaction.prototype],tt(_),_),n.schema=_;var p=al(E);p&&Qa();var C,S=me.follow(function(){if(C=E(n),C&&p){var x=$n.bind(null,null);C.then(x,x)}});return C&&typeof C.then=="function"?me.resolve(C):S.then(function(){return C})}}),i.push(function(m){if(!r||!dA){var g=v._cfg.dbschema;OA(g,m)}hr(s,[s.Transaction.prototype]),Mi(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),n.schema=s._dbSchema})});function f(){return i.length?me.resolve(i.shift()(n.idbtrans)).then(f):me.resolve()}return f().then(function(){MA(c,a)})}function Gd(e,t){var n={del:[],add:[],change:[]},a;for(a in e)t[a]||n.del.push(a);for(a in t){var s=e[a],i=t[a];if(!s)n.add.push([a,i]);else{var o={name:a,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||s.primKey.auto!==i.primKey.auto&&!ro)o.recreate=!0,n.change.push(o);else{var c=s.idxByName,r=i.idxByName,l=void 0;for(l in c)r[l]||o.del.push(l);for(l in r){var f=c[l],v=r[l];f?f.src!==v.src&&o.change.push(v):o.add.push(v)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function fl(e,t,n,a){var s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return a.forEach(function(i){return mr(s,i)}),s}function MA(e,t){tt(e).forEach(function(n){t.db.objectStoreNames.contains(n)||fl(t,n,e[n].primKey,e[n].indexes)})}function OA(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function mr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function vl(e,t,n){var a={},s=io(t.objectStoreNames,0);return s.forEach(function(i){for(var o=n.objectStore(i),c=o.keyPath,r=fr(Ud(c),c||"",!1,!1,!!o.autoIncrement,c&&typeof c!="string",!0),l=[],f=0;f<o.indexNames.length;++f){var v=o.index(o.indexNames[f]);c=v.keyPath;var m=fr(v.name,c,!!v.unique,!!v.multiEntry,!1,c&&typeof c!="string",!1);l.push(m)}a[i]=Hd(i,r,l)}),a}function NA(e,t,n){var a=e._novip;a.verno=t.version/10;var s=a._dbSchema=vl(a,t,n);a._storeNames=io(t.objectStoreNames,0),Mi(a,[a._allTables],tt(s),s)}function VA(e,t){var n=vl(e,e.idbdb,t),a=Gd(n,e._dbSchema);return!(a.add.length||a.change.some(function(s){return s.add.length||s.change.length}))}function pr(e,t,n){for(var a=e._novip,s=n.db.objectStoreNames,i=0;i<s.length;++i){var o=s[i],c=n.objectStore(o);a._hasGetAll="getAll"in c;for(var r=0;r<c.indexNames.length;++r){var l=c.indexNames[r],f=c.index(l).keyPath,v=typeof f=="string"?f:"["+io(f).join("+")+"]";if(t[o]){var m=t[o].idxByName[v];m&&(m.name=l,delete t[o].idxByName[v],t[o].idxByName[l]=m)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ke.WorkerGlobalScope&&Ke instanceof Ke.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function UA(e){return e.split(",").map(function(t,n){t=t.trim();var a=t.replace(/([&*]|\+\+)/g,""),s=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return fr(a,s||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),gt(s),n===0)})}var HA=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){tt(t).forEach(function(a){if(t[a]!==null){var s=UA(t[a]),i=s.shift();if(i.multi)throw new $e.Schema("Primary key cannot be multi-valued");s.forEach(function(o){if(o.auto)throw new $e.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new $e.Schema("Index must have a name and cannot be an empty string")}),n[a]=Hd(a,i,s)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?Ct(this._cfg.storesSource,t):t;var a=n._versions,s={},i={};return a.forEach(function(o){Ct(s,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(s,i)}),n._dbSchema=i,hr(n,[n._allTables,n,n.Transaction.prototype]),Mi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],tt(i),i),n._storeNames=tt(i),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=ol(this._cfg.contentUpgrade||He,t),this},e}();function GA(e){return js(HA.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function hl(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new gl(lo,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function ml(e){return e&&typeof e.databases=="function"}function jA(e){var t=e.indexedDB,n=e.IDBKeyRange;return ml(t)?Promise.resolve(t.databases()).then(function(a){return a.map(function(s){return s.name}).filter(function(s){return s!==lo})}):hl(t,n).toCollection().primaryKeys()}function KA(e,t){var n=e.indexedDB,a=e.IDBKeyRange;!ml(n)&&t!==lo&&hl(n,a).put({name:t}).catch(He)}function WA(e,t){var n=e.indexedDB,a=e.IDBKeyRange;!ml(n)&&t!==lo&&hl(n,a).delete(t).catch(He)}function _r(e){return jn(function(){return Ee.letThrough=!0,e()})}function ZA(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var a=function(){return indexedDB.databases().finally(n)};t=setInterval(a,100),a()}).finally(function(){return clearInterval(t)})}function zA(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?at(t.dbOpenError):e});on&&(t.openCanceller._stackHolder=ya()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var a=t.openCanceller;function s(){if(t.openCanceller!==a)throw new $e.DatabaseClosed("db.open() was cancelled")}var i=t.dbReadyResolve,o=null,c=!1,r=function(){return new me(function(l,f){if(s(),!n)throw new $e.MissingAPI;var v=e.name,m=t.autoSchema?n.open(v):n.open(v,Math.round(e.verno*10));if(!m)throw new $e.MissingAPI;m.onerror=Qt(f),m.onblocked=ze(e._fireOnBlocked),m.onupgradeneeded=ze(function(g){if(o=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=Ps,o.abort(),m.result.close();var y=n.deleteDatabase(v);y.onsuccess=y.onerror=ze(function(){f(new $e.NoSuchDatabase("Database "+v+" doesnt exist"))})}else{o.onerror=Qt(f);var E=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;c=E<1,e._novip.idbdb=m.result,LA(e,E/10,o,f)}},f),m.onsuccess=ze(function(){o=null;var g=e._novip.idbdb=m.result,y=io(g.objectStoreNames);if(y.length>0)try{var E=g.transaction(AA(y),"readonly");t.autoSchema?NA(e,g,E):(pr(e,e._dbSchema,E),VA(e,E)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),dl(e,E)}catch{}Es.push(e),g.onversionchange=ze(function(_){t.vcFired=!0,e.on("versionchange").fire(_)}),g.onclose=ze(function(_){e.on("close").fire(_)}),c&&KA(e._deps,v),l()},f)}).catch(function(l){return l&&l.name==="UnknownError"&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),r()):me.reject(l)})};return me.race([a,(typeof navigator=="undefined"?me.resolve():ZA()).then(r)]).then(function(){return s(),t.onReadyBeingFired=[],me.resolve(_r(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var f=t.onReadyBeingFired.reduce(ol,He);return t.onReadyBeingFired=[],me.resolve(_r(function(){return f(e.vip)})).then(l)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(l){t.dbOpenError=l;try{o&&o.abort()}catch{}return a===t.openCanceller&&e._close(),at(l)}).finally(function(){t.openComplete=!0,i()})}function gr(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},a=i(t),s=i(n);function i(o){return function(c){var r=o(c),l=r.value;return r.done?l:!l||typeof l.then!="function"?gt(l)?Promise.all(l).then(a,s):a(l):l.then(a,s)}}return i(t)()}function qA(e,t,n){var a=arguments.length;if(a<2)throw new $e.InvalidArgument("Too few arguments");for(var s=new Array(a-1);--a;)s[a-1]=arguments[a];n=s.pop();var i=bd(s);return[e,i,n]}function jd(e,t,n,a,s){return me.resolve().then(function(){var i=Ee.transless||Ee,o=e._createTransaction(t,n,e._dbSchema,a),c={trans:o,transless:i};if(a)o.idbtrans=a.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(v){return v.name===il.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return jd(e,t,n,null,s)})):at(v)}var r=al(s);r&&Qa();var l,f=me.follow(function(){if(l=s.call(o,o),l)if(r){var v=$n.bind(null,null);l.then(v,v)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=gr(l))},c);return(l&&typeof l.then=="function"?me.resolve(l).then(function(v){return o.active?v:at(new $e.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return l})).then(function(v){return a&&o._resolve(),o._completion.then(function(){return v})}).catch(function(v){return o._reject(v),at(v)})})}function fi(e,t,n){for(var a=gt(e)?e.slice():[e],s=0;s<n;++s)a.push(t);return a}function YA(e){return Le(Le({},e),{table:function(t){var n=e.table(t),a=n.schema,s={},i=[];function o(E,_,p){var C=ks(E),S=s[C]=s[C]||[],x=E==null?0:typeof E=="string"?1:E.length,w=_>0,k=Le(Le({},p),{isVirtual:w,keyTail:_,keyLength:x,extractKey:vr(E),unique:!w&&p.unique});if(S.push(k),k.isPrimaryKey||i.push(k),x>1){var T=x===2?E[0]:E.slice(0,x-1);o(T,_+1,p)}return S.sort(function(A,F){return A.keyTail-F.keyTail}),k}var c=o(a.primaryKey.keyPath,0,a.primaryKey);s[":id"]=[c];for(var r=0,l=a.indexes;r<l.length;r++){var f=l[r];o(f.keyPath,0,f)}function v(E){var _=s[ks(E)];return _&&_[0]}function m(E,_){return{type:E.type===1?2:E.type,lower:fi(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,_),lowerOpen:!0,upper:fi(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,_),upperOpen:!0}}function g(E){var _=E.query.index;return _.isVirtual?Le(Le({},E),{query:{index:_,range:m(E.query.range,_.keyTail)}}):E}var y=Le(Le({},n),{schema:Le(Le({},a),{primaryKey:c,indexes:i,getIndexByKeyPath:v}),count:function(E){return n.count(g(E))},query:function(E){return n.query(g(E))},openCursor:function(E){var _=E.query.index,p=_.keyTail,C=_.isVirtual,S=_.keyLength;if(!C)return n.openCursor(E);function x(w){function k(A){A!=null?w.continue(fi(A,E.reverse?e.MAX_KEY:e.MIN_KEY,p)):E.unique?w.continue(w.key.slice(0,S).concat(E.reverse?e.MIN_KEY:e.MAX_KEY,p)):w.continue()}var T=Object.create(w,{continue:{value:k},continuePrimaryKey:{value:function(A,F){w.continuePrimaryKey(fi(A,e.MAX_KEY,p),F)}},primaryKey:{get:function(){return w.primaryKey}},key:{get:function(){var A=w.key;return S===1?A[0]:A.slice(0,S)}},value:{get:function(){return w.value}}});return T}return n.openCursor(g(E)).then(function(w){return w&&x(w)})}});return y}})}var XA={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:YA};function pl(e,t,n,a){return n=n||{},a=a||"",tt(e).forEach(function(s){if(!Pt(t,s))n[a+s]=void 0;else{var i=e[s],o=t[s];if(typeof i=="object"&&typeof o=="object"&&i&&o){var c=Qo(i),r=Qo(o);c!==r?n[a+s]=t[s]:c==="Object"?pl(i,o,n,a+s+"."):i!==o&&(n[a+s]=t[s])}else i!==o&&(n[a+s]=t[s])}}),tt(t).forEach(function(s){Pt(e,s)||(n[a+s]=t[s])}),n}function JA(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var QA={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return Le(Le({},e),{table:function(t){var n=e.table(t),a=n.schema.primaryKey,s=Le(Le({},n),{mutate:function(i){var o=Ee.trans,c=o.table(t).hook,r=c.deleting,l=c.creating,f=c.updating;switch(i.type){case"add":if(l.fire===He)break;return o._promise("readwrite",function(){return v(i)},!0);case"put":if(l.fire===He&&f.fire===He)break;return o._promise("readwrite",function(){return v(i)},!0);case"delete":if(r.fire===He)break;return o._promise("readwrite",function(){return v(i)},!0);case"deleteRange":if(r.fire===He)break;return o._promise("readwrite",function(){return m(i)},!0)}return n.mutate(i);function v(y){var E=Ee.trans,_=y.keys||JA(a,y);if(!_)throw new Error("Keys missing");return y=y.type==="add"||y.type==="put"?Le(Le({},y),{keys:_}):Le({},y),y.type!=="delete"&&(y.values=Xo([],y.values,!0)),y.keys&&(y.keys=Xo([],y.keys,!0)),eD(n,y,_).then(function(p){var C=_.map(function(S,x){var w=p[x],k={onerror:null,onsuccess:null};if(y.type==="delete")r.fire.call(k,S,w,E);else if(y.type==="add"||w===void 0){var T=l.fire.call(k,S,y.values[x],E);S==null&&T!=null&&(S=T,y.keys[x]=S,a.outbound||Gt(y.values[x],a.keyPath,S))}else{var A=pl(w,y.values[x]),F=f.fire.call(k,A,S,w,E);if(F){var O=y.values[x];Object.keys(F).forEach(function(G){Pt(O,G)?O[G]=F[G]:Gt(O,G,F[G])})}}return k});return n.mutate(y).then(function(S){for(var x=S.failures,w=S.results,k=S.numFailures,T=S.lastResult,A=0;A<_.length;++A){var F=w?w[A]:_[A],O=C[A];F==null?O.onerror&&O.onerror(x[A]):O.onsuccess&&O.onsuccess(y.type==="put"&&p[A]?y.values[A]:F)}return{failures:x,results:w,numFailures:k,lastResult:T}}).catch(function(S){return C.forEach(function(x){return x.onerror&&x.onerror(S)}),Promise.reject(S)})})}function m(y){return g(y.trans,y.range,1e4)}function g(y,E,_){return n.query({trans:y,values:!1,query:{index:a,range:E},limit:_}).then(function(p){var C=p.result;return v({type:"delete",keys:C,trans:y}).then(function(S){return S.numFailures>0?Promise.reject(S.failures[0]):C.length<_?{failures:[],numFailures:0,lastResult:void 0}:g(y,Le(Le({},E),{lower:C[C.length-1],lowerOpen:!0}),_)})})}}});return s}})}};function eD(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Kd(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var a=[],s=0,i=0;s<t.keys.length&&i<e.length;++s)kt(t.keys[s],e[i])===0&&(a.push(n?Ns(t.values[s]):t.values[s]),++i);return a.length===e.length?a:null}catch{return null}}var tD={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return Le(Le({},n),{getMany:function(a){if(!a.cache)return n.getMany(a);var s=Kd(a.keys,a.trans._cache,a.cache==="clone");return s?me.resolve(s):n.getMany(a).then(function(i){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?Ns(i):i},i})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),n.mutate(a)}})}}}},No;function _l(e){return!("from"in e)}var mn=function(e,t){if(this)Ct(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new mn;return e&&"d"in e&&Ct(n,e),n}};za(mn.prototype,(No={add:function(e){return Oi(this,e),this},addKey:function(e){return Ls(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Ls(t,n,n)}),this}},No[er]=function(){return yr(this)},No));function Ls(e,t,n){var a=kt(t,n);if(!isNaN(a)){if(a>0)throw RangeError();if(_l(e))return Ct(e,{from:t,to:n,d:1});var s=e.l,i=e.r;if(kt(n,e.from)<0)return s?Ls(s,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Uu(e);if(kt(t,e.to)>0)return i?Ls(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Uu(e);kt(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),kt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;s&&!e.l&&Oi(e,s),i&&o&&Oi(e,i)}}function Oi(e,t){function n(a,s){var i=s.from,o=s.to,c=s.l,r=s.r;Ls(a,i,o),c&&n(a,c),r&&n(a,r)}_l(t)||n(e,t)}function nD(e,t){var n=yr(t),a=n.next();if(a.done)return!1;for(var s=a.value,i=yr(e),o=i.next(s.from),c=o.value;!a.done&&!o.done;){if(kt(c.from,s.to)<=0&&kt(c.to,s.from)>=0)return!0;kt(s.from,c.from)<0?s=(a=n.next(c.from)).value:c=(o=i.next(s.from)).value}return!1}function yr(e){var t=_l(e)?null:{s:0,n:e};return{next:function(n){for(var a=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,a)for(;t.n.l&&kt(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!a||kt(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Uu(e){var t,n,a=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),s=a>1?"r":a<-1?"l":"";if(s){var i=s==="r"?"l":"r",o=Le({},e),c=e[s];e.from=c.from,e.to=c.to,e[s]=c[s],o[s]=c[i],e[i]=o,o.d=Hu(o)}e.d=Hu(e)}function Hu(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var aD={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new mn(e.MIN_KEY,e.MAX_KEY);return Le(Le({},e),{table:function(a){var s=e.table(a),i=s.schema,o=i.primaryKey,c=o.extractKey,r=o.outbound,l=Le(Le({},s),{mutate:function(m){var g=m.trans,y=g.mutatedParts||(g.mutatedParts={}),E=function(T){var A="idb://"+t+"/"+a+"/"+T;return y[A]||(y[A]=new mn)},_=E(""),p=E(":dels"),C=m.type,S=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[[],m.values]:[],x=S[0],w=S[1],k=m.trans._cache;return s.mutate(m).then(function(T){if(gt(x)){C!=="delete"&&(x=T.results),_.addKeys(x);var A=Kd(x,k);!A&&C!=="add"&&p.addKeys(x),(A||w)&&sD(E,i,A,w)}else if(x){var F={from:x.lower,to:x.upper};p.add(F),_.add(F)}else _.add(n),p.add(n),i.indexes.forEach(function(O){return E(O.name).add(n)});return T})}}),f=function(m){var g,y,E=m.query,_=E.index,p=E.range;return[_,new mn((g=p.lower)!==null&&g!==void 0?g:e.MIN_KEY,(y=p.upper)!==null&&y!==void 0?y:e.MAX_KEY)]},v={get:function(m){return[o,new mn(m.key)]},getMany:function(m){return[o,new mn().addKeys(m.keys)]},count:f,query:f,openCursor:f};return tt(v).forEach(function(m){l[m]=function(g){var y=Ee.subscr;if(y){var E=function(k){var T="idb://"+t+"/"+a+"/"+k;return y[T]||(y[T]=new mn)},_=E(""),p=E(":dels"),C=v[m](g),S=C[0],x=C[1];if(E(S.name||"").add(x),!S.isPrimaryKey)if(m==="count")p.add(n);else{var w=m==="query"&&r&&g.values&&s.query(Le(Le({},g),{values:!1}));return s[m].apply(this,arguments).then(function(k){if(m==="query"){if(r&&g.values)return w.then(function(O){var G=O.result;return _.addKeys(G),k});var T=g.values?k.result.map(c):k.result;g.values?_.addKeys(T):p.addKeys(T)}else if(m==="openCursor"){var A=k,F=g.values;return A&&Object.create(A,{key:{get:function(){return p.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var O=A.primaryKey;return p.addKey(O),O}},value:{get:function(){return F&&_.addKey(A.primaryKey),A.value}}})}return k})}}return s[m].apply(this,arguments)}}),l}})}};function sD(e,t,n,a){function s(i){var o=e(i.name||"");function c(l){return l!=null?i.extractKey(l):null}var r=function(l){return i.multiEntry&&gt(l)?l.forEach(function(f){return o.addKey(f)}):o.addKey(l)};(n||a).forEach(function(l,f){var v=n&&c(n[f]),m=a&&c(a[f]);kt(v,m)!==0&&(v!=null&&r(v),m!=null&&r(m))})}t.indexes.forEach(s)}var gl=function(){function e(t,n){var a=this;this._middlewares={},this.verno=0;var s=e.dependencies;this._options=n=Le({addons:e.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var i=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:He,dbReadyPromise:null,cancelOpen:He,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new me(function(c){o.dbReadyResolve=c}),o.openCanceller=new me(function(c,r){o.cancelOpen=r}),this._state=o,this.name=t,this.on=Gs(this,"populate","blocked","versionchange","close",{ready:[ol,He]}),this.on.ready.subscribe=_d(this.on.ready.subscribe,function(c){return function(r,l){e.vip(function(){var f=a._state;if(f.openComplete)f.dbOpenError||me.resolve().then(r),l&&c(r);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(r),l&&c(r);else{c(r);var v=a;l||c(function m(){v.on.ready.unsubscribe(r),v.on.ready.unsubscribe(m)})}})}}),this.Collection=yA(this),this.Table=hA(this),this.Transaction=xA(this),this.Version=GA(this),this.WhereClause=SA(this),this.on("versionchange",function(c){c.newVersion>0?console.warn("Another connection wants to upgrade database '"+a.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+a.name+"'. Closing db now to resume the delete request."),a.close()}),this.on("blocked",function(c){!c.newVersion||c.newVersion<c.oldVersion?console.warn("Dexie.delete('"+a.name+"') was blocked"):console.warn("Upgrade '"+a.name+"' blocked by other connection holding version "+c.oldVersion/10)}),this._maxKey=Rs(n.IDBKeyRange),this._createTransaction=function(c,r,l,f){return new a.Transaction(c,r,l,a._options.chromeTransactionDurability,f)},this._fireOnBlocked=function(c){a.on("blocked").fire(c),Es.filter(function(r){return r.name===a.name&&r!==a&&!r._state.vcFired}).map(function(r){return r.on("versionchange").fire(c)})},this.use(XA),this.use(QA),this.use(aD),this.use(tD),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(function(c){return c(a)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new $e.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new $e.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,a=n.filter(function(s){return s._cfg.version===t})[0];return a||(a=new this.Version(t),n.push(a),n.sort(RA),a.stores({}),this._state.autoSchema=!1,a)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||Ee.letThrough||this._vip)?t():new me(function(a,s){if(n._state.openComplete)return s(new $e.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){s(new $e.DatabaseClosed);return}n.open().catch(He)}n._state.dbReadyPromise.then(a,s)}).then(t)},e.prototype.use=function(t){var n=t.stack,a=t.create,s=t.level,i=t.name;i&&this.unuse({stack:n,name:i});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:a,level:s==null?10:s,name:i}),o.sort(function(c,r){return c.level-r.level}),this},e.prototype.unuse=function(t){var n=t.stack,a=t.name,s=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(i){return s?i.create!==s:a?i.name!==a:!1})),this},e.prototype.open=function(){return zA(this)},e.prototype._close=function(){var t=this._state,n=Es.indexOf(this);if(n>=0&&Es.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new me(function(a){t.dbReadyResolve=a}),t.openCanceller=new me(function(a,s){t.cancelOpen=s})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new $e.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,a=this._state;return new me(function(s,i){var o=function(){t.close();var c=t._deps.indexedDB.deleteDatabase(t.name);c.onsuccess=ze(function(){WA(t._deps,t.name),s()}),c.onerror=Qt(i),c.onblocked=t._fireOnBlocked};if(n)throw new $e.InvalidArgument("Arguments not allowed in db.delete()");a.isBeingOpened?a.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return tt(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=qA.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,a){var s=this,i=Ee.trans;(!i||i.db!==this||t.indexOf("!")!==-1)&&(i=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var c,r;try{if(r=n.map(function(f){var v=f instanceof s.Table?f.name:f;if(typeof v!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return v}),t=="r"||t===Ro)c=Ro;else if(t=="rw"||t==Lo)c=Lo;else throw new $e.InvalidArgument("Invalid transaction mode: "+t);if(i){if(i.mode===Ro&&c===Lo)if(o)i=null;else throw new $e.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&r.forEach(function(f){if(i&&i.storeNames.indexOf(f)===-1)if(o)i=null;else throw new $e.SubTransaction("Table "+f+" not included in parent transaction.")}),o&&i&&!i.active&&(i=null)}}catch(f){return i?i._promise(null,function(v,m){m(f)}):at(f)}var l=jd.bind(null,this,c,r,i,a);return i?i._promise(c,l,"lock"):Ee.trans?es(Ee.transless,function(){return s._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!Pt(this._allTables,t))throw new $e.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),iD=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",oD=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,a){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:a}:t)},e.prototype[iD]=function(){return this},e}();function Wd(e,t){return tt(t).forEach(function(n){var a=e[n]||(e[n]=new mn);Oi(a,t[n])}),e}function rD(e){var t=!1,n=void 0,a=new oD(function(s){var i=al(e);function o(_){i&&Qa();var p=function(){return jn(e,{subscr:_,trans:null})},C=Ee.trans?es(Ee.transless,p):p();return i&&C.then($n,$n),C}var c=!1,r={},l={},f={get closed(){return c},unsubscribe:function(){c=!0,Wn.storagemutated.unsubscribe(y)}};s.start&&s.start(f);var v=!1,m=!1;function g(){return tt(l).some(function(_){return r[_]&&nD(r[_],l[_])})}var y=function(_){Wd(r,_),g()&&E()},E=function(){if(!(v||c)){r={};var _={},p=o(_);m||(Wn(Fs,y),m=!0),v=!0,Promise.resolve(p).then(function(C){t=!0,n=C,v=!1,!c&&(g()?E():(r={},l=_,s.next&&s.next(C)))},function(C){v=!1,t=!1,s.error&&s.error(C),f.unsubscribe()})}};return E(),f});return a.hasValue=function(){return t},a.getValue=function(){return n},a}var wr;try{wr={indexedDB:Ke.indexedDB||Ke.mozIndexedDB||Ke.webkitIndexedDB||Ke.msIndexedDB,IDBKeyRange:Ke.IDBKeyRange||Ke.webkitIDBKeyRange}}catch{wr={indexedDB:null,IDBKeyRange:null}}var aa=gl;za(aa,Le(Le({},oo),{delete:function(e){var t=new aa(e,{addons:[]});return t.delete()},exists:function(e){return new aa(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return jA(aa.dependencies).then(e)}catch{return at(new $e.MissingAPI)}},defineClass:function(){function e(t){Ct(this,t)}return e},ignoreTransaction:function(e){return Ee.trans?es(Ee.transless,e):e()},vip:_r,async:function(e){return function(){try{var t=gr(e.apply(this,arguments));return!t||typeof t.then!="function"?me.resolve(t):t}catch(n){return at(n)}}},spawn:function(e,t,n){try{var a=gr(e.apply(n,t||[]));return!a||typeof a.then!="function"?me.resolve(a):a}catch(s){return at(s)}},currentTransaction:{get:function(){return Ee.trans||null}},waitFor:function(e,t){var n=me.resolve(typeof e=="function"?aa.ignoreTransaction(e):e).timeout(t||6e4);return Ee.trans?Ee.trans.waitFor(n):n},Promise:me,debug:{get:function(){return on},set:function(e){kd(e,e==="dexie"?function(){return!0}:Md)}},derive:Xa,extend:Ct,props:za,override:_d,Events:Gs,on:Wn,liveQuery:rD,extendObservabilitySet:Wd,getByKeyPath:En,setByKeyPath:Gt,delByKeyPath:Nx,shallowClone:wd,deepClone:Ns,getObjectDiff:pl,cmp:kt,asap:gd,minKey:dr,addons:[],connections:Es,errnames:il,dependencies:wr,semVer:Lu,version:Lu.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));aa.maxKey=Rs(aa.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Wn(Fs,function(e){if(!yn){var t;ro?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Nn,!0,!0,e)):t=new CustomEvent(Nn,{detail:e}),yn=!0,dispatchEvent(t),yn=!1}}),addEventListener(Nn,function(e){var t=e.detail;yn||Ni(t)}));function Ni(e){var t=yn;try{yn=!0,Wn.storagemutated.fire(e)}finally{yn=t}}var yn=!1;if(typeof BroadcastChannel!="undefined"){var vi=new BroadcastChannel(Nn);typeof vi.unref=="function"&&vi.unref(),Wn(Fs,function(e){yn||vi.postMessage(e)}),vi.onmessage=function(e){e.data&&Ni(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Wn(Fs,function(e){try{yn||(typeof localStorage!="undefined"&&localStorage.setItem(Nn,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Xo([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Nn,changedParts:e})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(e){if(e.key===Nn){var t=JSON.parse(e.newValue);t&&Ni(t.changedParts)}});var Gu=self.document&&navigator.serviceWorker;Gu&&Gu.addEventListener("message",lD)}function lD(e){var t=e.data;t&&t.type===Nn&&Ni(t.changedParts)}me.rejectionMapper=zx;kd(on,Md);function Ut(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ut=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,s=Object.defineProperty||function(q,j,B){q[j]=B.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function l(q,j,B){return Object.defineProperty(q,j,{value:B,enumerable:!0,configurable:!0,writable:!0}),q[j]}try{l({},"")}catch{l=function(B,W,U){return B[W]=U}}function f(q,j,B,W){var U=j&&j.prototype instanceof p?j:p,M=Object.create(U.prototype),N=new L(W||[]);return s(M,"_invoke",{value:O(q,B,N)}),M}function v(q,j,B){try{return{type:"normal",arg:q.call(j,B)}}catch(W){return{type:"throw",arg:W}}}t.wrap=f;var m="suspendedStart",g="suspendedYield",y="executing",E="completed",_={};function p(){}function C(){}function S(){}var x={};l(x,o,function(){return this});var w=Object.getPrototypeOf,k=w&&w(w(Q([])));k&&k!==n&&a.call(k,o)&&(x=k);var T=S.prototype=p.prototype=Object.create(x);function A(q){["next","throw","return"].forEach(function(j){l(q,j,function(B){return this._invoke(j,B)})})}function F(q,j){function B(U,M,N,Z){var Y=v(q[U],q,M);if(Y.type!=="throw"){var oe=Y.arg,V=oe.value;return V&&Wt(V)=="object"&&a.call(V,"__await")?j.resolve(V.__await).then(function(ae){B("next",ae,N,Z)},function(ae){B("throw",ae,N,Z)}):j.resolve(V).then(function(ae){oe.value=ae,N(oe)},function(ae){return B("throw",ae,N,Z)})}Z(Y.arg)}var W;s(this,"_invoke",{value:function(M,N){function Z(){return new j(function(Y,oe){B(M,N,Y,oe)})}return W=W?W.then(Z,Z):Z()}})}function O(q,j,B){var W=m;return function(U,M){if(W===y)throw new Error("Generator is already running");if(W===E){if(U==="throw")throw M;return{value:e,done:!0}}for(B.method=U,B.arg=M;;){var N=B.delegate;if(N){var Z=G(N,B);if(Z){if(Z===_)continue;return Z}}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(W===m)throw W=E,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);W=y;var Y=v(q,j,B);if(Y.type==="normal"){if(W=B.done?E:g,Y.arg===_)continue;return{value:Y.arg,done:B.done}}Y.type==="throw"&&(W=E,B.method="throw",B.arg=Y.arg)}}}function G(q,j){var B=j.method,W=q.iterator[B];if(W===e)return j.delegate=null,B==="throw"&&q.iterator.return&&(j.method="return",j.arg=e,G(q,j),j.method==="throw")||B!=="return"&&(j.method="throw",j.arg=new TypeError("The iterator does not provide a '"+B+"' method")),_;var U=v(W,q.iterator,j.arg);if(U.type==="throw")return j.method="throw",j.arg=U.arg,j.delegate=null,_;var M=U.arg;return M?M.done?(j[q.resultName]=M.value,j.next=q.nextLoc,j.method!=="return"&&(j.method="next",j.arg=e),j.delegate=null,_):M:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,_)}function X(q){var j={tryLoc:q[0]};1 in q&&(j.catchLoc=q[1]),2 in q&&(j.finallyLoc=q[2],j.afterLoc=q[3]),this.tryEntries.push(j)}function H(q){var j=q.completion||{};j.type="normal",delete j.arg,q.completion=j}function L(q){this.tryEntries=[{tryLoc:"root"}],q.forEach(X,this),this.reset(!0)}function Q(q){if(q||q===""){var j=q[o];if(j)return j.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var B=-1,W=function U(){for(;++B<q.length;)if(a.call(q,B))return U.value=q[B],U.done=!1,U;return U.value=e,U.done=!0,U};return W.next=W}}throw new TypeError(Wt(q)+" is not iterable")}return C.prototype=S,s(T,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:C,configurable:!0}),C.displayName=l(S,r,"GeneratorFunction"),t.isGeneratorFunction=function(q){var j=typeof q=="function"&&q.constructor;return!!j&&(j===C||(j.displayName||j.name)==="GeneratorFunction")},t.mark=function(q){return Object.setPrototypeOf?Object.setPrototypeOf(q,S):(q.__proto__=S,l(q,r,"GeneratorFunction")),q.prototype=Object.create(T),q},t.awrap=function(q){return{__await:q}},A(F.prototype),l(F.prototype,c,function(){return this}),t.AsyncIterator=F,t.async=function(q,j,B,W,U){U===void 0&&(U=Promise);var M=new F(f(q,j,B,W),U);return t.isGeneratorFunction(j)?M:M.next().then(function(N){return N.done?N.value:M.next()})},A(T),l(T,r,"Generator"),l(T,o,function(){return this}),l(T,"toString",function(){return"[object Generator]"}),t.keys=function(q){var j=Object(q),B=[];for(var W in j)B.push(W);return B.reverse(),function U(){for(;B.length;){var M=B.pop();if(M in j)return U.value=M,U.done=!1,U}return U.done=!0,U}},t.values=Q,L.prototype={constructor:L,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(H),!j)for(var B in this)B.charAt(0)==="t"&&a.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=e)},stop:function(){this.done=!0;var j=this.tryEntries[0].completion;if(j.type==="throw")throw j.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var B=this;function W(oe,V){return N.type="throw",N.arg=j,B.next=oe,V&&(B.method="next",B.arg=e),!!V}for(var U=this.tryEntries.length-1;U>=0;--U){var M=this.tryEntries[U],N=M.completion;if(M.tryLoc==="root")return W("end");if(M.tryLoc<=this.prev){var Z=a.call(M,"catchLoc"),Y=a.call(M,"finallyLoc");if(Z&&Y){if(this.prev<M.catchLoc)return W(M.catchLoc,!0);if(this.prev<M.finallyLoc)return W(M.finallyLoc)}else if(Z){if(this.prev<M.catchLoc)return W(M.catchLoc,!0)}else{if(!Y)throw new Error("try statement without catch or finally");if(this.prev<M.finallyLoc)return W(M.finallyLoc)}}}},abrupt:function(j,B){for(var W=this.tryEntries.length-1;W>=0;--W){var U=this.tryEntries[W];if(U.tryLoc<=this.prev&&a.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var M=U;break}}M&&(j==="break"||j==="continue")&&M.tryLoc<=B&&B<=M.finallyLoc&&(M=null);var N=M?M.completion:{};return N.type=j,N.arg=B,M?(this.method="next",this.next=M.finallyLoc,_):this.complete(N)},complete:function(j,B){if(j.type==="throw")throw j.arg;return j.type==="break"||j.type==="continue"?this.next=j.arg:j.type==="return"?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):j.type==="normal"&&B&&(this.next=B),_},finish:function(j){for(var B=this.tryEntries.length-1;B>=0;--B){var W=this.tryEntries[B];if(W.finallyLoc===j)return this.complete(W.completion,W.afterLoc),H(W),_}},catch:function(j){for(var B=this.tryEntries.length-1;B>=0;--B){var W=this.tryEntries[B];if(W.tryLoc===j){var U=W.completion;if(U.type==="throw"){var M=U.arg;H(W)}return M}}throw new Error("illegal catch attempt")},delegateYield:function(j,B,W){return this.delegate={iterator:Q(j),resultName:B,nextLoc:W},this.method==="next"&&(this.arg=e),_}},t}function Ci(e,t){return dD(e)||cD(e,t)||yl(e,t)||uD()}function uD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cD(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,i,o,c=[],r=!0,l=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;r=!1}else for(;!(r=(a=i.call(n)).done)&&(c.push(a.value),c.length!==t);r=!0);}catch(f){l=!0,s=f}finally{try{if(!r&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw s}}return c}}function dD(e){if(Array.isArray(e))return e}function Zd(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yl(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var a=0,s=function(){};return{s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(l){throw l},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,c;return{s:function(){n=n.call(e)},n:function(){var l=n.next();return i=l.done,l},e:function(l){o=!0,c=l},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw c}}}}function ju(e){return hD(e)||vD(e)||yl(e)||fD()}function fD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yl(e,t){if(!!e){if(typeof e=="string")return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(e,t)}}function vD(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hD(e){if(Array.isArray(e))return br(e)}function br(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function mD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ku(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,qd(a.key),a)}}function pD(e,t,n){return t&&Ku(e.prototype,t),n&&Ku(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _D(e,t,n){return t=Vi(t),gD(e,zd()?Reflect.construct(t,n||[],Vi(e).constructor):t.apply(e,n))}function gD(e,t){if(t&&(Wt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yD(e)}function yD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zd(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zd=function(){return!!e})()}function Vi(e){return Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vi(e)}function wD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Er(e,t)}function Er(e,t){return Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Er(e,t)}function Wt(e){return Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(e)}function Wu(e,t,n){return t=qd(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qd(e){var t=bD(e,"string");return Wt(t)=="symbol"?t:String(t)}function bD(e,t){if(Wt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t||"default");if(Wt(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ED="PLAYER__LOG",Zu=2,Ha={LOG:"log",META:"meta"},zu=Wu(Wu({},Ha.LOG,"timestamp, displayID, hasReported"),Ha.META,"timestamp, [lines+size], size, displayID"),kD=Object.defineProperty,CD=function(t,n,a){return n in t?kD(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a},Vo=function(t,n,a){return CD(t,Wt(n)!=="symbol"?n+"":n,a),a},SD=function(e){function t(){var n;return mD(this,t),n=_D(this,t,[ED]),Vo(n,"haveInitialized",!1),Vo(n,"logTable"),Vo(n,"metaTable"),n.initDB(),n}return wD(t,e),pD(t,[{key:"initDB",value:function(){if(!this.haveInitialized&&(this.haveInitialized=!0,!this.isOpen())){try{this.version(Zu).stores(zu).upgrade(function(a){return a.table(Ha.LOG).toCollection().modify(function(s){return s.hasReported=0})})}catch(a){a instanceof Error&&a.message==="Cannot add version when database is open"&&(this.close(),this.version(Zu).stores(zu).upgrade(function(s){return s.table(Ha.LOG).toCollection().modify(function(i){return i.hasReported=0})}))}Object.defineProperties(this,{logTable:{value:this[Ha.LOG],enumerable:!1,writable:!1},metaTable:{value:this[Ha.META],enumerable:!1,writable:!1}})}}}])}(gl),$D=function(){},Ks=function(t,n){var a=new URL(t);return new URL("".concat(a.origin).concat(a.pathname,"?").concat(new URLSearchParams([].concat(ju(Array.from(a.searchParams.entries())),ju(Object.entries(n)))))).href};function qu(e){var t="",n=document.cookie.split(";"),a=decodeURIComponent(e),s=Zd(n),i;try{for(s.s();!(i=s.n()).done;){var o=i.value,c=o.trim().split("="),r=Ci(c,2),l=r[0],f=r[1];if(l&&f&&decodeURIComponent(l)===a)return decodeURIComponent(f)}}catch(v){s.e(v)}finally{s.f()}return t}function Uo(e){return Number.isInteger(e)&&e>0}var Yu=function(t,n,a){return new Promise(function(s,i){var o=function(f){try{r(a.next(f))}catch(v){i(v)}},c=function(f){try{r(a.throw(f))}catch(v){i(v)}},r=function(f){return f.done?s(f.value):Promise.resolve(f.value).then(o,c)};r((a=a.apply(t,n)).next())})},xD=function(t){if(Wt(t)==="object"){var n=t.hour,a=n===void 0?0:n,s=t.day,i=s===void 0?0:s,o=60*60*1e3,c=24*o;return a*o+i*c+""}return typeof t=="number"?t+"":t};function AD(e){var t=new Map,n=function(){var s=xD.apply(void 0,arguments);if(t.has(s))return t.get(s);var i=e.apply(void 0,arguments);return t.set(s,i),i};return n.clearCache=function(){return t.clear()},n}function DD(e){if(e==="all"||Uo(e))return!0;if(Wt(e)==="object"&&e!==null){var t=e.hour,n=e.day;return Uo(t)||Uo(n)}return!1}function TD(e){return Yu(this,null,Ut().mark(function t(){var n=this,a,s;return Ut().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(DD(e)){o.next=2;break}throw new Error('Invalid "condition" input');case 2:return a=new SD,s=function(r){return r.map(function(l){return l.content}).join(`\r
`)||""},o.abrupt("return",a.transaction("rw",["log"],function(){return Yu(n,null,Ut().mark(function c(){var r,l,f,v,m,g,y,E,_,p,C,S,x,w,k,T,A,F,O,G;return Ut().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(e!=="all"){H.next=8;break}return r=a.logTable.where({hasReported:0}),H.next=4,Promise.all([r.toArray().then(s),r.modify({hasReported:1})]);case 4:return l=H.sent,f=Ci(l,1),v=f[0],H.abrupt("return",v);case 8:if(typeof e!="number"){H.next=16;break}return m=a.logTable.orderBy("timestamp").reverse().filter(function(L){return L.hasReported===0}).limit(e),H.next=12,Promise.all([m.toArray().then(s),m.modify({hasReported:1})]);case 12:return g=H.sent,y=Ci(g,1),E=y[0],H.abrupt("return",E);case 16:return _=60*60*1e3,p=24*_,C=Date.now(),S=e.hour,x=S===void 0?0:S,w=e.day,k=w===void 0?0:w,T=C-x*_-k*p,A=a.logTable.where("timestamp").aboveOrEqual(T).filter(function(L){return L.hasReported===0}),H.next=24,Promise.all([A.toArray().then(s),A.modify({hasReported:1})]);case 24:return F=H.sent,O=Ci(F,1),G=O[0],H.abrupt("return",G);case 28:case"end":return H.stop()}},c)}))}));case 5:case"end":return o.stop()}},t)}))}var Yd=AD(TD),ID=Object.defineProperty,Xu=Object.getOwnPropertySymbols,PD=Object.prototype.hasOwnProperty,FD=Object.prototype.propertyIsEnumerable,Ju=function(t,n,a){return n in t?ID(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a},RD=function(t,n){for(var a in n||(n={}))PD.call(n,a)&&Ju(t,a,n[a]);if(Xu){var s=Zd(Xu(n)),i;try{for(s.s();!(i=s.n()).done;){var a=i.value;FD.call(n,a)&&Ju(t,a,n[a])}}catch(o){s.e(o)}finally{s.f()}}return t},Xd=function(t,n,a){return new Promise(function(s,i){var o=function(f){try{r(a.next(f))}catch(v){i(v)}},c=function(f){try{r(a.throw(f))}catch(v){i(v)}},r=function(f){return f.done?s(f.value):Promise.resolve(f.value).then(o,c)};r((a=a.apply(t,n)).next())})},LD="https://member.bilibili.com/preupload",BD=function(t){return Xd(void 0,null,Ut().mark(function n(){var a,s;return Ut().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=Ks(LD,t),o.next=3,fetch(a,{credentials:"include"}).then(function(c){return c.json()});case 3:return s=o.sent,o.abrupt("return",{uploadUrl:"https:"+s.endpoint+s.upos_uri.replace("upos:/",""),auth:s.auth,bizId:s.biz_id,uposUri:s.upos_uri});case 5:case"end":return o.stop()}},n)}))},MD=function(t){var n=Ks(t.uploadUrl,{uploads:"",output:"json"}),a={"X-Upos-Auth":t.auth};return fetch(n,{method:"POST",headers:a}).then(function(s){return s.json()})},OD=function(t,n){var a=n.length,s=Ks(t.uploadUrl,{partNumber:1,uploadId:t.uploadId,chunk:0,chunks:1,size:a,start:0,end:a,total:a}),i={"X-Upos-Auth":t.auth,"Content-Type":"application/octet-stream"};return fetch(s,{method:"PUT",headers:i,body:n})},ND=function(t){var n=Ks(t.preloadRes.uploadUrl,{output:"json",name:t.name,profile:t.profile,uploadId:t.uploadId,biz_id:t.preloadRes.bizId}),a={"X-Upos-Auth":t.preloadRes.auth};return fetch(n,{method:"POST",headers:a}).then(function(s){return s.json()})},VD=function(t){var n=t.preloadRes,a=t.options,s={mid:a.user.mid,buvid:a.user.buvid,app_key:a.appkey,url:n.uposUri,task_type:a.taskType},i=Ks("https://app.bilibili.com/x/resource/laser2",s);return fetch(i,{method:"POST"}).then(function(o){return o.json()})},UD=function(t){return Xd(void 0,null,Ut().mark(function n(){var a,s,i,o,c,r;return Ut().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,BD(t.preload);case 2:return a=f.sent,f.next=5,MD(a);case 5:return s=f.sent,i=s.upload_id,o=RD({uploadId:i},a),f.next=10,OD(o,t.file);case 10:return c={uploadId:i,profile:t.preload.profile,name:t.preload.name,preloadRes:a},f.next=13,ND(c);case 13:if(r=f.sent,(r==null?void 0:r.OK)===1){f.next=16;break}throw new Error("upload failed");case 16:return f.abrupt("return",VD({preloadRes:a,options:t}));case 17:case"end":return f.stop()}},n)}))},HD=function(t,n,a){return new Promise(function(s,i){var o=function(f){try{r(a.next(f))}catch(v){i(v)}},c=function(f){try{r(a.throw(f))}catch(v){i(v)}},r=function(f){return f.done?s(f.value):Promise.resolve(f.value).then(o,c)};r((a=a.apply(t,n)).next())})};function GD(e){return HD(this,null,Ut().mark(function t(){var n,a,s;return Ut().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Yd(e);case 2:if(n=o.sent,n){o.next=5;break}return o.abrupt("return","");case 5:return a=qu("DedeUserID"),s=qu("buvid3"),UD({appkey:"web_player",preload:{r:"upos",profile:"feedback/bup",name:"main.log"},taskType:"309",file:n,user:{mid:a,buvid:s}}).catch($D),o.abrupt("return",n);case 9:case"end":return o.stop()}},t)}))}const jD={class:"app_layout--sidebar u_select_none"},KD={class:"app_layout--content flex_col"},WD={class:"app_container p_relative"},ZD=u("iframe",{class:"hide",src:"https://www.bilibili.com/blackboard/fe/activity-qpCzT2eJZD.html",frameborder:"0"},null,-1),zD={class:"content-wrapper"},qD=u("h4",{class:"b_text text1 text_center mt_sm"},"\u70B9\u51FB\u5173\u95ED\u6309\u94AE\u4EE5\u540E\uFF1A",-1),YD={class:"close-main-dialog mt_md"},XD=u("span",{class:"text2 text_nowrap"},"\u6700\u5C0F\u5316\u5230\u7CFB\u7EDF\u6258\u76D8",-1),JD=u("br",null,null,-1),QD=u("span",{class:"text2 text_nowrap"},"\u9000\u51FA\u5E94\u7528",-1),eT={class:"close-main-dialog mt_md"},tT={class:"mt_lg text_center dialog_btns"},nT=le("\u53D6\u6D88"),aT=le("\u786E\u5B9A"),sT={class:"content-wrapper"},iT=u("h4",{class:"b_text text1 text_center mt_md"},"\u6709\u5176\u5B83\u7A97\u53E3\u6B63\u5728\u4F7F\u7528\uFF0C\u662F\u5426\u9000\u51FA\u5E94\u7528\uFF1F",-1),oT={class:"mt_xl text_center dialog_btns"},rT=le("\u4F9D\u7136\u9000\u51FA"),lT=le("\u9690\u85CF\u5230\u6258\u76D8"),uT={class:"content-wrapper"},cT=["innerHTML"],dT={class:"mt_xl flex_center dialog_btns"},fT={class:"content-wrapper"},vT=u("h4",{class:"b_text text1 text_center mt_md"},"\u63D0\u793A",-1),hT={class:"text_center text2 fs_5"},mT={class:"mt_xl flex_center dialog_btns"},pT=le("\u786E\u5B9A"),_T=ue({__name:"Layout",setup(e){hh();const t=Tr(),{kvSDK:n}=ie(t),a=nn(),s=Lt(),i=D(Math.random()),o=D(!1),c=D(!1),r=D(uf()),l=D(r.value),f=D(Ht("config/getIsQuitDialogPoped")),v=D(f.value),{isSearchPage:m,isSearchFrameLoaded:g,isSearchModalActive:y}=ie(Zi()),{isGpuDisabled:E,showVersion:_}=ie(da()),{userInfo:p}=ie(st()),{isMainMini:C}=ie(an()),{lastRootRouteName:S,isForceRestart:x,subRoutesStack:w,localSpmId:k}=ie(pa()),T=cf(),A=_a(),{isInSearchPage:F,isGamepadActive:O}=ie(A),G=K(()=>a.name==="Selected"),X=K(()=>a.name==="UgcSeason"),H=K(()=>G.value?Ie:gn),L=K(()=>w.value.includes("UgcSeason")?"":"UgcSeason"),Q=K(()=>["Selected","UgcSeason"].includes(a.name)),q=D(!0),j=K(()=>a.name==="GameCenter"),B=K(()=>a.name==="MyGame"),W=K(()=>["GameCenter","MyGame"].includes(a.name)),{isMaximized:U}=ie(Dr()),M=ut(),{isShowOpenWeChatFailModal:N}=ie(As());oa(()=>F.value=m.value),a.name==="UgcSeason"&&s.replace({name:"Selected"}),se(Q,re=>{re&&(q.value=!0)},{immediate:!0});const Z=setInterval(()=>{t.initKvSDK(),de.emit("kvSdkUpdated")},df);se(a,()=>A.flashPageCursors(200),{deep:!0}),window.addEventListener("resize",()=>A.flashPageCursors()),window.gamepadStore=A;const Y=D(!1);ht.on("gpCursorMove",()=>{Y.value||(Y.value=!0,xe({type:"click",spm_info:"main.main.main-precess.gp-cursor"},{msg:JSON.stringify({})}))}),ht.on("gpExitModal",()=>o.value=!1),ht.on("gpBack",()=>de.emit("leaveGallery"));let oe=null,V=!1;const ae=()=>{oe||(oe=Tu({offset:20,titleText:"\u66F4\u65B0\u63D0\u793A",duration:0,position:"bottom-right",default:wt(Rx,{onAction:()=>{V=!0,oe.close()}}),showCloseIcon:!0,onClose:()=>{V||Be("update/updatePatchLater")}}))};Ve("update/incrementPatchReady",()=>ae());const _e=D("\u5C0F\u6E38\u620F\u6253\u5F00\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u5FAE\u4FE1\u5BA2\u6237\u7AEF\u767B\u5F55\u72B6\u6001\u540E\u518D\u8BD5\uFF01");(async()=>{const re=await n.value.get("app.wxmp_alert_txt");re&&(_e.value=re)})();let fe=15e3;(async()=>{const re=await n.value.get("app.game_notice_duration");re&&(fe=Number(re))})();const ge=re=>{const be=Tu({offset:20,duration:fe,position:"bottom-right",default:wt(Dx,{gameId:re,onAction:()=>{be.close(),s.push({name:"MyGame"}),setTimeout(()=>de.emit("toMyGameDownloadsTab"))},onInstall:()=>{be.close(),Be("game/sendAction",{type:"install",data:{id:re}})}}),showCloseIcon:!0})};Ve("game/statusChange",({data:{id:re,gameStatus:be}})=>{be==="completed"&&ge(re)}),Ve("config/quitDialogPopedChange",({data:re})=>{f.value=re,v.value=re}),Ve("config/quitByCloseMainChange",({data:re})=>{r.value=re,l.value=re});const ve=()=>{l.value=r.value,o.value=!1,v.value=f.value},Ce=()=>{o.value=!1,ff(l.value),v.value&&Be("config/setIsQuitDialogPoped",v.value),ta(),l.value&&mo()},Ae=()=>{c.value=!1,ta()},Ye=()=>{c.value=!1,ta(),mo()},he=D({}),nt=D(!1),ct="BILIPC_FEATURES_ID",Ft=async()=>{if(he.value=JSON.parse(await n.value.get("app.features")||"{}"),he.value.id===+localStorage.getItem(ct))return;Ht("app/launchAction",{action:"getIsShowFeatures",params:vf(he.value)})&&(he.value.unicode&&(he.value.content=Jv(he.value.content)),nt.value=!0,localStorage.setItem(ct,String(he.value.id)),xe({type:"show",spm_info:"main.main.main-page.features"},{msg:JSON.stringify({})}))},Dn=()=>{nt.value=!1},rn=()=>{nt.value=!1,he.value.jumpPage&&s.push({name:he.value.jumpPage}),he.value.jumpElement&&setTimeout(()=>{const re=document.querySelector(he.value.jumpElement);re&&re.scrollIntoView(he.value.jumpSmooth&&{behavior:"smooth"})},500)},Tn=()=>{document.fullscreenElement||(C.value&&H.value.emit("unminiSelectedPlayer"),setTimeout(()=>{xe({type:"click",spm_info:"main.main.main-page.maximize"},{msg:JSON.stringify({is_enter:!hf(),is_shortcut:!0,win_name:"main"})}),zi()}))};return window.toggleWinMaximize=Tn,de.on("pageSpmIdChange",re=>k.value=re),It&&(Be("window/catchClose"),Ve("window/show",()=>Be("window/catchClose"))),Ve("window/willClose",({data:re})=>{if(It||Be("window/uncatchClose"),re||x.value||C.value){ta();return}if(!f.value){o.value=!0,Be("window/focus");return}if(!r.value){ta();return}Ht("window/getVisibleWinNum")>1?(c.value=!0,Be("window/focus")):(ta(),mo())}),Ve("window/visibleChange",({data:re})=>{re||(o.value=!1,c.value=!1)}),Ve("events/goToPage",({data:re})=>{var be,Qe,dt,it;switch(document.fullscreenElement&&document.exitFullscreen(),re==null?void 0:re.page){case"RecommendPage":s.push({name:"HomeRecommends"});return;case"DynamicPage":(p.value.isLogin||((be=re==null?void 0:re.meta)==null?void 0:be.tab)!=="video")&&s.push({name:"Dynamic",query:{...re==null?void 0:re.meta}});return;case"SpacePage":(p.value.isLogin||((Qe=re==null?void 0:re.meta)==null?void 0:Qe.mid))&&s.push({name:"Space",query:{...re==null?void 0:re.meta}});return;case"SettingsPage":s.push({name:"Settings"});return;case"SearchPage":(dt=re==null?void 0:re.meta)!=null&&dt.keyword&&de.emit("search",re.meta.keyword);return;case"SearchFocus":de.emit("searchFocus");return;case"DownloadPage":a.name!=="MineDownload"&&s.push({name:"MineDownload",query:{...re==null?void 0:re.meta}});return;case"GameCenterPage":s.push({name:"GameCenter"});return;case"MyGamePage":s.push({name:"MyGame"}),setTimeout(()=>de.emit("toMyGameDownloadsTab"));return;case"HomeHotsPage":(it=re==null?void 0:re.meta)!=null&&it.playSeries&&T.setWillPlaySeries(!0),s.push({name:"HomeHots",query:{...re==null?void 0:re.meta}});return;case"HomeLivePage":p.value.isLogin&&s.push({name:"HomeLive",query:{...re==null?void 0:re.meta}});return}}),Ve("auth/userLoginChange",({data:re})=>{var be,Qe;["HomeRecommends","Selected","Settings"].every(dt=>a.name!==dt)&&s.replace({name:S.value||"Home"}),re||M.initUnreadCount(),setTimeout(()=>{i.value=Math.random()}),(Qe=(be=window.__BiliUser__)==null?void 0:be.refresh)==null||Qe.call(be)}),Ve("update/newVersionUpdated",()=>{ye({content:`\u54D4\u54E9\u54D4\u54E9\u5DF2\u5347\u7EA7\u5230\u7248\u672C\uFF1Av${_.value}`,duration:3e3,style:"bottom: 80px;"})}),Ve("download/reportDownloadSize",({data:re})=>{Hi.get(re).then().catch(()=>{})}),Ve("events/savePlayerLog",async({data:re})=>{const be=re?"all":{day:2},Qe=await Yd(be);Be("report/savePlayerLog",Qe),GD(be)}),Ve("events/beforeAppQuit",()=>{Be("config/setIsSelectedExit",a.name==="Selected")}),Ve("window/resetWindowState",()=>{U.value&&mf(),C.value&&H.value.emit("unminiSelectedPlayer")}),se(X,re=>{re?document.body.classList.add("ugc_season"):document.body.classList.remove("ugc_season")}),se(C,re=>{re?document.body.classList.add("bili_mini"):document.body.classList.remove("bili_mini")}),Ve("auth/acceptPrivacyPolicy",()=>{setTimeout(()=>Ft(),500)}),se([O,g],([re,be])=>{var dt,it,ft,ot;const Qe=document.querySelector("#appSearchFrame");re?(document.body.classList.add("gamepad-active"),(it=(dt=Qe==null?void 0:Qe.contentDocument)==null?void 0:dt.body)==null||it.classList.add("gamepad-active")):(document.body.classList.remove("gamepad-active"),(ot=(ft=Qe==null?void 0:Qe.contentDocument)==null?void 0:ft.body)==null||ot.classList.remove("gamepad-active"))}),Xe(()=>{const re=window;re.handleMainWindowReady(),re.loadBiliPlayer(),setTimeout(()=>re.preloadComponents(),800),setTimeout(()=>Ft(),1500),document.addEventListener("mousemove",A.judgeGamepadActive)}),qe(()=>{clearInterval(Z),document.removeEventListener("mousemove",A.judgeGamepadActive)}),(re,be)=>{const Qe=Pe("router-view"),dt=Pe("v-radio"),it=Pe("v-radio-group"),ft=Pe("v-checkbox"),ot=Pe("v-button"),qt=Pe("v-dialog");return h(),b(pe,null,[(h(),b("div",{class:ne(["app_layout ov_hidden flex_start bg_bg1",{"gpu-enabled":!d(E),"search-modal-active":d(y)}]),key:i.value},[u("div",jD,[$(r4)]),u("div",KD,[$(s7,{isSelectedPage:d(G)||d(X),isGamePage:d(W)},null,8,["isSelectedPage","isGamePage"]),u("div",WD,[$(Qe,null,{default:ee(({Component:Ne})=>[(h(),J(oc,{exclude:d(L)},[(h(),J(Wi(Ne)))],1032,["exclude"]))]),_:1}),$(D0,{isSelectedPage:d(G),"scroll-container":".app_home--content"},null,8,["isSelectedPage"]),ke($(d7,{class:"app_container--search p_cover"},null,512),[[Fe,d(m)]]),ke($(S7,{class:"app_container--gamecenter p_cover"},null,512),[[Fe,d(j)]]),ke($(B7,{class:"app_container--mygame p_cover"},null,512),[[Fe,d(B)]]),q.value?(h(),J(_E,{key:0,isPlayerPage:d(Q),isSelectedPage:d(G),isUgcSeasonPage:d(X),class:"app_container--selected p_cover"},null,8,["isPlayerPage","isSelectedPage","isUgcSeasonPage"])):R("",!0),$(g0),$(y0),$(g$),$(tx),ZD])]),$(qt,{visible:o.value,"onUpdate:visible":be[2]||(be[2]=Ne=>o.value=Ne),width:320,"class-name":"i_dialog py_lg",onCancel:ve,"is-show-default-footer":!1},{default:ee(()=>[u("div",zD,[qD,u("div",YD,[$(it,{modelValue:l.value,"onUpdate:modelValue":be[0]||(be[0]=Ne=>l.value=Ne),theme:"pink"},{default:ee(()=>[$(dt,{value:!1},{default:ee(()=>[XD]),_:1}),JD,$(dt,{class:"mt_xs",value:!0},{default:ee(()=>[QD]),_:1})]),_:1},8,["modelValue"])]),u("div",eT,[$(ft,{modelValue:v.value,"onUpdate:modelValue":be[1]||(be[1]=Ne=>v.value=Ne),class:"mt_sm text2",theme:"pink",label:"\u4E0D\u518D\u63D0\u793A"},null,8,["modelValue"])]),u("div",tT,[$(ot,{class:"mr_sm",onClick:ve},{default:ee(()=>[nT]),_:1}),$(ot,{type:"pink",onClick:Ce},{default:ee(()=>[aT]),_:1})])])]),_:1},8,["visible"]),$(qt,{visible:c.value,"onUpdate:visible":be[3]||(be[3]=Ne=>c.value=Ne),width:320,"class-name":"i_dialog py_lg",onCancel:be[4]||(be[4]=Ne=>c.value=!1),"is-show-default-footer":!1},{default:ee(()=>[u("div",sT,[iT,u("div",oT,[$(ot,{class:"mr_sm",onClick:Ye},{default:ee(()=>[rT]),_:1}),$(ot,{type:"pink",onClick:Ae},{default:ee(()=>[lT]),_:1})])])]),_:1},8,["visible"]),$(qt,{visible:nt.value,"onUpdate:visible":be[5]||(be[5]=Ne=>nt.value=Ne),"class-name":"i_dialog py_lg",width:he.value.modalWidth||380,"is-show-default-footer":!1,"mask-closable":!1,onCancel:be[6]||(be[6]=Ne=>nt.value=!1)},{default:ee(()=>[u("div",uT,[u("div",{innerHTML:he.value.content},null,8,cT),u("div",dT,[he.value.isShowCancel?(h(),J(ot,{key:0,class:"mx_xs",onClick:Dn},{default:ee(()=>[le(z(he.value.cancelText||"\u53D6\u6D88"),1)]),_:1})):R("",!0),he.value.isShowConfirm?(h(),J(ot,{key:1,class:"mx_xs",type:"pink",onClick:rn},{default:ee(()=>[le(z(he.value.confirmText||"\u786E\u5B9A"),1)]),_:1})):R("",!0)])])]),_:1},8,["visible","width"]),$(qt,{visible:d(N),"onUpdate:visible":be[8]||(be[8]=Ne=>Ar(N)?N.value=Ne:null),"class-name":"i_dialog py_lg",width:360,"is-show-default-footer":!1,"mask-closable":!1,onCancel:be[9]||(be[9]=Ne=>N.value=!1)},{default:ee(()=>[u("div",fT,[vT,u("div",hT,z(_e.value),1),u("div",mT,[$(ot,{class:"mx_xs",type:"pink",onClick:be[7]||(be[7]=Ne=>N.value=!1)},{default:ee(()=>[pT]),_:1})])])]),_:1},8,["visible"]),u("div",{class:"p_cover app-backdrop",onClick:be[10]||(be[10]=Ne=>d(Ho).emit("hideSearchModal"))})],2)),$(L$)],64)}}});const gT={class:"app_home i_page_wrapper"},yT={class:"flex_start flex_inline p_relative"},wT=u("span",{class:"gamepad-cursor cursor-vui-tabs","data-tp":"header"},null,-1),bT=["src"],ET=["onClick"],kT=u("span",{class:"gamepad-cursor","data-tp":"header"},null,-1),CT={class:"app_home--content i_page_content"},ST=ue({__name:"Home",setup(e){const t=[{key:"1",name:"\u76F4\u64AD",router:"HomeLive"},{key:"2",name:"\u63A8\u8350",router:"HomeRecommends"},{key:"3",name:"\u70ED\u95E8",router:"HomeHots"},{key:"4",name:"\u8FFD\u756A",router:"HomeBangumi"},{key:"5",name:"\u5F71\u89C6",router:"HomePgc"}],n=D("2"),a=nn(),s=Lt(),i=D({}),{remoteConfig:o}=ie(rc()),c=y=>{const E=t.find(_=>_.key===y);E&&(s.push({name:E.router,query:i.value}),i.value&&(i.value={}))};c(n.value),se(a,()=>{const y=t.find(E=>a.name.startsWith(E.router));y&&(i.value=a.query,n.value=y.key)});const r=D(!1);se(()=>o.value.activity,()=>{r.value=Ht("system/checkIsGrayHit",o.value.activity)},{immediate:!0,deep:!0});const l=D(Date.now());let f=setInterval(()=>l.value=Date.now(),5e3);qe(()=>clearInterval(f));const v=D(!1);se([()=>o.value.activity,l],()=>{const{id:y,time:E}=JSON.parse(localStorage.getItem("home_activity_close_info")||"{}"),{id:_,reshow:p}=o.value.activity;v.value=_===y&&E&&Date.now()-E<p*6e4},{immediate:!0,deep:!0});const m=K(()=>{const y=o.value.activity;return y&&r.value&&!v.value&&(!y.st||l.value>=y.st)&&(!y.et||l.value<=y.et)}),g=()=>{v.value=!0,localStorage.setItem("home_activity_close_info",JSON.stringify({time:Date.now(),id:o.value.activity.id})),xe({type:"click",spm_info:"main.main.main-page.activity-close"},{msg:JSON.stringify({})})};return(y,E)=>{const _=Pe("v-tab-item"),p=Pe("v-tabs"),C=Pe("HeaderSlot"),S=Pe("router-view"),x=Hn("report");return h(),b("div",gT,[$(C,null,{default:ee(()=>[u("div",yT,[$(p,{class:"mt_xs","auto-adjustment":"",activeKey:n.value,"onUpdate:activeKey":E[0]||(E[0]=w=>n.value=w),"slide-to-hover":!1,"active-pink":!0,"no-padding-left":!1,"tabs-gutter":30,"slider-width":18,onTabChange:c},{default:ee(()=>[(h(!0),b(pe,null,De(d(t),w=>(h(),J(_,{key:w.key,tab:w.name},{extra:ee(()=>[wT]),_:2},1032,["tab"]))),128))]),_:1},8,["activeKey"]),d(m)?ke((h(),b("h3",{key:0,class:"home_activity ml_md pr_lg flex_start cs_pointer hover_pink ts_all_fast p_relative",onClick:E[1]||(E[1]=w=>d(bn)(d(o).activity.jumpUrl))},[u("img",{src:d(o).activity.icon,style:Ge(d(o).activity.iconStyle||""),alt:""},null,12,bT),u("span",{class:"home_activity--text ml_xs text_nowrap",style:Ge(d(o).activity.textStyle||"")},z(d(o).activity.text),5),d(o).activity.closable?(h(),b("span",{key:0,class:"home_activity--close p_absolute text2 draggable",style:Ge(d(o).activity.closeStyle||""),onClick:Se(g,["stop"])},[$(d(ad))],12,ET)):R("",!0),kT])),[[x,{spm_info:"main.main.main-page.activity",msg:{}},"both"]]):R("",!0)])]),_:1}),u("div",CT,[$(S,null,{default:ee(({Component:w})=>[(h(),J(oc,null,[(h(),J(Wi(w)))],1024))]),_:1})])])}}});const Jd=e=>(xn("data-v-88b7a4a8"),e=e(),An(),e),$T=["data-wp"],xT={key:1},AT=["href","onClick"],DT={class:"picture-ad-card-cover-wrapper picture-ad-card-cover-wrapper-hover-scale"},TT=Jd(()=>u("div",{class:"picture-ad-card-cover-buttom"},[u("div",{class:"picture-ad-card-cover-text"},"\u5E7F\u544A")],-1)),IT={key:0,class:"picture-ad-card-img-cover flex_center text_white fs_4"},PT=Jd(()=>u("span",null,"\u6B63\u5728\u6253\u5F00\u5C0F\u7A0B\u5E8F",-1)),FT={class:"picture-ad-card-info"},RT=["title"],LT=["onClick"],BT={class:"picture-ad-card-info-title"},MT={class:"picture-ad-card-info-bottom"},OT=["onClick"],NT=["title"],VT=ue({__name:"PictureAdCard",props:{cardType:null,cover:null,title:null,url:null,jumpTarget:null,desc:null,adDesc:null,adProviderName:null,rcmdReasonStyle:null,adReportData:null,scrollWrap:null,wxProgramInfo:null,openSDKWebview:null},setup(e){const t=e,n=D(null),a=D(150),s=D(null),{remoteConfig:i}=ie(rc()),{waitOpenCid:o,fallbackPictureAdInfo:c}=ie(As()),{setShowOpenWeChatFailTimeout:r}=As(),l=window,f=K(()=>{var m;return((m=t.rcmdReasonStyle)==null?void 0:m.text)||t.desc||t.adDesc}),v=()=>{const{jumpTarget:m,url:g,title:y,wxProgramInfo:E,cardType:_}=t;switch(_){case"pictureAd":Rl(_,{isDisableAppBrowser:l.isDisableAppBrowser,isAdOpenModeByApi:i.value.isAdOpenModeByApi,jumpTarget:m,url:g,title:y,from:"home.PictureAdCard"});break;case"weChatPictureAd":if(o.value)return;c.value={isDisableAppBrowser:l.isDisableAppBrowser,isAdOpenModeByApi:i.value.isAdOpenModeByApi,jumpTarget:m,url:g,title:y,from:"home.PictureAdCard.OpenSDKFallback"},r(E==null?void 0:E.orgId),Rl(_,{wxProgramInfo:E});break}};return Xe(()=>{setTimeout(()=>a.value=n.value.getBoundingClientRect().x)}),uc(n,([{isIntersecting:m}])=>s.value=m),(m,g)=>{var _;const y=Pe("VImg"),E=Hn("report");return h(),b("div",{class:"picture-ad-card",ref_key:"card",ref:n},[$(T0,{class:ne({hide:s.value})},null,8,["class"]),s.value?(h(),b("span",{key:0,class:"gamepad-cursor cursor-ad-card","data-tp":"videoCard","data-scroll":"y","data-bf":"100","data-sh":"300","data-wp":e.scrollWrap},null,8,$T)):R("",!0),s.value?ke((h(),b("div",xT,[ke((h(),b("a",{class:"picture-ad-card-img",href:e.cover,onClick:Se(v,["prevent"])},[u("div",DT,[$(y,{class:"picture-ad-card-cover",alt:e.title,src:e.cover,width:336,height:189,rule:"1c"},null,8,["alt","src"]),TT]),d(o)&&d(o)===((_=e.wxProgramInfo)==null?void 0:_.orgId)?(h(),b("div",IT,[$(Yi),PT])):R("",!0)],8,AT)),[[E,e.adReportData,"click",{ad:!0}]]),u("div",FT,[u("div",{class:"picture-ad-card-info-wrapper",title:e.title},[ke((h(),b("a",{onClick:Se(v,["prevent"])},[u("h3",BT,[u("span",null,z(e.title),1)])],8,LT)),[[E,e.adReportData,"click",{ad:!0}]]),xs(m.$slots,"default",{cardLeft:a.value},void 0,!0)],8,RT),u("div",MT,[ke((h(),b("a",{onClick:Se(v,["prevent"])},[u("span",{class:"picture-ad-card-info-provider",title:d(f)},z(d(f)),9,NT),e.wxProgramInfo?(h(),J(d(_c),{key:0,class:"wx-arrow i_icon_more mt_1"})):R("",!0)],8,OT)),[[E,e.adReportData,"click",{ad:!0}]])])])])),[[E,e.adReportData,"show",{ad:!0,strict:!0}]]):R("",!0)],512)}}});var UT=Je(VT,[["__scopeId","data-v-88b7a4a8"]]);const HT={class:"i_wrapper scroll-content"},GT={class:"p_relative invisible w_100"},jT={class:"app_home--video row gutter_md p_absolute w_100"},KT={key:0,class:"app_home--video row gutter_md"},WT=["preload"],ZT={class:"content-wrapper ad-feedback-modal"},zT={class:"modal-title b_text text_center mb_lg"},qT=["src"],YT=ue({__name:"HomeRecommends",setup(e){const{rowVideos:t}=I0(),{appTheme:n}=ie(da()),{isShowOpenSDKWebview:a,isShowOpenWeChatFailModal:s,waitOpenCid:i}=ie(As()),{clearShowOpenWeChatFailTimeout:o}=As(),c=nn(),r=_a(),l=D(!1),f=D(!1),v=D([]),m=D(!0),g=D(1),y=D(),E=K(()=>g.value===1?30:t.value*3),_=K(()=>{var V;return(V=S.value)!=null&&V.offsetHeight?Math.ceil(C.value.$el.offsetHeight/S.value.offsetHeight):0}),p=D(0),C=D(null),S=D(null);let x=Date.now();const w={INIT:0,REFRESH:3,LOAD_MORE:4},k=D(null),T=D(null),A=D(!1),{userInfo:F}=ie(st());Br({spm_id:"main.home-page-recommend.0.0",pageName:"HomeRecommends"}),P0(".home_recommends"),Fr("HomeRecommends",()=>{g.value=1,v.value=[],G(w.REFRESH)}),Hc(".home_recommends");const O=()=>r.flashPageCursors(),G=_s(V=>{l.value||(f.value=!1,l.value=!0,Mc(g.value,E.value,"V1",V,_.value,t.value).then(ae=>{const _e=(ae.item||[]).filter(we=>we.goto!=="av"||v.value.every(fe=>fe.bvid!==we.bvid)).map((we,fe)=>Ff(we,fe+v.value.length));_e.length?(v.value=v.value.concat(_e),g.value++,m.value=!0):m.value=!1,l.value=!1,r.flashPageCursors(100)}).catch(ae=>{console.error(ae),f.value=!0,l.value=!1}))},500),X=()=>{!f.value&&m.value&&G(w.LOAD_MORE)},H=V=>{const ae=V+1,_e=Math.ceil(ae/t.value),we=ae%t.value||t.value;return`main.home-page-recommend.tianma.${_e}-${we}-${ae}.0`},L=V=>{const ae=V+1;return{location:ae,line_videos:t.value,line_locaton:Math.ceil(ae/t.value),column_location:ae%t.value||t.value}},Q=(V,ae)=>{var _e,we;return{spm_info:"main.home-page-recommend.tianma.card",msg:{id:V.aid,aid:V.aid,cid:V.cid,goto:V.goto,track_id:V.trackId,request_id:(_e=V.businessInfo)==null?void 0:_e.request_id,creative_id:(we=V.businessInfo)==null?void 0:we.creative_id,...L(ae)}}},q=(V,ae)=>{var _e,we;xe({spm_info:"main.home-page-recommend.tianma.nickname.click",type:"click"},{msg:JSON.stringify({id:V.aid,aid:V.aid,cid:V.cid,goto:V.goto,track_id:V.trackId,request_id:(_e=V.businessInfo)==null?void 0:_e.request_id,creative_id:(we=V.businessInfo)==null?void 0:we.creative_id,...L(ae)})})},j=[{type:"DISLIKE_CONTENT",label:"\u5185\u5BB9\u4E0D\u611F\u5174\u8DA3"},{type:"DISLIKE_UP",label:"\u4E0D\u60F3\u770B\u6B64UP\u4E3B"}],B=(V,ae)=>({aid:V.aid,avid:V.aid,cid:V.cid,feed_version:"V1",is_rec:1,track_id:V.trackId,goto:V.goto,url:V.url,...L(ae),status:V.dislikeType==="up"?2:1}),W=({type:V},ae,_e)=>{switch(V){case"DISLIKE_CONTENT":ae.dislikeType="content";break;case"DISLIKE_UP":ae.dislikeType="up";break}ae.isDisliked=!0,xe({spm_info:"main.home-page-recommend.tianma.dislike.click",type:"click"},{msg:JSON.stringify(B(ae,_e))})};let U=!1;const M=async(V,{reason_id:ae,text:_e})=>{if(!U){U=!0;try{const{creative_id:we,ad_cb:fe}=V.businessInfo;await If({id:we,ad_cb:fe,cm_reason_id:ae,goto:V.goto,feedback_page:1}),V.isDisliked=!0,V.dislikeType="",V.dislikeText=_e,V.dislikeSubText="",V.dislikeReasonId=ae}finally{U=!1}}};let N=!1;const Z=async(V,ae)=>{if(V.isDisliked=!1,V.dislikeType="",V.dislikeText="",V.dislikeSubText="",V.cardType==="video")xe({spm_info:"main.home-page-recommend.tianma.dislike-cancel.click",type:"click"},{msg:JSON.stringify(B(V,ae))});else if(V.dislikeReasonId){if(N)return;N=!0;try{const{creative_id:_e,ad_cb:we}=V.businessInfo;await Pf({id:_e,ad_cb:we,cm_reason_id:V.dislikeReasonId,goto:V.goto,feedback_page:1})}finally{V.dislikeReasonId=NaN,N=!1}}},Y=(V,ae)=>{var _e;T.value=(_e=V.businessInfo)==null?void 0:_e.creative_id,k.value=ae,A.value=!0},oe=V=>{var ae,_e,we;if(((ae=V.data)==null?void 0:ae.type)==="close"&&(A.value=!1),(we=(_e=V.data)==null?void 0:_e.data)!=null&&we.complain_reason){const fe=v.value.find(Ue=>{var ge;return((ge=Ue.businessInfo)==null?void 0:ge.creative_id)===T.value});fe&&(fe.isDisliked=!0,fe.dislikeType="",fe.dislikeText="\u6295\u8BC9\u6210\u529F",fe.dislikeSubText="\u5E73\u53F0\u5C06\u6838\u5B9E\u5904\u7406")}};return window.addEventListener("message",oe),se([_,p],([V,ae])=>{V&&ae&&G(w.INIT)}),se(y,V=>{!V||V.addEventListener("ipc-message",ae=>{if(ae.channel==="launchMiniProgramCallback"){const _e=ae.args[0];if(_e&&_e.errcode===0){o(),xe({spm_info:"main.main.main-page.weixin-mp.click",type:"click"},{msg:JSON.stringify({res:!0})});return}pf("launchMiniProgram error",{response:_e}),xe({spm_info:"main.main.main-page.weixin-mp.click",type:"click"},{msg:JSON.stringify({res:!1})}),i.value&&(o(),s.value=!0)}})}),se(s,V=>{V&&xe({spm_info:"main.main.main-page.wxmp-timeout.show",type:"show"},{msg:JSON.stringify({})})}),Gi(()=>{c.name==="HomeRecommends"&&(!v.value.length||Date.now()-x>12e4)&&(v.value=[],p.value++)}),ec(()=>{g.value=1,m.value=!0,x=Date.now(),v.value=v.value.slice(0,E.value)}),qe(()=>{window.removeEventListener("message",oe)}),(V,ae)=>{const _e=Pe("bili-video-card"),we=Pe("v-dialog"),fe=Pe("Scroller"),Ue=Hn("report");return h(),J(fe,{ref_key:"scrollRef",ref:C,class:"home_recommends page_scroller pt_xxl u_select_none",onLoadMore:X,onScroll:O},{default:ee(()=>[u("div",HT,[u("div",GT,[u("div",jT,[u("div",{ref_key:"videoCardAnchorRef",ref:S,class:"app_home--video-item col_3 col_sm_1_5 pb_x40"},[$(_e,{"disable-frame":"","disable-scale":"",skeleton:!0})],512)])]),!d(_)||l.value||v.value.length?(h(),b("div",KT,[(h(!0),b(pe,null,De(v.value,(ge,ve)=>(h(),b("div",{class:ne(["app_home--video-item col_3 col_sm_1_5 mb_x40",{hide:d(t)<5&&v.value.length%4&&ve>=v.value.length-2}]),key:ge.bvid},[ge.isDisliked?(h(),J(F0,{key:0,info:ge,onUndoDislike:Ce=>Z(ge,ve)},null,8,["info","onUndoDislike"])):(h(),b(pe,{key:1},[ge.cardType==="pictureAd"||ge.cardType==="weChatPictureAd"?ke((h(),J(UT,{key:0,cardType:ge.cardType,cover:ge.cover,title:ge.title,desc:ge.desc||"",adDesc:ge.adDesc,rcmdReasonStyle:ge.rcmdReasonStyle,adProviderName:ge.adProviderName,url:ge.url,jumpTarget:ge.jumpTarget||0,wxProgramInfo:ge.wxProgramInfo,adReportData:ge.adReportData,scrollWrap:".home_recommends"},Fl({_:2},[d(F).isLogin?{name:"default",fn:ee(({cardLeft:Ce})=>[$(Ll,{class:"video_card--more",info:ge,cardLeft:Ce,theme:d(n),onDislike:Ae=>M(ge,Ae),onFeedback:Ae=>Y(ge,Ae)},null,8,["info","cardLeft","theme","onDislike","onFeedback"])])}:void 0]),1032,["cardType","cover","title","desc","adDesc","rcmdReasonStyle","adProviderName","url","jumpTarget","wxProgramInfo","adReportData"])),[[Ue,Q(ge,ve),"both"]]):ke((h(),J(_e,{key:`${ge.bvid}-${ve}`,info:ge,rowVideos:d(t),spmInfo:H(ve),adReportData:ge.adReportData,isFirstCard:ve===0,theme:d(n),"scroll-wrap":".home_recommends","img-lazy":"eager","is-rcmd":"","disable-frame":"","disable-scale":"",rootRef:C.value,iid:"pc_app_rcmd",onClickUname:Ce=>q(ge,ve)},Fl({_:2},[d(F).isLogin?{name:"more",fn:ee(({cardLeft:Ce})=>[ge.cardType==="flyVideo"?(h(),J(Ll,{key:0,class:"video_card--more",info:ge,cardLeft:Ce,theme:d(n),onDislike:Ae=>M(ge,Ae),onFeedback:Ae=>Y(ge,Ae)},null,8,["info","cardLeft","theme","onDislike","onFeedback"])):(h(),J(yc,{key:1,class:"video_card--more hide",items:j,info:ge,isHover:"",showMenu:"",onSelect:Ae=>W(Ae,ge,ve)},{default:ee(()=>[$(d(dc),{class:"video_card--more--btn"})]),_:2},1032,["info","onSelect"]))])}:void 0]),1032,["info","rowVideos","spmInfo","adReportData","isFirstCard","theme","rootRef","onClickUname"])),[[Ue,Q(ge,ve),"both"]])],64))],2))),128)),!d(_)||l.value?(h(),J(sd,{key:0,"with-wrapper":!1,"item-num":20})):R("",!0)])):R("",!0),!l.value&&!v.value.length&&!f.value?(h(),J(R0,{key:1})):R("",!0),!l.value&&!v.value.length&&f.value?(h(),J(Zn,{key:2})):R("",!0),d(a)?(h(),b("webview",{key:3,ref_key:"wxOpenSdkWebviewRef",ref:y,class:"hide",id:"wx-open-sdk-webview",src:"https://www.bilibili.com/blackboard/activity-0fDdHgegiG.html",preload:d(ic)},null,8,WT)):R("",!0),$(we,{visible:A.value,"onUpdate:visible":ae[0]||(ae[0]=ge=>A.value=ge),width:498,"class-name":"ad-modal bg_bg1 i_dialog px_0",onCancel:ae[1]||(ae[1]=ge=>A.value=!1),"is-show-default-footer":!1},{default:ee(()=>[u("div",ZT,[u("h3",zT,z(k.value.text),1),u("iframe",{src:k.value.jumpUrl,frameborder:"0"},null,8,qT)])]),_:1},8,["visible"])])]),_:1},512)}}}),Qd=()=>Oe(()=>import("./HomeLive.08e7a711.js"),["assets/HomeLive.08e7a711.js","assets/HomeLive.d2c6f986.css","assets/global.084fa95c.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),e1=()=>Oe(()=>import("./HomeHots.08b4d468.js"),["assets/HomeHots.08b4d468.js","assets/HomeHots.081fc68e.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),t1=()=>Oe(()=>import("./All.cdebb5f9.js"),["assets/All.cdebb5f9.js","assets/global.084fa95c.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),n1=()=>Oe(()=>import("./Series.46a737f6.js"),["assets/Series.46a737f6.js","assets/Series.eb7d22ee.css","assets/global.084fa95c.css","assets/ico_tips.762d2c8c.js","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),a1=()=>Oe(()=>import("./Precious.e0d760a9.js"),["assets/Precious.e0d760a9.js","assets/Precious.80d4ff7f.css","assets/global.084fa95c.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),s1=()=>Oe(()=>import("./Ranking.cfabe1e3.js"),["assets/Ranking.cfabe1e3.js","assets/Ranking.26f6f731.css","assets/global.084fa95c.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/ico_tips.762d2c8c.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),kr=()=>Oe(()=>import("./index.ae596d27.js"),["assets/index.ae596d27.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/index.f074ecef.js","assets/index.ffdbab95.css"]),i1=()=>Oe(()=>import("./Tab.30f8e39c.js"),["assets/Tab.30f8e39c.js","assets/Tab.c0326b99.css","assets/global.084fa95c.css","assets/index.es.256047cb.js","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/OgvBangumiSkeleton.a1380a74.js","assets/OgvBangumiSkeleton.02c6385f.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),Cr=()=>Oe(()=>import("./More.bc65c186.js"),["assets/More.bc65c186.js","assets/More.598f22ed.css","assets/global.084fa95c.css","assets/index.es.256047cb.js","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/OgvBangumiSkeleton.a1380a74.js","assets/OgvBangumiSkeleton.02c6385f.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/useToggleMoreConditions.4241f327.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),o1=()=>Oe(()=>import("./Tab.da731c5f.js"),["assets/Tab.da731c5f.js","assets/Tab.506f6756.css","assets/global.084fa95c.css","assets/index.es.256047cb.js","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/OgvBangumiSkeleton.a1380a74.js","assets/OgvBangumiSkeleton.02c6385f.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),r1=()=>Oe(()=>import("./SelectedNoop.fe70daed.js"),["assets/SelectedNoop.fe70daed.js","assets/index.f074ecef.js","assets/index.ffdbab95.css"]),l1=()=>Oe(()=>import("./UgcSeason.288b2f56.js"),["assets/UgcSeason.288b2f56.js","assets/UgcSeason.a6e7205a.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/btn_devtools.06ffa497.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/ico_max_exit.f7f1ea61.js","assets/vd_restart.17cf874a.js","assets/playing.8170b3ef.js","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),u1=()=>Oe(()=>import("./Dynamic.fff597fd.js"),["assets/Dynamic.fff597fd.js","assets/Dynamic.cfdd8fff.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/AllFeedFragment.46cd0ff1.js","assets/AllFeedFragment.3a859fa9.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/LoginPanel.33272c26.js","assets/LoginPanel.9ce80a19.css","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/ico_max_exit.f7f1ea61.js","assets/vuedraggable.umd.b672350b.js","assets/useRouteScrollKeeper.7c392bad.js","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),c1=()=>Oe(()=>import("./Mine.eed96dab.js"),["assets/Mine.eed96dab.js","assets/Mine.46905678.css","assets/user-avatar.5031eeb6.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/mine.30873ffc.js","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/UserLevel.7373ec78.js","assets/UserLevel.9ea25f88.css","assets/delete.517b0c72.js","assets/playAll.e1238004.js","assets/SearchBox.531653cb.js","assets/SearchBox.c7868469.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),d1=()=>Oe(()=>import("./MineHistory.25e64eed.js"),["assets/MineHistory.25e64eed.js","assets/MineHistory.a1c35d6a.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/more.9cbfb002.js","assets/delete.517b0c72.js","assets/mine.30873ffc.js","assets/LoginPanel.33272c26.js","assets/LoginPanel.9ce80a19.css","assets/Empty.c40df274.js","assets/Empty.98218bfa.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/SearchResultCount.6c930e27.js","assets/SearchResultCount.41324191.css","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),f1=()=>Oe(()=>import("./MineDownload.cdf0650a.js"),["assets/MineDownload.cdf0650a.js","assets/MineDownload.6c45ee58.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/ico_max_exit.f7f1ea61.js","assets/playAll.e1238004.js","assets/Empty.c40df274.js","assets/Empty.98218bfa.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/DownloadItem.42a87825.js","assets/DownloadItem.881e2d9d.css","assets/FolderMediaCard.1999fd20.js","assets/FolderMediaCard.130fe34c.css","assets/SearchResultCount.6c930e27.js","assets/SearchResultCount.41324191.css","assets/vuedraggable.umd.b672350b.js","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),v1=()=>Oe(()=>import("./MineFavorite.05f03c3c.js"),["assets/MineFavorite.05f03c3c.js","assets/MineFavorite.8d12f017.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/LoginPanel.33272c26.js","assets/LoginPanel.9ce80a19.css","assets/playAll.e1238004.js","assets/FavoriteVideos.81cfbb94.js","assets/FavoriteVideos.a5a1163a.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/ico_max_exit.f7f1ea61.js","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/mine.30873ffc.js","assets/SearchResultCount.6c930e27.js","assets/SearchResultCount.41324191.css","assets/FolderMediaCard.1999fd20.js","assets/FolderMediaCard.130fe34c.css","assets/FolderMediaCardSkeleton.2b4fce32.js","assets/FolderMediaCardSkeleton.873048c4.css","assets/vuedraggable.umd.b672350b.js","assets/OgvBangumiSkeleton.a1380a74.js","assets/OgvBangumiSkeleton.02c6385f.css","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),h1=()=>Oe(()=>import("./MineWatchLater.5d01bf30.js"),["assets/MineWatchLater.5d01bf30.js","assets/MineWatchLater.e0aa543c.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/more.9cbfb002.js","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/mine.30873ffc.js","assets/LoginPanel.33272c26.js","assets/LoginPanel.9ce80a19.css","assets/Empty.c40df274.js","assets/Empty.98218bfa.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),m1=()=>Oe(()=>import("./DownloadCollection.26e846cd.js"),["assets/DownloadCollection.26e846cd.js","assets/DownloadCollection.878d4515.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/DownloadItem.42a87825.js","assets/DownloadItem.881e2d9d.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/playAll.e1238004.js","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),p1=()=>Oe(()=>import("./Favorite.5f816c00.js"),["assets/Favorite.5f816c00.js","assets/Favorite.ff5a4a52.css","assets/global.084fa95c.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/FolderMediaCard.1999fd20.js","assets/FolderMediaCard.130fe34c.css","assets/FolderMediaCardSkeleton.2b4fce32.js","assets/FolderMediaCardSkeleton.873048c4.css","assets/FavoriteVideos.81cfbb94.js","assets/FavoriteVideos.a5a1163a.css","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/ico_max_exit.f7f1ea61.js","assets/mine.30873ffc.js","assets/SearchResultCount.6c930e27.js","assets/SearchResultCount.41324191.css","assets/SearchBox.531653cb.js","assets/SearchBox.c7868469.css","assets/useRouteScrollKeeper.7c392bad.js","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),_1=()=>Oe(()=>import("./Following.3cf50726.js"),["assets/Following.3cf50726.js","assets/Following.5d7eb84d.css","assets/user-avatar.5031eeb6.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/FollowerItem.f44e7c43.js","assets/FollowerItem.97f8dbdc.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/ico_max_exit.f7f1ea61.js","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),g1=()=>Oe(()=>import("./Follower.5af6e929.js"),["assets/Follower.5af6e929.js","assets/Follower.8b3037c8.css","assets/user-avatar.5031eeb6.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/FollowerItem.f44e7c43.js","assets/FollowerItem.97f8dbdc.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/ico_max_exit.f7f1ea61.js","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),y1=()=>Oe(()=>import("./Space.b9823237.js"),["assets/Space.b9823237.js","assets/Space.6cdc8c5e.css","assets/user-avatar.5031eeb6.css","assets/global.084fa95c.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/ico_max_exit.f7f1ea61.js","assets/vd_follow.cd38bdd6.js","assets/UserLevel.7373ec78.js","assets/UserLevel.9ea25f88.css","assets/SearchBox.531653cb.js","assets/SearchBox.c7868469.css","assets/AllFeedFragment.46cd0ff1.js","assets/AllFeedFragment.3a859fa9.css","assets/LoginPanel.33272c26.js","assets/LoginPanel.9ce80a19.css","assets/space.a51500ef.js","assets/SearchResultCount.6c930e27.js","assets/SearchResultCount.41324191.css","assets/FolderMediaCard.1999fd20.js","assets/FolderMediaCard.130fe34c.css","assets/FolderMediaCardSkeleton.2b4fce32.js","assets/FolderMediaCardSkeleton.873048c4.css","assets/index.es.256047cb.js","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),w1=()=>Oe(()=>import("./SeasonDetails.aa98fb27.js"),["assets/SeasonDetails.aa98fb27.js","assets/SeasonDetails.58763bb6.css","assets/global.084fa95c.css","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/playAll.e1238004.js","assets/FolderMediaCard.1999fd20.js","assets/FolderMediaCard.130fe34c.css","assets/FolderMediaCardSkeleton.2b4fce32.js","assets/FolderMediaCardSkeleton.873048c4.css","assets/space.a51500ef.js","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),b1=()=>Oe(()=>import("./Settings.12ef6ea7.js"),["assets/Settings.12ef6ea7.js","assets/Settings.ea0194b5.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/UserLevel.7373ec78.js","assets/UserLevel.9ea25f88.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/vd_restart.17cf874a.js","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/ico_max_exit.f7f1ea61.js","assets/modulepreload-polyfill.b7f2da20.js","assets/isUdf.1a76b9f4.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),E1=()=>Oe(()=>import("./Game.f5653106.js"),["assets/Game.f5653106.js","assets/Game.38cc933d.css","assets/index.f074ecef.js","assets/index.ffdbab95.css"]),k1=()=>Oe(()=>import("./GameCenter.d71fa5ba.js"),["assets/GameCenter.d71fa5ba.js","assets/GameCenter.5be60a2d.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),C1=()=>Oe(()=>import("./MyGame.26e3f083.js"),["assets/MyGame.26e3f083.js","assets/MyGame.89c577e0.css","assets/global.084fa95c.css","assets/index.f074ecef.js","assets/index.ffdbab95.css","assets/modulepreload-polyfill.b7f2da20.js","assets/ico_max_exit.f7f1ea61.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/MoreFeedback.eac5fca1.js","assets/MoreFeedback.428a3807.css","assets/style.2070e26d.js","assets/style.dee15f74.css","assets/index.14a3ec94.js","assets/index.c55b96b9.css","assets/isUdf.1a76b9f4.js","assets/App.c1beb0e9.js","assets/App.4a352964.css","assets/btn_devtools.06ffa497.js","assets/index.733b73c2.js","assets/ico_pin.a6faa7a5.js","assets/theme-map.a3b52bba.js","assets/theme-map.9fc6893b.css"]),S1=()=>Oe(()=>import("./SearchNoop.0bc6c0ae.js"),["assets/SearchNoop.0bc6c0ae.js","assets/index.f074ecef.js","assets/index.ffdbab95.css"]),$1=_f({history:gf(),routes:[{name:"Root",path:"/",redirect:{name:"HomeRecommends"}},{name:"Page",path:"/page",component:_T,children:[{path:"",name:"Page0",redirect:{name:"HomeRecommends"}},{name:"Home",path:"home",component:ST,children:[{path:"",name:"Home0",redirect:{name:"HomeRecommends"}},{name:"HomeLive",path:"live",component:Qd},{name:"HomeRecommends",path:"recommends",component:YT},{name:"HomeHots",path:"hots",component:e1,redirect:{name:"HomeHotsAll"},children:[{name:"HomeHotsAll",path:"all",component:t1},{name:"HomeHotsSeries",path:"series",component:n1},{name:"HomeHotsPrecious",path:"precious",component:a1},{name:"HomeHotsRanking",path:"ranking",component:s1}]},{name:"HomeBangumi",path:"bangumi",component:kr,redirect:{name:"HomeBangumiTab"},children:[{name:"HomeBangumiTab",path:"tab",component:i1,meta:{isBangumi:!0}},{name:"HomeBangumiMore",path:"more",component:Cr,meta:{isSubPage:!0,isBangumi:!0}}]},{name:"HomePgc",path:"pgc",component:kr,redirect:{name:"HomePgcTab"},children:[{name:"HomePgcTab",path:"tab",component:o1,meta:{isPgc:!0}},{name:"HomePgcMore",path:"more",component:Cr,meta:{isSubPage:!0,isPgc:!0}}]}]},{name:"Selected",path:"selected",component:r1},{name:"UgcSeason",path:"ugc-season",component:l1,meta:{isSubPage:!0}},{name:"Dynamic",path:"dynamic",component:u1},{name:"Mine",path:"mine",component:c1,children:[{path:"",name:"Mine0",redirect:{name:"MineHistory"}},{name:"MineHistory",path:"history",component:d1},{name:"MineDownload",path:"download",component:f1},{name:"MineFavorite",path:"favorite",component:v1},{name:"MineWatchLater",path:"watch-later",component:h1}]},{name:"MineDownloadCollection",path:"mine-download-collection",component:m1,meta:{isSubPage:!0}},{name:"Favorite",path:"favorite",component:p1,meta:{isSubPage:!0}},{name:"Space",path:"space",meta:{isSubPage:!0},component:y1},{name:"SpaceSeasonDetails",path:"season-details",meta:{isSubPage:!0},component:w1},{name:"Settings",path:"settings",meta:{isSubPage:!0},component:b1},{name:"BiliGame",path:"bili-game",meta:{isSubPage:!0},component:E1,children:[{path:"",name:"Game0",redirect:{name:"GameCenter"}},{name:"GameCenter",path:"game-center",meta:{isSubPage:!0},component:k1},{name:"MyGame",path:"my-game",meta:{isSubPage:!0},component:C1}]},{name:"Following",path:"/following",meta:{isSubPage:!0},component:_1},{name:"Follower",path:"/follower",meta:{isSubPage:!0},component:g1},{name:"SearchPage",path:"search-page",meta:{isSubPage:!0},component:S1}]}]});window.preloadComponents=async()=>{await Qd(),await e1(),await t1(),await n1(),await a1(),await s1(),await kr(),await i1(),await Cr(),await o1(),await r1(),await l1(),await u1(),await c1(),await d1(),await f1(),await v1(),await h1(),await m1(),await p1(),await _1(),await g1(),await y1(),await w1(),await b1(),await E1(),await k1(),await C1(),await S1()};$1.beforeEach((e,t,n)=>{window.isMouseBtn34Click||n()});const Jt=window,Qu=()=>{const{injectReportObserver:e,initDevModleSettings:t}=Jt.biliBridgePc;e==null||e(),t==null||t();const n=document.querySelector("#bili-splash"),a=document.querySelector("#bili-skeleton");Rt("window/splashWindowReady"),Xt("window/isMainWindowMini")&&Rt("window/unminiMainWindow"),Jt.handleMainWindowReady=()=>{n.remove(),a.remove(),Xt("config/isMainWindowReady")||Rt("window/mainWindowReady")};let s;const i=()=>(s||(s=new Promise(y=>{const{playerSrc:E,playerExpInfo:_}=Xt("system/getPlayerInfo"),p=document.createElement("script");p.type="text/JavaScript",p.src=E,Jt.playerExpInfo=_,p.onload=()=>y(!0),document.querySelector("head").appendChild(p)})),s);Jt.loadBiliPlayer=i;const o=document.createElement("input");if(o.style.position="fixed",o.style.left="-1000px",document.body.append(o),o.focus(),setTimeout(()=>o.blur(),200),po("window/focusChange",y=>{y&&(document.body.setAttribute("title","\u4E3B\u754C\u9762\u7A97\u53E3"),setTimeout(()=>document.body.removeAttribute("title"),200))}),!Xt("config/getIsShowConsoleLog")){const y=()=>{};["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"].forEach(E=>{window.console[E]=y})}const r=Xt("system/isWin"),l=document.querySelector("html");if(r){l.classList.add("bili_app_win");const y=Xt("system/getFontsInfo"),E=[];y.forEach(p=>{(p.hrefs||[]).forEach((C,S)=>{E.push({id:`${p.id}_${S}`,href:C})})}),E.forEach(({id:p,href:C})=>{const S=document.createElement("link");S.id=p,S.href=C,S.type="text/css",S.rel="stylesheet",document.querySelector("head").appendChild(S)}),po("system/fontsInfoChange",()=>{Xt("system/getFontsInfo").forEach(C=>{(C.hrefs||[]).forEach((S,x)=>{const w=`#${C.id}_${x}`,k=document.querySelector(w);k&&k.setAttribute("href",S)})})});const _=()=>{const p=Xt("config/getSystemFont");l.setAttribute("data-font",p.dataFont||"")};_(),po("config/systemFontChange",()=>_())}window.isCustomFkey=!0;const f=Xt("app/isDevMode");document.addEventListener("keydown",y=>{var E,_,p,C;if(!["INPUT","TEXTAREA"].includes((E=y.target)==null?void 0:E.tagName)&&((p=(_=y.target)==null?void 0:_.getAttribute)==null?void 0:p.call(_,"contenteditable"))!=="true"){if(f){if(y.key==="F5"){Rt("window/reload");return}if(y.key==="F12"){Rt("window/toggleDevTools");return}}if(/^b$/i.test(y.key)){Xt("window/isPlayerWindowVisible")&&(typeof Jt.handleGoToPlayer=="function"?Jt.handleGoToPlayer():Rt("window/focusPlayerWindow"));return}if(/^g$/i.test(y.key)){(C=window.toggleWinMaximize)==null||C.call(window);return}if(/^z$/i.test(y.key)){Rt("window/focusLiveRoomWindow");return}if(/^l$/i.test(y.key)){Rt("window/launchUniversalAction",{action:"focus"});return}if(/^p$/i.test(y.key)){Rt("window/showDesktopAssistant");return}}});let v=null;const m=()=>{clearTimeout(v),Jt.isMouseBtn34Click=!0,v=setTimeout(()=>Jt.isMouseBtn34Click=!1,200)};document.addEventListener("mouseup",y=>{(y.button===3||y.which===4||y.button===4||y.which===5)&&m()});const g=yf(L0);g.config.errorHandler=y=>{console.error(y)},w0(g),g.use(wf()),g.use($1),g.use(ja),g.use(Rf),g.use(Lf),g.use(Z0),g.use(B0),g.use(M0),g.use(O0),g.use(z0),g.use(N0),g.use(V0),g.use(fx),g.use(ix),g.use(Bf),g.component("WidgetArrow",_c),g.component(Bl.name,Bl),g.component(Za.name,Za),g.component(Ml.name,Ml),g.component($i.name,$i),g.component(Ol.name,Ol),g.component("HeaderSlot",U0),g.component("NotFound",H0),g.component("Scroller",G0),g.component("Fragment",j0),g.mount("#app")};Jt.biliBridgePc.callNativeSync("app/mainProcessReady")?Qu():Jt.biliBridgePc.once("app/mainProcessReady",()=>Qu());export{U7 as A,Ji as B,Ig as C,G5 as D,ch as E,pi as F,x4 as G,tE as H,Rc as I,Nc as J,_o as K,Bc as L,E4 as S,Ot as U,sd as _,Hc as a,Ih as b,hI as c,vI as d,mI as e,pI as f,fI as g,Or as h,Sw as i,go as j,Wo as k,yo as l,Zb as m,Ww as n,sb as o,Cb as p,Gb as q,wo as r,bo as s,eh as t,Br as u,xi as v,W7 as w,Gn as x,Ky as y,Mr as z};

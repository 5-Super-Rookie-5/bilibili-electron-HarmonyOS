import{I as O}from"./ico_tips.762d2c8c.js";import{_ as Z,c as G,d as Q}from"./index.194c39d1.js";import{B as U,aa as X}from"./MoreFeedback.eac5fca1.js";import{M as W,o,c as l,a as i,U as v,W as r,$ as h,a0 as L,aa as j,x as z,dL as Y,bx as q,aV as J,z as K,A as S,P as V,l as ee,m as se,Q as D,a2 as A,aj as x,V as C,X as k,Y as E,Z as T,a6 as te,a7 as oe}from"./index.f074ecef.js";import{u as ie,N as ae}from"./App.c1beb0e9.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";import"./modulepreload-polyfill.b7f2da20.js";import"./ico_max_exit.f7f1ea61.js";import"./index.14a3ec94.js";import"./style.2070e26d.js";import"./isUdf.1a76b9f4.js";import"./btn_devtools.06ffa497.js";import"./ico_pin.a6faa7a5.js";/* empty css               */import"./theme-map.a3b52bba.js";import"./index.733b73c2.js";const ne={class:"series_video_card"},le={class:"series_video_card--view"},de=["title"],ce=W({__name:"SeriesVideoCard",props:{idx:Number,info:{type:Object,default:()=>({})},mediaList:{type:Object,default:null},rootRef:{type:Object}},setup(a){const g=a,u=()=>{g.info.bvid&&j({type:"ugc",bvid:g.info.bvid})};return(y,I)=>(o(),l("div",ne,[i("div",le,[v(r(U),{info:a.info.info,"is-rcmd":"","img-lazy":"eager","disable-frame":"","disable-scale":"",iid:"pc_app_hots_series","scroll-wrap":".home_hots",rootRef:a.rootRef,isFirstCard:a.idx===0},null,8,["info","rootRef","isFirstCard"])]),a.info.rcmdReason?(o(),l("div",{key:0,class:"series_video_card--rcmd_reason text_ellipsis bd_radius_sm flex_row cs_pointer",onClick:u,title:a.info.rcmdReason},h(a.info.rcmdReason),9,de)):L("",!0)]))}});const _=a=>(te("data-v-c88133b8"),a=a(),oe(),a),_e={class:"home_hots_series"},ue={class:"home_hots--tabs--shim flex_end mb_lg"},pe={key:0,class:"home_hots_series--reminder"},me=_(()=>i("span",{class:"gamepad-cursor","data-tp":"topRight"},null,-1)),fe=["onClick"],ve={class:"dropdown_select--option-title"},he={class:"dropdown_select--option-desc"},ge=_(()=>i("span",{class:"gamepad-cursor","data-tp":"selectOptions","data-scroll":"y","data-bf":"80","data-sh":"80","data-wp":".series-select-options"},null,-1)),ye=_(()=>i("svg",{width:"10",height:"14",viewBox:"0 0 10 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[i("path",{d:"M9.3315 5.69705C10.2228 6.359 10.2228 7.641 9.33151 8.30294L2.80945 13.1465C1.66772 13.9945 0 13.221 0 11.8436V2.1564C0 0.77899 1.66772 0.00554585 2.80945 0.853451L9.3315 5.69705Z",fill:"currentColor"})],-1)),be=_(()=>i("span",null,"\u64AD\u653E\u5168\u90E8",-1)),we=_(()=>i("span",{class:"gamepad-cursor","data-tp":"topRight"},null,-1)),Se={class:"row gutter_md"},xe=_(()=>i("div",{class:"flex_center text3 lh_md fs_5 pb_xl"},"\u5230\u5E95\u4E86",-1)),Ce=W({__name:"Series",setup(a){const{homeHotsRef:g}=z(Y()),u=q(),y=J(),{willPlaySeries:I}=z(u),e=K({initing:!1,inited:!1,loading:!1,showContent:!1,seriesList:[],seriesIndex:0,allSeriesDataMap:{}}),B=S(()=>{var s;return((s=e.seriesList)==null?void 0:s.map(t=>({title:t.subject,desc:t.name,value:t.number})))||[]}),p=S(()=>{var s,t;return((t=(s=e.seriesList)==null?void 0:s[e.seriesIndex])==null?void 0:t.number)||0}),d=S(()=>e.allSeriesDataMap[p.value]||null),N=async()=>{var s,t;if(!e.loading){e.loading=!0;try{const c=await G({number:p.value}),b=c.list.map((m,w)=>({bvid:m.bvid,rcmdReason:m.rcmd_reason,info:X(m,w)}));e.allSeriesDataMap[p.value]={items:b,reminder:c.reminder,configLabel:((s=c.config)==null?void 0:s.label)||"",mediaId:((t=c.config)==null?void 0:t.media_id)||0},y.flashPageCursors(100)}catch(c){console.log(c)}e.loading=!1}},M=()=>y.flashPageCursors();V(()=>e.showContent,()=>y.flashPageCursors(200)),V(p,()=>{p.value&&N()}),V(d,()=>{I.value&&d.value&&(u.setWillPlaySeries(!1),$())});const R=async()=>{if(!e.initing){e.initing=!0;try{const s=await Q();e.seriesList=s.list,e.initing=!1,e.inited=!0}catch{e.initing=!1}}},P=S(()=>{var s;return{bizType:4,bizId:String((s=d.value)==null?void 0:s.mediaId),bizTitle:"\u6BCF\u5468\u5FC5\u770B"}}),$=()=>{j({type:"ugc",fromSpmid:"main.home-page-hot.0.0.pv",mediaList:P.value})};return ie("HomeHotsSeries",async()=>{await R(),e.inited&&(e.seriesIndex!==0?e.seriesIndex=0:await N())}),ee(async()=>{var s;if(I.value){e.seriesList=[],e.seriesIndex=0,await R();return}(s=e.seriesList)!=null&&s.length||await R()}),se(()=>{u.setWillPlaySeries(!1)}),(s,t)=>{var w,F,H;const c=D("WidgetArrow"),b=D("v-button"),m=D("VDropdown");return o(),l("div",_e,[i("div",ue,[(w=r(d))!=null&&w.reminder?(o(),l("div",pe,[v(r(O)),A(" "+h((F=r(d))==null?void 0:F.reminder),1)])):L("",!0),r(B).length?(o(),x(m,{key:1,trigger:"hover",placement:"bottom-end",onShow:t[0]||(t[0]=n=>e.showContent=!0),onHide:t[1]||(t[1]=n=>e.showContent=!1),"click-hide":""},{content:C(()=>[i("div",{class:"dropdown_select--content series-select-options",onScroll:M},[(o(!0),l(k,null,E(r(B),(n,f)=>(o(),l("div",{class:T(["dropdown_select--option cs_pointer p_relative",{"is-active":f===e.seriesIndex}]),key:f,onClick:ke=>e.seriesIndex=f},[i("div",ve,h(n.title),1),i("div",he,h(n.desc),1),ge],10,fe))),128))],32)]),default:C(()=>[v(b,{class:"dropdown_select--button p_relative fs_14 text_ellipsis"},{default:C(()=>{var n;return[A(h(((n=r(d))==null?void 0:n.configLabel)||"\u7B2C - \u671F(----\u66F4\u65B0)")+" ",1),v(c,{class:T(["dropdown_select--button--icon rotate_90 p_absolute",{rotate_deg:e.showContent}])},null,8,["class"]),me]}),_:1})]),_:1})):L("",!0),r(d)?(o(),x(b,{key:2,class:"play-all p_relative",type:"pink",onClick:$},{default:C(()=>[ye,be,we]),_:1})):L("",!0)]),r(d)?(o(),l(k,{key:1},[i("div",Se,[(o(!0),l(k,null,E((H=r(d))==null?void 0:H.items,(n,f)=>(o(),l("div",{class:"home_hots_series--video col_3 col_sm_1_5 mb_xxl",key:n.bvid},[v(ce,{info:n,idx:f,mediaList:r(P),rootRef:r(g)},null,8,["info","idx","mediaList","rootRef"])]))),128))]),xe],64)):(o(),l(k,{key:0},[e.loading||e.initing?(o(),x(Z,{key:0})):(o(),x(ae,{key:1}))],64))])}}});var je=re(Ce,[["__scopeId","data-v-c88133b8"]]);export{je as default};
